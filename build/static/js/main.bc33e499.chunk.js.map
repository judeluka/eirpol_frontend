{"version":3,"sources":["components/Dashboard/BarChart.js","components/Dashboard/FeaturedItem/FeaturedItem.js","components/Dashboard/SimpleGauge/SimpleGauge.js","components/Dashboard/MultilineChartV3PartyFollowers/utils/propTypes.js","components/Dashboard/MultilineChartV3PartyFollowers/components/Line.js","components/Dashboard/MultilineChartV3PartyFollowers/components/Area.js","components/Dashboard/MultilineChartV3PartyFollowers/components/Axis.js","components/Dashboard/MultilineChartV3PartyFollowers/components/GridLine.js","components/Dashboard/MultilineChartV3PartyFollowers/components/Overlay.js","components/Dashboard/MultilineChartV3PartyFollowers/components/Tooltip.js","components/Dashboard/MultilineChartV3PartyFollowers/utils/commonUtils.js","components/Dashboard/MultilineChartV3PartyFollowers/views/MultilineChart.controller.js","components/Dashboard/MultilineChartV3PartyFollowers/utils/useResize.js","components/Dashboard/MultilineChartV3PartyFollowers/utils/useDimensions.js","components/Dashboard/MultilineChartV3PartyFollowers/views/MultilineChart.js","components/Dashboard/MultilineChartV3PartyFollowers/components/Legend.js","Backend/rollCall.js","Backend/tdGenerator.js","Backend/metaData.js","components/Dashboard/MultilineChartV3PartyFollowers/MultilineAppV3PartyFollowers.js","components/MultilineChartV3/utils/propTypes.js","components/MultilineChartV3/components/Line.js","components/MultilineChartV3/components/Area.js","components/MultilineChartV3/components/Axis.js","components/MultilineChartV3/components/GridLine.js","components/MultilineChartV3/components/Overlay.js","components/MultilineChartV3/components/Tooltip.js","components/MultilineChartV3/utils/commonUtils.js","components/MultilineChartV3/views/MultilineChart.controller.js","components/MultilineChartV3/utils/useResize.js","components/MultilineChartV3/utils/useDimensions.js","components/MultilineChartV3/views/MultilineChart.js","components/Dashboard/PartyFollowersGraph/PartyFollowersGraph.js","components/Dashboard/Scatterplot/SearchSelectBox.js","components/Dashboard/Scatterplot/GroupedSelectBox.js","components/Dashboard/Scatterplot/Scatterplot.js","components/Dashboard/PartyBarchart/PartyBarchart.js","components/Dashboard/ScatterplotZoom/SearchSelectBox.js","components/Dashboard/ScatterplotZoom/GroupedSelectBox.js","components/Dashboard/ScatterplotZoom/ScatterplotZoom.js","components/Dashboard/ScatterplotParty/SearchSelectBox.js","components/Dashboard/ScatterplotParty/GroupedSelectBox.js","components/Dashboard/ScatterplotParty/ScatterplotParty.js","components/Dashboard/MultilineChartV3PartyRetweets/utils/propTypes.js","components/Dashboard/VoteBarchart/VoteBarchart.js","components/Dashboard/MultilineChartV3PartyRetweets/components/Line.js","components/Dashboard/MultilineChartV3PartyRetweets/components/Area.js","components/Dashboard/MultilineChartV3PartyRetweets/components/Axis.js","components/Dashboard/MultilineChartV3PartyRetweets/components/GridLine.js","components/Dashboard/MultilineChartV3PartyRetweets/components/Overlay.js","components/Dashboard/MultilineChartV3PartyRetweets/components/Tooltip.js","components/Dashboard/MultilineChartV3PartyRetweets/utils/commonUtils.js","components/Dashboard/MultilineChartV3PartyRetweets/views/MultilineChart.controller.js","components/Dashboard/MultilineChartV3PartyRetweets/utils/useResize.js","components/Dashboard/MultilineChartV3PartyRetweets/utils/useDimensions.js","components/Dashboard/MultilineChartV3PartyRetweets/views/MultilineChart.js","components/Dashboard/MultilineChartV3PartyRetweets/components/Legend.js","components/Dashboard/MultilineChartV3PartyRetweets/MultilineAppV3PartyRetweets.js","components/Dashboard/MultilineChartV3PartyPolarity/utils/propTypes.js","components/Dashboard/MultilineChartV3PartyPolarity/components/Line.js","components/Dashboard/MultilineChartV3PartyPolarity/components/Area.js","components/Dashboard/MultilineChartV3PartyPolarity/components/Axis.js","components/Dashboard/MultilineChartV3PartyPolarity/components/GridLine.js","components/Dashboard/MultilineChartV3PartyPolarity/components/Overlay.js","components/Dashboard/MultilineChartV3PartyPolarity/components/Tooltip.js","components/Dashboard/MultilineChartV3PartyPolarity/utils/commonUtils.js","components/Dashboard/MultilineChartV3PartyPolarity/views/MultilineChart.controller.js","components/Dashboard/MultilineChartV3PartyPolarity/utils/useResize.js","components/Dashboard/MultilineChartV3PartyPolarity/utils/useDimensions.js","components/Dashboard/MultilineChartV3PartyPolarity/views/MultilineChart.js","components/Dashboard/MultilineChartV3PartyPolarity/components/Legend.js","components/Dashboard/MultilineChartV3PartyPolarity/MultilineAppV3PartyPolarity.js","components/Dashboard/MultilineChartV3PartySubjectivity/utils/propTypes.js","components/Dashboard/MultilineChartV3PartySubjectivity/components/Line.js","components/Dashboard/MultilineChartV3PartySubjectivity/components/Area.js","components/Dashboard/MultilineChartV3PartySubjectivity/components/Axis.js","components/Dashboard/MultilineChartV3PartySubjectivity/components/GridLine.js","components/Dashboard/MultilineChartV3PartySubjectivity/components/Overlay.js","components/Dashboard/MultilineChartV3PartySubjectivity/components/Tooltip.js","components/Dashboard/MultilineChartV3PartySubjectivity/utils/commonUtils.js","components/Dashboard/MultilineChartV3PartySubjectivity/views/MultilineChart.controller.js","components/Dashboard/MultilineChartV3PartySubjectivity/utils/useResize.js","components/Dashboard/MultilineChartV3PartySubjectivity/utils/useDimensions.js","components/Dashboard/MultilineChartV3PartySubjectivity/views/MultilineChart.js","components/Dashboard/MultilineChartV3PartySubjectivity/components/Legend.js","components/Dashboard/MultilineChartV3PartySubjectivity/MultilineAppV3PartySubjectivity.js","components/Dashboard/ComingSoon.js","components/Dashboard/Welcome/Welcome.js","components/Dashboard/Issues/TopicsBarChart.js","components/Dashboard/Issues/MinisterQuestionsBarChart.js","components/Dashboard/Issues/Issues.js","components/Dashboard/StreamGraphPolarity/utils/propTypes.js","components/Dashboard/StreamGraphPolarity/components/Line.js","components/Dashboard/StreamGraphPolarity/components/Area.js","components/Dashboard/StreamGraphPolarity/components/Axis.js","components/Dashboard/StreamGraphPolarity/components/GridLine.js","components/Dashboard/StreamGraphPolarity/components/Overlay.js","components/Dashboard/StreamGraphPolarity/components/Tooltip.js","components/Dashboard/StreamGraphPolarity/utils/commonUtils.js","components/Dashboard/StreamGraphPolarity/views/MultilineChart.controller.js","components/Dashboard/StreamGraphPolarity/utils/useResize.js","components/Dashboard/StreamGraphPolarity/utils/useDimensions.js","components/Dashboard/StreamGraphPolarity/views/MultilineChart.js","components/Dashboard/StreamGraphPolarity/components/Legend.js","components/Dashboard/StreamGraphPolarity/StreamGraphPolarity.js","components/Dashboard/StreamGraphSubjectivity/utils/propTypes.js","components/Dashboard/StreamGraphSubjectivity/components/Line.js","components/Dashboard/StreamGraphSubjectivity/components/Area.js","components/Dashboard/StreamGraphSubjectivity/components/Axis.js","components/Dashboard/StreamGraphSubjectivity/components/GridLine.js","components/Dashboard/StreamGraphSubjectivity/components/Overlay.js","components/Dashboard/StreamGraphSubjectivity/components/Tooltip.js","components/Dashboard/StreamGraphSubjectivity/utils/commonUtils.js","components/Dashboard/StreamGraphSubjectivity/views/MultilineChart.controller.js","components/Dashboard/StreamGraphSubjectivity/utils/useResize.js","components/Dashboard/StreamGraphSubjectivity/utils/useDimensions.js","components/Dashboard/StreamGraphSubjectivity/views/MultilineChart.js","components/Dashboard/StreamGraphSubjectivity/components/Legend.js","components/Dashboard/StreamGraphSubjectivity/StreamGraphSubjectivity.js","components/Dashboard/Dashboard.js","components/Navbar/Navbar.js","components/TDPage/TDHeader.js","components/TDPage/TDStats.js","components/TDPage/TDLineChartFollowers/utils/propTypes.js","components/TDPage/TDLineChartFollowers/components/Line.js","components/TDPage/TDLineChartFollowers/components/Area.js","components/TDPage/TDLineChartFollowers/components/Axis.js","components/TDPage/TDLineChartFollowers/components/GridLine.js","components/TDPage/TDLineChartFollowers/components/Overlay.js","components/TDPage/TDLineChartFollowers/components/Tooltip.js","components/TDPage/TDLineChartFollowers/utils/commonUtils.js","components/TDPage/TDLineChartFollowers/views/MultilineChart.controller.js","components/TDPage/TDLineChartFollowers/utils/useResize.js","components/TDPage/TDLineChartFollowers/utils/useDimensions.js","components/TDPage/TDLineChartFollowers/views/MultilineChart.js","components/TDPage/TDLineChartFollowers/components/Legend.js","components/TDPage/TDLineChartFollowers/TDLineChartFollowers.js","components/TDPage/TDLineChartRetweets/utils/propTypes.js","components/TDPage/TDLineChartRetweets/components/Line.js","components/TDPage/TDLineChartRetweets/components/Area.js","components/TDPage/TDLineChartRetweets/components/Axis.js","components/TDPage/TDLineChartRetweets/components/GridLine.js","components/TDPage/TDLineChartRetweets/components/Overlay.js","components/TDPage/TDLineChartRetweets/components/Tooltip.js","components/TDPage/TDLineChartRetweets/utils/commonUtils.js","components/TDPage/TDLineChartRetweets/views/MultilineChart.controller.js","components/TDPage/TDLineChartRetweets/utils/useResize.js","components/TDPage/TDLineChartRetweets/utils/useDimensions.js","components/TDPage/TDLineChartRetweets/views/MultilineChart.js","components/TDPage/TDLineChartRetweets/components/Legend.js","components/TDPage/TDLineChartRetweets/TDLineChartRetweets.js","components/TDPage/TDLineChartActivity/utils/propTypes.js","components/TDPage/TDLineChartActivity/components/Line.js","components/TDPage/TDLineChartActivity/components/Area.js","components/TDPage/TDLineChartActivity/components/Axis.js","components/TDPage/TDLineChartActivity/components/GridLine.js","components/TDPage/TDLineChartActivity/components/Overlay.js","components/TDPage/TDLineChartActivity/components/Tooltip.js","components/TDPage/TDLineChartActivity/utils/commonUtils.js","components/TDPage/TDLineChartActivity/views/MultilineChart.controller.js","components/TDPage/TDLineChartActivity/utils/useResize.js","components/TDPage/TDLineChartActivity/utils/useDimensions.js","components/TDPage/TDLineChartActivity/views/MultilineChart.js","components/TDPage/TDLineChartActivity/components/Legend.js","components/TDPage/TDLineChartActivity/TDLineChartActivity.js","components/TDPage/TDLineChartPolarity/utils/propTypes.js","components/TDPage/TDLineChartPolarity/components/Line.js","components/TDPage/TDLineChartPolarity/components/Area.js","components/TDPage/TDLineChartPolarity/components/Axis.js","components/TDPage/TDLineChartPolarity/components/GridLine.js","components/TDPage/TDLineChartPolarity/components/Overlay.js","components/TDPage/TDLineChartPolarity/components/Tooltip.js","components/TDPage/TDLineChartPolarity/utils/commonUtils.js","components/TDPage/TDLineChartPolarity/views/MultilineChart.controller.js","components/TDPage/TDLineChartPolarity/utils/useResize.js","components/TDPage/TDLineChartPolarity/utils/useDimensions.js","components/TDPage/TDLineChartPolarity/views/MultilineChart.js","components/TDPage/TDLineChartPolarity/components/Legend.js","components/TDPage/TDLineChartPolarity/TDLineChartPolarity.js","components/TDPage/TDLineChartSubjectivity/utils/propTypes.js","components/TDPage/TDLineChartSubjectivity/components/Line.js","components/TDPage/TDLineChartSubjectivity/components/Area.js","components/TDPage/TDLineChartSubjectivity/components/Axis.js","components/TDPage/TDLineChartSubjectivity/components/GridLine.js","components/TDPage/TDLineChartSubjectivity/components/Overlay.js","components/TDPage/TDLineChartSubjectivity/components/Tooltip.js","components/TDPage/TDLineChartSubjectivity/utils/commonUtils.js","components/TDPage/TDLineChartSubjectivity/views/MultilineChart.controller.js","components/TDPage/TDLineChartSubjectivity/utils/useResize.js","components/TDPage/TDLineChartSubjectivity/utils/useDimensions.js","components/TDPage/TDLineChartSubjectivity/views/MultilineChart.js","components/TDPage/TDLineChartSubjectivity/components/Legend.js","components/TDPage/TDLineChartSubjectivity/TDLineChartSubjectivity.js","components/TDPage/TDTopicBarchart.js","components/TDPage/TDPage.js","components/TDList/TDList.js","components/Footer/Footer.js","components/ConstituencyDashboard/PartyConstituencyMap.js","components/ConstituencyDashboard/ScatterplotConstituency/SearchSelectBox.js","components/ConstituencyDashboard/ScatterplotConstituency/GroupedSelectBox.js","components/ConstituencyDashboard/ScatterplotConstituency/ScatterplotConstituency.js","components/ConstituencyDashboard/TDWithConstituencyMap.js","components/ConstituencyDashboard/TotalAndAverageConstituencyMap.js","components/ConstituencyDashboard/ConstituencyDashboard.js","components/ConstituencyPage/ConstituencyBarchart.js","components/ConstituencyPage/ConstituencyHeader.js","components/ConstituencyPage/ConstituencyMinisterQuestionsBarchart.js","components/ConstituencyPage/ConstituencyScatterplot/SearchSelectBox.js","components/ConstituencyPage/ConstituencyScatterplot/GroupedSelectBox.js","components/ConstituencyPage/ConstituencyScatterplot/ConstituencyScatterplot.js","components/ConstituencyPage/ConstituencyTopicsBarchart.js","components/ConstituencyPage/TDLinks.js","components/ConstituencyPage/ConstituencyPage.js","components/Homepage/Homepage.js","components/LinechartPage/LinechartPage.js","App.js","reportWebVitals.js","index.js"],"names":["useStyles","makeStyles","theme","icon","color","formControl","margin","spacing","minWidth","partyColors","BarChart","data","options","writtenQuestions","d","holder","to","obj","Object","values","reduce","a","b","numberOfTopics","topic","keys","length","optionsFunctions","DOB","birthday","Date","now","calcAge","date","together","apart","split","day","month","year","push","toString","replace","getDate","followerData","currentWeekIndex","followers","retweetData","retweets","original_tweets","f","test","Infinity","undefined","sentimentData","polarity","subjectivity","oralQuestions","topics","voteData","absences","totalVotes","totalYes","totalNo","onWinningSide","onLosingSide","yesAndCarried","yesAndLost","noAndCarried","noAndLost","classes","useState","TDData","setTDData","setCurrentWeekIndex","highlightOption","setHighlightOption","baseColorOption","setBaseColorOption","yOption","setYOption","getWindowDimensions","windowDimensions","setWindowDimensions","height","setHeight","width","setWidth","colorMode","setColorMode","setColor","fillColor","setFillColor","backgroundColor","setBackgroundColor","setTextColor","window","innerWidth","innerHeight","console","log","useEffect","handleResize","addEventListener","removeEventListener","fill","heightMargin","widthMargin","svgRef","useRef","Independent","map","gender","name","TDDataHolderBar","sort","d3","party","xValue","yValue","officeArr","cabinetColor","trueArr","member_offices","i","office","officeName","showAs","dateRange","end","search","includes","svg","current","xScale","domain","range","padding","yScale","xAxis","tickFormat","select","attr","transition","call","yAxis","tooltip","append","style","text","rects","selectAll","join","duration","bandwidth","on","html","toLocaleString","this","pageY","pageX","remove","className","textAlign","background","Typography","variant","FormControlLabel","control","Switch","value","onChange","event","child","target","label","FormControl","InputLabel","htmlFor","Select","defaultValue","id","ListSubheader","disabled","marginTop","ref","transform","MostFollowedTD","filter","leo","Grid","container","xs","alignItems","item","Avatar","src","class","ArrowUpward","MostFollowedParty","justFG","MostRetweetedTD","mostRetweetsTD","member_uri","MostActiveTD","MostNegativeTD","mostNegativeTD","MostPositiveTD","mostPositiveTD","DailSentimentGauge","dailPolAvg","setDailPolAvg","avg","fontSize","DailConnectivityGauge","dailSubAvg","setDailSubAvg","total","MultiLineDataItemsPropTypes","arrayOf","shape","dateProp","change","number","string","items","Line","animation","isSmooth","props","React","animateLeft","useCallback","totalLength","getTotalLength","ease","animateFadeIn","noneAnimation","x","y","line","match","stroke","strokeWidth","opacity","defaultProps","Area","disableAnimation","useMemo","y1","y0","area","x1","x2","y2","offset","stopColor","stopOpacity","Axis","type","scale","ticks","anchorEl","axis","axisGroup","xDate","invert","textElements","index","left","GridLine","size","tickSize","gridGroup","Overlay","forwardRef","children","propTypes","PropTypes","isRequired","node","Tooltip","drawLine","top","drawContent","tooltipContent","cur","nodes","nodeWidth","getBoundingClientRect","drawBackground","contentBackground","tooltipContentElement","contentSize","onChangePosition","isVisible","td","tIndex","percent","result","isNumber","isString","isNotNaN","Number","isNaN","parseFloat","formatPercent","maxNameWidth","datum","previousSibling","followPoints","bisectDate","baseXPos","d0","d1","xPos","yPos","rx","ry","r","bottom","right","useController","xMin","xMax","yMin","yMax","yTickFormat","indention","yScaleForAxis","xTickFormat","useResize","dimensions","setDimensions","element","resizeObserver","ResizeObserver","entries","forEach","entry","contentRect","observe","unobserve","useDimensions","maxHeight","scaleCoef","svgWidth","svgHeight","MultilineChart","overlayRef","containerRef","controller","Legend","selectedItems","checked","chamber","weeks","arr","Math","floor","random","concat","img","partyName","partyColor","mOG","followArr","dateArr","changeArr","setDate","getMonth","getFullYear","formatDate","weekDate","base","follows","lastWeek","diff","followObj","toObj","totalFollowers","retweetArr","changePerArr","changeNumArr","changePer","changeNum","retweetObj","totalRetweets","sentiment","dailMaker","MultilineAppV3PartyFollowers","setSelectedItems","justParty","partyStats","currentParty","partyFollowers","partyFollowersTotal","partyRetweets","partyRetweetsTotal","polarityData","polarityArr","partyPolarity","partyPolarityAvg","polarityAvg","polarityObj","polAvg","fineGaelData","sinnFeinData","fiannaFailData","labourData","peopleBeforeProfitData","independentData","greenPartyData","independents4ChangeData","aontuData","socDemData","chartData","legendData","newSelectedItems","styled","onDelete","onClick","Scatterplot","TDDataScatter","setTDDataScatter","partySelect","setPartySelect","textColor","xOption","setXOption","rOption","setROption","filteredTDData","setFilteredTDData","min","max","nodeSize","setNodeSize","writtenQuestionsAsked","rValue","handleChange","tester","splice","selectedFilteredTDData","rScale","axisBottom","axisLeft","circles","marginBottom","align","FormGroup","display","verticalAlign","Checkbox","defaultChecked","PartyBarchart","totalFollows","totalOriginalTweets","TDAmount","followersToTDs","followerEngagementRate","retweetsToOriginalTweets","oralQuestionsAsked","writtenQuestionsAskedAverage","oralQuestionsAskedAverage","totalAbsences","totalPresences","averageAbsences","averagePresences","totalTimesOnWinningSide","totalTimesOnLosingSide","averageTDTimeOnWinningSide","averageTDTimeOnLosingSide","secOption","setSecOption","makePartyObj","partyArr","parties","Set","TDs","ratio","followerEngagementRateFunc","retweetsToOriginalTweetsFunc","partyData","secondaryValue","ScatterplotParty","subAvg","retweetsPerOriginalTweet","avgOriginalTweets","avgFollowers","avgRetweets","optionsExplanation","k","List","ListItem","ListItemText","primary","MultilineAppV3PartyRetweets","MultilineAppV3PartyPolarity","tdAmount","toFixed","subjectivityAvg","MultilineAppV3PartySubjectivity","subjectivityData","subjectivityArr","partySubjectivity","partySubjectivityAvg","subjectivityObj","ComingSoon","sm","justifyContent","paddingLeft","paddingRight","listStyleType","Welcome","TDFollowerDataObjArr","setTDFollowerDataObjArr","marginLeft","fontWeight","href","TopicsBarChart","totalQuestions","setTotalQuestions","setWrittenQuestions","setOralQuestions","mostAskedTopicsByTD","setMostAskedTopicsByTD","mostAskedTopicsTotal","setMostAskedTopicsTotal","dataOption","setDataOption","colorOption","setColorOption","tooltipData","tooltipData1","sumValues","summedOral","toWritten","filteredWrittenTo","summedWritten","assign","filteredWrittenTopic","mapAskedTopicsTD","flat","acc","e","set","get","Map","toSortAskedTopicsTD","topicWrittenByTD","mapTotal","topicWrittenTotal","coloredByPartyWithTDWhoHasContributedMostToTopic","most","amount","unshift","getTDWhoHasContributedMostToTopic","dataOptionArr","colorOptionArr","getUniqueTDTopicContributionOfParty","partySortedContributions","holderArr","whichPartyHasMostUniqueContributionsToTopicByTD","sorted","partyWithMostUniqueTDContributionsToTopic","getTotalContributionOfPartyToTopic","whichPartyHasMostTotalContributionsToTopic","partyWithMostTotalContributionsToTopic","hoverColor","MinisterQuestionsBarChart","mostAskedToByTD","setMostAskedToByTD","mostAskedToTotal","setMostAskedToTotal","textSize","setTextSize","tdsNoQuestion","toWrittenByTD","toWrittenTotal","coloredByPartyWithMostUniqueTDContributionsToMinister","minister","coloredByPartyWithMostContributionsToMinister","Issues","uniqueKeysTo","getUniqueTDMinisterContributionOfParty","whichPartyHasMostUniqueContributionsToMinisterByTD","partyWithMostUniqueTDContributionsToMinister","StreamGraphPolarity","dailMeanDataMap","justTDsOnTwitter","averagePolarityArr","dailMeanObjArr","averagePolarityCount","getDailMeanObj","dailMostPositiveDataMap","mostPositiveArr","dailMostPositiveObjArr","mostPositive","getDailMostPositiveObj","dailMostNegativeDataMap","mostNegativeArr","dailMostNegativeObjArr","mostNegative","getDailMostNegativeObj","marginRight","lineHeight","StreamGraphSubjectivity","averageSubjectivityArr","averageSubjectivityCount","dailMostSubjectiveDataMap","getDailMostSubjectiveObj","dailLeastSubjectiveDataMap","getDailLeastSubjectiveObj","Dashboard","Navbar","click","setClick","handleClick","exact","activeClassName","TDHeader","justThisTDData","thisTDData","setThisTDData","setName","set_member_uri","constituency","setConstituency","setOffice","partyDot","setPartyDot","partyDotAbrevArr","partDotFullNameArr","TDName","indexOf","indexOfLastSlash","member_constituency_uri","lastIndexOf","justName","substr","direction","replaceAll","TDFollowerStats","justThisTDPartyData","allTDData","thisTDParty","setThisTDParty","dailData","setDailData","currentWeek","setCurrentWeek","rankInParty","setRankInParty","rankInDail","setRankInDail","setChange","changeSign","setChangeSign","descending","getChange","thisWeek","thisWeekVal","lastWeekVal","boxShadow","ArrowDownward","TDRetweetStats","TDActivityStats","TDPolarityStats","ascending","TDSubjectivityStats","TDInterests","setTopics","topicInterestedIn","toSort","TDQuestionsAskedTo","setTo","usuallyAsks","TDLineChartFollowers","thisTDPartyData","setThisTDPartyData","thisTDDataMap","justTDOnTwitter","followerArr","tdObjArr","getTDObj","averageFollowerArr","averageFollowerCount","getDailObj","partyMeanDataMap","partyMeanObjArr","getPartyObj","TDLineChartRetweets","averageRetweetArr","averageRetweetCount","TDLineChartActivity","activityArr","averageActivityArr","averageActivityCount","TDLineChartPolarity","TDLineChartSubjectivity","TDTopicBarchart","justConTDs","setJustConTDs","justConTDsHolderBar","TDPage","TD","useParams","thisTDObj","tdParty","just","TDList","localeCompare","md","nameTitle","button","component","title","ListItemAvatar","myClassName","position","Footer","IconButton","open","PartyConstituencyMap","setJustParty","funcOption","colorFunc","setColorFunc","boundaries","setBoundaries","justPartyArr","clone","JSON","parse","stringify","con_boundaries","getBoundaryConstituency","features","constituencyNameVar","properties","CON_SEAT_","constituencyCode","OBJECTID_1","constituencyName","storeTDsByConstituency","members","clean","tdArr","containsParty","conTDs","partyAndValue","tds","colorOfPartyWithMajoritySeats","sortedByMajority","colorValObj","heatColorFunc","interpolator","projection","geoMercator","center","translate","pathGenerator","geoPath","feature","provinceColors","provinces","ScatterplotConstituency","averageFollowers","averageRetweets","averageOriginalTweets","TDConstituencyObj","constituenciesArr","unique","TDSSortedIntoCon","provinceColor","j","TDsStoredByConstituency","TDWithConstituencyMap","setFuncOption","setScale","lat","long","centerLatLong","boundariesClone","colorOfPartyOfTDWithMostFollowers","tdsFiltered","mostFollowedSorted","mostFollowedTDParty","colorOfPartyOfTDWithMostRetweets","mostRetweetedSorted","mostRetweetedTDParty","colorOfPartyOfTDWithMostOriginalTweets","mostTweetedSorted","mostTweetedTDParty","colorOfPartyOfTDWithMostQuestions","mostAskedSorted","aVal","mostCuriousTDParty","colorOfPartyOfTDWithMostNegativeSentiment","mostNegativeSorted","mostNegativeTDParty","colorOfPartyOfTDWithMostPositiveSentiment","mostPositiveSorted","mostPositiveTDParty","colorOfPartyOfTDWithMostAbsences","mostAbsentSorted","mostAbsentTDParty","colorOfPartyOfTDWithMostPresences","mostPresentSorted","mostPresentTDParty","colorOfPartyOfTDWithMostWins","mostWinsSorted","mostWinsTDParty","colorOfPartyOfTDWithMostLosses","mostLossesSorted","mostLossesTDParty","colorOfPartyOfTDWithMostAbstentions","mostAbstentionsSorted","totalAbstentions","mostAbstentionsTDParty","TotalAndAverageConstituencyMap","mostSeats","womenPresent","justWomen","averagePolarity","averageSubjectivity","totalRetweetsPerOriginalTweet","totalTweets","totalRetweetsPerFollower","totalWrittenQuestionsAsked","justTDs","totalWrittenQuestions","totalOralQuestionsAsked","totalOralQuestions","totalQuestionsAsked","averageTimesOnWinningSide","averageTimesOnLosingSide","ConstituencyDashboard","ConstituencyBarchart","conTDsData","ConstituencyHeader","TDsInConstituency","setTDsInConstituency","setConstituencyName","ConstituencyMinisterQuestionsBarchart","justConstituencyTDs","setJustConstituencyTDs","ConstituencyScatterplot","ConstituencyTopicsBarchart","TDLinks","setConTDs","ConstituencyPage","Constituency","justTDsNames","constituency_uri","Homepage","tweetsAnalysed","setTweetsAnalysed","questionsAnalysed","setQuestionsAnalysed","topicsAnalysed","setTopicsAnalysed","divisionsAnalysed","setDivisionsAnalysed","countArr","count","justTDsWhoAsked","sumOfWrittenQuestions","getAllQuestionsAnalysed","allWrittenTopics","topicArr","allTopics","getAllTopicsAnalysed","totalDivisions","Autocomplete","freeSolo","location","path","getOptionLabel","option","renderInput","params","TextField","LinechartPage","App","axios","then","response","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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,QACA,kBACA,aACA,gBACA,cACA,qBACA,iBACA,mBACA,YACA,kBACA,UACA,kBACA,qBACA,cACA,mBACA,mBA+bAm2B,eAAgB,SAACC,GAAD,OAAYA,GAC5B5tB,MAAO,CAAE9D,MAAO,IAAKkG,UAAW,QAChCyrB,YAAa,SAACC,GAAD,OAAY,cAACC,GAAA,EAAD,2BAAeD,GAAf,IAAuBnsB,MAAM,eAAeT,QAAQ,mBAK7E,cAACwB,EAAA,EAAD,CAAMI,MAAI,EAAV,SACA,cAACyqB,GAAA,EAAD,CAAcC,UAAQ,EACtBjsB,SAAU,SAASC,EAAOF,GAItB1E,OAAO6wB,SAAStW,KAAOuW,QAAapsB,GAGxCW,GAAG,iBACHzK,QA7cQ,CAEJ,sBACA,oBACA,iBACA,kBACA,4BACA,cACA,cACA,eACA,cACA,kBACA,gBACA,iBACA,cACA,eACA,eACA,gBACA,sBACA,gBACA,gBACA,kBACA,eACA,yBACA,gBACA,gBACA,gBACA,cACA,eACA,gBACA,mBACA,oBACA,wBACA,wBACA,eACA,mBACA,kBACA,iBACA,cACA,kBACA,4BACA,cACA,mBACA,iBACA,aACA,iBACA,gBACA,gBACA,aACA,mBACA,gBACA,iBACA,kBACA,gBACA,cACA,gBACA,YACA,eACA,kBACA,eACA,4BACA,kBACA,oBACA,kBACA,sBACA,oBACA,cACA,eACA,gBACA,eACA,gBACA,eACA,aACA,iBACA,mBACA,mBACA,eACA,mBACA,aACA,iBACA,uBACA,cACA,mBACA,mBACA,mBACA,qBACA,iBACA,eACA,oBACA,gBACA,iBACA,kBACA,cACA,gBACA,gBACA,mBACA,eACA,sBACA,gBACA,qBACA,qBACA,oBACA,kBACA,iBACA,iBACA,gBACA,iBACA,eACA,gCACA,mBACA,iBACA,aACA,WACA,cACA,eACA,oBACA,kBACA,cACA,kBACA,oBACA,kBACA,iBACA,oBACA,gBACA,kBACA,gBACA,iBACA,cACA,qBACA,gBACA,2BACA,aACA,eACA,2BACA,YACA,2BACA,gBACA,eACA,oBACA,iBACA,gBACA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","file":"static/js/main.bc33e499.chunk.js","sourcesContent":["import * as d3 from 'd3'\r\nimport React from 'react'\r\nimport { useRef, useEffect, useState } from 'react'\r\nimport { Typography, Checkbox, FormControlLabel, Switch, Select, MenuItem, ListSubheader, FormControl, InputLabel, makeStyles } from '@material-ui/core'\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    icon: {\r\n      color: \"white\"\r\n  },\r\n\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n  }\r\n\r\n}));\r\n\r\nconst partyColors = {\r\n    \"Sinn Féin\": \"#326760\",\r\n    \"Fine Gael\": \"#6699FF\",\r\n    \"Fianna Fáil\": \"#66BB66\",\r\n    \"Labour Party\": \"#CC0000\",\r\n    \"Solidarity - People Before Profit\": \"#8E2420\",\r\n    \"Independent\": \"black\",\r\n    \"Green Party\": \"#99CC33\",\r\n    \"Social Democrats\": \"#752F8B\",\r\n    \"Aontú\": \"#44532A\",\r\n    \"Independents 4 Change\": \"grey\"}\r\n\r\n\r\nexport const BarChart = ({data}) => {\r\n\r\n\r\n\r\n\r\n    const options = [\r\n\r\n    \"Age\", \r\n    \"Followers\", \r\n    \"Retweets\", \r\n    \"Original Tweets\", \r\n    \"Followers Per Retweet\", \r\n    \"Retweets Per Original Tweet\", \r\n    \"Avg. Polarity\", \r\n    \"Avg. Subjectivity\", \r\n\r\n    \"Written Questions Asked\", \r\n    \"Oral Questions Asked\",\r\n    \"No. of Topics TD had Questions for\",\r\n    \"Avg. Questions TD had towards Topic\",\r\n\r\n\r\n    \"Absences\",\r\n    \"Presences\",\r\n    \"Votes Yes\",\r\n    \"Votes No\",\r\n    \"Times on Winning Side\",\r\n    \"Times on Losing Side\",\r\n    \"Yes and Carried\",\r\n    \"Yes and Lost\",\r\n    \"No and Carried\",\r\n    \"No and Lost\"\r\n\r\n    ]\r\n\r\nconst followers = d => {\r\n\r\n    if(d.followerData.length === 0) {\r\n      return 0\r\n    } else {\r\n      return d.followerData[currentWeekIndex].followers\r\n    }\r\n\r\n  }\r\nconst retweets = d => {\r\n\r\n  if(d.retweetData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.retweetData[currentWeekIndex].retweets\r\n  }\r\n\r\n}\r\n\r\nconst originalTweets = d => {\r\n\r\n  if(d.retweetData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.retweetData[currentWeekIndex].original_tweets\r\n  }\r\n\r\n}\r\n\r\nconst followerEngagementRate = (d) => {\r\n\r\n  if(d.followerData.length === 0) {\r\n    return 0\r\n  } else {\r\n\r\n  \r\n\r\n\r\n  var f = d.followerData[currentWeekIndex].followers\r\n  var r = d.retweetData[currentWeekIndex].retweets \r\n\r\n  var test = ((r / f))\r\n\r\n  if(test === Infinity ) {\r\n\r\n      test = 0\r\n  \r\n}\r\n\r\ntest = test ? test : 0;\r\n\r\nreturn test\r\n}\r\n}\r\nconst retweetsPerOriginalTweet = (d) => {\r\n\r\n\r\n  if(d.followerData.length === 0) {\r\n    return 0\r\n  } else {\r\n\r\n  \r\n\r\n  var r = d.retweetData[currentWeekIndex].retweets \r\n  var o = d.retweetData[currentWeekIndex].original_tweets\r\n\r\n  var test = r / o\r\n\r\n  if(test === Infinity ) {\r\n\r\n      test = 0\r\n  \r\n}\r\n\r\ntest = test ? test : 0;\r\n\r\n\r\nreturn test\r\n}\r\n}\r\nconst polarity = d => {\r\n\r\nif(d.sentimentData == undefined || d.sentimentData.length == 0) {\r\n  return 0\r\n} else {\r\n  return d.sentimentData[currentWeekIndex].polarity\r\n}\r\n\r\n}\r\n\r\nconst subjectivity = d => {\r\n\r\n  if(d.sentimentData == undefined || d.sentimentData.length == 0) {\r\n    return 0\r\n  } else {\r\n    return d.sentimentData[currentWeekIndex].subjectivity\r\n  }\r\n\r\n\r\n\r\n}\r\n\r\nconst writtenQuestions = (d) => {\r\n\r\n\r\n    var holder = d.writtenQuestions[0].writtenQuestions.to\r\n    if(!holder) return 0;\r\n    const sumValues = obj => Object.values(obj).reduce((a,b) => a + b) \r\n\r\n    var sum = sumValues(holder)\r\n\r\n    return sum\r\n    \r\n}\r\nconst oralQuestions = (d) => {\r\n\r\n\r\n    var holder = d.oralQuestions[0].oralQuestions.to\r\n    if(!holder) return 0;\r\n    const sumValues = obj => Object.values(obj).reduce((a,b) => a + b) \r\n\r\n    var sum = sumValues(holder)\r\n\r\n    return sum\r\n\r\n\r\n}\r\nconst absences = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].absences\r\n  }\r\n}\r\nconst presences = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].totalVotes\r\n  }\r\n}\r\nconst totalYes = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].totalYes\r\n  }\r\n}\r\nconst totalNo = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].totalNo\r\n  }\r\n}\r\nconst onWinningSide = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].onWinningSide\r\n  }\r\n}\r\nconst onLosingSide = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].onLosingSide\r\n  }\r\n}\r\nconst yesAndCarried = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].yesAndCarried\r\n  }\r\n}\r\nconst yesAndLost = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].yesAndLost\r\n  }\r\n}\r\nconst noAndCarried = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].noAndCarried\r\n  }\r\n}\r\nconst noAndLost = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].noAndLost\r\n  }\r\n}\r\nconst numberOfTopics = (d) => {\r\n\r\n  if(!d.writtenQuestions[0].writtenQuestions.topic) return 0;\r\n\r\n  return Object.keys(d.writtenQuestions[0].writtenQuestions.topic).length  \r\n\r\n}\r\nconst averageQuestionTowardsTopic = (d) => {\r\n\r\n  if(!d.writtenQuestions[0].writtenQuestions.topic) return 0;\r\n\r\n  var topics = Object.keys(d.writtenQuestions[0].writtenQuestions.topic).length  \r\n\r\n  var totalQuestions = writtenQuestions(d)\r\n\r\n  return totalQuestions / topics\r\n}\r\nconst age = (d) => {\r\n\r\n  const getDate = (d) => { \r\n    \r\n    let together = []\r\n    let apart = d.split('/')\r\n    let day = apart[0]\r\n    let month = apart[1]\r\n    let year = apart[2]\r\n  \r\n    together.push(month, day, year)\r\n    together.toString().replace(\",\",\"/\").replace(\",\",\"/\")\r\n    return new Date(together)\r\n  }\r\n    \r\n  if(!d.DOB) {\r\n\r\n  function calcAge() {\r\n      var birthday = +Date.now();\r\n      return ~~((Date.now() - birthday) / (31557600000));\r\n    }\r\n    return calcAge()\r\n  }\r\n  \r\n\r\n  function calcAge(date) {\r\n    var birthday = +getDate(date);\r\n    return ~~((Date.now() - birthday) / (31557600000));\r\n  }\r\n\r\n  return calcAge(d.DOB)\r\n    \r\n\r\n}\r\n\r\n\r\n\r\n    const optionsFunctions =\r\n\r\n    [ age,\r\n      followers, \r\n      retweets, \r\n      originalTweets, \r\n      followerEngagementRate, \r\n      retweetsPerOriginalTweet, \r\n      polarity, \r\n      subjectivity,\r\n\r\n      writtenQuestions, \r\n      oralQuestions, \r\n      numberOfTopics, \r\n      averageQuestionTowardsTopic,\r\n\r\n      absences, \r\n      presences, \r\n      totalYes, \r\n      totalNo, \r\n      onWinningSide, \r\n      onLosingSide, \r\n      yesAndCarried, \r\n      yesAndLost, \r\n      noAndCarried, \r\n      noAndLost, \r\n \r\n      ]\r\n\r\n\r\n    const classes = useStyles();\r\n\r\n\r\n    const [TDData, setTDData] = useState(null)\r\n    const [currentWeekIndex, setCurrentWeekIndex] = useState(null)\r\n    const [highlightOption, setHighlightOption] = useState(0)\r\n    const [baseColorOption, setBaseColorOption] = useState(0)\r\n    const [yOption, setYOption] = useState(0)\r\n    const [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\r\n    const [height, setHeight] = useState(600)\r\n    const [width, setWidth] = useState(900)\r\n    const [colorMode, setColorMode] = useState(\"Light Mode\")\r\n    const [color, setColor] = useState(null)\r\n    const [fillColor, setFillColor] = useState(null)\r\n    const [backgroundColor, setBackgroundColor] = useState(null)\r\n    const [textColor, setTextColor] = useState(null)\r\n\r\n    function getWindowDimensions() {\r\n      const { innerWidth: width, innerHeight: height } = window;\r\n      return {\r\n        width,\r\n        height\r\n      };\r\n    }\r\n\r\n    function useWindowDimensions() {\r\n     \r\n    \r\n      useEffect(() => {\r\n        function handleResize() {\r\n          setWindowDimensions(getWindowDimensions());\r\n        }\r\n    \r\n        window.addEventListener('resize', handleResize);\r\n        return () => window.removeEventListener('resize', handleResize);\r\n      }, []);\r\n    \r\n      return windowDimensions;\r\n    }\r\n\r\n    console.log(useWindowDimensions())\r\n\r\n    const onChangeColorMode = (event, child) => {\r\n\r\n      if(child == true) {\r\n\r\n      setColorMode(\"Dark Mode\")\r\n      } \r\n      if(child == false) {\r\n        setColorMode(\"Light Mode\")\r\n      }\r\n      \r\n      console.log('color mode:' + event.target.value);\r\n      console.log(child);\r\n};\r\n\r\n\r\n    useEffect(() => {\r\n\r\n\r\n      console.log(colorMode)\r\n      \r\n            if(colorMode == \"Dark Mode\") {\r\n              setFillColor({fill: \"white\", color: \"white\"})\r\n              setColor({color: \"white\"})\r\n              setBackgroundColor(\"#191C24\")\r\n              setTextColor(\"white\")\r\n      \r\n            }\r\n      \r\n            if(colorMode == \"Light Mode\") {\r\n              setFillColor({fill: \"black\", color: \"black\"})\r\n              setColor({color: \"black\"})\r\n              setBackgroundColor(\"white\")\r\n              setTextColor(\"black\")\r\n            }\r\n      \r\n            \r\n      \r\n          }, [colorMode])\r\n\r\n    useEffect(() => {\r\n\r\n\r\n\r\n      if(windowDimensions.width < 500) {\r\n        setHeight(320)\r\n        setWidth(340)\r\n      }\r\n      if(windowDimensions.width < 400 && windowDimensions.width > 360) {\r\n        setHeight(320)\r\n        setWidth(340)\r\n      }\r\n      if(windowDimensions.width < 470 && windowDimensions.width > 400) {\r\n        setHeight(320)\r\n        setWidth(380)\r\n      }\r\n      if(windowDimensions.width < 680 && windowDimensions.width > 470) {\r\n        setHeight(360)\r\n        setWidth(480)\r\n      }\r\n      if(windowDimensions.width < 800 && windowDimensions.width > 600) {\r\n        setHeight(400)\r\n        setWidth(680)\r\n      }\r\n      if(windowDimensions.width < 980 && windowDimensions.width > 800) {\r\n        setHeight(500)\r\n        setWidth(680)\r\n      }\r\n      if(windowDimensions.width < 1080 && windowDimensions.width > 980) {\r\n        setHeight(600)\r\n        setWidth(700)\r\n      }\r\n      if(windowDimensions.width < 1200 && windowDimensions.width > 1080) {\r\n        setHeight(600)\r\n        setWidth(800)\r\n      }\r\n      if(windowDimensions.width > 1200) {\r\n        setHeight(600)\r\n        setWidth(900)\r\n      }\r\n    }, [windowDimensions])\r\n\r\n    const margin = {top: 20, right: 20, bottom: 100, left: 50}\r\n    const heightMargin = height - margin.left - margin.right;\r\n    const widthMargin = width - margin.top - margin.bottom;  \r\n\r\n\r\n    const svgRef= useRef()\r\n\r\n\r\nconst onChangeHighlight = (event, child) => {\r\n        setHighlightOption(event.target.value)\r\n        console.log('Highlight:' + event.target.value);\r\n        console.log(child);\r\n};\r\n\r\nconst onChangeBaseColor = (event, child) => {\r\n  setBaseColorOption(event.target.value)\r\n  console.log('Base color:' + event.target.value);\r\n  console.log(child);\r\n};\r\n\r\nconst onChangeY = (event, child) => {\r\n        setYOption(event.target.value)\r\n        console.log('y:' + event.target.value);\r\n        console.log(child);\r\n};\r\n\r\nuseEffect(() => {\r\n\r\n    setTDData(data)\r\n\r\n}, [])\r\n\r\nuseEffect(() => {\r\n\r\n    if(!TDData) return null;\r\nconsole.log(numberOfTopics(TDData[25]))\r\n    setCurrentWeekIndex(TDData[0].followerData.length - 1)\r\n\r\n}, [TDData])\r\n\r\n    useEffect(() => {\r\n\r\n    if(!TDData || !currentWeekIndex) return null;\r\n\r\n\r\n    if(colorMode == \"Dark Mode\") {\r\n      partyColors.Independent = \"white\"\r\n    }\r\n    if(colorMode == \"Light Mode\") {\r\n      partyColors.Independent = \"black\"\r\n    }\r\n\r\n      function testAge() {\r\n\r\n        const getDate = (d) => { \r\n    \r\n          let together = []\r\n          let apart = d.split('/')\r\n          let day = apart[0]\r\n          let month = apart[1]\r\n          let year = apart[2]\r\n        \r\n          together.push(month, day, year)\r\n          together.toString().replace(\",\",\"/\").replace(\",\",\"/\")\r\n          return new Date(together)\r\n        }\r\n\r\n        var DOBs = TDData.map(d => d.DOB)\r\n\r\n        var properDate = DOBs.map(function(d) {\r\n          \r\n        if(!d) {\r\n\r\n        function calcAge() {\r\n            var birthday = +Date.now();\r\n            return ~~((Date.now() - birthday) / (31557600000));\r\n          }\r\n          return calcAge()\r\n        }\r\n        \r\n\r\n        function calcAge(d) {\r\n          var birthday = +getDate(d);\r\n          return ~~((Date.now() - birthday) / (31557600000));\r\n        }\r\n\r\n        return calcAge(d)\r\n          \r\n          \r\n        })\r\n\r\n        return properDate\r\n      }\r\n\r\n\r\n      console.log(testAge())\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  console.log(TDData.map(d => [d.gender, d.name]))\r\n\r\n        const TDDataHolderBar = TDData;\r\n\r\n        TDDataHolderBar.sort(function(a, b) {\r\n         return   d3.ascending(a.party, b.party)\r\n        })\r\n\r\n        console.log(TDDataHolderBar)\r\n\r\n        const xValue = d => d.name\r\n        const yValue = optionsFunctions[yOption]\r\n        const party = d => d.party\r\n        const color = (d) => {\r\n\r\n\r\n        const officeArr = []\r\n        let cabinetColor = \"#FFC000\"\r\n\r\n          if(baseColorOption === 1 && highlightOption != 0) {\r\n            cabinetColor = \"red\"\r\n          }\r\n\r\n\r\n\r\n        let trueArr = [];\r\n\r\n        if(highlightOption === 1) {\r\n\r\n        if(d.member_offices[0].length != 0) {\r\n\r\n          for(let i = 0; i < d.member_offices[0].length; i++) {\r\n  \r\n          var office = d.member_offices[0][i].office.officeName.showAs\r\n  \r\n          if(!d.member_offices[0][i].office.dateRange.end) {\r\n              officeArr.push(office)\r\n          } \r\n      }\r\n    }\r\n\r\n        for(let i = 0; i < officeArr.length; i++) {\r\n\r\n            if(officeArr[i].search(\"Minister for\") != -1 || officeArr[i].search(\"Taoiseach\") != -1) { \r\n              trueArr.push(true)   \r\n            } \r\n          }\r\n          if(trueArr.includes(true)) {\r\n              return cabinetColor\r\n          } else if(baseColorOption === 0) {\r\n              return partyColors[party(d)]\r\n          } else if (baseColorOption === 1) {\r\n            return \"lightblue\"\r\n          }\r\n} \r\n\r\nif(highlightOption == 2) {\r\n\r\n    if(d.member_offices[0].length != 0) {\r\n\r\n      for(let i = 0; i < d.member_offices[0].length; i++) {\r\n\r\n      var office = d.member_offices[0][i].office.officeName.showAs\r\n\r\n      if(!d.member_offices[0][i].office.dateRange.end) {\r\n          officeArr.push(office)\r\n      } \r\n  }\r\n}\r\n\r\n    for(let i = 0; i < officeArr.length; i++) {\r\n\r\n        if(officeArr[i].search(\"Minister of\") != -1) { \r\n          trueArr.push(true)   \r\n        } \r\n      }\r\n\r\n      console.log(trueArr)\r\n      if(trueArr.includes(true)) {\r\n          return cabinetColor\r\n      } else if(baseColorOption === 0) {\r\n          return partyColors[party(d)]\r\n      } else if(baseColorOption === 1) {\r\n        return \"lightblue\"\r\n      }\r\n} \r\n\r\nif(highlightOption == 3) {\r\n\r\n    if(d.member_offices[0].length != 0) {\r\n\r\n      for(let i = 0; i < d.member_offices[0].length; i++) {\r\n\r\n      var office = d.member_offices[0][i].office.officeName.showAs\r\n\r\n      if(!d.member_offices[0][i].office.dateRange.end) {\r\n          officeArr.push(office)\r\n      } \r\n  }\r\n}\r\n\r\n    for(let i = 0; i < officeArr.length; i++) {\r\n\r\n        if(officeArr[i].search(\"Minister of\") != -1 || officeArr[i].search(\"Minister for\") != -1 || officeArr[i].search(\"Taoiseach\") != -1) { \r\n          trueArr.push(true)   \r\n        } \r\n      }\r\n\r\n      console.log(trueArr)\r\n      if(trueArr.includes(true)) {\r\n          return cabinetColor\r\n      } else if(baseColorOption === 0) {\r\n          return partyColors[party(d)]\r\n      } else if(baseColorOption === 1) {\r\n        return \"lightblue\"\r\n      }\r\n}  \r\n\r\nif(highlightOption == 4) {\r\n  if(d.gender == \"Female\") {\r\n    return cabinetColor\r\n  } else if(baseColorOption === 0) {\r\n    return partyColors[party(d)]\r\n} else if(baseColorOption === 1) {\r\n  return \"lightblue\"\r\n}\r\n}\r\n           \r\n           return partyColors[party(d)]\r\n\r\n\r\n        } \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n        const svg = d3.select(svgRef.current);\r\n\r\n\r\n        const xScale = d3.scaleBand()\r\n                            .domain(TDDataHolderBar.map(xValue))\r\n                            .range([0, widthMargin])\r\n                            .padding(0.2)\r\n\r\n\r\n        const yScale = d3.scaleLinear()\r\n                        .domain([0, d3.max(TDDataHolderBar, yValue)])\r\n                        .range([heightMargin, 0]);\r\n\r\n\r\n\r\n                        console.log(yValue)\r\n\r\n        const xAxis = d3.axisBottom(xScale).tickFormat(d3.format(\".2s\"))\r\n\r\n        svg\r\n            .select(\".x-axis-barchart\")\r\n            .attr(\"transform\", \"translate(0,\" + heightMargin + \")\")\r\n            .transition(2000)\r\n            .call(xAxis);\r\n\r\n        const yAxis = d3.axisLeft(yScale).tickFormat(d3.format(\".2s\"));\r\n\r\n    svg\r\n        .select(\".y-axis-barchart\")\r\n        .attr(\"transform\", \"translate(0,0)\")\r\n        .transition(500)\r\n        .call(yAxis)\r\n\r\n\r\n\r\n        const tooltip = d3\r\n                .select('body')\r\n                .append('div')\r\n                .attr('class', 'd3-tooltip')\r\n                .style('position', 'absolute')\r\n                .style('z-index', '10')\r\n                .style('visibility', 'hidden')\r\n                .style('padding', '10px')\r\n                .style('background', 'rgba(0,0,0,0.6)')\r\n                .style('border-radius', '4px')\r\n                .style('color', '#fff')\r\n                .text('a simple tooltip');\r\n\r\n\r\n        var rects = d3.select(\"#container-barchart\")\r\n                    .selectAll(\".bar\")\r\n                    .data(TDDataHolderBar)\r\n                    .join(\"rect\")\r\n                    .attr(\"class\", \"bar\")\r\n                    \r\n\r\n\r\n\r\n                rects.transition()\r\n                    .duration(400)\r\n                    .attr(\"x\", d => xScale(xValue(d)))\r\n                    .attr(\"y\", d => yScale(yValue(d)))\r\n                    .attr(\"width\", xScale.bandwidth())\r\n                    .attr(\"height\", d => heightMargin - yScale(yValue(d)))\r\n                    .attr(\"fill\", color)\r\n\r\n                const hoverColor = \"#eec42d\"\r\n\r\n\r\n                rects\r\n                    .on('mouseover', function (d, i) {\r\n                        tooltip\r\n                        .html(\r\n                            `<div>Name: ${d.name}</div><div>Party: ${d.party}</div><div>${options[yOption]}: ${yValue(d).toLocaleString()}</div></div>`\r\n                        )\r\n                            .style('visibility', 'visible');\r\n                            d3.select(this).transition().attr('fill', hoverColor);\r\n                        })\r\n                        .on('mousemove', function () {\r\n                            tooltip\r\n                            .style('top', d3.event.pageY - 10 + 'px')\r\n                            .style('left', d3.event.pageX + 10 + 'px');\r\n                        })\r\n                        .on('mouseout', function () {\r\n                            tooltip.html(``).style('visibility', 'hidden');\r\n                            d3.select(this).transition().attr('fill', color);\r\n                        });\r\n\r\n                        svg.select('.x-axis-barchart').selectAll(\"text\").remove();\r\n\r\n\r\n        console.log(yScale(yValue(TDData[2])))\r\n    }, [TDData, colorMode, yOption, highlightOption, baseColorOption, currentWeekIndex, height, width])\r\n\r\n    return (\r\n    <div className={\"featuredItem\"} style={{textAlign: \"center\", padding: \"10px\", margin: \"10px\", background: backgroundColor, textAlign: \"center\"}}>\r\n            \r\n      <Typography style={color} variant=\"h5\">Interactive Barchart</Typography>\r\n          <div><FormControlLabel style={color}\r\n      control={<Switch value={true} onChange={onChangeColorMode}/>}\r\n      label=\"Dark Mode\"\r\n    /></div>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={fillColor} htmlFor=\"grouped-select\">Y-Value</InputLabel>\r\n        <Select onChange={onChangeY} style={color} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n        <ListSubheader value={0}>General</ListSubheader>\r\n        <MenuItem value={0}>Age</MenuItem>\r\n          <ListSubheader value={0}>Twitter Data, last 7 days</ListSubheader>\r\n          <MenuItem value={1}>Followers</MenuItem>\r\n          <MenuItem value={2}>Retweets</MenuItem>\r\n          <MenuItem value={3}>Original Tweets</MenuItem>          \r\n          <MenuItem value={4}>Followers Per Retweet</MenuItem>\r\n          <MenuItem value={5}>Retweets Per Original Tweet</MenuItem>\r\n          <MenuItem value={6}>Avg. Tweet Polarity</MenuItem>\r\n          <MenuItem value={7}>Avg. Tweet Subjectivity</MenuItem>\r\n          <ListSubheader value={8}>Dáil Questions, 01 July - 01 Sept</ListSubheader>          \r\n          <MenuItem value={8}>Written Questions Asked</MenuItem>\r\n          <MenuItem value={9}>Oral Questions Asked</MenuItem>          \r\n          <MenuItem value={10}>No. of Topics TD had Questions for</MenuItem>\r\n          <MenuItem value={11}>Avg. Questions TD had towards Topic</MenuItem>\r\n          <ListSubheader value={12}>Dáil Divisions, 01 Jan - 01 Sept </ListSubheader>  \r\n          <MenuItem value={12}>Divisions Absent</MenuItem>\r\n          <MenuItem value={13}>Divisions Present</MenuItem>\r\n          <MenuItem value={14}>No. of votes Yes</MenuItem>\r\n          <MenuItem value={15}>No. of votes No</MenuItem>\r\n          <MenuItem value={16}>Times on Winning Side of Division</MenuItem>\r\n          <MenuItem value={17}>Times on Losing Side of Division</MenuItem>\r\n          <MenuItem value={18}>Yes and Divison Carried</MenuItem>\r\n          <MenuItem value={19}>Yes and Division Lost</MenuItem>\r\n          <MenuItem value={20}>No and Division Carried</MenuItem>\r\n          <MenuItem value={21}>No and Division Lost</MenuItem>\r\n          <MenuItem disabled>News Mentions</MenuItem>\r\n          <MenuItem disabled>Votes recieved in last election</MenuItem>\r\n          <MenuItem disabled>Avg. Poll</MenuItem>\r\n        </Select>\r\n      </FormControl>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={fillColor} htmlFor=\"grouped-select\">Highlight</InputLabel>\r\n        <Select onChange={onChangeHighlight} style={color} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n          <MenuItem value={0}>Highlight None</MenuItem>\r\n          <MenuItem value={1}>Highlight Cabinet Ministers</MenuItem>\r\n          <MenuItem value={2}>Highlight Junior Ministers</MenuItem>\r\n          <MenuItem value={3}>Highlight Both</MenuItem>     \r\n          <MenuItem value={4}>Highlight Women</MenuItem>       \r\n        </Select>\r\n      </FormControl>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={fillColor} htmlFor=\"grouped-select\">Base Color</InputLabel>\r\n        <Select onChange={onChangeBaseColor} style={color} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n          <MenuItem value={0}>Party Color</MenuItem>\r\n          <MenuItem value={1}>Lightblue</MenuItem>       \r\n        </Select>\r\n      </FormControl>\r\n        <div className={\"scroll-svg-container\"} style={{marginTop: \"16px\"}}>\r\n            <svg ref={svgRef} height={heightMargin + margin.top + margin.bottom} width={widthMargin + margin.left + margin.right}>\r\n            <g id=\"container-barchart\" transform={'translate(' + margin.left + ',' + margin.top + ')'}>\r\n                <g className=\"x-axis-barchart\" ></g>\r\n                <g className=\"y-axis-barchart\" style={color}></g>\r\n            </g>\r\n            </svg>\r\n        </div>\r\n    </div>\r\n    )\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { Avatar, Grid, useForkRef, Typography } from '@material-ui/core'\r\nimport {ArrowDownward, ArrowUpward, ContactlessOutlined, LocalConvenienceStoreOutlined, SettingsPhoneTwoTone} from '@material-ui/icons'\r\nimport './featureditem.css'\r\nimport * as d3 from 'd3'\r\nimport { BarChart } from '../BarChart'\r\n\r\n\r\nexport const MostFollowedTD = ({data}) => {\r\n\r\n\r\n\r\n    const [TDData, setTDData] = useState(null)\r\n    const [currentWeekIndex, setCurrentWeekIndex] = useState(null)\r\n\r\n    useEffect(() => {\r\n\r\n        setTDData(data.filter(function(d) {\r\n          \r\n            if(d.followerData[0] != undefined) {\r\n            return d\r\n          }\r\n        }\r\n        ))\r\n\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n\r\n        if(!TDData) return null;\r\n\r\n        setCurrentWeekIndex(TDData[0].followerData.length - 1)\r\n\r\n    }, [TDData])\r\n\r\n    \r\n    \r\n    if(!TDData || !currentWeekIndex) return null;\r\n\r\n    const leo = TDData.filter(d => d.name === 'Leo Varadkar')[0]\r\n\r\n\r\n    return (\r\n    <div className=\"featuredItem\">\r\n        <span className=\"featuredSub\">Most Followed TD</span>\r\n        <Grid container xs={12} alignItems=\"center\">\r\n        <Grid item>\r\n        <Avatar  src=\"https://www.finegael.ie/app/uploads/2016/09/leo_varadkar_thumbnail.jpg\"/>\r\n        </Grid>\r\n        <Grid item >\r\n        <span className=\"featuredTitle\">Leo Varadkar</span><span class=\"party-dot-fg\"/>\r\n        </Grid>\r\n        </Grid>\r\n        <div className=\"featuredFollowerContainer\">\r\n            <span className=\"featuredFollowers\">{leo.followerData[currentWeekIndex].followers.toLocaleString()}</span>\r\n                <span className=\"featuredFollowerChange\">+100% <ArrowUpward style={{fill: \"green\"}}/></span>\r\n        </div>\r\n        \r\n    </div>\r\n    )\r\n}\r\n\r\n\r\nexport const MostFollowedParty = ({data}) => {\r\n\r\n\r\n\r\n    const [TDData, setTDData] = useState(null)\r\n    const [currentWeekIndex, setCurrentWeekIndex] = useState(null)\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        setTDData(data.filter(function(d) {\r\n          \r\n            if(d.followerData[0] != undefined) {\r\n            return d\r\n          }\r\n        }\r\n        ))\r\n        console.log(TDData)\r\n\r\n    }, [data])\r\n\r\n    useEffect(() => {\r\n\r\n        if(!TDData) return null;\r\n\r\n        setCurrentWeekIndex(TDData[0].followerData.length - 1)\r\n\r\n    }, [TDData])\r\n\r\n    \r\n\r\n    if(!TDData || !currentWeekIndex) return null;\r\n    const justFG = TDData.filter(d => d.party !== 'Fine Gael').map(d => d.followerData[currentWeekIndex].followers).reduce(function(a, b) {return a + b})\r\n    \r\n    console.log(justFG)\r\n\r\n    return(\r\n\r\n\r\n        <div className=\"featuredItem\">\r\n            <span className=\"featuredSub\">Most Followed Party</span>\r\n        <Grid container xs={12} alignItems=\"center\">\r\n        <Grid item>\r\n        <Avatar  src=\"https://www.finegael.ie/app/themes/finegael/dist/images/FG-Logo-white-text-col-star.png\"/>\r\n        </Grid>\r\n        <Grid item >\r\n        <span className=\"featuredTitle\">Fine Gael</span><span class=\"party-dot-fg\"/>\r\n        </Grid>\r\n        </Grid>\r\n\r\n\r\n        <div className=\"featuredFollowerContainer\">\r\n            <span className=\"featuredFollowers\">{justFG.toLocaleString()}</span>\r\n            <span className=\"featuredFollowerChange\">+100% <ArrowUpward style={{fill: \"green\"}}/></span>\r\n        </div>\r\n        \r\n    </div>\r\n\r\n\r\n\r\n\r\n)\r\n}\r\n\r\nexport const MostRetweetedTD = ({data}) => {\r\n\r\n\r\n    const [TDData, setTDData] = useState(null)\r\n    const [currentWeekIndex, setCurrentWeekIndex] = useState(null)\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        setTDData(data.filter(function(d) {\r\n          \r\n            if(d.followerData[0] != undefined) {\r\n            return d\r\n          }\r\n        }\r\n        ))\r\n\r\n    }, [data])\r\n\r\n    useEffect(() => {\r\n\r\n        if(!TDData) return null;\r\n\r\n        setCurrentWeekIndex(TDData[0].followerData.length - 1)\r\n\r\n    }, [TDData])\r\n\r\n\r\n    if(!TDData || !currentWeekIndex) return null;\r\n\r\n    const mostRetweetsTD = TDData.sort(function(a, b) {\r\n\r\n        return   d3.descending(a.retweetData[currentWeekIndex].retweets, b.retweetData[currentWeekIndex].retweets)\r\n\r\n       })\r\n\r\n\r\n    return (\r\n\r\n\r\n        <div className=\"featuredItem\">\r\n            <span className=\"featuredSub\">Most Retweets this week</span>\r\n        <Grid container xs={12} alignItems=\"center\">\r\n        <Grid item>\r\n        <Avatar  src={mostRetweetsTD[0].member_uri[0] + \"/image/large\"}/>\r\n        </Grid>\r\n        <Grid item >\r\n        <span className=\"featuredTitle\">{mostRetweetsTD[0].name}</span><span class=\"party-dot-sf\"/>\r\n        </Grid>\r\n        </Grid>\r\n\r\n\r\n        <div className=\"featuredFollowerContainer\">\r\n            <span className=\"featuredFollowers\">{mostRetweetsTD[0].retweetData[currentWeekIndex].retweets}</span>\r\n            <span className=\"featuredFollowerChange\">+100% <ArrowUpward style={{fill: \"green\"}}/></span>\r\n        </div>\r\n        \r\n    </div>\r\n\r\n    )\r\n\r\n}\r\n\r\nexport const MostActiveTD = ({data}) => {\r\n\r\n\r\n    const [TDData, setTDData] = useState(null)\r\n    const [currentWeekIndex, setCurrentWeekIndex] = useState(null)\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        setTDData(data.filter(function(d) {\r\n          \r\n            if(d.followerData[0] != undefined) {\r\n            return d\r\n          }\r\n        }\r\n        ))\r\n\r\n    }, [data])\r\n\r\n    useEffect(() => {\r\n\r\n        if(!TDData) return null;\r\n\r\n        setCurrentWeekIndex(TDData[0].followerData.length - 1)\r\n\r\n    }, [TDData])\r\n\r\n\r\n    if(!TDData || !currentWeekIndex) return null;\r\n    const mostRetweetsTD = TDData.sort(function(a, b) {\r\n\r\n        return   d3.descending(a.retweetData[currentWeekIndex].original_tweets, b.retweetData[currentWeekIndex].original_tweets)\r\n\r\n       })\r\n\r\n    return (\r\n\r\n\r\n        <div className=\"featuredItem\">\r\n            <span className=\"featuredSub\">Most Active this week (Original Tweets)</span>\r\n        <Grid container xs={12} alignItems=\"center\">\r\n        <Grid item>\r\n        <Avatar  src={mostRetweetsTD[0].member_uri[0] + \"/image/large\"}/>\r\n        </Grid>\r\n        <Grid item >\r\n        <span className=\"featuredTitle\">{mostRetweetsTD[0].name}</span><span class=\"party-dot-fg\"/>\r\n        </Grid>\r\n        </Grid>\r\n\r\n\r\n        <div className=\"featuredFollowerContainer\">\r\n            <span className=\"featuredFollowers\">{mostRetweetsTD[0].retweetData[currentWeekIndex].original_tweets}</span>\r\n            <span className=\"featuredFollowerChange\">+100% <ArrowUpward style={{fill: \"green\"}}/></span>\r\n        </div>\r\n        \r\n    </div>\r\n\r\n    )\r\n\r\n}\r\n\r\nexport const MostNegativeTD = ({data}) => {\r\n\r\n\r\n\r\n    const [TDData, setTDData] = useState(null)\r\n    const [currentWeekIndex, setCurrentWeekIndex] = useState(null)\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        setTDData(data.filter(function(d) {\r\n          \r\n            if(d.followerData[0] != undefined) {\r\n            return d\r\n          }\r\n        }\r\n        ))\r\n        console.log(TDData)\r\n\r\n    }, [data])\r\n\r\n    useEffect(() => {\r\n\r\n        if(!TDData) return null;\r\n\r\n        setCurrentWeekIndex(TDData[0].followerData.length - 1)\r\n\r\n    }, [TDData])\r\n\r\n\r\n    \r\n\r\n    if(!TDData || !currentWeekIndex) return null;\r\n\r\n    const mostNegativeTD = TDData.sort(function(a, b) {\r\n\r\n        return   d3.ascending(a.sentimentData[currentWeekIndex].polarity, b.sentimentData[currentWeekIndex].polarity)\r\n\r\n       })\r\n\r\n\r\n\r\n    return(\r\n\r\n\r\n        <div className=\"featuredItem\">\r\n            <span className=\"featuredSub\">Most Negative TD this Week</span>\r\n        <Grid container xs={12} alignItems=\"center\">\r\n        <Grid item>\r\n        <Avatar  src={mostNegativeTD[0].member_uri[0] + \"/image/large\"}/>\r\n        </Grid>\r\n        <Grid item >\r\n        <span className=\"featuredTitle\">{mostNegativeTD[0].name}</span><span class=\"party-dot-sf\"/>\r\n        </Grid>\r\n        </Grid>\r\n\r\n\r\n        <div className=\"featuredFollowerContainer\">\r\n            <span className=\"featuredFollowers\">{mostNegativeTD[0].sentimentData[currentWeekIndex].polarity.toLocaleString()}</span>\r\n            <span className=\"featuredFollowerChange\">+100% <ArrowUpward style={{fill: \"green\"}}/></span>\r\n        </div>\r\n        \r\n    </div>\r\n\r\n\r\n\r\n\r\n)\r\n}\r\n\r\nexport const MostPositiveTD = ({data}) => {\r\n\r\n\r\n\r\n    const [TDData, setTDData] = useState(null)\r\n    const [currentWeekIndex, setCurrentWeekIndex] = useState(null)\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        setTDData(data.filter(function(d) {\r\n          \r\n            if(d.followerData[0] != undefined) {\r\n            return d\r\n          }\r\n        }\r\n        ))\r\n        console.log(TDData)\r\n\r\n    }, [data])\r\n\r\n    useEffect(() => {\r\n\r\n        if(!TDData) return null;\r\n\r\n        setCurrentWeekIndex(TDData[0].followerData.length - 1)\r\n\r\n    }, [TDData])\r\n\r\n    \r\n\r\n    if(!TDData || !currentWeekIndex) return null;\r\n\r\n    const mostPositiveTD = TDData.sort(function(a, b) {\r\n\r\n        return   d3.descending(a.sentimentData[currentWeekIndex].polarity, b.sentimentData[currentWeekIndex].polarity)\r\n\r\n       })\r\n\r\n\r\n\r\n    return(\r\n\r\n\r\n        <div className=\"featuredItem\">\r\n            <span className=\"featuredSub\">Most Positive TD this Week</span>\r\n        <Grid container xs={12} alignItems=\"center\">\r\n        <Grid item>\r\n        <Avatar  src={mostPositiveTD[0].member_uri[0] + \"/image/large\"}/>\r\n        </Grid>\r\n        <Grid item >\r\n        <span className=\"featuredTitle\">{mostPositiveTD[0].name}</span><span class=\"party-dot-ff\"/>\r\n        </Grid>\r\n        </Grid>\r\n\r\n\r\n        <div className=\"featuredFollowerContainer\">\r\n            <span className=\"featuredFollowers\">{mostPositiveTD[0].sentimentData[currentWeekIndex].polarity.toLocaleString()}</span>\r\n            <span className=\"featuredFollowerChange\">+100% <ArrowUpward style={{fill: \"green\"}}/></span>\r\n        </div>\r\n        \r\n    </div>\r\n\r\n\r\n\r\n\r\n)\r\n}\r\n\r\nexport const DailTotal = ({data}) => {\r\n\r\n    const [TDData, setTDData] = useState(null)\r\n    const [total, setTotal] = useState(null)\r\n    const [tenTot, setTenTot] = useState(null)\r\n    const [percTopTot, setPercTopTot] = useState(null)\r\n    const [avg, setAvg] = useState(null)\r\n    const [currentWeekIndex, setCurrentWeekIndex] = useState(null)\r\n\r\n    useEffect(() => {\r\n\r\n        setTDData(data.filter(function(d) {\r\n          \r\n            if(d.followerData[0] != undefined) {\r\n            return d\r\n          }\r\n        }\r\n        ))\r\n        console.log(TDData)\r\n\r\n    }, [data])\r\n\r\n    useEffect(() => {\r\n\r\n        if(!TDData) return null;\r\n\r\n        setCurrentWeekIndex(TDData[0].followerData.length - 1)\r\n\r\n    }, [TDData])\r\n\r\n    \r\n\r\n    useEffect(() => {\r\n\r\n        if(!TDData || !currentWeekIndex) return null;\r\n\r\n\r\n        const holder = TDData.map(d => d.followerData[currentWeekIndex].followers)\r\n        const total = holder.reduce(function(a, b) {\r\n            return a + b\r\n        })\r\n\r\n        setTotal(total)   \r\n        \r\n        const TDDataHolder = TDData;\r\n\r\n        const topFive = TDDataHolder.sort(function (a, b) {\r\n\r\n\r\n            return d3.descending(a.followerData[currentWeekIndex].followers, b.followerData[currentWeekIndex].followers)\r\n\r\n\r\n\r\n        })\r\n\r\n\r\n\r\n\r\n        \r\n\r\n        const testtf = topFive.map(d => d.followerData[currentWeekIndex].followers)\r\n\r\n\r\n        testtf.length = 10\r\n\r\n\r\n        const tenTott = testtf.reduce(function(a,b) {\r\n\r\n            return a + b\r\n\r\n        })\r\n\r\n        setTenTot(tenTott)\r\n\r\n\r\n        setPercTopTot(tenTott / total)\r\n\r\n        setAvg(Math.round(total / TDData.length))\r\n\r\n\r\n        console.log(percTopTot)\r\n        \r\n\r\n    }, [TDData, currentWeekIndex])\r\n\r\n\r\n\r\n    console.log(TDData)\r\n\r\n\r\n    \r\n    if(!TDData || !total || !currentWeekIndex) return null;\r\n\r\n\r\n    \r\n    \r\n\r\n    return (\r\n\r\n\r\n        <div className=\"featuredItem\" >\r\n        <Grid container xs={12} alignItems=\"center\" style={{justifyContent: \"center\"}}>\r\n        <Grid item >\r\n        <Avatar  src=\"https://img2.thejournal.ie/inline/2163335/original/?width=630&version=2163335\"/>\r\n        </Grid>\r\n        <Grid item >\r\n        <Typography variant=\"h6\" style={{justifyContent: \"center\", marginLeft: 10}}>Dáil Eireann</Typography>\r\n        </Grid>\r\n        </Grid>\r\n\r\n        <div className=\"featuredFollowerContainer\" style={{justifyContent: \"center\"}}>\r\n            <span style={{fontSize: 14}}>Of the <span style={{fontWeight: \"bold\"}}>161</span> TDs in the Dáil, <span style={{fontWeight: \"bold\"}}>{TDData.length}</span> have Twitter.</span>\r\n        </div>\r\n        \r\n        <div className=\"featuredFollowerContainer\" style={{justifyContent: \"center\"}}>\r\n            <span style={{fontSize: 14}}>They have a combined following of <span style={{fontWeight: \"bold\"}}>{total.toLocaleString()}</span>.</span>\r\n        </div>\r\n\r\n     \r\n        <div className=\"featuredFollowerContainer\" style={{justifyContent: \"center\"}}>\r\n            <span style={{fontSize: 14}}>The 10 most followed TDs account for <span style={{fontWeight: \"bold\"}}>{tenTot.toLocaleString()}</span>, or <span style={{fontWeight: \"bold\"}}>{percTopTot.toLocaleString(\"en\", {style: \"percent\"})} </span>of the total.</span>\r\n        </div>        \r\n        <div className=\"featuredFollowerContainer\" style={{justifyContent: \"center\"}}>\r\n            <span style={{fontSize: 14}}>The average TD has just <span style={{fontWeight: \"bold\"}}>{avg.toLocaleString()}</span>.</span>\r\n        </div>   \r\n        <BarChart data={TDData}/>\r\n    </div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    )\r\n\r\n}\r\n\r\n\r\n\r\n","import React, {useState, useEffect} from 'react'\r\nimport * as d3 from 'd3'\r\nimport GaugeChart from 'react-gauge-chart'\r\nimport { Typography } from '@material-ui/core'\r\nimport { ArrowUpward } from '@material-ui/icons'\r\n\r\n\r\nexport const DailSentimentGauge = ({data}) => {\r\n\r\n    const [TDData, setTDData] = useState(null)\r\n    const [dailPolAvg, setDailPolAvg] = useState(null)\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        setTDData(data.filter(function(d) {\r\n          \r\n            if(d.followerData[0] != undefined) {\r\n            return d\r\n          }\r\n        }\r\n        ))\r\n        console.log(TDData)\r\n\r\n    }, [data])\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        if(!TDData) return null;\r\n\r\n\r\n        const holder = TDData.map(d => d.sentimentData[2].polarity)\r\n        const total = holder.reduce(function(a, b) {\r\n            return a + b\r\n        })\r\n\r\n        var avg = total / 154\r\n\r\n\r\n        setDailPolAvg(avg)\r\n\r\n        console.log(avg)\r\n \r\n     // return d3.descending(a.totalFollowers, b.totalFollowers)\r\n            \r\n                 \r\n        \r\n    \r\n\r\n    }, [TDData, dailPolAvg])\r\n\r\n    if(!dailPolAvg) return null;\r\n\r\n\r\n    return (\r\n        <div className=\"featuredItem\">\r\n            <Typography variant=\"h6\">Dáil Sentiment</Typography>\r\n            <p style={{fontSize: 14}}>How positive or negative TD's have been on Twitter over the past week. Value lies between [-1, 1] where 1 is most positive.</p>\r\n            <div className=\"featuredFollowerContainer\">\r\n            <span className=\"featuredFollowers\">{dailPolAvg.toLocaleString()}</span>\r\n            <span className=\"featuredFollowerChange\">+100% <ArrowUpward style={{fill: \"green\"}}/></span>\r\n        </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport const DailConnectivityGauge = ({data}) => {\r\n\r\n\r\n    \r\n\r\n\r\n    const [TDData, setTDData] = useState(null)\r\n    const [dailSubAvg, setDailSubAvg] = useState(null)\r\n\r\n    useEffect(() => {\r\n\r\n        setTDData(data.filter(function(d) {\r\n          \r\n            if(d.followerData[0] != undefined) {\r\n            return d\r\n          }\r\n        }\r\n        ))\r\n        console.log(TDData)\r\n\r\n    }, [data])\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        if(!TDData) return null;\r\n\r\n        const holder = TDData.map(d => d.sentimentData[2].subjectivity)\r\n        const total = holder.reduce(function(a, b) {\r\n            return a + b\r\n    })\r\n\r\n        var avg = total / 154  \r\n        \r\n        if(!total) return null;\r\n\r\n        console.log(avg)\r\n\r\n\r\n        setDailSubAvg(avg)\r\n\r\n\r\n    }, [TDData, dailSubAvg])\r\n\r\n\r\n\r\n    if(!TDData || !dailSubAvg) return null;\r\n\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"featuredItem\">\r\n            <Typography variant=\"h6\">Dáil Subjectivity</Typography>\r\n            <p style={{fontSize: 14}}>How subjective TD's have been on Twitter over the past week. Unlike sentiment, subjectivity lies between [0, 1] where 1 is most subjective.</p>\r\n            <div className=\"featuredFollowerContainer\">\r\n            <span className=\"featuredFollowers\">{dailSubAvg.toLocaleString()}</span>\r\n            <span className=\"featuredFollowerChange\">+100% <ArrowUpward style={{fill: \"green\"}}/></span>\r\n        </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n\r\n\r\n","import { arrayOf, shape, string, date as dateProp, number } from \"prop-types\";\r\n\r\nexport const MultiLineDataItemsPropTypes = arrayOf(\r\n  shape({\r\n    date: dateProp,\r\n    change: number,\r\n    followers: number\r\n  })\r\n);\r\n\r\nexport const MultiLineDataPropTypes = arrayOf(\r\n  shape({\r\n    name: string,\r\n    items: MultiLineDataItemsPropTypes,\r\n    color: string\r\n  })\r\n);\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Line = ({\r\n  xScale,\r\n  yScale,\r\n  color,\r\n  data,\r\n  isSmooth,\r\n  animation,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  // Define different types of animation that we can use\r\n  const animateLeft = React.useCallback(() => {\r\n    // NOTE: for some reason getTotalLength() doesn't work in tests\r\n    // in this codesandbox so we added default value just for tests\r\n    const totalLength = ref.current.getTotalLength\r\n      ? ref.current.getTotalLength()\r\n      : 500;\r\n    d3.select(ref.current)\r\n      .attr(\"opacity\", 1)\r\n      .attr(\"stroke-dasharray\", `${totalLength},${totalLength}`)\r\n      .attr(\"stroke-dashoffset\", totalLength)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeLinear)\r\n      .attr(\"stroke-dashoffset\", 0);\r\n  }, []);\r\n  const animateFadeIn = React.useCallback(() => {\r\n    d3.select(ref.current)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeLinear)\r\n      .attr(\"opacity\", 1);\r\n  }, []);\r\n  const noneAnimation = React.useCallback(() => {\r\n    d3.select(ref.current).attr(\"opacity\", 1);\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    switch (animation) {\r\n      case \"left\":\r\n        animateLeft();\r\n        break;\r\n      case \"fadeIn\":\r\n        animateFadeIn();\r\n        break;\r\n      case \"none\":\r\n      default:\r\n        noneAnimation();\r\n        break;\r\n    }\r\n  }, [animateLeft, animateFadeIn, noneAnimation, animation]);\r\n\r\n  // Recalculate line length if scale has changed\r\n  React.useEffect(() => {\r\n    if (animation === \"left\") {\r\n      const totalLength = ref.current.getTotalLength\r\n        ? ref.current.getTotalLength()\r\n        : 500;\r\n      d3.select(ref.current).attr(\r\n        \"stroke-dasharray\",\r\n        `${totalLength},${totalLength}`\r\n      );\r\n    }\r\n  }, [xScale, yScale, animation]);\r\n\r\n  const line = d3\r\n    .line()\r\n    .x((d) => xScale(d.date))\r\n    .y((d) => yScale(d.followers));\r\n\r\n  const d = line(data);\r\n\r\n  return (\r\n    <path\r\n      ref={ref}\r\n      d={d?.match(/NaN|undefined/) ? \"\" : d}\r\n      stroke={color}\r\n      strokeWidth={3}\r\n      fill=\"none\"\r\n      opacity={0}\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n\r\nLine.propTypes = {\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  data: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      date: PropTypes.date,\r\n      change: PropTypes.number\r\n    })\r\n  ),\r\n  color: PropTypes.string,\r\n  isSmooth: PropTypes.bool,\r\n  animation: PropTypes.oneOf([\"left\", \"fadeIn\", \"none\"])\r\n};\r\n\r\nLine.defaultProps = {\r\n  data: [],\r\n  color: \"white\",\r\n  isSmooth: false,\r\n  animation: \"left\"\r\n};\r\n\r\nexport default Line;\r\n","/** Area.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Area = ({ xScale, yScale, color, data, disableAnimation, ...props }) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    if (disableAnimation) {\r\n      d3.select(ref.current).attr(\"opacity\", 1);\r\n      return;\r\n    }\r\n    d3.select(ref.current)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeBackIn)\r\n      .attr(\"opacity\", 1);\r\n  }, [disableAnimation]);\r\n\r\n  const d = React.useMemo(() => {\r\n    const area = d3\r\n      .area()\r\n      .x(({ date }) => xScale(date))\r\n      .y1(({ followers }) => yScale(followers))\r\n      .y0(() => yScale(yScale.domain()[0]));\r\n    return area(data);\r\n  }, [xScale, yScale, data]);\r\n\r\n  return (\r\n    <>\r\n      <path\r\n        ref={ref}\r\n        d={d}\r\n        fill={`url(#gradient-${color})`}\r\n        opacity={0}\r\n        {...props}\r\n      />\r\n      <defs>\r\n        <linearGradient\r\n          id={`gradient-${color}`}\r\n          x1=\"0%\"\r\n          x2=\"0%\"\r\n          y1=\"0%\"\r\n          y2=\"100%\"\r\n        >\r\n          <stop offset=\"0%\" stopColor={color} stopOpacity={0.2} />\r\n          <stop offset=\"100%\" stopColor={color} stopOpacity={0} />\r\n        </linearGradient>\r\n      </defs>\r\n    </>\r\n  );\r\n};\r\n\r\nArea.propTypes = {\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  data: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      date: PropTypes.date,\r\n      followers: PropTypes.number\r\n    })\r\n  ),\r\n  color: PropTypes.string,\r\n  disableAnimation: PropTypes.bool\r\n};\r\n\r\nArea.defaultProps = {\r\n  data: [],\r\n  color: \"white\",\r\n  disableAnimation: false\r\n};\r\n\r\nexport default Area;\r\n","/** AxisX.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Axis = ({\r\n  type,\r\n  scale,\r\n  ticks,\r\n  transform,\r\n  tickFormat,\r\n  disableAnimation,\r\n  anchorEl,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    const axisGenerator = type === \"left\" ? d3.axisRight : d3.axisBottom;\r\n    const axis = axisGenerator(scale).ticks(ticks).tickFormat(tickFormat);\r\n    const axisGroup = d3.select(ref.current);\r\n    if (disableAnimation) {\r\n      axisGroup.call(axis);\r\n    } else {\r\n      axisGroup.transition().duration(750).ease(d3.easeLinear).call(axis);\r\n    }\r\n    axisGroup.select(\".domain\").remove();\r\n    axisGroup.selectAll(\"line\").remove();\r\n    axisGroup\r\n      .selectAll(\"text\")\r\n      .attr(\"opacity\", 0.5)\r\n      .attr(\"color\", \"white\")\r\n      .attr(\"font-size\", \"0.75rem\");\r\n  }, [scale, ticks, tickFormat, disableAnimation]);\r\n\r\n  React.useEffect(() => {\r\n    d3.select(anchorEl)\r\n      .on(\"mouseout.axisX\", () => {\r\n        d3.select(ref.current)\r\n          .selectAll(\"text\")\r\n          .attr(\"opacity\", 0.5)\r\n          .style(\"font-weight\", \"normal\");\r\n      })\r\n      .on(\"mousemove.axisX\", () => {\r\n        const [x] = d3.mouse(anchorEl);\r\n        const xDate = scale.invert(x);\r\n        const textElements = d3.select(ref.current).selectAll(\"text\");\r\n        const data = textElements.data();\r\n        const index = d3.bisector((d) => d).left(data, xDate);\r\n        textElements\r\n          .attr(\"opacity\", (d, i) => (i === index - 1 ? 1 : 0.5))\r\n          .style(\"font-weight\", (d, i) =>\r\n            i === index - 1 ? \"bold\" : \"normal\"\r\n          );\r\n      });\r\n  }, [anchorEl, scale]);\r\n\r\n  return <g ref={ref} transform={transform} {...props} />;\r\n};\r\n\r\nAxis.propTypes = {\r\n  type: PropTypes.oneOf([\"left\", \"bottom\"]).isRequired,\r\n  scale: PropTypes.func.isRequired,\r\n  ticks: PropTypes.oneOfType([PropTypes.number, PropTypes.func]),\r\n  tickFormat: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\r\n  transform: PropTypes.string,\r\n  disableAnimation: PropTypes.bool,\r\n  anchorEl: PropTypes.instanceOf(Element)\r\n};\r\n\r\nAxis.defaultProps = {\r\n  ticks: 0,\r\n  tickFormat: null,\r\n  transform: \"\",\r\n  disableAnimation: false,\r\n  anchorEl: null\r\n};\r\n\r\nexport default Axis;\r\n","/** GridLine.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst GridLine = ({\r\n  type,\r\n  scale,\r\n  ticks,\r\n  size,\r\n  transform,\r\n  disableAnimation,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    const axisGenerator = type === \"vertical\" ? d3.axisBottom : d3.axisLeft;\r\n    const axis = axisGenerator(scale).ticks(ticks).tickSize(-size);\r\n\r\n    const gridGroup = d3.select(ref.current);\r\n    if (disableAnimation) {\r\n      gridGroup.call(axis);\r\n    } else {\r\n      gridGroup.transition().duration(750).ease(d3.easeLinear).call(axis);\r\n    }\r\n    gridGroup.select(\".domain\").remove();\r\n    gridGroup.selectAll(\"text\").remove();\r\n    gridGroup.selectAll(\"line\").attr(\"stroke\", \"rgba(255, 255, 255, 0.1)\");\r\n  }, [scale, ticks, size, disableAnimation]);\r\n\r\n  return <g ref={ref} transform={transform} {...props} />;\r\n};\r\n\r\nGridLine.propTypes = {\r\n  scale: PropTypes.func.isRequired,\r\n  type: PropTypes.oneOf([\"vertical\", \"horizontal\"]).isRequired,\r\n  ticks: PropTypes.oneOfType([PropTypes.number, PropTypes.func]),\r\n  transform: PropTypes.string,\r\n  size: PropTypes.number,\r\n  disableAnimation: PropTypes.bool\r\n};\r\n\r\nGridLine.defaultProps = {\r\n  ticks: 0,\r\n  transform: \"\",\r\n  size: 0,\r\n  disableAnimation: false\r\n};\r\n\r\nexport default GridLine;\r\n","/** Overlay.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\n/**\r\n * Use Overlay as a wrapper for components that need mouse events to be handled.\r\n * For example: Tooltip, AxisX.\r\n */\r\nconst Overlay = React.forwardRef(({ width, height, children }, ref) => (\r\n  <g>\r\n    {children}\r\n    <rect ref={ref} width={width} height={height} opacity={0} />\r\n  </g>\r\n));\r\n\r\nOverlay.propTypes = {\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired,\r\n  children: PropTypes.node.isRequired\r\n};\r\n\r\nexport default Overlay;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\nimport { MultiLineDataPropTypes } from \"../utils/propTypes\";\r\nimport {formatPercent } from \"../utils/commonUtils\"\r\n// import { formatPercent, formatPriceUSD } from \"../utils/commonUtils\";\r\n\r\nconst Tooltip = ({\r\n  xScale,\r\n  yScale,\r\n  width,\r\n  height,\r\n  data,\r\n  margin,\r\n  anchorEl,\r\n  children,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  const drawLine = React.useCallback(\r\n    (x) => {\r\n      d3.select(ref.current)\r\n        .select(\".tooltipLine\")\r\n        .attr(\"x1\", x)\r\n        .attr(\"x2\", x)\r\n        .attr(\"y1\", -margin.top)\r\n        .attr(\"y2\", height);\r\n    },\r\n    [ref, height, margin]\r\n  );\r\n\r\n  const drawContent = React.useCallback(\r\n    (x) => {\r\n      const tooltipContent = d3.select(ref.current).select(\".tooltipContent\");\r\n      tooltipContent.attr(\"transform\", (cur, i, nodes) => {\r\n        const nodeWidth = nodes[i]?.getBoundingClientRect()?.width || 0;\r\n        const translateX = nodeWidth + x > width ? x - nodeWidth - 12 : x + 8;\r\n        return `translate(${translateX}, ${-margin.top})`;\r\n      });\r\n      tooltipContent\r\n        .select(\".contentTitle\")\r\n        .text(d3.timeFormat(\"%b %d, %Y\")(xScale.invert(x)));\r\n    },\r\n    [xScale, margin, width]\r\n  );\r\n\r\n  const drawBackground = React.useCallback(() => {\r\n    // reset background size to defaults\r\n    const contentBackground = d3\r\n      .select(ref.current)\r\n      .select(\".contentBackground\");\r\n    contentBackground.attr(\"width\", 125).attr(\"height\", 40);\r\n\r\n    // calculate new background size\r\n    const tooltipContentElement = d3\r\n      .select(ref.current)\r\n      .select(\".tooltipContent\")\r\n      .node();\r\n    if (!tooltipContentElement) return;\r\n\r\n    const contentSize = tooltipContentElement.getBoundingClientRect();\r\n    contentBackground\r\n      .attr(\"width\", contentSize.width + 8)\r\n      .attr(\"height\", contentSize.height + 4);\r\n  }, []);\r\n\r\n  const onChangePosition = React.useCallback((d, i, isVisible) => {\r\n    d3.selectAll(\".performanceItemChange\")\r\n      .filter((td, tIndex) => tIndex === i)\r\n      .text(isVisible ? formatPercent(d.change) : \"\");\r\n\r\n    d3.selectAll(\".performanceItemFollowers\")\r\n      .filter((td, tIndex) => tIndex === i)\r\n      .text(\r\n        d.followers.toLocaleString() && !isVisible ? \"No data\" : d.followers.toLocaleString()\r\n      );\r\n       // .text(\r\n      //   d.marketvalue && !isVisible ? \"No data\" : formatPriceUSD(d.marketvalue)\r\n      // );\r\n\r\n    const maxNameWidth = d3.max(\r\n      d3.selectAll(\".performanceItemName\").nodes(),\r\n      (node) => node.getBoundingClientRect().width\r\n    );\r\n    d3.selectAll(\".performanceItemChange\").attr(\r\n      \"transform\",\r\n      (datum, index, nodes) =>\r\n        `translate(${\r\n          nodes[index].previousSibling.getBoundingClientRect().width + 14\r\n        },4)`\r\n    );\r\n\r\n    d3.selectAll(\".performanceItemFollowers\").attr(\r\n      \"transform\",\r\n      `translate(${maxNameWidth + 60},4)`\r\n    );\r\n  }, []);\r\n\r\n  const followPoints = React.useCallback(() => {\r\n    const [x] = d3.mouse(anchorEl);\r\n    const xDate = xScale.invert(x);\r\n    const bisectDate = d3.bisector((d) => d.date).left;\r\n    let baseXPos = 0;\r\n\r\n    // draw circles on line\r\n    d3.select(ref.current)\r\n      .selectAll(\".tooltipLinePoint\")\r\n      .attr(\"transform\", (cur, i) => {\r\n        const index = bisectDate(data[i].items, xDate, 1);\r\n        const d0 = data[i].items[index - 1];\r\n        const d1 = data[i].items[index];\r\n        const d = xDate - d0?.date > d1?.date - xDate ? d1 : d0;\r\n        if (d.date === undefined && d.followers === undefined) {\r\n          // move point out of container\r\n          return \"translate(-100,-100)\";\r\n        }\r\n        const xPos = xScale(d.date);\r\n        if (i === 0) {\r\n          baseXPos = xPos;\r\n        }\r\n\r\n        let isVisible = true;\r\n        if (xPos !== baseXPos) {\r\n          isVisible = false;\r\n        }\r\n        const yPos = yScale(d.followers);\r\n\r\n        onChangePosition(d, i, isVisible);\r\n\r\n        return isVisible\r\n          ? `translate(${xPos}, ${yPos})`\r\n          : \"translate(-100,-100)\";\r\n      });\r\n\r\n    drawLine(baseXPos);\r\n    drawContent(baseXPos);\r\n    drawBackground();\r\n  }, [\r\n    anchorEl,\r\n    drawLine,\r\n    drawContent,\r\n    drawBackground,\r\n    xScale,\r\n    yScale,\r\n    data,\r\n    onChangePosition\r\n  ]);\r\n\r\n  React.useEffect(() => {\r\n    d3.select(anchorEl)\r\n      .on(\"mouseout.tooltip\", () => {\r\n        d3.select(ref.current).attr(\"opacity\", 0);\r\n      })\r\n      .on(\"mouseover.tooltip\", () => {\r\n        d3.select(ref.current).attr(\"opacity\", 1);\r\n      })\r\n      .on(\"mousemove.tooltip\", () => {\r\n        d3.select(ref.current)\r\n          .selectAll(\".tooltipLinePoint\")\r\n          .attr(\"opacity\", 1);\r\n        followPoints();\r\n      });\r\n  }, [anchorEl, followPoints]);\r\n\r\n  if (!data.length) return null;\r\n\r\n  return (\r\n    <g ref={ref} opacity={0} {...props}>\r\n      <line className=\"tooltipLine\" />\r\n      <g className=\"tooltipContent\">\r\n        <rect className=\"contentBackground\" rx={4} ry={4} opacity={0.2} />\r\n        <text className=\"contentTitle\" transform=\"translate(4,14)\" />\r\n        <g className=\"content\" transform=\"translate(4,32)\">\r\n          {data.map(({ name, color }, i) => (\r\n            <g key={name} transform={`translate(6,${22 * i})`}>\r\n              <circle r={6} fill={color} />\r\n              <text className=\"performanceItemName\" transform=\"translate(10,4)\">\r\n                {name}\r\n              </text>\r\n              <text\r\n                className=\"performanceItemChange\"\r\n                opacity={0.5}\r\n                fontSize={10}\r\n              />\r\n              <text className=\"performanceItemFollowers\" />\r\n            </g>\r\n          ))}\r\n        </g>\r\n      </g>\r\n      {data.map(({ name }) => (\r\n        <circle className=\"tooltipLinePoint\" r={6} key={name} opacity={0} />\r\n      ))}\r\n    </g>\r\n  );\r\n};\r\n\r\nTooltip.propTypes = {\r\n  width: PropTypes.number,\r\n  height: PropTypes.number,\r\n  margin: PropTypes.shape({\r\n    top: PropTypes.number,\r\n    bottom: PropTypes.number,\r\n    left: PropTypes.number,\r\n    right: PropTypes.number\r\n  }),\r\n  data: MultiLineDataPropTypes,\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  anchorEl: PropTypes.instanceOf(Element)\r\n};\r\n\r\nTooltip.defaultProps = {\r\n  width: 0,\r\n  height: 0,\r\n  margin: {\r\n    top: 0,\r\n    bottom: 0,\r\n    left: 0,\r\n    right: 0\r\n  },\r\n  data: [],\r\n  anchorEl: null\r\n};\r\n\r\nexport default Tooltip;\r\n","/* eslint-disable no-bitwise */\r\nimport * as d3 from \"d3\";\r\nimport { DateTime, Interval } from \"luxon\";\r\n\r\n// export const formatPriceUSD = (price) =>\r\n//   new Intl.NumberFormat(\"en-US\", { style: \"currency\", currency: \"USD\" }).format(\r\n//     price\r\n//   );\r\n\r\nexport const formatPercent = (percent = 0) => {\r\n  let result = \"0.00%\";\r\n  const isNumber = typeof percent === \"number\";\r\n  const isString = typeof percent === \"string\";\r\n  const isNotNaN = !Number.isNaN(parseFloat(percent));\r\n\r\n  if ((isNumber || isString) && isNotNaN) {\r\n    result = `${parseFloat(percent) > 0 ? \"+\" : \"\"}${d3.format(\".2%\")(\r\n      percent / 100\r\n    )}`;\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const getPeriod = (date) => {\r\n  if (!date) return 6;\r\n  const now = DateTime.utc();\r\n  const before = DateTime.fromJSDate(date);\r\n  const i = Interval.fromDateTimes(before, now);\r\n  return i.length(\"months\");\r\n};\r\n\r\nexport const getXTicks = (months) => {\r\n  if (months <= 2) return d3.timeDay.every(5).filter((d) => d.getDate() !== 31);\r\n  if (months <= 6) return d3.timeMonth.every(1);\r\n  if (months <= 13) return d3.timeMonth.every(2);\r\n  return d3.timeYear.every(1);\r\n};\r\n\r\nexport const getXTickFormat = (months) => {\r\n  if (months <= 2) return d3.timeFormat(\"%d %b\");\r\n  if (months <= 6) return d3.timeFormat(\"%b\");\r\n  if (months <= 13) return d3.timeFormat(\"%b %Y\");\r\n  return d3.timeFormat(\"%Y\");\r\n};\r\n","/** MultilineChart.controller.js */\r\nimport { useMemo } from \"react\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst useController = ({ data, width, height }) => {\r\n  const xMin = useMemo(\r\n    () => d3.min(data, ({ items }) => d3.min(items, ({ date }) => date)),\r\n    [data]\r\n  );\r\n\r\n  const xMax = useMemo(\r\n    () => d3.max(data, ({ items }) => d3.max(items, ({ date }) => date)),\r\n    [data]\r\n  );\r\n\r\n  const xScale = useMemo(\r\n    () => d3.scaleTime().domain([xMin, xMax]).range([0, width]),\r\n    [xMin, xMax, width]\r\n  );\r\n\r\n  const yMin = useMemo(\r\n    () => d3.min(data, ({ items }) => d3.min(items, ({ followers }) => followers)),\r\n    [data]\r\n  );\r\n\r\n  const yMax = useMemo(\r\n    () => d3.max(data, ({ items }) => d3.max(items, ({followers}) => followers)),\r\n    [data]\r\n  );\r\n\r\n  const yScale = useMemo(() => {\r\n    const indention = (yMax - yMin) * 0.5;\r\n    return d3\r\n      .scaleLinear()\r\n      .domain([yMin - indention, yMax + indention])\r\n      .range([height, 0]);\r\n  }, [height, yMin, yMax]);\r\n\r\n  const yScaleForAxis = useMemo(\r\n    () => d3.scaleBand().domain([yMin, yMax]).range([height, 0]),\r\n    [height, yMin, yMax]\r\n  );\r\n\r\n  const yTickFormat = (d) => {\r\n\r\n    return d\r\n    // `${parseFloat(d) > 0 ? \"+\" : \"\"}${d3.format(\".2%\")(d / 100)}`;\r\n  }\r\n  const xTickFormat = (d) => {\r\n    if (d3.timeFormat(\"%b\")(d) === \"Jan\") {\r\n      return d3.timeFormat(\"%Y\")(d);\r\n    }\r\n    return d3.timeFormat(\"%b\")(d);\r\n  };\r\n  return {\r\n    yTickFormat,\r\n    xScale,\r\n    yScale,\r\n    yScaleForAxis,\r\n    xTickFormat\r\n  };\r\n};\r\n\r\nexport default useController;\r\n","import React from 'react';\r\nimport ResizeObserver from 'resize-observer-polyfill';\r\n\r\n/**\r\n * Use ResizeObserver to listen for the changes to the dimensions of an element\r\n * @params ref - React ref\r\n * @returns {object} - { width, height, top, left }\r\n */\r\nconst useResize = (ref) => {\r\n  const [dimensions, setDimensions] = React.useState(null);\r\n  React.useEffect(() => {\r\n    const element = ref.current;\r\n    const resizeObserver = new ResizeObserver((entries) => {\r\n      entries.forEach((entry) => {\r\n        setDimensions(entry.contentRect);\r\n      });\r\n    });\r\n    resizeObserver.observe(element);\r\n    return () => {\r\n      resizeObserver.unobserve(element);\r\n    };\r\n  }, [ref]);\r\n  return dimensions || {\r\n    width: 0,\r\n    height: 0,\r\n    top: 0,\r\n    left: 0,\r\n  };\r\n};\r\n\r\nexport default useResize;\r\n","import React from \"react\";\r\nimport useResize from \"./useResize\";\r\n\r\nconst useDimensions = ({ maxHeight, margin = {}, scaleCoef = 0.5 }) => {\r\n  const ref = React.useRef(null);\r\n  const { width } = useResize(ref);\r\n\r\n  const height =\r\n    !maxHeight || width * scaleCoef < maxHeight ? width * scaleCoef : maxHeight;\r\n  const innerWidth = width - (margin.left || 0) - (margin.right || 0);\r\n  const innerHeight = height - (margin.top || 0) - (margin.bottom || 0);\r\n\r\n  return [\r\n    ref,\r\n    {\r\n      svgWidth: width,\r\n      svgHeight: height,\r\n      width: innerWidth,\r\n      height: innerHeight\r\n    }\r\n  ];\r\n};\r\n\r\nexport default useDimensions;\r\n","/** MultilineChart.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { MultiLineDataPropTypes } from \"../utils/propTypes\";\r\nimport { Line, Axis, GridLine, Overlay, Tooltip, Area } from \"../components\";\r\nimport useController from \"./MultilineChart.controller\";\r\nimport useDimensions from \"../utils/useDimensions\";\r\n\r\nconst MultilineChart = ({ data = [], margin = {} }) => {\r\n  const overlayRef = React.useRef(null);\r\n  const [containerRef, { svgWidth, svgHeight, width, height }] = useDimensions({\r\n    maxHeight: 400,\r\n    margin\r\n  });\r\n  const controller = useController({ data, width, height });\r\n  const {\r\n    yTickFormat,\r\n    xTickFormat,\r\n    xScale,\r\n    yScale,\r\n    yScaleForAxis\r\n  } = controller;\r\n\r\n  return (\r\n    <div ref={containerRef}>\r\n      <svg width={svgWidth} height={svgHeight}>\r\n        <g transform={`translate(${margin.left},${margin.top})`}>\r\n          <GridLine\r\n            type=\"vertical\"\r\n            scale={xScale}\r\n            ticks={5}\r\n            size={height}\r\n            transform={`translate(0, ${height})`}\r\n          />\r\n          <GridLine\r\n            type=\"horizontal\"\r\n            scale={yScaleForAxis}\r\n            ticks={2}\r\n            size={width}\r\n          />\r\n          <GridLine\r\n            type=\"horizontal\"\r\n            className=\"baseGridLine\"\r\n            scale={yScale}\r\n            ticks={1}\r\n            size={width}\r\n            disableAnimation\r\n          />\r\n          {data.map(({ name, items = [], color }) => (\r\n            <Line\r\n              key={name}\r\n              data={items}\r\n              xScale={xScale}\r\n              yScale={yScale}\r\n              color={color}\r\n            />\r\n          ))}\r\n          {/* <Area data={data[0].items} xScale={xScale} yScale={yScale} /> */}\r\n          <Axis\r\n            type=\"left\"\r\n            scale={yScaleForAxis}\r\n            transform=\"translate(0, -10)\"\r\n            ticks={5}\r\n            tickFormat={yTickFormat}\r\n          />\r\n          <Overlay ref={overlayRef} width={width} height={height}>\r\n            <Axis\r\n              type=\"bottom\"\r\n              className=\"axisX\"\r\n              anchorEl={overlayRef.current}\r\n              scale={xScale}\r\n              transform={`translate(10, ${height - height / 6})`}\r\n              ticks={5}\r\n              tickFormat={xTickFormat}\r\n            />\r\n            <Tooltip\r\n              className=\"tooltip\"\r\n              anchorEl={overlayRef.current}\r\n              width={width}\r\n              height={height}\r\n              margin={margin}\r\n              xScale={xScale}\r\n              yScale={yScale}\r\n              data={data}\r\n            />\r\n          </Overlay>\r\n        </g>\r\n      </svg>\r\n    </div>\r\n  );\r\n};\r\n\r\nMultilineChart.propTypes = {\r\n  data: MultiLineDataPropTypes,\r\n  margin: PropTypes.shape({\r\n    top: PropTypes.number,\r\n    bottom: PropTypes.number,\r\n    left: PropTypes.number,\r\n    right: PropTypes.number\r\n  })\r\n};\r\n\r\nMultilineChart.defaultProps = {\r\n  data: [],\r\n  margin: {\r\n    top: 30,\r\n    right: 15,\r\n    bottom: 15,\r\n    left: 15\r\n  }\r\n};\r\n\r\nexport default MultilineChart;\r\n","import React from \"react\";\r\n\r\nconst Legend = ({ data, selectedItems, onChange }) => (\r\n  <div className=\"legendContainer\">\r\n    {data.map((d) => (\r\n      <div className=\"checkbox\" style={{ color: d.color }} key={d.name}>\r\n        <label>\r\n          {d.name !== \"Total\" && (\r\n            <input\r\n              type=\"checkbox\"\r\n              value={d.name}\r\n              checked={selectedItems.includes(d.name)}\r\n              onChange={() => onChange(d.name)}\r\n            />\r\n          )}\r\n          {d.name}\r\n        </label>\r\n      </div>\r\n    ))}\r\n  </div>\r\n);\r\n\r\nexport default Legend;\r\n","import { dailMaker } from \"./tdGenerator\";\r\n\r\n\r\nexport const chamber = dailMaker(54)\r\n\r\nexport const current = chamber[0].followerData.length - 1\r\n","import { format, interpolate } from \"d3\"\r\n\r\nexport function dailMaker(weeks) {\r\n\r\n    var arr = [];\r\n\r\n    for(let i = 0; i < 160; i++) {\r\n\r\n    var id =+ i;\r\n\r\n    function name() {\r\n\r\n        const nameList = [\"Al \", \"Leo \", \"Mick \", \"Paddy \", \"Mary \", \"Mona \", \"Holly \", \"Thomas \", \"Michael \", \"Eamon \"];\r\n        \r\n        const surnameList = [\"Varadkar\", \"Martin\", \"Ryan\", \"Zappone\", \"Cairns\", \"Byrne\", \"O' Callaghan\", \"Lou MacDonald\", \"Haughey\", \"Ahern\"]\r\n       \r\n        var a = Math.floor(Math.random() * 10);\r\n        var b = Math.floor(Math.random() * 10);\r\n\r\n        var c = nameList[a].concat(surnameList[b])\r\n\r\n        return c\r\n    }\r\n\r\n    \r\n    var a = Math.floor(Math.random() * 8)\r\n\r\n    function party() {\r\n\r\n        const parties = [\"sf\", \"ff\", \"fg\", \"l\", \"ind\", \"grn\", \"pbp\", \"ia\"]\r\n\r\n        return parties[a]\r\n\r\n    } \r\n\r\n    function partyName() {\r\n\r\n\r\n            const partyNames = [\"Sinn Féin\",\"Fianna Fáil\",\"Fine Gael\", \"Labour\", \"Independent\", \"Green Party\", \"People Before Profit\", \"Independent Alliance\"]\r\n\r\n            return partyNames[a]\r\n        \r\n\r\n    }\r\n    \r\n    function partyColor() {\r\n\r\n        //const partyColor = [{\"sf\": \"#326760\"}, { \"ff\" : \"#66BB66\"}, {\"fg\":\"#6699FF\"}, {\"l\":\"#CC0000\"}, {\"ind\":\"white\"}, {\"grn\":\"#99CC33\"}, {\"pbp\":\"#660000\"}, {\"ia\": \"#CCCCFF\"}]\r\n        \r\n        const partyColors = [\"#326760\",\"#66BB66\",\"#6699FF\",\"#CC0000\",\"white\",\"#99CC33\",\"#660000\", \"#CCCCFF\"]\r\n\r\n        return partyColors[a]\r\n\r\n    }\r\n\r\n    function mOG() {\r\n\r\n        const isOf = [true, false]\r\n\r\n        var a = Math.floor(Math.random() * 2)\r\n\r\n        return isOf[a]\r\n    }\r\n\r\n\r\n    function followers(weeks) {\r\n\r\n\r\n    \r\n\r\n        var arr = [];\r\n        var followArr = [];\r\n        var dateArr = [];\r\n        var changeArr = [];\r\n        \r\n        function weekDate (weeks) {\r\n\r\n            for(let i = 0; i < weeks; i++) {\r\n\r\n            var date = new Date();\r\n            date.setDate(date.getDate() + (7 * i));\r\n\r\n                function formatDate(date) {\r\n\r\n                    var d = new Date(date),\r\n                        month = '' + (d.getMonth() + 1),\r\n                        day = '' + d.getDate(),\r\n                        year = d.getFullYear();\r\n                \r\n                    if (month.length < 2) \r\n                        month = '0' + month;\r\n                    if (day.length < 2) \r\n                        day = '0' + day;\r\n                \r\n                    return [year, month, day].join('-');\r\n                }\r\n\r\n            dateArr.push(formatDate(date));\r\n        }\r\n\r\n\r\n    return dateArr\r\n}\r\n\r\n    weekDate(weeks);\r\n\r\n\r\n        function follows (weeks) {\r\n\r\n            var base = 1000;\r\n\r\n            //first week\r\n            followArr.push(base);\r\n            \r\n            for( let i = 0; i < weeks - 1; i++) {\r\n\r\n                base =+ (base + Math.floor(Math.random() * 99))\r\n                followArr.push(base)\r\n            }\r\n        }\r\n\r\n    follows(weeks);\r\n\r\n        function change() {\r\n\r\n            for( let i = 0; i < followArr.length; i++) {\r\n\r\n                var lastWeek  = followArr[i - 1]\r\n                var thisWeek = followArr[i]\r\n                var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n                \r\n                //filter NaN at start\r\n\r\n                if(diff !== diff) {changeArr.push(0)} else {\r\n                changeArr.push(diff)\r\n                }\r\n            }\r\n        }\r\n\r\n        change();\r\n\r\n        function toObj(weeks) {\r\n\r\n        \r\n        for(let i = 0; i < weeks; i++) {\r\n\r\n            var followObj = new Object;\r\n            var date = dateArr[i];\r\n            var followers = followArr[i];\r\n            var change = changeArr[i];\r\n\r\n            followObj.date = date;\r\n            followObj.followers = followers;\r\n            followObj.change = change;\r\n            \r\n            arr.push(followObj)\r\n        }\r\n        return arr\r\n        }\r\n\r\n        toObj(weeks);\r\n\r\n        return arr\r\n\r\n    }\r\n\r\n    function retweets(weeks) {\r\n\r\n\r\n    \r\n\r\n        var arr = [];\r\n        var retweetArr = [];\r\n        var dateArr = [];\r\n        var changePerArr = [];\r\n        var changeNumArr = [];\r\n        \r\n        function weekDate (weeks) {\r\n\r\n            for(let i = 0; i < weeks; i++) {\r\n\r\n            var date = new Date();\r\n            date.setDate(date.getDate() + (7 * i));\r\n\r\n                function formatDate(date) {\r\n\r\n                    var d = new Date(date),\r\n                        month = '' + (d.getMonth() + 1),\r\n                        day = '' + d.getDate(),\r\n                        year = d.getFullYear();\r\n                \r\n                    if (month.length < 2) \r\n                        month = '0' + month;\r\n                    if (day.length < 2) \r\n                        day = '0' + day;\r\n                \r\n                    return [year, month, day].join('-');\r\n                }\r\n\r\n            dateArr.push(formatDate(date));\r\n        }\r\n\r\n\r\n    return dateArr\r\n}\r\n\r\n    weekDate(weeks);\r\n\r\n\r\n        function retweets (weeks) {\r\n\r\n            var base = 450;\r\n\r\n            //first week\r\n            retweetArr.push(base);\r\n            \r\n            for( let i = 0; i < weeks - 1; i++) {\r\n\r\n                base =+ (base + Math.floor(Math.random() * 99))\r\n                retweetArr.push(base)\r\n            }\r\n        }\r\n\r\n    retweets(weeks);\r\n\r\n        function changePer() {\r\n\r\n            for( let i = 0; i < retweetArr.length; i++) {\r\n\r\n                var lastWeek  = retweetArr[i - 1]\r\n                var thisWeek = retweetArr[i]\r\n                var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n                \r\n                //filter NaN at start\r\n\r\n                if(diff !== diff) {changePerArr.push(0)} else {\r\n                changePerArr.push(diff)\r\n                }\r\n            }\r\n        }\r\n\r\n        changePer();\r\n\r\n        function changeNum() {\r\n\r\n            for( let i = 0; i < retweetArr.length; i++) {\r\n\r\n                var lastWeek  = retweetArr[i - 1]\r\n                var thisWeek = retweetArr[i]\r\n                var diff = thisWeek - lastWeek\r\n                \r\n                //filter NaN at start\r\n\r\n                if(diff !== diff) {changeNumArr.push(0)} else {\r\n                changeNumArr.push(diff)\r\n                }\r\n            }\r\n        }\r\n\r\n        changeNum();\r\n\r\n\r\n\r\n        function toObj(weeks) {\r\n\r\n        \r\n        for(let i = 0; i < weeks; i++) {\r\n\r\n            var retweetObj = new Object;\r\n            var date = dateArr[i];\r\n            var retweets = retweetArr[i];\r\n            var changeNum = changeNumArr[i]\r\n            var changePer = changePerArr[i];\r\n\r\n            retweetObj.date = date;\r\n            retweetObj.retweets = retweets;\r\n            retweetObj.changeNum = changeNum;\r\n            retweetObj.changePer = changePer;\r\n\r\n            arr.push(retweetObj)\r\n        }\r\n        return arr\r\n        }\r\n\r\n        toObj(weeks);\r\n\r\n        return arr\r\n\r\n    }\r\n\r\n    function sentiment() {\r\n\r\n        return Math.random() * 1\r\n\r\n    }\r\n\r\n    function img() {\r\n\r\n        const imgArr = \r\n    [\"https://data.oireachtas.ie/ie/oireachtas/member/id/Damien-English.D.2002-06-06/image/large\",\r\n    \"https://data.oireachtas.ie/ie/oireachtas/member/id/Peadar-T%C3%B3ib%C3%ADn.D.2011-03-09/image/large\",\r\n    \"https://data.oireachtas.ie/ie/oireachtas/member/id/Johnny-Guirke.D.2020-02-08/image/large\",\r\n    \"https://data.oireachtas.ie/ie/oireachtas/member/id/Eamon-Ryan.D.2002-06-06/image/large\",\r\n    \"https://data.oireachtas.ie/ie/oireachtas/member/id/Leo-Varadkar.D.2007-06-14/image/large\",\r\n    \"https://data.oireachtas.ie/ie/oireachtas/member/id/Holly-Cairns.D.2020-02-08/image/large\",\r\n    \"https://data.oireachtas.ie/ie/oireachtas/member/id/Miche%C3%A1l-Martin.D.1989-06-29/image/large\"\r\n    ]\r\n\r\n    var a = Math.floor(Math.random() * 7)\r\n\r\n    return imgArr[a]\r\n\r\n\r\n    }\r\n\r\n\r\n    function TD() {\r\n\r\n        this.id = id\r\n        this.name = name()\r\n        this.img = img()\r\n        this.party = party()\r\n        this.partyName= partyName()\r\n        this.partyColor = partyColor()\r\n        this.mOG = mOG()\r\n        this.followerData = followers(weeks)\r\n        this.totalFollowers = this.followerData[this.followerData.length - 1].followers\r\n        this.retweetData = retweets(weeks)\r\n        this.totalRetweets = this.retweetData[this.retweetData.length - 1].retweets\r\n        this.sentiment = sentiment()\r\n    }\r\n\r\n\r\n    arr.push(new TD)\r\n\r\n}\r\n\r\nreturn arr\r\n\r\n}","import { chamber } from \"./rollCall\";\r\nimport * as d3 from 'd3'\r\n\r\n\r\nexport const weeks = chamber[0].followerData.length\r\n\r\nexport function chamberFollowerRanking() {\r\n\r\n    var followerSortedChamber = chamber.sort(function(a, b) {\r\n\r\n        return d3.descending(a.totalFollowers, b.totalFollowers)\r\n    \r\n         })\r\n\r\n         return followerSortedChamber\r\n\r\n}\r\n\r\n\r\nexport function chamberRetweetRanking() {\r\n\r\n    var retweetSortedChamber = chamber.sort(function(a, b) {\r\n\r\n        return d3.descending(a.totalRetweets, b.totalRetweets)\r\n    \r\n         })\r\n\r\n         return retweetSortedChamber\r\n\r\n}\r\n\r\n\r\nexport function chamberStats() {\r\n\r\n    var weeks = chamber[0].followerData.length\r\n\r\n\r\n    function follows() {\r\n        \r\n        var chamberFollowers = chamber.map(td => td.followerData[0].followers)\r\n\r\n        var chamberFollowersTotal = chamberFollowers.reduce((a, b) => a + b, 0)\r\n\r\n        return chamberFollowersTotal\r\n\r\n    }\r\n\r\n\r\n\r\n    function followers() {\r\n\r\n\r\n    \r\n\r\n        var arr = [];\r\n        var followArr = [];\r\n        var dateArr = [];\r\n        var changeArr = [];\r\n        \r\n        function weekDate () {\r\n\r\n            for(let i = 0; i < weeks; i++) {\r\n\r\n            var date = new Date();\r\n            date.setDate(date.getDate() + (7 * i));\r\n\r\n                function formatDate(date) {\r\n\r\n                    var d = new Date(date),\r\n                        month = '' + (d.getMonth() + 1),\r\n                        day = '' + d.getDate(),\r\n                        year = d.getFullYear();\r\n                \r\n                    if (month.length < 2) \r\n                        month = '0' + month;\r\n                    if (day.length < 2) \r\n                        day = '0' + day;\r\n                \r\n                    return [year, month, day].join('-');\r\n                }\r\n\r\n            dateArr.push(formatDate(date));\r\n        }\r\n\r\n\r\n    return dateArr\r\n}\r\n\r\n    weekDate();\r\n\r\n\r\n        function follows () {\r\n            \r\n            for( let i = 0; i < weeks; i++) {\r\n\r\n\r\n                var chamberFollowers = chamber.map(td => td.followerData[i].followers)\r\n\r\n                var chamberFollowersTotal = chamberFollowers.reduce((a, b) => a + b, 0)\r\n\r\n                followArr.push(chamberFollowersTotal)\r\n        \r\n            }\r\n        }\r\n\r\n    follows();\r\n\r\n        function change() {\r\n\r\n            for( let i = 0; i < followArr.length; i++) {\r\n\r\n                var lastWeek  = followArr[i - 1]\r\n                var thisWeek = followArr[i]\r\n                var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n                \r\n                //filter NaN at start\r\n\r\n                if(diff !== diff) {changeArr.push(0)} else {\r\n                changeArr.push(diff)\r\n                }\r\n            }\r\n        }\r\n\r\n        change();\r\n\r\n        function toObj() {\r\n\r\n        \r\n        for(let i = 0; i < weeks; i++) {\r\n\r\n            var followObj = new Object;\r\n            var date = dateArr[i];\r\n            var followers = followArr[i];\r\n            var change = changeArr[i];\r\n\r\n            followObj.date = date;\r\n            followObj.followers = followers;\r\n            followObj.change = change;\r\n            \r\n            arr.push(followObj)\r\n        }\r\n        return arr\r\n        }\r\n\r\n        toObj();\r\n\r\n        return arr\r\n\r\n    }\r\n\r\n    function retweets() {\r\n\r\n\r\n    \r\n\r\n        var arr = [];\r\n        var retweetArr = [];\r\n        var dateArr = [];\r\n        var changeArr = [];\r\n        \r\n        function weekDate () {\r\n\r\n            for(let i = 0; i < weeks; i++) {\r\n\r\n            var date = new Date();\r\n            date.setDate(date.getDate() + (7 * i));\r\n\r\n                function formatDate(date) {\r\n\r\n                    var d = new Date(date),\r\n                        month = '' + (d.getMonth() + 1),\r\n                        day = '' + d.getDate(),\r\n                        year = d.getFullYear();\r\n                \r\n                    if (month.length < 2) \r\n                        month = '0' + month;\r\n                    if (day.length < 2) \r\n                        day = '0' + day;\r\n                \r\n                    return [year, month, day].join('-');\r\n                }\r\n\r\n            dateArr.push(formatDate(date));\r\n        }\r\n\r\n\r\n    return dateArr\r\n}\r\n\r\n    weekDate();\r\n\r\n\r\n        function retweets () {\r\n            \r\n            for( let i = 0; i < weeks; i++) {\r\n\r\n\r\n                var chamberRetweets = chamber.map(td => td.retweetData[i].retweets)\r\n\r\n                var chamberRetweetsTotal = chamberRetweets.reduce((a, b) => a + b, 0)\r\n\r\n                retweetArr.push(chamberRetweetsTotal)\r\n        \r\n            }\r\n        }\r\n\r\n    retweets();\r\n\r\n        function change() {\r\n\r\n            for( let i = 0; i < retweetArr.length; i++) {\r\n\r\n                var lastWeek  = retweetArr[i - 1]\r\n                var thisWeek = retweetArr[i]\r\n                var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n                \r\n                //filter NaN at start\r\n\r\n                if(diff !== diff) {changeArr.push(0)} else {\r\n                changeArr.push(diff)\r\n                }\r\n            }\r\n        }\r\n\r\n        change();\r\n\r\n        function toObj() {\r\n\r\n        \r\n        for(let i = 0; i < weeks; i++) {\r\n\r\n            var retweetObj = new Object;\r\n            var date = dateArr[i];\r\n            var retweets = retweetArr[i];\r\n            var change = changeArr[i];\r\n\r\n            retweetObj.date = date;\r\n            retweetObj.retweets = retweets;\r\n            retweetObj.change = change;\r\n            \r\n            arr.push(retweetObj)\r\n        }\r\n        return arr\r\n        }\r\n\r\n        toObj();\r\n\r\n        return arr\r\n\r\n    }\r\n\r\n\r\n\r\n    function ChamberObj() {\r\n\r\n        this.name = 'Dáil Éireann'\r\n        this.followerData = followers()\r\n        this.retweetData = retweets()\r\n\r\n    }\r\n\r\n    return new ChamberObj\r\n\r\n\r\n\r\n}\r\n\r\nexport function justParty(party, data) {\r\n\r\n    var TDData = data\r\n\r\n    var just = TDData.filter(td => td.party == party)\r\n\r\n    return just\r\n\r\n}\r\n\r\n\r\nexport function partyStats(party) {\r\n\r\n    //chamber\r\n    var currentParty = justParty(party) \r\n\r\n    function followers() {\r\n\r\n        var arr = [];\r\n        var followArr = [];\r\n        var dateArr = [];\r\n        var changeArr = [];\r\n        \r\n        function weekDate () {\r\n\r\n            for(let i = 0; i < weeks; i++) {\r\n\r\n            var date = new Date();\r\n            date.setDate(date.getDate() + (7 * i));\r\n\r\n                function formatDate(date) {\r\n\r\n                    var d = new Date(date),\r\n                        month = '' + (d.getMonth() + 1),\r\n                        day = '' + d.getDate(),\r\n                        year = d.getFullYear();\r\n                \r\n                    if (month.length < 2) \r\n                        month = '0' + month;\r\n                    if (day.length < 2) \r\n                        day = '0' + day;\r\n                \r\n                    return [year, month, day].join('-');\r\n                }\r\n\r\n            dateArr.push(formatDate(date));\r\n        }\r\n\r\n\r\n    return dateArr\r\n}\r\n\r\n    weekDate();\r\n\r\n\r\n        function follows () {\r\n            \r\n            for( let i = 0; i < weeks; i++) {\r\n\r\n\r\n                var partyFollowers = currentParty.map(td => td.followerData[i].followers)\r\n\r\n                var partyFollowersTotal = partyFollowers.reduce((a, b) => a + b, 0)\r\n\r\n                followArr.push(partyFollowersTotal)\r\n        \r\n            }\r\n        }\r\n\r\n    follows();\r\n\r\n        function change() {\r\n\r\n            for( let i = 0; i < followArr.length; i++) {\r\n\r\n                var lastWeek  = followArr[i - 1]\r\n                var thisWeek = followArr[i]\r\n                var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n                \r\n                //filter NaN at start\r\n\r\n                if(diff !== diff) {changeArr.push(0)} else {\r\n                changeArr.push(diff)\r\n                }\r\n            }\r\n        }\r\n\r\n        change();\r\n\r\n        function toObj() {\r\n\r\n        for(let i = 0; i < weeks; i++) {\r\n\r\n            var followObj = new Object;\r\n            var date = dateArr[i];\r\n            var followers = followArr[i];\r\n            var change = changeArr[i];\r\n\r\n            followObj.date = date;\r\n            followObj.followers = followers;\r\n            followObj.change = change;\r\n            \r\n            arr.push(followObj)\r\n\r\n            \r\n        }\r\n    return arr\r\n        \r\n        }\r\n\r\n        toObj();\r\n\r\n\r\n        return arr\r\n    } \r\n\r\n    function retweets() {\r\n\r\n        var arr = [];\r\n        var retweetArr = [];\r\n        var dateArr = [];\r\n        var changeArr = [];\r\n        \r\n        function weekDate () {\r\n\r\n            for(let i = 0; i < weeks; i++) {\r\n\r\n            var date = new Date();\r\n            date.setDate(date.getDate() + (7 * i));\r\n\r\n                function formatDate(date) {\r\n\r\n                    var d = new Date(date),\r\n                        month = '' + (d.getMonth() + 1),\r\n                        day = '' + d.getDate(),\r\n                        year = d.getFullYear();\r\n                \r\n                    if (month.length < 2) \r\n                        month = '0' + month;\r\n                    if (day.length < 2) \r\n                        day = '0' + day;\r\n                \r\n                    return [year, month, day].join('-');\r\n                }\r\n\r\n            dateArr.push(formatDate(date));\r\n        }\r\n\r\n\r\n    return dateArr\r\n}\r\n\r\n    weekDate();\r\n\r\n\r\n        function retweets () {\r\n            \r\n            for( let i = 0; i < weeks; i++) {\r\n\r\n\r\n                var partyRetweets = currentParty.map(td => td.retweetData[i].retweets)\r\n\r\n                var partyRetweetsTotal = partyRetweets.reduce((a, b) => a + b, 0)\r\n\r\n                retweetArr.push(partyRetweetsTotal)\r\n        \r\n            }\r\n        }\r\n\r\n    retweets();\r\n\r\n        function change() {\r\n\r\n            for( let i = 0; i < retweetArr.length; i++) {\r\n\r\n                var lastWeek  = retweetArr[i - 1]\r\n                var thisWeek = retweetArr[i]\r\n                var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n                \r\n                //filter NaN at start\r\n\r\n                if(diff !== diff) {changeArr.push(0)} else {\r\n                changeArr.push(diff)\r\n                }\r\n            }\r\n        }\r\n\r\n        change();\r\n\r\n        function toObj() {\r\n\r\n        for(let i = 0; i < weeks; i++) {\r\n\r\n            var retweetObj = new Object;\r\n            var date = dateArr[i];\r\n            var retweets = retweetArr[i];\r\n            var change = changeArr[i];\r\n\r\n            retweetObj.date = date;\r\n            retweetObj.retweets = retweets;\r\n            retweetObj.change = change;\r\n            \r\n            arr.push(retweetObj)\r\n\r\n            \r\n        }\r\n    return arr\r\n        \r\n        }\r\n\r\n        toObj();\r\n\r\n\r\n        return arr\r\n    }\r\n\r\n\r\n    function PartyObj() {\r\n\r\n        this.id = justParty(party)[0].party\r\n        this.name = justParty(party)[0].partyName\r\n        this.partyColor = justParty(party)[0].partyColor\r\n        this.followerData = followers()\r\n        this.retweetData = retweets()\r\n\r\n    }\r\n\r\n    return new PartyObj()\r\n}\r\n\r\nexport function allParties() {\r\n\r\n    const parties = [];\r\n\r\n    const partyIDs = [\"sf\", \"ff\", \"fg\", \"ind\", \"grn\", \"pbp\", \"l\", \"ia\"];\r\n\r\n\r\n    for(let i = 0; i < partyIDs.length; i++) {\r\n        parties.push(partyStats(partyIDs[i]))\r\n    }\r\n\r\n    return parties\r\n\r\n\r\n}\r\n\r\n","/** App.js */\r\nimport React, {useState, useEffect} from \"react\";\r\nimport MultilineChart from \"./views/MultilineChart\";\r\nimport Legend from \"./components/Legend\";\r\nimport vcit from \"./data/VCIT.json\";\r\nimport portfolio from \"./data/portfolio.json\";\r\nimport schc from \"./data/SCHC.json\";\r\nimport \"./styles.css\";\r\nimport fiannafail from \"./data/fiannaFail.json\"\r\nimport finegael from \"./data/finegael.json\"\r\nimport ind from \"./data/ind.json\"\r\nimport sinnfein from \"./data/sinnfein.json\"\r\nimport labour from \"./data/labour.json\"\r\nimport { chamberStats } from './../../../Backend/metaData';\r\nimport axios from \"axios\";\r\nimport { Typography } from \"@material-ui/core\";\r\n\r\n\r\n\r\n\r\n\r\nexport default function MultilineAppV3PartyFollowers ({data}) {\r\n\r\n  const [selectedItems, setSelectedItems] = useState([\"Aontú\", \"Independents\", \"Green Party\", \"Labour\", \"Fianna Fáil\", \"Fine Gael\", \"Social Democrats\", \"People Before Profit\", \"Independents 4 Change\", \"Sinn Féin\"]);\r\n  const [TDData, setTDData] = useState(null)\r\n  \r\n  \r\n  \r\n  useEffect(() => {\r\n\r\n    setTDData(data.filter(function(d) {\r\n          \r\n      if(d.followerData[0] != undefined) {\r\n      return d\r\n    }\r\n  }\r\n  ))\r\n\r\n}, []);\r\n\r\n\r\n\r\n\r\n\r\nconst onChangeSelection = (name) => {\r\n    const newSelectedItems = selectedItems.includes(name)\r\n      ? selectedItems.filter((item) => item !== name)\r\n      : [...selectedItems, name];\r\n    setSelectedItems(newSelectedItems);\r\n  };\r\n  \r\nif (!TDData) return null;\r\n\r\n\r\nconsole.log(TDData)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// const totalData = {\r\n//   name: \"Total\",\r\n//   color: \"#ffffff\",\r\n//   items: partyStats('sf').followerData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n// };\r\n  const weeks = TDData[0].followerData.length\r\n\r\nfunction justParty(party) {\r\n\r\n\r\n  var just = TDData.filter(td => td.party == party)\r\n\r\n  \r\n\r\n  return just\r\n\r\n}\r\n\r\nfunction partyStats(party) {\r\n\r\n  //chamber\r\n  var currentParty = justParty(party) \r\n\r\n  function followers() {\r\n\r\n      var arr = [];\r\n      var followArr = [];\r\n      // var dateArr = currentParty[0].followerData.map(d => d.date);\r\n      var dateArr = currentParty[0].followerData.map(function(d) {\r\n\r\n                      var apart = d.date.split('/')\r\n                      var day = apart[0]\r\n                      var month = apart[1]\r\n                      var year = apart[2]\r\n\r\n                      var together = []\r\n                      together.push(month, day, year)\r\n                      var allDone = together.toString().replace(\",\",\"/\").replace(\",\",\"/\")\r\n                      return allDone\r\n                    })\r\n      var changeArr = [];\r\n\r\n\r\n\r\n      console.log(currentParty[0].retweetData.map(function(d) {\r\n\r\n        var apart = d.date.split('/')\r\n        var day = apart[0]\r\n        var month = apart[1]\r\n        var year = apart[2]\r\n\r\n        var together = []\r\n        together.push(month, day, year)\r\n        var allDone = together.toString().replace(\",\",\"/\").replace(\",\",\"/\")\r\n        return allDone\r\n\r\n      }))\r\n\r\n      // function weekDate () {\r\n\r\n//           for(let i = 0; i < weeks; i++) {\r\n\r\n//           var date = new Date();\r\n//           date.setDate(date.getDate() + (7 * i));\r\n\r\n//               function formatDate(date) {\r\n\r\n//                   var d = new Date(date),\r\n//                       month = '' + (d.getMonth() + 1),\r\n//                       day = '' + d.getDate(),\r\n//                       year = d.getFullYear();\r\n              \r\n//                   if (month.length < 2) \r\n//                       month = '0' + month;\r\n//                   if (day.length < 2) \r\n//                       day = '0' + day;\r\n              \r\n//                   return [year, month, day].join('-');\r\n//               }\r\n\r\n//           dateArr.push(formatDate(date));\r\n//       }\r\n\r\n\r\n//   return dateArr\r\n// }\r\n\r\n//   weekDate();\r\n\r\n\r\n      function follows () {\r\n          \r\n          for( let i = 0; i < weeks; i++) {\r\n\r\n\r\n              var partyFollowers = currentParty.map(td => td.followerData[i].followers)\r\n\r\n              var partyFollowersTotal = partyFollowers.reduce((a, b) => a + b, 0)\r\n\r\n              followArr.push(partyFollowersTotal)\r\n      \r\n          }\r\n      }\r\n\r\n  follows();\r\n\r\n      function change() {\r\n\r\n          for( let i = 0; i < followArr.length; i++) {\r\n\r\n              var lastWeek  = followArr[i - 1]\r\n              var thisWeek = followArr[i]\r\n              var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n              \r\n              //filter NaN at start\r\n\r\n              if(diff !== diff) {changeArr.push(0)} else {\r\n              changeArr.push(diff)\r\n              }\r\n          }\r\n      }\r\n\r\n      change();\r\n\r\n      function toObj() {\r\n\r\n      for(let i = 0; i < weeks; i++) {\r\n\r\n          var followObj = new Object;\r\n          var date = dateArr[i];\r\n          var followers = followArr[i];\r\n          var change = changeArr[i];\r\n\r\n          followObj.date = date;\r\n          followObj.followers = followers;\r\n          followObj.change = change;\r\n          \r\n          arr.push(followObj)\r\n\r\n          \r\n      }\r\n  return arr\r\n      \r\n      }\r\n\r\n      toObj();\r\n\r\n\r\n      return arr\r\n  } \r\n\r\n  function retweets() {\r\n\r\n      var arr = [];\r\n      var retweetArr = [];\r\n      var dateArr = currentParty[0].retweetData.map(function(d) {\r\n\r\n        var apart = d.date.split('/')\r\n        var day = apart[0]\r\n        var month = apart[1]\r\n        var year = apart[2]\r\n\r\n        var together = []\r\n        together.push(month, day, year)\r\n        var allDone = together.toString().replace(\",\",\"/\").replace(\",\",\"/\")\r\n        return allDone\r\n\r\n      })\r\n      var changeArr = [];\r\n\r\n\r\n\r\n      \r\n//       function weekDate () {\r\n\r\n//           for(let i = 0; i < weeks; i++) {\r\n\r\n//           var date = new Date();\r\n//           date.setDate(date.getDate() + (7 * i));\r\n\r\n//               function formatDate(date) {\r\n\r\n//                   var d = new Date(date),\r\n//                       month = '' + (d.getMonth() + 1),\r\n//                       day = '' + d.getDate(),\r\n//                       year = d.getFullYear();\r\n              \r\n//                   if (month.length < 2) \r\n//                       month = '0' + month;\r\n//                   if (day.length < 2) \r\n//                       day = '0' + day;\r\n              \r\n//                   return [year, month, day].join('-');\r\n//               }\r\n\r\n//           dateArr.push(formatDate(date));\r\n//       }\r\n\r\n\r\n//   return dateArr\r\n// }\r\n\r\n//   weekDate();\r\n\r\n\r\n      function retweets () {\r\n          \r\n          for( let i = 0; i < weeks; i++) {\r\n\r\n\r\n              var partyRetweets = currentParty.map(td => td.retweetData[i].retweets)\r\n\r\n              var partyRetweetsTotal = partyRetweets.reduce((a, b) => a + b, 0)\r\n\r\n              retweetArr.push(partyRetweetsTotal)\r\n      \r\n          }\r\n      }\r\n\r\n  retweets();\r\n\r\n      function change() {\r\n\r\n          for( let i = 0; i < retweetArr.length; i++) {\r\n\r\n              var lastWeek  = retweetArr[i - 1]\r\n              var thisWeek = retweetArr[i]\r\n              var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n              \r\n              //filter NaN at start\r\n\r\n              if(diff !== diff) {changeArr.push(0)} else {\r\n              changeArr.push(diff)\r\n              }\r\n          }\r\n      }\r\n\r\n      change();\r\n\r\n      function toObj() {\r\n\r\n      for(let i = 0; i < weeks; i++) {\r\n\r\n          var retweetObj = new Object;\r\n          var date = dateArr[i];\r\n          var retweets = retweetArr[i];\r\n          var change = changeArr[i];\r\n\r\n          retweetObj.date = date;\r\n          retweetObj.retweets = retweets;\r\n          retweetObj.change = change;\r\n          \r\n          arr.push(retweetObj)\r\n\r\n          \r\n      }\r\n  return arr\r\n      \r\n      }\r\n\r\n      toObj();\r\n\r\n\r\n      return arr\r\n  }\r\n\r\n  function polarity() {\r\n\r\n    var arr = [];\r\n    var polarityArr = [];\r\n    var dateArr = currentParty[0].sentimentData.map(function(d) {\r\n\r\n      var apart = d.date.split('/')\r\n      var day = apart[0]\r\n      var month = apart[1]\r\n      var year = apart[2]\r\n\r\n      var together = []\r\n      together.push(month, day, year)\r\n      var allDone = together.toString().replace(\",\",\"/\").replace(\",\",\"/\")\r\n      return allDone\r\n\r\n    })\r\n    var changeArr = [];\r\n\r\n\r\n\r\n    \r\n//       function weekDate () {\r\n\r\n//           for(let i = 0; i < weeks; i++) {\r\n\r\n//           var date = new Date();\r\n//           date.setDate(date.getDate() + (7 * i));\r\n\r\n//               function formatDate(date) {\r\n\r\n//                   var d = new Date(date),\r\n//                       month = '' + (d.getMonth() + 1),\r\n//                       day = '' + d.getDate(),\r\n//                       year = d.getFullYear();\r\n            \r\n//                   if (month.length < 2) \r\n//                       month = '0' + month;\r\n//                   if (day.length < 2) \r\n//                       day = '0' + day;\r\n            \r\n//                   return [year, month, day].join('-');\r\n//               }\r\n\r\n//           dateArr.push(formatDate(date));\r\n//       }\r\n\r\n\r\n//   return dateArr\r\n// }\r\n\r\n//   weekDate();\r\n\r\n\r\n    function polarityAvg () {\r\n        \r\n        for( let i = 0; i < weeks; i++) {\r\n\r\n          var tdAmount = currentParty.length\r\n\r\n            var partyPolarity = currentParty.map(td => td.sentimentData[i].polarity)\r\n\r\n            var partyPolarityAvg = partyPolarity.reduce((a, b) => a + b, 0) \r\n\r\n            polarityArr.push(partyPolarityAvg)\r\n    \r\n        }\r\n    }\r\n\r\npolarityAvg();\r\n\r\n    function change() {\r\n\r\n        for( let i = 0; i < polarityArr.length; i++) {\r\n\r\n            var lastWeek  = polarityArr[i - 1]\r\n            var thisWeek = polarityArr[i]\r\n            var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n            \r\n            //filter NaN at start\r\n\r\n            if(diff !== diff) {changeArr.push(0)} else {\r\n            changeArr.push(diff)\r\n            }\r\n        }\r\n    }\r\n\r\n    change();\r\n\r\n    function toObj() {\r\n\r\n    for(let i = 0; i < weeks; i++) {\r\n\r\n        var polarityObj = new Object;\r\n        var date = dateArr[i];\r\n        var polAvg = polarityArr[i];\r\n        var change = changeArr[i];\r\n\r\n        polarityObj.date = date;\r\n        polarityObj.polarityAvg = polAvg\r\n        polarityObj.change = change;\r\n        \r\n        arr.push(polarityObj)\r\n\r\n        \r\n    }\r\nreturn arr\r\n    \r\n    }\r\n\r\n    toObj();\r\n\r\n\r\n    return arr\r\n}\r\n\r\n\r\n  function PartyObj() {\r\n\r\n      this.id = justParty(party)[0].party\r\n      this.name = justParty(party)[0].partyName\r\n      this.partyColor = justParty(party)[0].partyColor\r\n      this.followerData = followers()\r\n      this.retweetData = retweets()\r\n      this.polarityData = polarity()\r\n\r\n  }\r\n\r\n  return new PartyObj()\r\n}\r\n\r\nconsole.log(partyStats(\"Aontú\", TDData))\r\n\r\nconst fineGaelData = {\r\n  name: \"Fine Gael\",\r\n  color: \"#6699FF\",\r\n  items: partyStats('Fine Gael', TDData).followerData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconsole.log(fineGaelData)\r\nconst sinnFeinData = {\r\n  name: \"Sinn Féin\",\r\n  color: \"#326760\",\r\n  items: partyStats(\"Sinn Féin\", TDData).followerData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconst fiannaFailData = {\r\n  name: \"Fianna Fáil\",\r\n  color: \"#66BB66\",\r\n  items: partyStats('Fianna Fáil', TDData).followerData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconst labourData = {\r\n  name: \"Labour\",\r\n  color: \"#CC0000\",\r\n  items: partyStats('Labour Party', TDData).followerData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconst peopleBeforeProfitData = {\r\n  name: \"People Before Profit\",\r\n  color: \"#660000\",\r\n  items: partyStats('Solidarity - People Before Profit', TDData).followerData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconst independentData = {\r\n  name: \"Independents\",\r\n  color: \"white\",\r\n  items: partyStats('Independent').followerData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconst greenPartyData = {\r\n  name: \"Green Party\",\r\n  color: \"#99CC33\",\r\n  items: partyStats('Green Party').followerData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconst independents4ChangeData = {\r\n  name: \"Independents 4 Change\",\r\n  color: \"grey\",\r\n  items: partyStats('Independents 4 Change').followerData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconst aontuData = {\r\n  name: \"Aontú\",\r\n  color: \"#44532A\",\r\n  items: partyStats('Aontú').followerData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconst socDemData = {\r\n  name: \"Social Democrats\",\r\n  color: \"#752F8B\",\r\n  items: partyStats('Social Democrats').followerData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\n  console.log(partyStats(\"Aontú\"))\r\n  console.log(aontuData)\r\n  \r\n\r\n  \r\n  const chartData = [\r\n    ...[fineGaelData, fiannaFailData, sinnFeinData, labourData, independentData,  independents4ChangeData, peopleBeforeProfitData, greenPartyData, aontuData, socDemData].filter((d) => selectedItems.includes(d.name))\r\n  ];\r\n\r\n  \r\n\r\n\r\nconst legendData = [ fineGaelData, sinnFeinData, fiannaFailData, independentData, labourData, independents4ChangeData, peopleBeforeProfitData, greenPartyData, aontuData, socDemData ];\r\n\r\n\r\n  return (\r\n  <div className=\"featuredItem\" style={{textAlign: \"center\"}}>\r\n    <Typography variant=\"h5\">Party Followers</Typography>\r\n      <Legend\r\n        data={legendData}\r\n        selectedItems={selectedItems}\r\n        onChange={onChangeSelection}\r\n      />\r\n      <MultilineChart data={chartData} />\r\n      </div>\r\n\r\n  );\r\n}\r\n\r\n","import { arrayOf, shape, string, date as dateProp, number } from \"prop-types\";\r\n\r\nexport const MultiLineDataItemsPropTypes = arrayOf(\r\n  shape({\r\n    date: dateProp,\r\n    change: number,\r\n    followers: number\r\n  })\r\n);\r\n\r\nexport const MultiLineDataPropTypes = arrayOf(\r\n  shape({\r\n    name: string,\r\n    items: MultiLineDataItemsPropTypes,\r\n    color: string\r\n  })\r\n);\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Line = ({\r\n  xScale,\r\n  yScale,\r\n  color,\r\n  data,\r\n  isSmooth,\r\n  animation,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  // Define different types of animation that we can use\r\n  const animateLeft = React.useCallback(() => {\r\n    // NOTE: for some reason getTotalLength() doesn't work in tests\r\n    // in this codesandbox so we added default value just for tests\r\n    const totalLength = ref.current.getTotalLength\r\n      ? ref.current.getTotalLength()\r\n      : 500;\r\n    d3.select(ref.current)\r\n      .attr(\"opacity\", 1)\r\n      .attr(\"stroke-dasharray\", `${totalLength},${totalLength}`)\r\n      .attr(\"stroke-dashoffset\", totalLength)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeLinear)\r\n      .attr(\"stroke-dashoffset\", 0);\r\n  }, []);\r\n  const animateFadeIn = React.useCallback(() => {\r\n    d3.select(ref.current)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeLinear)\r\n      .attr(\"opacity\", 1);\r\n  }, []);\r\n  const noneAnimation = React.useCallback(() => {\r\n    d3.select(ref.current).attr(\"opacity\", 1);\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    switch (animation) {\r\n      case \"left\":\r\n        animateLeft();\r\n        break;\r\n      case \"fadeIn\":\r\n        animateFadeIn();\r\n        break;\r\n      case \"none\":\r\n      default:\r\n        noneAnimation();\r\n        break;\r\n    }\r\n  }, [animateLeft, animateFadeIn, noneAnimation, animation]);\r\n\r\n  // Recalculate line length if scale has changed\r\n  React.useEffect(() => {\r\n    if (animation === \"left\") {\r\n      const totalLength = ref.current.getTotalLength\r\n        ? ref.current.getTotalLength()\r\n        : 500;\r\n      d3.select(ref.current).attr(\r\n        \"stroke-dasharray\",\r\n        `${totalLength},${totalLength}`\r\n      );\r\n    }\r\n  }, [xScale, yScale, animation]);\r\n\r\n  const line = d3\r\n    .line()\r\n    .x((d) => xScale(d.date))\r\n    .y((d) => yScale(d.followers));\r\n\r\n  const d = line(data);\r\n\r\n  return (\r\n    <path\r\n      ref={ref}\r\n      d={d?.match(/NaN|undefined/) ? \"\" : d}\r\n      stroke={color}\r\n      strokeWidth={3}\r\n      fill=\"none\"\r\n      opacity={0}\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n\r\nLine.propTypes = {\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  data: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      date: PropTypes.date,\r\n      change: PropTypes.number\r\n    })\r\n  ),\r\n  color: PropTypes.string,\r\n  isSmooth: PropTypes.bool,\r\n  animation: PropTypes.oneOf([\"left\", \"fadeIn\", \"none\"])\r\n};\r\n\r\nLine.defaultProps = {\r\n  data: [],\r\n  color: \"white\",\r\n  isSmooth: false,\r\n  animation: \"left\"\r\n};\r\n\r\nexport default Line;\r\n","/** Area.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Area = ({ xScale, yScale, color, data, disableAnimation, ...props }) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    if (disableAnimation) {\r\n      d3.select(ref.current).attr(\"opacity\", 1);\r\n      return;\r\n    }\r\n    d3.select(ref.current)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeBackIn)\r\n      .attr(\"opacity\", 1);\r\n  }, [disableAnimation]);\r\n\r\n  const d = React.useMemo(() => {\r\n    const area = d3\r\n      .area()\r\n      .x(({ date }) => xScale(date))\r\n      .y1(({ followers }) => yScale(followers))\r\n      .y0(() => yScale(yScale.domain()[0]));\r\n    return area(data);\r\n  }, [xScale, yScale, data]);\r\n\r\n  return (\r\n    <>\r\n      <path\r\n        ref={ref}\r\n        d={d}\r\n        fill={`url(#gradient-${color})`}\r\n        opacity={0}\r\n        {...props}\r\n      />\r\n      <defs>\r\n        <linearGradient\r\n          id={`gradient-${color}`}\r\n          x1=\"0%\"\r\n          x2=\"0%\"\r\n          y1=\"0%\"\r\n          y2=\"100%\"\r\n        >\r\n          <stop offset=\"0%\" stopColor={color} stopOpacity={0.2} />\r\n          <stop offset=\"100%\" stopColor={color} stopOpacity={0} />\r\n        </linearGradient>\r\n      </defs>\r\n    </>\r\n  );\r\n};\r\n\r\nArea.propTypes = {\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  data: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      date: PropTypes.date,\r\n      followers: PropTypes.number\r\n    })\r\n  ),\r\n  color: PropTypes.string,\r\n  disableAnimation: PropTypes.bool\r\n};\r\n\r\nArea.defaultProps = {\r\n  data: [],\r\n  color: \"white\",\r\n  disableAnimation: false\r\n};\r\n\r\nexport default Area;\r\n","/** AxisX.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Axis = ({\r\n  type,\r\n  scale,\r\n  ticks,\r\n  transform,\r\n  tickFormat,\r\n  disableAnimation,\r\n  anchorEl,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    const axisGenerator = type === \"left\" ? d3.axisRight : d3.axisBottom;\r\n    const axis = axisGenerator(scale).ticks(ticks).tickFormat(tickFormat);\r\n    const axisGroup = d3.select(ref.current);\r\n    if (disableAnimation) {\r\n      axisGroup.call(axis);\r\n    } else {\r\n      axisGroup.transition().duration(750).ease(d3.easeLinear).call(axis);\r\n    }\r\n    axisGroup.select(\".domain\").remove();\r\n    axisGroup.selectAll(\"line\").remove();\r\n    axisGroup\r\n      .selectAll(\"text\")\r\n      .attr(\"opacity\", 0.5)\r\n      .attr(\"color\", \"white\")\r\n      .attr(\"font-size\", \"0.75rem\");\r\n  }, [scale, ticks, tickFormat, disableAnimation]);\r\n\r\n  React.useEffect(() => {\r\n    d3.select(anchorEl)\r\n      .on(\"mouseout.axisX\", () => {\r\n        d3.select(ref.current)\r\n          .selectAll(\"text\")\r\n          .attr(\"opacity\", 0.5)\r\n          .style(\"font-weight\", \"normal\");\r\n      })\r\n      .on(\"mousemove.axisX\", () => {\r\n        const [x] = d3.mouse(anchorEl);\r\n        const xDate = scale.invert(x);\r\n        const textElements = d3.select(ref.current).selectAll(\"text\");\r\n        const data = textElements.data();\r\n        const index = d3.bisector((d) => d).left(data, xDate);\r\n        textElements\r\n          .attr(\"opacity\", (d, i) => (i === index - 1 ? 1 : 0.5))\r\n          .style(\"font-weight\", (d, i) =>\r\n            i === index - 1 ? \"bold\" : \"normal\"\r\n          );\r\n      });\r\n  }, [anchorEl, scale]);\r\n\r\n  return <g ref={ref} transform={transform} {...props} />;\r\n};\r\n\r\nAxis.propTypes = {\r\n  type: PropTypes.oneOf([\"left\", \"bottom\"]).isRequired,\r\n  scale: PropTypes.func.isRequired,\r\n  ticks: PropTypes.oneOfType([PropTypes.number, PropTypes.func]),\r\n  tickFormat: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\r\n  transform: PropTypes.string,\r\n  disableAnimation: PropTypes.bool,\r\n  anchorEl: PropTypes.instanceOf(Element)\r\n};\r\n\r\nAxis.defaultProps = {\r\n  ticks: 0,\r\n  tickFormat: null,\r\n  transform: \"\",\r\n  disableAnimation: false,\r\n  anchorEl: null\r\n};\r\n\r\nexport default Axis;\r\n","/** GridLine.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst GridLine = ({\r\n  type,\r\n  scale,\r\n  ticks,\r\n  size,\r\n  transform,\r\n  disableAnimation,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    const axisGenerator = type === \"vertical\" ? d3.axisBottom : d3.axisLeft;\r\n    const axis = axisGenerator(scale).ticks(ticks).tickSize(-size);\r\n\r\n    const gridGroup = d3.select(ref.current);\r\n    if (disableAnimation) {\r\n      gridGroup.call(axis);\r\n    } else {\r\n      gridGroup.transition().duration(750).ease(d3.easeLinear).call(axis);\r\n    }\r\n    gridGroup.select(\".domain\").remove();\r\n    gridGroup.selectAll(\"text\").remove();\r\n    gridGroup.selectAll(\"line\").attr(\"stroke\", \"rgba(255, 255, 255, 0.1)\");\r\n  }, [scale, ticks, size, disableAnimation]);\r\n\r\n  return <g ref={ref} transform={transform} {...props} />;\r\n};\r\n\r\nGridLine.propTypes = {\r\n  scale: PropTypes.func.isRequired,\r\n  type: PropTypes.oneOf([\"vertical\", \"horizontal\"]).isRequired,\r\n  ticks: PropTypes.oneOfType([PropTypes.number, PropTypes.func]),\r\n  transform: PropTypes.string,\r\n  size: PropTypes.number,\r\n  disableAnimation: PropTypes.bool\r\n};\r\n\r\nGridLine.defaultProps = {\r\n  ticks: 0,\r\n  transform: \"\",\r\n  size: 0,\r\n  disableAnimation: false\r\n};\r\n\r\nexport default GridLine;\r\n","/** Overlay.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\n/**\r\n * Use Overlay as a wrapper for components that need mouse events to be handled.\r\n * For example: Tooltip, AxisX.\r\n */\r\nconst Overlay = React.forwardRef(({ width, height, children }, ref) => (\r\n  <g>\r\n    {children}\r\n    <rect ref={ref} width={width} height={height} opacity={0} />\r\n  </g>\r\n));\r\n\r\nOverlay.propTypes = {\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired,\r\n  children: PropTypes.node.isRequired\r\n};\r\n\r\nexport default Overlay;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\nimport { MultiLineDataPropTypes } from \"../utils/propTypes\";\r\nimport {formatPercent } from \"../utils/commonUtils\"\r\n// import { formatPercent, formatPriceUSD } from \"../utils/commonUtils\";\r\n\r\nconst Tooltip = ({\r\n  xScale,\r\n  yScale,\r\n  width,\r\n  height,\r\n  data,\r\n  margin,\r\n  anchorEl,\r\n  children,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  const drawLine = React.useCallback(\r\n    (x) => {\r\n      d3.select(ref.current)\r\n        .select(\".tooltipLine\")\r\n        .attr(\"x1\", x)\r\n        .attr(\"x2\", x)\r\n        .attr(\"y1\", -margin.top)\r\n        .attr(\"y2\", height);\r\n    },\r\n    [ref, height, margin]\r\n  );\r\n\r\n  const drawContent = React.useCallback(\r\n    (x) => {\r\n      const tooltipContent = d3.select(ref.current).select(\".tooltipContent\");\r\n      tooltipContent.attr(\"transform\", (cur, i, nodes) => {\r\n        const nodeWidth = nodes[i]?.getBoundingClientRect()?.width || 0;\r\n        const translateX = nodeWidth + x > width ? x - nodeWidth - 12 : x + 8;\r\n        return `translate(${translateX}, ${-margin.top})`;\r\n      });\r\n      tooltipContent\r\n        .select(\".contentTitle\")\r\n        .text(d3.timeFormat(\"%b %d, %Y\")(xScale.invert(x)));\r\n    },\r\n    [xScale, margin, width]\r\n  );\r\n\r\n  const drawBackground = React.useCallback(() => {\r\n    // reset background size to defaults\r\n    const contentBackground = d3\r\n      .select(ref.current)\r\n      .select(\".contentBackground\");\r\n    contentBackground.attr(\"width\", 125).attr(\"height\", 40);\r\n\r\n    // calculate new background size\r\n    const tooltipContentElement = d3\r\n      .select(ref.current)\r\n      .select(\".tooltipContent\")\r\n      .node();\r\n    if (!tooltipContentElement) return;\r\n\r\n    const contentSize = tooltipContentElement.getBoundingClientRect();\r\n    contentBackground\r\n      .attr(\"width\", contentSize.width + 8)\r\n      .attr(\"height\", contentSize.height + 4);\r\n  }, []);\r\n\r\n  const onChangePosition = React.useCallback((d, i, isVisible) => {\r\n    d3.selectAll(\".performanceItemChange\")\r\n      .filter((td, tIndex) => tIndex === i)\r\n      .text(isVisible ? formatPercent(d.change) : \"\");\r\n\r\n    d3.selectAll(\".performanceItemFollowers\")\r\n      .filter((td, tIndex) => tIndex === i)\r\n      .text(\r\n        d.followers.toLocaleString() && !isVisible ? \"No data\" : d.followers.toLocaleString()\r\n      );\r\n       // .text(\r\n      //   d.marketvalue && !isVisible ? \"No data\" : formatPriceUSD(d.marketvalue)\r\n      // );\r\n\r\n    const maxNameWidth = d3.max(\r\n      d3.selectAll(\".performanceItemName\").nodes(),\r\n      (node) => node.getBoundingClientRect().width\r\n    );\r\n    d3.selectAll(\".performanceItemChange\").attr(\r\n      \"transform\",\r\n      (datum, index, nodes) =>\r\n        `translate(${\r\n          nodes[index].previousSibling.getBoundingClientRect().width + 14\r\n        },4)`\r\n    );\r\n\r\n    d3.selectAll(\".performanceItemFollowers\").attr(\r\n      \"transform\",\r\n      `translate(${maxNameWidth + 60},4)`\r\n    );\r\n  }, []);\r\n\r\n  const followPoints = React.useCallback(() => {\r\n    const [x] = d3.mouse(anchorEl);\r\n    const xDate = xScale.invert(x);\r\n    const bisectDate = d3.bisector((d) => d.date).left;\r\n    let baseXPos = 0;\r\n\r\n    // draw circles on line\r\n    d3.select(ref.current)\r\n      .selectAll(\".tooltipLinePoint\")\r\n      .attr(\"transform\", (cur, i) => {\r\n        const index = bisectDate(data[i].items, xDate, 1);\r\n        const d0 = data[i].items[index - 1];\r\n        const d1 = data[i].items[index];\r\n        const d = xDate - d0?.date > d1?.date - xDate ? d1 : d0;\r\n        if (d.date === undefined && d.followers === undefined) {\r\n          // move point out of container\r\n          return \"translate(-100,-100)\";\r\n        }\r\n        const xPos = xScale(d.date);\r\n        if (i === 0) {\r\n          baseXPos = xPos;\r\n        }\r\n\r\n        let isVisible = true;\r\n        if (xPos !== baseXPos) {\r\n          isVisible = false;\r\n        }\r\n        const yPos = yScale(d.followers);\r\n\r\n        onChangePosition(d, i, isVisible);\r\n\r\n        return isVisible\r\n          ? `translate(${xPos}, ${yPos})`\r\n          : \"translate(-100,-100)\";\r\n      });\r\n\r\n    drawLine(baseXPos);\r\n    drawContent(baseXPos);\r\n    drawBackground();\r\n  }, [\r\n    anchorEl,\r\n    drawLine,\r\n    drawContent,\r\n    drawBackground,\r\n    xScale,\r\n    yScale,\r\n    data,\r\n    onChangePosition\r\n  ]);\r\n\r\n  React.useEffect(() => {\r\n    d3.select(anchorEl)\r\n      .on(\"mouseout.tooltip\", () => {\r\n        d3.select(ref.current).attr(\"opacity\", 0);\r\n      })\r\n      .on(\"mouseover.tooltip\", () => {\r\n        d3.select(ref.current).attr(\"opacity\", 1);\r\n      })\r\n      .on(\"mousemove.tooltip\", () => {\r\n        d3.select(ref.current)\r\n          .selectAll(\".tooltipLinePoint\")\r\n          .attr(\"opacity\", 1);\r\n        followPoints();\r\n      });\r\n  }, [anchorEl, followPoints]);\r\n\r\n  if (!data.length) return null;\r\n\r\n  return (\r\n    <g ref={ref} opacity={0} {...props}>\r\n      <line className=\"tooltipLine\" />\r\n      <g className=\"tooltipContent\">\r\n        <rect className=\"contentBackground\" rx={4} ry={4} opacity={0.2} />\r\n        <text className=\"contentTitle\" transform=\"translate(4,14)\" />\r\n        <g className=\"content\" transform=\"translate(4,32)\">\r\n          {data.map(({ name, color }, i) => (\r\n            <g key={name} transform={`translate(6,${22 * i})`}>\r\n              <circle r={6} fill={color} />\r\n              <text className=\"performanceItemName\" transform=\"translate(10,4)\">\r\n                {name}\r\n              </text>\r\n              <text\r\n                className=\"performanceItemChange\"\r\n                opacity={0.5}\r\n                fontSize={10}\r\n              />\r\n              <text className=\"performanceItemFollowers\" />\r\n            </g>\r\n          ))}\r\n        </g>\r\n      </g>\r\n      {data.map(({ name }) => (\r\n        <circle className=\"tooltipLinePoint\" r={6} key={name} opacity={0} />\r\n      ))}\r\n    </g>\r\n  );\r\n};\r\n\r\nTooltip.propTypes = {\r\n  width: PropTypes.number,\r\n  height: PropTypes.number,\r\n  margin: PropTypes.shape({\r\n    top: PropTypes.number,\r\n    bottom: PropTypes.number,\r\n    left: PropTypes.number,\r\n    right: PropTypes.number\r\n  }),\r\n  data: MultiLineDataPropTypes,\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  anchorEl: PropTypes.instanceOf(Element)\r\n};\r\n\r\nTooltip.defaultProps = {\r\n  width: 0,\r\n  height: 0,\r\n  margin: {\r\n    top: 0,\r\n    bottom: 0,\r\n    left: 0,\r\n    right: 0\r\n  },\r\n  data: [],\r\n  anchorEl: null\r\n};\r\n\r\nexport default Tooltip;\r\n","/* eslint-disable no-bitwise */\r\nimport * as d3 from \"d3\";\r\nimport { DateTime, Interval } from \"luxon\";\r\n\r\n// export const formatPriceUSD = (price) =>\r\n//   new Intl.NumberFormat(\"en-US\", { style: \"currency\", currency: \"USD\" }).format(\r\n//     price\r\n//   );\r\n\r\nexport const formatPercent = (percent = 0) => {\r\n  let result = \"0.00%\";\r\n  const isNumber = typeof percent === \"number\";\r\n  const isString = typeof percent === \"string\";\r\n  const isNotNaN = !Number.isNaN(parseFloat(percent));\r\n\r\n  if ((isNumber || isString) && isNotNaN) {\r\n    result = `${parseFloat(percent) > 0 ? \"+\" : \"\"}${d3.format(\".2%\")(\r\n      percent / 100\r\n    )}`;\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const getPeriod = (date) => {\r\n  if (!date) return 6;\r\n  const now = DateTime.utc();\r\n  const before = DateTime.fromJSDate(date);\r\n  const i = Interval.fromDateTimes(before, now);\r\n  return i.length(\"months\");\r\n};\r\n\r\nexport const getXTicks = (months) => {\r\n  if (months <= 2) return d3.timeDay.every(5).filter((d) => d.getDate() !== 31);\r\n  if (months <= 6) return d3.timeMonth.every(1);\r\n  if (months <= 13) return d3.timeMonth.every(2);\r\n  return d3.timeYear.every(1);\r\n};\r\n\r\nexport const getXTickFormat = (months) => {\r\n  if (months <= 2) return d3.timeFormat(\"%d %b\");\r\n  if (months <= 6) return d3.timeFormat(\"%b\");\r\n  if (months <= 13) return d3.timeFormat(\"%b %Y\");\r\n  return d3.timeFormat(\"%Y\");\r\n};\r\n","/** MultilineChart.controller.js */\r\nimport { useMemo } from \"react\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst useController = ({ data, width, height }) => {\r\n  const xMin = useMemo(\r\n    () => d3.min(data, ({ items }) => d3.min(items, ({ date }) => date)),\r\n    [data]\r\n  );\r\n\r\n  const xMax = useMemo(\r\n    () => d3.max(data, ({ items }) => d3.max(items, ({ date }) => date)),\r\n    [data]\r\n  );\r\n\r\n  const xScale = useMemo(\r\n    () => d3.scaleTime().domain([xMin, xMax]).range([0, width]),\r\n    [xMin, xMax, width]\r\n  );\r\n\r\n  const yMin = useMemo(\r\n    () => d3.min(data, ({ items }) => d3.min(items, ({ followers }) => followers)),\r\n    [data]\r\n  );\r\n\r\n  const yMax = useMemo(\r\n    () => d3.max(data, ({ items }) => d3.max(items, ({followers}) => followers)),\r\n    [data]\r\n  );\r\n\r\n  const yScale = useMemo(() => {\r\n    const indention = (yMax - yMin) * 0.5;\r\n    return d3\r\n      .scaleLinear()\r\n      .domain([yMin - indention, yMax + indention])\r\n      .range([height, 0]);\r\n  }, [height, yMin, yMax]);\r\n\r\n  const yScaleForAxis = useMemo(\r\n    () => d3.scaleBand().domain([yMin, yMax]).range([height, 0]),\r\n    [height, yMin, yMax]\r\n  );\r\n\r\n  const yTickFormat = (d) => {\r\n\r\n    return d\r\n    // `${parseFloat(d) > 0 ? \"+\" : \"\"}${d3.format(\".2%\")(d / 100)}`;\r\n  }\r\n  const xTickFormat = (d) => {\r\n    if (d3.timeFormat(\"%b\")(d) === \"Jan\") {\r\n      return d3.timeFormat(\"%Y\")(d);\r\n    }\r\n    return d3.timeFormat(\"%b\")(d);\r\n  };\r\n  return {\r\n    yTickFormat,\r\n    xScale,\r\n    yScale,\r\n    yScaleForAxis,\r\n    xTickFormat\r\n  };\r\n};\r\n\r\nexport default useController;\r\n","import React from 'react';\r\nimport ResizeObserver from 'resize-observer-polyfill';\r\n\r\n/**\r\n * Use ResizeObserver to listen for the changes to the dimensions of an element\r\n * @params ref - React ref\r\n * @returns {object} - { width, height, top, left }\r\n */\r\nconst useResize = (ref) => {\r\n  const [dimensions, setDimensions] = React.useState(null);\r\n  React.useEffect(() => {\r\n    const element = ref.current;\r\n    const resizeObserver = new ResizeObserver((entries) => {\r\n      entries.forEach((entry) => {\r\n        setDimensions(entry.contentRect);\r\n      });\r\n    });\r\n    resizeObserver.observe(element);\r\n    return () => {\r\n      resizeObserver.unobserve(element);\r\n    };\r\n  }, [ref]);\r\n  return dimensions || {\r\n    width: 0,\r\n    height: 0,\r\n    top: 0,\r\n    left: 0,\r\n  };\r\n};\r\n\r\nexport default useResize;\r\n","import React from \"react\";\r\nimport useResize from \"./useResize\";\r\n\r\nconst useDimensions = ({ maxHeight, margin = {}, scaleCoef = 0.5 }) => {\r\n  const ref = React.useRef(null);\r\n  const { width } = useResize(ref);\r\n\r\n  const height =\r\n    !maxHeight || width * scaleCoef < maxHeight ? width * scaleCoef : maxHeight;\r\n  const innerWidth = width - (margin.left || 0) - (margin.right || 0);\r\n  const innerHeight = height - (margin.top || 0) - (margin.bottom || 0);\r\n\r\n  return [\r\n    ref,\r\n    {\r\n      svgWidth: width,\r\n      svgHeight: height,\r\n      width: innerWidth,\r\n      height: innerHeight\r\n    }\r\n  ];\r\n};\r\n\r\nexport default useDimensions;\r\n","/** MultilineChart.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { MultiLineDataPropTypes } from \"../utils/propTypes\";\r\nimport { Line, Axis, GridLine, Overlay, Tooltip, Area } from \"../components\";\r\nimport useController from \"./MultilineChart.controller\";\r\nimport useDimensions from \"../utils/useDimensions\";\r\n\r\nconst MultilineChart = ({ data = [], margin = {} }) => {\r\n  const overlayRef = React.useRef(null);\r\n  const [containerRef, { svgWidth, svgHeight, width, height }] = useDimensions({\r\n    maxHeight: 800,\r\n    margin\r\n  });\r\n  const controller = useController({ data, width, height });\r\n  const {\r\n    yTickFormat,\r\n    xTickFormat,\r\n    xScale,\r\n    yScale,\r\n    yScaleForAxis\r\n  } = controller;\r\n\r\n  return (\r\n    <div ref={containerRef}>\r\n      <svg width={svgWidth} height={svgHeight}>\r\n        <g transform={`translate(${margin.left},${margin.top})`}>\r\n          <GridLine\r\n            type=\"vertical\"\r\n            scale={xScale}\r\n            ticks={5}\r\n            size={height}\r\n            transform={`translate(0, ${height})`}\r\n          />\r\n          <GridLine\r\n            type=\"horizontal\"\r\n            scale={yScaleForAxis}\r\n            ticks={2}\r\n            size={width}\r\n          />\r\n          <GridLine\r\n            type=\"horizontal\"\r\n            className=\"baseGridLine\"\r\n            scale={yScale}\r\n            ticks={1}\r\n            size={width}\r\n            disableAnimation\r\n          />\r\n          {data.map(({ name, items = [], color }) => (\r\n            <Line\r\n              key={name}\r\n              data={items}\r\n              xScale={xScale}\r\n              yScale={yScale}\r\n              color={color}\r\n            />\r\n          ))}\r\n          {/* <Area data={data[0].items} xScale={xScale} yScale={yScale} /> */}\r\n          <Axis\r\n            type=\"left\"\r\n            scale={yScaleForAxis}\r\n            transform=\"translate(0, -10)\"\r\n            ticks={5}\r\n            tickFormat={yTickFormat}\r\n          />\r\n          <Overlay ref={overlayRef} width={width} height={height}>\r\n            <Axis\r\n              type=\"bottom\"\r\n              className=\"axisX\"\r\n              anchorEl={overlayRef.current}\r\n              scale={xScale}\r\n              transform={`translate(10, ${height - height / 6})`}\r\n              ticks={5}\r\n              tickFormat={xTickFormat}\r\n            />\r\n            <Tooltip\r\n              className=\"tooltip\"\r\n              anchorEl={overlayRef.current}\r\n              width={width}\r\n              height={height}\r\n              margin={margin}\r\n              xScale={xScale}\r\n              yScale={yScale}\r\n              data={data}\r\n            />\r\n          </Overlay>\r\n        </g>\r\n      </svg>\r\n    </div>\r\n  );\r\n};\r\n\r\nMultilineChart.propTypes = {\r\n  data: MultiLineDataPropTypes,\r\n  margin: PropTypes.shape({\r\n    top: PropTypes.number,\r\n    bottom: PropTypes.number,\r\n    left: PropTypes.number,\r\n    right: PropTypes.number\r\n  })\r\n};\r\n\r\nMultilineChart.defaultProps = {\r\n  data: [],\r\n  margin: {\r\n    top: 30,\r\n    right: 15,\r\n    bottom: 15,\r\n    left: 15\r\n  }\r\n};\r\n\r\nexport default MultilineChart;\r\n","import { Typography } from '@material-ui/core'\r\nimport React from 'react'\r\nimport MultilineAppV3 from '../../MultilineChartV3/MultilineAppV3'\r\n\r\nconst PartyFollowersGraph = () => {\r\n\r\n\r\n    return (\r\n        <div className=\"featuredItem\">\r\n            <Typography variant=\"h5\">Party Followers</Typography>\r\n            <MultilineAppV3/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PartyFollowersGraph\r\n","import React from 'react';\r\nimport useAutocomplete from '@material-ui/lab/useAutocomplete';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport styled from 'styled-components';\r\nimport { chamber } from '../../../Backend/rollCall';\r\n\r\nconst Label = styled('label')`\r\n  padding: 0 0 4px;\r\n  line-height: 1.5;\r\n  display: block;\r\n`;\r\n\r\nconst InputWrapper = styled('div')`\r\n  width: 300px;\r\n  color: black;\r\n  border: 1px solid #d9d9d9;\r\n  background-color: #fff;\r\n  border-radius: 4px;\r\n  padding: 1px;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n\r\n\r\n  &:hover {\r\n    border-color: #40a9ff;\r\n  }\r\n\r\n  &.focused {\r\n    border-color: #40a9ff;\r\n    box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);\r\n  }\r\n\r\n  & input {\r\n    color: black;\r\n    font-size: 14px;\r\n    height: 30px;\r\n    box-sizing: border-box;\r\n    padding: 4px 6px;\r\n    width: 0;\r\n    min-width: 30px;\r\n    flex-grow: 1;\r\n    border: 0;\r\n    margin: 0;\r\n    outline: 0;\r\n\r\n  }\r\n`;\r\n\r\nconst Tag = styled(({ label, onDelete, ...props }) => (\r\n  <div {...props}>\r\n    <span>{label}</span>\r\n    <CloseIcon onClick={onDelete} />\r\n  </div>\r\n))`\r\n  display: flex;\r\n  align-items: center;\r\n  height: 24px;\r\n  margin: 2px;\r\n  line-height: 22px;\r\n  background-color: #fafafa;\r\n  border: 1px solid #e8e8e8;\r\n  border-radius: 2px;\r\n  box-sizing: content-box;\r\n  padding: 0 4px 0 10px;\r\n  outline: 0;\r\n  overflow: hidden;\r\n\r\n  &:focus {\r\n    border-color: #40a9ff;\r\n    background-color: #e6f7ff;\r\n}\r\n\r\n  & span {\r\n    overflow: hidden;\r\n    white-space: nowrap;\r\n    text-overflow: ellipsis;\r\n  }\r\n\r\n  & svg {\r\n    font-size: 12px;\r\n    cursor: pointer;\r\n    padding: 4px;\r\n  }\r\n`;\r\n\r\nconst Listbox = styled('ul')`\r\n\r\n\r\n  width: 300px;\r\n  margin: 2px 0 0;\r\n  padding: 0;\r\n  position: absolute;\r\n  list-style: none;\r\n  background-color: white;\r\n  overflow: auto;\r\n  max-height: 250px;\r\n  border-radius: 4px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\r\n  z-index: 1;\r\n  color: black;\r\n\r\n  & li {\r\n\r\n    padding: 5px 12px;\r\n    display: flex;\r\n\r\n    & span {\r\n      flex-grow: 1;\r\n    }\r\n\r\n    & svg {\r\n      color: transparent;\r\n    }\r\n  }\r\n\r\n  & li[aria-selected='true'] {\r\n    background-color: #fafafa;\r\n    font-weight: 600;\r\n    color: black;\r\n    \r\n\r\n    & svg {\r\n      color: green;\r\n    }\r\n  }\r\n\r\n  & li[data-focus='true'] {\r\n    background-color: #e6f7ff;\r\n    cursor: pointer;\r\n    color: black;\r\n\r\n    & svg {\r\n        color: black\r\n    }\r\n  }\r\n`;\r\n\r\nexport default function CustomizedHook() {\r\n  const {\r\n    getRootProps,\r\n    getInputLabelProps,\r\n    getInputProps,\r\n    getTagProps,\r\n    getListboxProps,\r\n    getOptionProps,\r\n    groupedOptions,\r\n    value,\r\n    focused,\r\n    setAnchorEl,\r\n  } = useAutocomplete({\r\n    id: 'customized-hook-demo',\r\n    defaultValue: [top100Films[1]],\r\n    multiple: true,\r\n    options: chamber,\r\n    getOptionLabel: (option) => option.name,\r\n  });\r\n\r\n\r\n\r\n\r\n\r\n\r\n  return (\r\n      <div>\r\n        <div {...getRootProps()}>\r\n          <Label {...getInputLabelProps()}>Filter</Label>\r\n          <InputWrapper ref={setAnchorEl} className={focused ? 'focused' : ''}>\r\n\r\n        \r\n            {value.map((option, index) => (\r\n              <Tag label={option.name} {...getTagProps({ index })} />\r\n            ))}\r\n            \r\n            <input {...getInputProps()} />\r\n          </InputWrapper>\r\n        </div>\r\n        {groupedOptions.length > 0 ? (\r\n          <Listbox {...getListboxProps()}>\r\n            {groupedOptions.map((option, index) => (\r\n              <li fill={option.partyColor} {...getOptionProps({ option, index })}>\r\n                <span >{option.name} <span style={{borderRadius: \"50%\", backgroundColor: option.partyColor, height:\"5px\", width:\"5px\", display: \"inline-block\"}}></span></span>\r\n                <CheckIcon fontSize=\"small\" />\r\n              </li>\r\n            ))}\r\n          </Listbox>\r\n        ) : null}\r\n      </div>\r\n\r\n  );\r\n}\r\n\r\n// Top 100 films as rated by IMDb users. http://www.imdb.com/chart/top\r\nconst top100Films = [\r\n  { title: 'The Shawshank Redemption', year: 1994 },\r\n  { title: 'The Godfather', year: 1972 },\r\n  { title: 'The Godfather: Part II', year: 1974 },\r\n  { title: 'The Dark Knight', year: 2008 },\r\n  { title: '12 Angry Men', year: 1957 },\r\n  { title: \"Schindler's List\", year: 1993 },\r\n  { title: 'Pulp Fiction', year: 1994 },\r\n  { title: 'The Lord of the Rings: The Return of the King', year: 2003 },\r\n  { title: 'The Good, the Bad and the Ugly', year: 1966 },\r\n  { title: 'Fight Club', year: 1999 },\r\n  { title: 'The Lord of the Rings: The Fellowship of the Ring', year: 2001 },\r\n  { title: 'Star Wars: Episode V - The Empire Strikes Back', year: 1980 },\r\n  { title: 'Forrest Gump', year: 1994 },\r\n  { title: 'Inception', year: 2010 },\r\n  { title: 'The Lord of the Rings: The Two Towers', year: 2002 },\r\n  { title: \"One Flew Over the Cuckoo's Nest\", year: 1975 },\r\n  { title: 'Goodfellas', year: 1990 },\r\n  { title: 'The Matrix', year: 1999 },\r\n  { title: 'Seven Samurai', year: 1954 },\r\n  { title: 'Star Wars: Episode IV - A New Hope', year: 1977 },\r\n  { title: 'City of God', year: 2002 },\r\n  { title: 'Se7en', year: 1995 },\r\n  { title: 'The Silence of the Lambs', year: 1991 },\r\n  { title: \"It's a Wonderful Life\", year: 1946 },\r\n  { title: 'Life Is Beautiful', year: 1997 },\r\n  { title: 'The Usual Suspects', year: 1995 },\r\n  { title: 'Léon: The Professional', year: 1994 },\r\n  { title: 'Spirited Away', year: 2001 },\r\n  { title: 'Saving Private Ryan', year: 1998 },\r\n  { title: 'Once Upon a Time in the West', year: 1968 },\r\n  { title: 'American History X', year: 1998 },\r\n  { title: 'Interstellar', year: 2014 },\r\n  { title: 'Casablanca', year: 1942 },\r\n  { title: 'City Lights', year: 1931 },\r\n  { title: 'Psycho', year: 1960 },\r\n  { title: 'The Green Mile', year: 1999 },\r\n  { title: 'The Intouchables', year: 2011 },\r\n  { title: 'Modern Times', year: 1936 },\r\n  { title: 'Raiders of the Lost Ark', year: 1981 },\r\n  { title: 'Rear Window', year: 1954 },\r\n  { title: 'The Pianist', year: 2002 },\r\n  { title: 'The Departed', year: 2006 },\r\n  { title: 'Terminator 2: Judgment Day', year: 1991 },\r\n  { title: 'Back to the Future', year: 1985 },\r\n  { title: 'Whiplash', year: 2014 },\r\n  { title: 'Gladiator', year: 2000 },\r\n  { title: 'Memento', year: 2000 },\r\n  { title: 'The Prestige', year: 2006 },\r\n  { title: 'The Lion King', year: 1994 },\r\n  { title: 'Apocalypse Now', year: 1979 },\r\n  { title: 'Alien', year: 1979 },\r\n  { title: 'Sunset Boulevard', year: 1950 },\r\n  { title: 'Dr. Strangelove or: How I Learned to Stop Worrying and Love the Bomb', year: 1964 },\r\n  { title: 'The Great Dictator', year: 1940 },\r\n  { title: 'Cinema Paradiso', year: 1988 },\r\n  { title: 'The Lives of Others', year: 2006 },\r\n  { title: 'Grave of the Fireflies', year: 1988 },\r\n  { title: 'Paths of Glory', year: 1957 },\r\n  { title: 'Django Unchained', year: 2012 },\r\n  { title: 'The Shining', year: 1980 },\r\n  { title: 'WALL·E', year: 2008 },\r\n  { title: 'American Beauty', year: 1999 },\r\n  { title: 'The Dark Knight Rises', year: 2012 },\r\n  { title: 'Princess Mononoke', year: 1997 },\r\n  { title: 'Aliens', year: 1986 },\r\n  { title: 'Oldboy', year: 2003 },\r\n  { title: 'Once Upon a Time in America', year: 1984 },\r\n  { title: 'Witness for the Prosecution', year: 1957 },\r\n  { title: 'Das Boot', year: 1981 },\r\n  { title: 'Citizen Kane', year: 1941 },\r\n  { title: 'North by Northwest', year: 1959 },\r\n  { title: 'Vertigo', year: 1958 },\r\n  { title: 'Star Wars: Episode VI - Return of the Jedi', year: 1983 },\r\n  { title: 'Reservoir Dogs', year: 1992 },\r\n  { title: 'Braveheart', year: 1995 },\r\n  { title: 'M', year: 1931 },\r\n  { title: 'Requiem for a Dream', year: 2000 },\r\n  { title: 'Amélie', year: 2001 },\r\n  { title: 'A Clockwork Orange', year: 1971 },\r\n  { title: 'Like Stars on Earth', year: 2007 },\r\n  { title: 'Taxi Driver', year: 1976 },\r\n  { title: 'Lawrence of Arabia', year: 1962 },\r\n  { title: 'Double Indemnity', year: 1944 },\r\n  { title: 'Eternal Sunshine of the Spotless Mind', year: 2004 },\r\n  { title: 'Amadeus', year: 1984 },\r\n  { title: 'To Kill a Mockingbird', year: 1962 },\r\n  { title: 'Toy Story 3', year: 2010 },\r\n  { title: 'Logan', year: 2017 },\r\n  { title: 'Full Metal Jacket', year: 1987 },\r\n  { title: 'Dangal', year: 2016 },\r\n  { title: 'The Sting', year: 1973 },\r\n  { title: '2001: A Space Odyssey', year: 1968 },\r\n  { title: \"Singin' in the Rain\", year: 1952 },\r\n  { title: 'Toy Story', year: 1995 },\r\n  { title: 'Bicycle Thieves', year: 1948 },\r\n  { title: 'The Kid', year: 1921 },\r\n  { title: 'Inglourious Basterds', year: 2009 },\r\n  { title: 'Snatch', year: 2000 },\r\n  { title: '3 Idiots', year: 2009 },\r\n  { title: 'Monty Python and the Holy Grail', year: 1975 },\r\n];\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport ListSubheader from '@material-ui/core/ListSubheader';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport { options } from './AxisUtils/AxisUtils';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    icon: {\r\n      color: \"white\"\r\n  },\r\n\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n    \r\n  }\r\n\r\n}));\r\n\r\nexport default function GroupedSelect() {\r\n\r\n  \r\n  const classes = useStyles();\r\n\r\n  const onChangeX = (event, child) => {\r\n    console.log('x:' + event.target.value);\r\n    console.log(child);\r\n  };\r\n\r\n  const onChangeY = (event, child) => {\r\n    console.log('y:' + event.target.value);\r\n    console.log(child);\r\n  };\r\n\r\n\r\n\r\n\r\n  return (\r\n    <div>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">X-Value</InputLabel>\r\n        <Select  onChange={onChangeX} style={{ color: \"white\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n          <MenuItem value=\"\">\r\n            <em>None</em>\r\n          </MenuItem>\r\n          <ListSubheader>Twitter Data</ListSubheader>\r\n          <MenuItem value={1}>Total Followers</MenuItem>\r\n          <MenuItem value={2}>Total Retweets</MenuItem>\r\n          <MenuItem value={3}>Avg. Sentimenmt</MenuItem>\r\n          <MenuItem value={4}>Activty</MenuItem>\r\n          <MenuItem value={5}>Connectivity</MenuItem>\r\n          <ListSubheader>Parliamentary Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={6}>Yes Votes</MenuItem>\r\n          <MenuItem value={7}>No Votes</MenuItem>\r\n          <MenuItem value={8}>Motions Tabled</MenuItem>\r\n          <MenuItem value={9}>Questions Asked</MenuItem>\r\n          <ListSubheader>News Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={10}>News Mentions</MenuItem>\r\n          <ListSubheader>Electoral Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={11}>Votes in last election</MenuItem>\r\n          <MenuItem value={12}>Opinion polls</MenuItem>\r\n        </Select>\r\n      </FormControl>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">Y-Value</InputLabel>\r\n        <Select onChange={onChangeY} style={{ color: \"white\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n          <MenuItem value=\"\">\r\n            <em>None</em>\r\n          </MenuItem>\r\n          <ListSubheader>Twitter Data</ListSubheader>\r\n          <MenuItem value={1}>Total Followers</MenuItem>\r\n          <MenuItem value={2}>Total Retweets</MenuItem>\r\n          <MenuItem value={3}>Avg. Sentimenmt</MenuItem>\r\n          <MenuItem value={4}>Activty</MenuItem>\r\n          <MenuItem value={5}>Connectivity</MenuItem>\r\n          <ListSubheader>Parliamentary Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={6}>Yes Votes</MenuItem>\r\n          <MenuItem value={7}>No Votes</MenuItem>\r\n          <MenuItem value={8}>Motions Tabled</MenuItem>\r\n          <MenuItem value={9}>Questions Asked</MenuItem>\r\n          <ListSubheader>News Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={10}>News Mentions</MenuItem>\r\n          <ListSubheader>Electoral Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={11}>Votes in last election</MenuItem>\r\n          <MenuItem value={12}>Opinion polls</MenuItem>\r\n        </Select>\r\n      </FormControl>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">Circle Radius</InputLabel>\r\n        <Select style={{ color: \"white\"}} classes={{icon:classes.icon}}defaultValue=\"\" id=\"grouped-select\">\r\n          <MenuItem value=\"\">\r\n            <em>None</em>\r\n          </MenuItem>\r\n          <ListSubheader>Twitter Data</ListSubheader>\r\n          <MenuItem value={1}>Total Followers</MenuItem>\r\n          <MenuItem value={2}>Total Retweets</MenuItem>\r\n          <MenuItem value={3}>Avg. Sentimenmt</MenuItem>\r\n          <MenuItem value={4}>Activty</MenuItem>\r\n          <MenuItem value={5}>Connectivity</MenuItem>\r\n          <ListSubheader>Parliamentary Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={6}>Yes Votes</MenuItem>\r\n          <MenuItem value={7}>No Votes</MenuItem>\r\n          <MenuItem value={8}>Motions Tabled</MenuItem>\r\n          <MenuItem value={9}>Questions Asked</MenuItem>\r\n          <ListSubheader>News Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={10}>News Mentions</MenuItem>\r\n          <ListSubheader>Electoral Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={11}>Votes in last election</MenuItem>\r\n          <MenuItem value={12}>Opinion polls</MenuItem>\r\n\r\n        </Select>\r\n      </FormControl>\r\n    </div>\r\n  );\r\n}","import React from 'react'\r\nimport { useRef, useEffect, useState} from 'react'\r\nimport * as d3 from 'd3'\r\nimport { chamber } from '../../../Backend/rollCall'\r\nimport { axisBottom, axisLeft, svg } from 'd3'\r\nimport { current } from '../../../Backend/rollCall'\r\nimport { Typography, Checkbox, Select, ListItem, FormControlLabel, FormGroup, Switch } from '@material-ui/core'\r\nimport CustomizedHook from './SearchSelectBox'\r\nimport GroupedSelect from './GroupedSelectBox'\r\nimport './scatterplot.css'\r\nimport { MenuItem, ListSubheader, FormControl, InputLabel, makeStyles, List, ListItemText } from '@material-ui/core'\r\nimport axios from 'axios'\r\nimport { CollectionsBookmarkRounded, FormatAlignCenter, FormatListNumberedRtlOutlined } from '@material-ui/icons'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n        icon: {\r\n          color: \"#6553b8\"\r\n      },\r\n    \r\n      formControl: {\r\n        margin: theme.spacing(1),\r\n        minWidth: 120,  \r\n      }\r\n    \r\n}));\r\n\r\nconst partyColors = {\r\n\"Sinn Féin\": \"#326760\", \r\n\"Fine Gael\": \"#6699FF\", \r\n\"Fianna Fáil\": \"#66BB66\",\r\n\"Labour Party\": \"#CC0000\",\r\n\"Solidarity - People Before Profit\": \"#8E2420\",\r\n\"Independent\": \"black\",\r\n\"Green Party\": \"#99CC33\",\r\n\"Social Democrats\": \"#752F8B\",\r\n\"Aontú\": \"#44532A\",\r\n\"Independents 4 Change\": \"grey\"}\r\n\r\nconst Scatterplot = ({data}) => {\r\n\r\n\r\n\r\n    const [TDDataScatter, setTDDataScatter] = useState(data)\r\n    const [partySelect, setPartySelect] = useState([\"Sinn Féin\", \"Fine Gael\", \"Fianna Fáil\", \"Labour Party\", \"Green Party\", \"Solidarity - People Before Profit\", \"Aontú\", \"Social Democrats\", \"Independent\", \"Independents 4 Change\"])\r\n    const [colorMode, setColorMode] = useState(\"Light Mode\")\r\n    const [color, setColor] = useState(null)\r\n    const [fillColor, setFillColor] = useState(null)\r\n    const [backgroundColor, setBackgroundColor] = useState(null)\r\n    const [textColor, setTextColor] = useState(null)\r\n    const [xOption, setXOption] = useState(0)\r\n    const [yOption, setYOption] = useState(1)\r\n    const [rOption, setROption] = useState(0)\r\n    const [highlightOption, setHighlightOption] = useState(0)\r\n    const [baseColorOption, setBaseColorOption] = useState(0)\r\n    const [filteredTDData, setFilteredTDData] = useState(null)\r\n    const [currentWeekIndex, setCurrentWeekIndex] = useState(null)\r\n    const [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\r\n    const [height, setHeight] = useState(620)\r\n    const [width, setWidth] = useState(920)\r\n    const [nodeSize, setNodeSize] = useState({min: 6, max: 20})\r\n\r\n\r\n    function getWindowDimensions() {\r\n      const { innerWidth: width, innerHeight: height } = window;\r\n      return {\r\n        width,\r\n        height\r\n      };\r\n    }\r\n\r\n    function useWindowDimensions() {\r\n     \r\n    \r\n      useEffect(() => {\r\n        function handleResize() {\r\n          setWindowDimensions(getWindowDimensions());\r\n        }\r\n    \r\n        window.addEventListener('resize', handleResize);\r\n        return () => window.removeEventListener('resize', handleResize);\r\n      }, []);\r\n    \r\n      return windowDimensions;\r\n    }\r\n\r\n    console.log(useWindowDimensions())\r\n\r\n\r\n    // const followers = d => d.followerData[currentWeekIndex].followers\r\n\r\n    const followers = d => {\r\n\r\n      if(d.followerData.length == 0) {\r\n        return 0\r\n      } else {\r\n        return d.followerData[currentWeekIndex].followers\r\n      }\r\n\r\n    }\r\n\r\n    // const retweets = d => d.retweetData[currentWeekIndex].retweets\r\n\r\n    const retweets = d => {\r\n\r\n      if(d.retweetData.length == 0) {\r\n        return 0\r\n      } else {\r\n        return d.retweetData[currentWeekIndex].retweets\r\n      }\r\n\r\n    }\r\n\r\n\r\n    // const original_tweets = d => d.retweetData[currentWeekIndex].original_tweets\r\n\r\n    const original_tweets = d => {\r\n\r\n      if(d.retweetData.length == 0) {\r\n        return 0\r\n      } else {\r\n        return d.retweetData[currentWeekIndex].original_tweets\r\n      }\r\n\r\n    }\r\n\r\n    // const polarity = d => d.sentimentData[currentWeekIndex].polarity\r\n\r\n    const polarity = d => {\r\n\r\n      if(d.sentimentData == undefined || d.sentimentData.length == 0) {\r\n        return 0\r\n      } else {\r\n        return d.sentimentData[currentWeekIndex].polarity\r\n      }\r\n\r\n    }\r\n    // const subjectivity = d => d.sentimentData[currentWeekIndex].subjectivity\r\n\r\n    const subjectivity = d => {\r\n\r\n      if(d.sentimentData == undefined || d.sentimentData.length == 0) {\r\n        return 0\r\n      } else {\r\n        return d.sentimentData[currentWeekIndex].subjectivity\r\n      }\r\n    }\r\n\r\n    const followerEngagementRate = (d) => {\r\n\r\n      if(d.followerData.length == 0) {\r\n        return 0\r\n      } else {\r\n\r\n      \r\n\r\n\r\n      var f = d.followerData[currentWeekIndex].followers\r\n      var r = d.retweetData[currentWeekIndex].retweets \r\n \r\n      var test = ((r / f))\r\n\r\n      if(test === Infinity ) {\r\n\r\n          test = 0\r\n      \r\n  }\r\n\r\n  test = test ? test : 0;\r\n\r\n  return test\r\n}\r\n    }\r\n    const retweetsPerOriginalTweet = (d) => {\r\n\r\n\r\n      if(d.followerData.length == 0) {\r\n        return 0\r\n      } else {\r\n\r\n      \r\n\r\n      var r = d.retweetData[currentWeekIndex].retweets \r\n      var o = d.retweetData[currentWeekIndex].original_tweets\r\n\r\n      var test = r / o\r\n\r\n      if(test === Infinity ) {\r\n\r\n          test = 0\r\n      \r\n  }\r\n\r\n  test = test ? test : 0;\r\n\r\n\r\n  return test\r\n}\r\n}\r\n\r\nconst writtenQuestionsAsked = d => {\r\n\r\n  var holder = d.writtenQuestions[0].writtenQuestions.to\r\n  if(!holder) return 0;\r\n  const sumValues = obj => Object.values(obj).reduce((a,b) => a + b) \r\n\r\n  var sum = sumValues(holder)\r\n\r\n  return sum\r\n\r\n}\r\n\r\nconst oralQuestionsAsked = d => {\r\n\r\n  var holder = d.oralQuestions[0].oralQuestions.to\r\n  if(!holder) return 0;\r\n  const sumValues = obj => Object.values(obj).reduce((a,b) => a + b) \r\n\r\n  var sum = sumValues(holder)\r\n\r\n  return sum\r\n\r\n\r\n\r\n}\r\n\r\nconst numberOfTopics = (d) => {\r\n\r\n  if(!d.writtenQuestions[0].writtenQuestions.topic) return 0;\r\n\r\n  return Object.keys(d.writtenQuestions[0].writtenQuestions.topic).length  \r\n\r\n}\r\n\r\nconst averageQuestionTowardsTopic = (d) => {\r\n\r\n  if(!d.writtenQuestions[0].writtenQuestions.topic) return 0;\r\n\r\n  var topics = Object.keys(d.writtenQuestions[0].writtenQuestions.topic).length  \r\n\r\n  var totalQuestions = writtenQuestionsAsked(d)\r\n\r\n  return totalQuestions / topics\r\n}\r\n\r\n\r\n\r\nconst absences = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].absences\r\n  }\r\n}\r\nconst presences = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].totalVotes\r\n  }\r\n}\r\nconst totalYes = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].totalYes\r\n  }\r\n}\r\nconst totalNo = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].totalNo\r\n  }\r\n}\r\nconst onWinningSide = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].onWinningSide\r\n  }\r\n}\r\nconst onLosingSide = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].onLosingSide\r\n  }\r\n}\r\nconst yesAndCarried = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].yesAndCarried\r\n  }\r\n}\r\nconst yesAndLost = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].yesAndLost\r\n  }\r\n}\r\nconst noAndCarried = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].noAndCarried\r\n  }\r\n}\r\nconst noAndLost = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].noAndLost\r\n  }\r\n}\r\nconst age = (d) => {\r\n\r\n  const getDate = (d) => { \r\n    \r\n    let together = []\r\n    let apart = d.split('/')\r\n    let day = apart[0]\r\n    let month = apart[1]\r\n    let year = apart[2]\r\n  \r\n    together.push(month, day, year)\r\n    together.toString().replace(\",\",\"/\").replace(\",\",\"/\")\r\n    return new Date(together)\r\n  }\r\n    \r\n  if(!d.DOB) {\r\n\r\n  function calcAge() {\r\n      var birthday = +Date.now();\r\n      return ~~((Date.now() - birthday) / (31557600000));\r\n    }\r\n    return calcAge()\r\n  }\r\n  \r\n\r\n  function calcAge(date) {\r\n    var birthday = +getDate(date);\r\n    return ~~((Date.now() - birthday) / (31557600000));\r\n  }\r\n\r\n  return calcAge(d.DOB)\r\n    \r\n\r\n}\r\n    \r\n    const optionsFunctions = [\r\n      age,\r\n      followers, \r\n      retweets, \r\n      original_tweets,      \r\n      followerEngagementRate, \r\n      retweetsPerOriginalTweet,  \r\n      polarity, \r\n      subjectivity,  \r\n\r\n      writtenQuestionsAsked, \r\n      oralQuestionsAsked, \r\n      numberOfTopics,\r\n      averageQuestionTowardsTopic,\r\n\r\n\r\n      absences, \r\n      presences, \r\n      totalYes, \r\n      totalNo, \r\n      onWinningSide, \r\n      onLosingSide, \r\n      yesAndCarried, \r\n      yesAndLost, \r\n      noAndCarried, \r\n      noAndLost, \r\n      \r\n    ]\r\n\r\n    const xValue = optionsFunctions[xOption]\r\n    const yValue = optionsFunctions[yOption]\r\n    const rValue = optionsFunctions[rOption]\r\n\r\n    useEffect(() => {\r\n\r\n        setTDDataScatter(data)\r\n        setFilteredTDData(TDDataScatter\r\n            \r\n      //     .filter(function(d) {\r\n          \r\n      //     if(d.followerData[0] != undefined) {\r\n      //     return d\r\n      //   }\r\n      // }\r\n      // )\r\n      \r\n      )\r\n\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n\r\n\r\nconsole.log(colorMode)\r\n\r\n      if(colorMode == \"Dark Mode\") {\r\n        setFillColor({fill: \"white\", color: \"white\"})\r\n        setColor({color: \"white\"})\r\n        setBackgroundColor(\"#191C24\")\r\n        setTextColor(\"white\")\r\n\r\n      }\r\n\r\n      if(colorMode == \"Light Mode\") {\r\n        setFillColor({fill: \"black\", color: \"black\"})\r\n        setColor({color: \"black\"})\r\n        setBackgroundColor(\"white\")\r\n        setTextColor(\"black\")\r\n      }\r\n\r\n      \r\n\r\n    }, [colorMode])\r\n\r\n\r\n\r\n\r\n\r\nuseEffect(() => {\r\n\r\n  if(!TDDataScatter) return null;\r\n\r\n  setCurrentWeekIndex(TDDataScatter[0].followerData.length - 1)\r\n\r\n}, [TDDataScatter])\r\n\r\n\r\n  const svgRef = useRef()\r\n\r\n    const options = [\r\n\r\n      \"Age\", \r\n      \"Followers\", \r\n      \"Retweets\", \r\n      \"Original Tweets\", \r\n      \"Followers Per Retweet\", \r\n      \"Retweets Per Original Tweet\", \r\n      \"Avg. Polarity\", \r\n      \"Avg. Subjectivity\", \r\n  \r\n      \"Written Questions Asked\", \r\n      \"Oral Questions Asked\",\r\n      \"No. of Topics TD had Questions for\",\r\n      \"Avg. Questions TD had towards Topic\",\r\n  \r\n  \r\n      \"Absences\",\r\n      \"Presences\",\r\n      \"Votes Yes\",\r\n      \"Votes No\",\r\n      \"Times on Winning Side\",\r\n      \"Times on Losing Side\",\r\n      \"Yes and Carried\",\r\n      \"Yes and Lost\",\r\n      \"No and Carried\",\r\n      \"No and Lost\"\r\n  \r\n        ]\r\n\r\n    const optionsExplanation = [\r\n\r\n      \"Number of Twitter followers on last check.\",\r\n      \"Number of retweets received over last week.\",\r\n      \"Number of original tweets (so excl. retweets) a TD has posted over last week.\",\r\n      \"Average sentiment of a TD's tweets over the past week, value lies between [-1, 1] with 1 being most positive.\",\r\n      \"Average subjectivity of a TD's tweets over the past week, value lies between [0, 1] with 1 being most subjective.\",\r\n      \"Followers divided by Retweets received over the last week.\",\r\n      \"Retweets divided by Original Tweets over the last week.\",\r\n      \"Written Questions asked between 01/08/21 - 30/08/21.\",\r\n      \"Oral Questions asked between 01/08/21 - 30/08/21.\"\r\n\r\n    ]   \r\n    \r\n\r\n    const classes = useStyles();\r\n\r\n    const handleChange = (event) => {\r\n\r\n          const holder = partySelect\r\n\r\n          const tester = event.target.value\r\n\r\n            if(partySelect.includes(tester)) {\r\n\r\n              for(let i = 0; i < holder.length; i++) {\r\n                if(holder[i] === tester) {\r\n                  holder.splice(i, 1)\r\n                  setPartySelect(holder)            \r\n                }\r\n              }\r\n            } else {\r\n              holder.push(tester)\r\n              setPartySelect(holder)\r\n            }\r\n\r\n\r\n              const selected = TDDataScatter;\r\n              const inbetween = selected;\r\n\r\n\r\n            const test = inbetween.filter(d => partySelect.includes(d.party))\r\n                     \r\n          \r\n            setFilteredTDData(test)\r\n\r\n            console.log(TDDataScatter)\r\n            \r\n      }\r\n\r\n\r\n    const onChangeColorMode = (event, child) => {\r\n\r\n      if(child == true) {\r\n\r\n      setColorMode(\"Dark Mode\")\r\n      } \r\n      if(child == false) {\r\n        setColorMode(\"Light Mode\")\r\n      }\r\n      \r\n      console.log('color mode:' + event.target.value);\r\n      console.log(child);\r\n};\r\n\r\n    const onChangeX = (event, child) => {\r\n            setXOption(event.target.value)\r\n            console.log('x:' + event.target.value);\r\n            console.log(child);\r\n    };\r\n\r\n    const onChangeY = (event, child) => {\r\n            setYOption(event.target.value)\r\n            console.log('y:' + event.target.value);\r\n            console.log(child);\r\n    };\r\n\r\n    const onChangeR = (event, child) => {\r\n        setROption(event.target.value)\r\n        console.log('r:' + event.target.value);\r\n        console.log(child);\r\n};\r\n\r\nconst onChangeHighlight = (event, child) => {\r\n  setHighlightOption(event.target.value)\r\n  console.log('highlight:' + event.target.value);\r\n  console.log(child);\r\n};\r\n\r\nconst onChangeBaseColor = (event, child) => {\r\n  setBaseColorOption(event.target.value)\r\n  console.log('base color:' + event.target.value);\r\n  console.log(child);\r\n};\r\n\r\n    const margin = {top: 20, right: 20, bottom: 100, left: 50}  \r\n    const heightMargin = height - margin.left - margin.right;\r\n    const widthMargin = width - margin.top - margin.bottom;        \r\n    \r\nuseEffect(() => {\r\n\r\n  if(windowDimensions.width < 500) {\r\n    setHeight(360)\r\n    setWidth(380)\r\n    setNodeSize({min: 4, max: 12})\r\n  }\r\n\r\n  if(windowDimensions.width < 600 && windowDimensions.width > 500) {\r\n    setHeight(400)\r\n    setWidth(500)\r\n    setNodeSize({min: 6, max: 20})\r\n  }\r\n\r\n  if(windowDimensions.width < 820 && windowDimensions.width > 600) {\r\n    setHeight(500)\r\n    setWidth(600)\r\n  }\r\n  if(windowDimensions.width > 820) {\r\n    setHeight(620)\r\n    setWidth(820)\r\n  }\r\n\r\n\r\n\r\n}, [windowDimensions])\r\n\r\n    useEffect(() => {\r\n\r\n      if(!TDDataScatter || !filteredTDData) return null;\r\n\r\n      if(colorMode == \"Dark Mode\") {\r\n        partyColors.Independent = \"white\"\r\n      }\r\n      if(colorMode == \"Light Mode\") {\r\n        partyColors.Independent = \"black\"\r\n      }\r\n\r\n      console.log(TDDataScatter)\r\n      console.log(filteredTDData)\r\n\r\n      \r\n\r\n\r\n\r\n    // const selectedFiltered = () => {\r\n\r\n    //   const selected = filteredTDData;\r\n\r\n    //     for(let i = 0; i < selected.length; i++) {\r\n\r\n    //       if(partySelect.includes(selected[i].party) === false) {\r\n    //         selected.splice([i], 1)\r\n    //       }\r\n    //     }\r\n\r\n    //     return selected\r\n\r\n    // }\r\n\r\n    // console.log(selectedFiltered())\r\n\r\n    const selectedFilteredTDData = filteredTDData;\r\n\r\n    console.log(selectedFilteredTDData)\r\n    \r\n\r\nconsole.log(selectedFilteredTDData.map(function(d) {\r\n\r\n  if(d.followerData.length == 0) {\r\n    return 0\r\n  } else {\r\n    return d.followerData[0].followers\r\n  }\r\n  \r\n}))\r\n\r\n  // var k = height / width,\r\n  // x0 = [-4.5, 4.5],\r\n  // y0 = [-4.5 * k, 4.5 * k],\r\n  // x = d3.scaleLinear().domain(x0).range([0, width]),\r\n  // y = d3.scaleLinear().domain(y0).range([height, 0]),\r\n  // z = d3.scaleOrdinal(d3.schemeCategory10);\r\n\r\n \r\n\r\n\r\n      const svg = d3.select(svgRef.current)\r\n\r\n\r\n        const xScale = d3.scaleLinear()\r\n                        .range([0, widthMargin])\r\n                        .domain(d3.extent(selectedFilteredTDData, xValue))\r\n\r\n\r\n\r\n        const yScale = d3.scaleLinear()\r\n                        .range([heightMargin, 0])\r\n                        .domain(d3.extent(selectedFilteredTDData, yValue))\r\n                        \r\n        const rScale = d3.scaleLinear()\r\n                        .range([nodeSize.min, nodeSize.max])\r\n                        .domain(d3.extent(selectedFilteredTDData, rValue))\r\n\r\n        const party = d => d.party\r\n        const name = d => d.name\r\n        const color = (d) => {\r\n\r\n\r\n          const officeArr = []\r\n          let cabinetColor = \"#FFC000\"\r\n  \r\n            if(baseColorOption === 1 && highlightOption != 0) {\r\n              cabinetColor = \"red\"\r\n            }\r\n  \r\n  \r\n  \r\n          let trueArr = [];\r\n  \r\n          if(highlightOption === 1) {\r\n  \r\n          if(d.member_offices[0].length != 0) {\r\n  \r\n            for(let i = 0; i < d.member_offices[0].length; i++) {\r\n    \r\n            var office = d.member_offices[0][i].office.officeName.showAs\r\n    \r\n            if(!d.member_offices[0][i].office.dateRange.end) {\r\n                officeArr.push(office)\r\n            } \r\n        }\r\n      }\r\n  \r\n          for(let i = 0; i < officeArr.length; i++) {\r\n  \r\n              if(officeArr[i].search(\"Minister for\") != -1 || officeArr[i].search(\"Taoiseach\") != -1) { \r\n                trueArr.push(true)   \r\n              } \r\n            }\r\n            if(trueArr.includes(true)) {\r\n                return cabinetColor\r\n            } else if(baseColorOption === 0) {\r\n                return partyColors[party(d)]\r\n            } else if (baseColorOption === 1) {\r\n              return \"lightblue\"\r\n            }\r\n  } \r\n  \r\n  if(highlightOption == 2) {\r\n  \r\n      if(d.member_offices[0].length != 0) {\r\n  \r\n        for(let i = 0; i < d.member_offices[0].length; i++) {\r\n  \r\n        var office = d.member_offices[0][i].office.officeName.showAs\r\n  \r\n        if(!d.member_offices[0][i].office.dateRange.end) {\r\n            officeArr.push(office)\r\n        } \r\n    }\r\n  }\r\n  \r\n      for(let i = 0; i < officeArr.length; i++) {\r\n  \r\n          if(officeArr[i].search(\"Minister of\") != -1) { \r\n            trueArr.push(true)   \r\n          } \r\n        }\r\n  \r\n        console.log(trueArr)\r\n        if(trueArr.includes(true)) {\r\n            return cabinetColor\r\n        } else if(baseColorOption === 0) {\r\n            return partyColors[party(d)]\r\n        } else if(baseColorOption === 1) {\r\n          return \"lightblue\"\r\n        }\r\n  } \r\n  \r\n  if(highlightOption == 3) {\r\n  \r\n      if(d.member_offices[0].length != 0) {\r\n  \r\n        for(let i = 0; i < d.member_offices[0].length; i++) {\r\n  \r\n        var office = d.member_offices[0][i].office.officeName.showAs\r\n  \r\n        if(!d.member_offices[0][i].office.dateRange.end) {\r\n            officeArr.push(office)\r\n        } \r\n    }\r\n  }\r\n  \r\n      for(let i = 0; i < officeArr.length; i++) {\r\n  \r\n          if(officeArr[i].search(\"Minister of\") != -1 || officeArr[i].search(\"Minister for\") != -1 || officeArr[i].search(\"Taoiseach\") != -1) { \r\n            trueArr.push(true)   \r\n          } \r\n        }\r\n  \r\n        console.log(trueArr)\r\n        if(trueArr.includes(true)) {\r\n            return cabinetColor\r\n        } else if(baseColorOption === 0) {\r\n            return partyColors[party(d)]\r\n        } else if(baseColorOption === 1) {\r\n          return \"lightblue\"\r\n        }\r\n  } \r\n\r\n  if(highlightOption == 4) {\r\n    if(d.gender == \"Female\") {\r\n      return cabinetColor\r\n    } else if(baseColorOption === 0) {\r\n      return partyColors[party(d)]\r\n  } else if(baseColorOption === 1) {\r\n    return \"lightblue\"\r\n  }\r\n  }\r\n             \r\n             return partyColors[party(d)]\r\n  \r\n  \r\n          } \r\n\r\n        const xAxis = axisBottom(xScale).tickFormat(d3.format(\".2s\"));        \r\n        \r\n        svg.select(\".x-axis\")\r\n            .attr(\"transform\", \"translate(0,\" + heightMargin + \")\")\r\n            .transition()\r\n            .duration(500)\r\n            .call(xAxis)\r\n            \r\n        const yAxis = axisLeft(yScale).tickFormat(d3.format(\".2s\"));\r\n\r\n        svg.select(\".y-axis\")\r\n        .attr(\"transform\", \"translate(0, 0)\")\r\n            .transition()\r\n            .duration(500)\r\n            .call(yAxis)\r\n\r\n            const tooltip = d3\r\n            .select('body')\r\n            .append('div')\r\n            .attr('class', 'd3-tooltip')\r\n            .style('position', 'absolute')\r\n            .style('z-index', '10')\r\n            .style('visibility', 'hidden')\r\n            .style('padding', '10px')\r\n            .style('background', 'rgba(0,0,0,0.6)')\r\n            .style('border-radius', '4px')\r\n            .style('color', '#fff')\r\n            .text('a simple tooltip');\r\n\r\n            const hoverColor = \"#eec42d\"\r\n       \r\n        var circles = d3.select(\"#container\")\r\n                        .selectAll(\".node\")\r\n                        .data(selectedFilteredTDData)\r\n                        .join(\"circle\")\r\n                        .attr(\"class\", \"node\")\r\n                        \r\n                        .attr('fill-opacity', 0.75)\r\n                        .attr(\"name\", name)\r\n\r\n            circles.transition()\r\n                    .duration(500)\r\n                    .attr(\"cx\", d => xScale(xValue(d)))\r\n                    .attr(\"cy\", d => yScale(yValue(d)))\r\n                    .attr(\"r\", d => rScale(rValue(d)))\r\n                    .attr(\"fill\", color)\r\n\r\n                    \r\n            circles.on('mouseover', function (d, i) {\r\n            tooltip\r\n            .html(\r\n                `<div>TD: ${d.name}</div><div>Party: ${d.party}</div><div>x: ${options[xOption]}: ${xValue(d).toLocaleString()}</div><div>y: ${options[yOption]}: ${yValue(d).toLocaleString()}</div><div>r: ${options[rOption]}: ${rValue(d).toLocaleString()}</div>`\r\n            )\r\n                .style('visibility', 'visible');\r\n                d3.select(this).transition().attr('fill', hoverColor);\r\n            })\r\n            .on('mousemove', function () {\r\n                tooltip\r\n                .style('top', d3.event.pageY - 10 + 'px')\r\n                .style('left', d3.event.pageX + 10 + 'px');\r\n            })\r\n            .on('mouseout', function () {\r\n                tooltip.html(``).style('visibility', 'hidden');\r\n                d3.select(this).transition().attr('fill', color);\r\n            }); \r\n\r\n          console.log(selectedFilteredTDData)\r\n\r\n    }, [TDDataScatter, partySelect, filteredTDData, xOption, yOption, rOption, highlightOption, baseColorOption, colorMode, height, width, nodeSize])\r\n\r\n    \r\n    if (!TDDataScatter) return null;\r\n\r\n    return (\r\n\r\n        <div className={\"featuredItem\"} style={{textAlign: \"center\", margin: \"10px\", padding: \"10px\", background: backgroundColor, color: textColor}}>\r\n        <Typography style={{marginBottom: 20}} align=\"center\" variant=\"h5\">Interactive Scatter Plot</Typography>\r\n        <FormControlLabel\r\n        control={<Switch value={true} onChange={onChangeColorMode}/>}\r\n        label=\"Dark Mode\"\r\n      />\r\n        \r\n        \r\n            <div>\r\n\r\n                <div>\r\n                <div>\r\n<FormGroup style={{display: \"inline-block\",\r\n    verticalAlign: \"top\"}}>\r\n    <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n          defaultChecked=\"true\"\r\n          name=\"checkedB\"\r\n          style={{color: '#326760', transform: \"scale(0.85)\"}}\r\n          value={\"Sinn Féin\"}\r\n          onChange={handleChange}\r\n          />\r\n        }\r\n        label={<span style={{ fontSize: '16px'}}>SF</span>}\r\n        />\r\n            <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: '#6699FF', transform: \"scale(0.85)\"}}\r\n            value={\"Fine Gael\"}\r\n            onChange={handleChange}\r\n          />\r\n        }\r\n        label={<span style={{ fontSize: '16px'}}>FG</span>}\r\n        />\r\n            <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: \"#66BB66\", transform: \"scale(0.85)\"}}\r\n            value={\"Fianna Fáil\"}\r\n            onChange={handleChange}\r\n          />\r\n        }\r\n        label={<span style={{ fontSize: '16px'}}>FF</span>}\r\n        />\r\n            <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: \"#CC0000\", transform: \"scale(0.85)\"}}\r\n            value={\"Labour Party\"}\r\n            onChange={handleChange}\r\n          />\r\n        }\r\n        label={<span style={{ fontSize: '16px'}}>LAB</span>}\r\n        />\r\n            <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={color}\r\n            style={{transform: \"scale(0.85)\"}}\r\n            value={\"Independent\"}\r\n            onChange={handleChange}\r\n          />\r\n        }\r\n        label={<span style={{ fontSize: '16px'}}>IND</span>}\r\n        />\r\n            <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: \"#8E2420\", transform: \"scale(0.85)\"}}\r\n            value={\"Solidarity - People Before Profit\"}\r\n            onChange={handleChange}\r\n          />\r\n        }\r\n        label={<span style={{ fontSize: '16px'}}>PBP</span>}\r\n        />\r\n            <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: \"#752F8B\", transform: \"scale(0.85)\"}}\r\n            value={\"Social Democrats\"}\r\n            onChange={handleChange}\r\n          />\r\n        }\r\n        label={<span style={{ fontSize: '16px'}}>SocDems</span>}\r\n        />\r\n            <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: \"#99CC33\", transform: \"scale(0.85)\"}}\r\n            value={\"Green Party\"}\r\n            onChange={handleChange}\r\n          />\r\n        }\r\n        label={<span style={{ fontSize: '16px'}}>GRN</span>}\r\n        />\r\n            <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: \"#44532A\", transform: \"scale(0.85)\"}}\r\n            value={\"Aontú\"}\r\n            onChange={handleChange}\r\n          />\r\n        }\r\n        label={<span style={{ fontSize: '16px'}}>AON</span>}\r\n        />\r\n            <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: \"grey\", transform: \"scale(0.85)\"}}\r\n            value={\"Independents 4 Change\"}\r\n            onChange={handleChange}\r\n          />\r\n        }\r\n        label={<span style={{ fontSize: '16px'}}>IND 4 Change</span>}\r\n        />\r\n             \r\n        </FormGroup>\r\n        </div>\r\n                    \r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={fillColor} htmlFor=\"grouped-select\">X-Value</InputLabel>\r\n        <Select onChange={onChangeX} style={color} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n        <ListSubheader value={0}>General</ListSubheader>\r\n          <MenuItem value={0}>Age</MenuItem>\r\n        <ListSubheader value={1}>Twitter Data, last 7 days</ListSubheader>\r\n          <MenuItem value={1}>Followers</MenuItem>\r\n          <MenuItem value={2}>Retweets</MenuItem>\r\n          <MenuItem value={3}>Original Tweets</MenuItem>\r\n          <MenuItem value={4}>Follower Per Retweet</MenuItem>\r\n          <MenuItem value={5}>Retweets Per Original Tweet</MenuItem>\r\n          <MenuItem value={6}>Avg. Polarity</MenuItem>\r\n          <MenuItem value={7}>Avg. Subjectivity</MenuItem>\r\n          <ListSubheader value={8}>Dáil Questions, 01 July - 01 Sept</ListSubheader>\r\n          <MenuItem value={8}>Written Questions Asked</MenuItem>\r\n          <MenuItem value={9}>Oral Questions Asked</MenuItem>\r\n          <MenuItem value={10}>No. of Topics TD had Questions for</MenuItem>\r\n          <MenuItem value={11}>Avg. Questions TD had towards Topic</MenuItem>\r\n          <ListSubheader value={12}>Dáil Divisions, 01 Jan - 01 Sept</ListSubheader>  \r\n          <MenuItem value={12}>Divisions Absent</MenuItem>\r\n          <MenuItem value={13}>Divisions Present</MenuItem>\r\n          <MenuItem value={14}>No. of votes Yes</MenuItem>\r\n          <MenuItem value={15}>No. of votes No</MenuItem>\r\n          <MenuItem value={16}>Times on Winning Side of Division</MenuItem>\r\n          <MenuItem value={17}>Times on Losing Side of Division</MenuItem>\r\n          <MenuItem value={18}>Yes and Divison Carried</MenuItem>\r\n          <MenuItem value={19}>Yes and Division Lost</MenuItem>\r\n          <MenuItem value={20}>No and Division Carried</MenuItem>\r\n          <MenuItem value={21}>No and Division Lost</MenuItem>\r\n          <MenuItem disabled >News Mentions</MenuItem>\r\n          <MenuItem disabled >Votes recieved in last election</MenuItem>\r\n          <MenuItem disabled >Avg. Poll Rating</MenuItem>\r\n\r\n\r\n        </Select>\r\n      </FormControl>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={fillColor} htmlFor=\"grouped-select\">Y-Value</InputLabel>\r\n        <Select onChange={onChangeY} style={color} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n        <ListSubheader value={0}>General</ListSubheader>\r\n          <MenuItem value={0}>Age</MenuItem>\r\n        <ListSubheader value={1}>Twitter Data, last 7 days</ListSubheader>\r\n          <MenuItem value={1}>Followers</MenuItem>\r\n          <MenuItem value={2}>Retweets</MenuItem>\r\n          <MenuItem value={3}>Original Tweets</MenuItem>\r\n          <MenuItem value={4}>Follower Per Retweet</MenuItem>\r\n          <MenuItem value={5}>Retweets Per Original Tweet</MenuItem>\r\n          <MenuItem value={6}>Avg. Polarity</MenuItem>\r\n          <MenuItem value={7}>Avg. Subjectivity</MenuItem>\r\n          <ListSubheader value={8}>Dáil Questions, 01 July - 01 Sept</ListSubheader>\r\n          <MenuItem value={8}>Written Questions Asked</MenuItem>\r\n          <MenuItem value={9}>Oral Questions Asked</MenuItem>\r\n          <MenuItem value={10}>No. of Topics TD had Questions for</MenuItem>\r\n          <MenuItem value={11}>Avg. Questions TD had towards Topic</MenuItem>\r\n          <ListSubheader value={12}>Dáil Divisions, 01 Jan - 01 Sept</ListSubheader>  \r\n          <MenuItem value={12}>Divisions Absent</MenuItem>\r\n          <MenuItem value={13}>Divisions Present</MenuItem>\r\n          <MenuItem value={14}>No. of votes Yes</MenuItem>\r\n          <MenuItem value={15}>No. of votes No</MenuItem>\r\n          <MenuItem value={16}>Times on Winning Side of Division</MenuItem>\r\n          <MenuItem value={17}>Times on Losing Side of Division</MenuItem>\r\n          <MenuItem value={18}>Yes and Divison Carried</MenuItem>\r\n          <MenuItem value={19}>Yes and Division Lost</MenuItem>\r\n          <MenuItem value={20}>No and Division Carried</MenuItem>\r\n          <MenuItem value={21}>No and Division Lost</MenuItem>\r\n          <MenuItem disabled >News Mentions</MenuItem>\r\n          <MenuItem disabled >Votes recieved in last election</MenuItem>\r\n          <MenuItem disabled >Avg. Poll Rating</MenuItem>\r\n\r\n\r\n        </Select>\r\n      </FormControl>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={fillColor} htmlFor=\"grouped-select\">Circle Radius</InputLabel>\r\n        <Select onChange={onChangeR}style={color} classes={{icon:classes.icon}}defaultValue=\"\" id=\"grouped-select\">\r\n        <ListSubheader value={0}>General</ListSubheader>\r\n          <MenuItem value={0}>Age</MenuItem>\r\n        <ListSubheader value={1}>Twitter Data, last 7 days</ListSubheader>\r\n          <MenuItem value={1}>Followers</MenuItem>\r\n          <MenuItem value={2}>Retweets</MenuItem>\r\n          <MenuItem value={3}>Original Tweets</MenuItem>\r\n          <MenuItem value={4}>Follower Per Retweet</MenuItem>\r\n          <MenuItem value={5}>Retweets Per Original Tweet</MenuItem>\r\n          <MenuItem value={6}>Avg. Polarity</MenuItem>\r\n          <MenuItem value={7}>Avg. Subjectivity</MenuItem>\r\n          <ListSubheader value={8}>Dáil Questions, 01 July - 01 Sept</ListSubheader>\r\n          <MenuItem value={8}>Written Questions Asked</MenuItem>\r\n          <MenuItem value={9}>Oral Questions Asked</MenuItem>\r\n          <MenuItem value={10}>No. of Topics TD had Questions for</MenuItem>\r\n          <MenuItem value={11}>Avg. Questions TD had towards Topic</MenuItem>\r\n          <ListSubheader value={12}>Dáil Divisions, 01 Jan - 01 Sept</ListSubheader>  \r\n          <MenuItem value={12}>Divisions Absent</MenuItem>\r\n          <MenuItem value={13}>Divisions Present</MenuItem>\r\n          <MenuItem value={14}>No. of votes Yes</MenuItem>\r\n          <MenuItem value={15}>No. of votes No</MenuItem>\r\n          <MenuItem value={16}>Times on Winning Side of Division</MenuItem>\r\n          <MenuItem value={17}>Times on Losing Side of Division</MenuItem>\r\n          <MenuItem value={18}>Yes and Divison Carried</MenuItem>\r\n          <MenuItem value={19}>Yes and Division Lost</MenuItem>\r\n          <MenuItem value={20}>No and Division Carried</MenuItem>\r\n          <MenuItem value={21}>No and Division Lost</MenuItem>\r\n          <MenuItem disabled >News Mentions</MenuItem>\r\n          <MenuItem disabled >Votes recieved in last election</MenuItem>\r\n          <MenuItem disabled >Avg. Poll Rating</MenuItem>\r\n\r\n\r\n\r\n        </Select>\r\n      </FormControl>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={fillColor} htmlFor=\"grouped-select\">Highlight Option</InputLabel>\r\n        <Select onChange={onChangeHighlight} style={color} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n          <MenuItem value={0}>Highlight None</MenuItem>\r\n          <MenuItem value={1}>Highlight Cabinet Ministers</MenuItem>\r\n          <MenuItem value={2}>Highlight Junior Ministers</MenuItem>\r\n          <MenuItem value={3}>Highlight Both</MenuItem> \r\n          <MenuItem value={4}>Highlight Women</MenuItem>          \r\n        </Select>\r\n      </FormControl>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={fillColor} htmlFor=\"grouped-select\">Base Color</InputLabel>\r\n        <Select onChange={onChangeBaseColor} style={color} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n          <MenuItem value={0}>Party Color</MenuItem>\r\n          <MenuItem value={1}>White</MenuItem>     \r\n        </Select>\r\n      </FormControl>\r\n    </div>\r\n    {/* <List style={{display: \"inline-block\"}}>\r\n      <ListItem >\r\n        <ListItemText primary={\"x: \" + optionsExplanation[xOption] + \" (25/08/21)\"}/>\r\n          </ListItem>\r\n          <ListItem>\r\n            <ListItemText primary={\"y: \" + optionsExplanation[yOption] + \" (25/08/21)\"}/>\r\n             </ListItem>\r\n             <ListItem>\r\n            <ListItemText primary={\"r: \" + optionsExplanation[rOption] + \" (25/08/21)\"}/>\r\n            </ListItem>\r\n            \r\n    </List> */}\r\n            </div>\r\n        <div className={\"scroll-svg-container\"}>\r\n        <svg id={\"scatterplot-svg\"}ref={svgRef} height={heightMargin + margin.top + margin.bottom} width={widthMargin + margin.left + margin.right}>\r\n            <g id=\"container\" transform={'translate(' + margin.left + ',' + margin.top + ')'}>\r\n            <g className=\"x-axis\" style={color}></g>\r\n            <g className=\"y-axis\" style={color}></g>\r\n            </g>\r\n            </svg>\r\n          </div>\r\n        </div>\r\n    )\r\n}\r\nexport default Scatterplot\r\n","import * as d3 from 'd3'\r\nimport React from 'react'\r\nimport { useRef, useEffect, useState } from 'react'\r\nimport { allParties } from '../../../Backend/metaData'\r\nimport { chamber, current } from '../../../Backend/rollCall'\r\nimport { Typography, Checkbox, Select, MenuItem, ListSubheader, FormControl, InputLabel, makeStyles } from '@material-ui/core'\r\nimport { ContactSupport, ContactSupportOutlined, SlowMotionVideoOutlined } from '@material-ui/icons'\r\n\r\n\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    icon: {\r\n      color: \"white\"\r\n  },\r\n\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,   \r\n  }\r\n\r\n}));\r\n\r\nconst partyColors = {\r\n    \"Sinn Féin\": \"#326760\", \r\n    \"Fine Gael\": \"#6699FF\", \r\n    \"Fianna Fáil\": \"#66BB66\",\r\n    \"Labour Party\": \"#CC0000\",\r\n    \"Solidarity - People Before Profit\": \"#8E2420\",\r\n    \"Independent\": \"white\",\r\n    \"Green Party\": \"#99CC33\",\r\n    \"Social Democrats\": \"#752F8B\",\r\n    \"Aontú\": \"#44532A\",\r\n    \"Independents 4 Change\": \"grey\"}\r\n\r\n\r\nexport const PartyBarchart = ({data}) => {\r\n\r\n\r\n    const options = [\r\n\r\n    \"Followers\", \"Retweets\", \"Original Tweets\", \"TDs\", \"Average Followers\", \"Follower Engagement Rate\", \"Retweets per Original Tweet\", \"Written Questions Asked\", \"Oral Questions Asked\", \"Average Written Questions Asked by TD\", \"Average Oral Questions Asked by TD\"\r\n    \r\n    ]\r\n\r\n    const followers = d => d.totalFollows\r\n    const retweets = d => d.totalRetweets\r\n    const originalTweets = d => d.totalOriginalTweets\r\n    const TDAmount = d => d.TDAmount\r\n    const TDFollowerAvg = d => d.followersToTDs\r\n    const followerEngagementRate = d => d.followerEngagementRate\r\n    const retweetsToOriginalTweetsFunc = d => d.retweetsToOriginalTweets\r\n    const writtenQuestionsAsked = d => d.writtenQuestionsAsked\r\n    const oralQuestionsAsked = d => d.oralQuestionsAsked\r\n    const writtenQuestionsAskedAverage = d=> d.writtenQuestionsAskedAverage\r\n    const oralQuestionsAskedAverage = d=> d.oralQuestionsAskedAverage\r\n    const totalAbsences = d => d.totalAbsences\r\n    const totalPresences = d => d.totalPresences\r\n    const averageAbsences = d => d.averageAbsences\r\n    const averagePresences = d => d.averagePresences\r\n    const totalTimesOnWinningSide = d => d.totalTimesOnWinningSide\r\n    const totalTimesOnLosingSide = d => d.totalTimesOnLosingSide\r\n    const averageTDTimeOnWinningSide = d => d.averageTDTimeOnWinningSide\r\n    const averageTDTimeOnLosingSide = d => d.averageTDTimeOnLosingSide\r\n\r\n\r\n    const optionsFunctions = \r\n    \r\n    [ followers, retweets, originalTweets, TDAmount, TDFollowerAvg, followerEngagementRate, retweetsToOriginalTweetsFunc,  writtenQuestionsAsked, oralQuestionsAsked, writtenQuestionsAskedAverage, oralQuestionsAskedAverage, totalAbsences, totalPresences, averageAbsences, averagePresences, totalTimesOnWinningSide, totalTimesOnLosingSide, averageTDTimeOnWinningSide, averageTDTimeOnLosingSide]\r\n\r\n\r\n    const classes = useStyles();\r\n\r\n    \r\n    const [TDData, setTDData] = useState(null)\r\n    const [currentWeekIndex, setCurrentWeekIndex] = useState(null)\r\n    const [xOption, setXOption] = useState(1)\r\n    const [yOption, setYOption] = useState(0)\r\n    const [secOption, setSecOption] = useState(1)\r\n\r\n\r\n    const margin = {top: 20, right: 20, bottom: 100, left: 60}\r\n\r\n    const height = 600\r\n    const width = 1020\r\n\r\n    \r\n\r\n    const svgRef= useRef()\r\n\r\n\r\nconst onChangeX = (event, child) => {\r\n        setXOption(event.target.value)\r\n        console.log('x:' + event.target.value);\r\n        console.log(child);\r\n};\r\n\r\nconst onChangeY = (event, child) => {\r\n        setYOption(event.target.value)\r\n        console.log('y:' + event.target.value);\r\n        console.log(child);\r\n};\r\n\r\nconst onChangeSec = (event, child) => {\r\n    setSecOption(event.target.value)\r\n    console.log('sec:' + event.target.value);\r\n    console.log(child);\r\n};\r\n\r\n\r\nuseEffect(() => {\r\n\r\n    setTDData(data.filter(function(d) {\r\n          \r\n        if(d.followerData[0] != undefined) {\r\n        return d\r\n      }\r\n    }\r\n    ))\r\n\r\n}, [])\r\n\r\nuseEffect(() => {\r\n\r\n    if(!TDData) return null;\r\n\r\n    setCurrentWeekIndex(TDData[0].followerData.length - 1)\r\n\r\n}, [TDData])\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        if(!TDData || !currentWeekIndex) return null;\r\n\r\n        function makePartyObj() {\r\n\r\n        let partyArr = []\r\n\r\n        let parties = TDData.map(d => d.party)\r\n\r\n        parties = [...new Set(parties)];\r\n\r\n\r\n\r\n       function followerEngagementRateFunc(i) {\r\n\r\n        var a = TDData.map(function(d) {\r\n            if(parties[i] === d.party) {\r\n                return d\r\n            }\r\n        }).filter(function(x) {\r\n                    return x !== undefined\r\n                })\r\n\r\n        var follows = a.map(d => d.followerData[currentWeekIndex].followers).reduce(function(a, b) {return a + b})\r\n        var retweets = a.map(d => d.retweetData[currentWeekIndex].retweets).reduce(function(a, b) {return a + b})\r\n        var ratio = retweets / follows\r\n\r\n        if(ratio === Infinity) {\r\n            ratio = 0\r\n        }\r\n\r\n        return ratio \r\n\r\n       }\r\n       function retweetsToOriginalTweetsFunc(i) {\r\n\r\n        var a = TDData.map(function(d) {\r\n            if(parties[i] === d.party) {\r\n                return d\r\n            }\r\n        }).filter(function(x) {\r\n                    return x !== undefined\r\n                })\r\n\r\n        var retweets = a.map(d => d.retweetData[currentWeekIndex].retweets).reduce(function(a, b) {return a + b})\r\n        var original_tweets = a.map(d => d.retweetData[currentWeekIndex].original_tweets).reduce(function(a, b) {return a + b})\r\n        var ratio = retweets / original_tweets\r\n\r\n        if(ratio === Infinity) {\r\n            ratio = 0\r\n        }\r\n\r\n        ratio = ratio ? ratio : 0;\r\n\r\n        return ratio \r\n\r\n       }\r\n\r\n       function writtenQuestionsAsked(i) {\r\n\r\n        var a = TDData.map(function(d) {\r\n            if(parties[i] === d.party) {\r\n                return d\r\n            }\r\n        }).filter(function(x) {\r\n                    return x !== undefined\r\n                })\r\n\r\n\r\n               var b = a.map(function(d) {\r\n\r\n                var holder = d.writtenQuestions[0].writtenQuestions.to\r\n                if(!holder) return 0;\r\n                const sumValues = obj => Object.values(obj).reduce((a,b) => a + b) \r\n              \r\n                var sum = sumValues(holder)\r\n              \r\n                return sum\r\n                }).reduce(function(a,b) {return a + b})\r\n\r\n\r\n                return b\r\n\r\n\r\n       }\r\n\r\n       function oralQuestionsAsked(i) {\r\n\r\n        var a = TDData.map(function(d) {\r\n            if(parties[i] === d.party) {\r\n                return d\r\n            }\r\n        }).filter(function(x) {\r\n                    return x !== undefined\r\n                })\r\n\r\n\r\n               var b = a.map(function(d) {\r\n\r\n                var holder = d.oralQuestions[0].oralQuestions.to\r\n                if(!holder) return 0;\r\n                const sumValues = obj => Object.values(obj).reduce((a,b) => a + b) \r\n              \r\n                var sum = sumValues(holder)\r\n              \r\n                return sum\r\n                }).reduce(function(a,b) {return a + b})\r\n\r\n\r\n                return b\r\n\r\n\r\n       }\r\n\r\n            for(let i = 0; i < parties.length; i++) {\r\n\r\n\r\n        function partyObj() {\r\n            this.party = parties[i];\r\n            this.TDs = TDData.map(function(d) {\r\n                if(parties[i] === d.party) {\r\n                    return d\r\n                }\r\n            }).filter(function(x) {\r\n                        return x !== undefined\r\n                    })\r\n            this.totalFollows = this.TDs.map(d => d.followerData[currentWeekIndex].followers).reduce(function(a, b) {return a + b})\r\n            this.totalRetweets = this.TDs.map(d => d.retweetData[currentWeekIndex].retweets).reduce(function(a, b) {return a + b})\r\n            this.totalOriginalTweets = this.TDs.map(d => d.retweetData[currentWeekIndex].original_tweets).reduce(function(a, b) {return a + b})\r\n            this.TDAmount = this.TDs.length\r\n            this.followersToTDs = (this.TDs.map(d => d.followerData[currentWeekIndex].followers).reduce(function(a, b) {return a + b}) / this.TDAmount)\r\n            this.followerEngagementRate = followerEngagementRateFunc(i)\r\n            this.retweetsToOriginalTweets = retweetsToOriginalTweetsFunc(i)\r\n            this.writtenQuestionsAsked = writtenQuestionsAsked(i)\r\n            this.oralQuestionsAsked = oralQuestionsAsked(i)\r\n            this.writtenQuestionsAskedAverage = writtenQuestionsAsked(i) / this.TDs.length;\r\n            this.oralQuestionsAskedAverage = oralQuestionsAsked(i) / this.TDs.length\r\n            this.totalAbsences = this.TDs.map(d => d.voteData[0].absences).reduce(function(a, b) {return a + b})\r\n            this.totalPresences = this.TDs.map(d => d.voteData[0].totalVotes).reduce(function(a, b) {return a + b})\r\n            this.averageAbsences = this.TDs.map(d => d.voteData[0].absences).reduce(function(a, b) {return a + b}) / this.TDs.length\r\n            this.averagePresences = this.TDs.map(d => d.voteData[0].totalVotes).reduce(function(a, b) {return a + b}) / this.TDs.length\r\n            this.totalTimesOnWinningSide = this.TDs.map(d => d.voteData[0].onWinningSide).reduce(function(a, b) {return a + b})\r\n            this.totalTimesOnLosingSide = this.TDs.map(d => d.voteData[0].onLosingSide).reduce(function(a, b) {return a + b})\r\n            this.averageTDTimeOnWinningSide = this.TDs.map(d => d.voteData[0].onWinningSide).reduce(function(a, b) {return a + b}) / this.TDs.length\r\n            this.averageTDTimeOnLosingSide = this.TDs.map(d => d.voteData[0].onLosingSide).reduce(function(a, b) {return a + b}) / this.TDs.length\r\n        }\r\n\r\n        partyArr.push(new partyObj())\r\n            }\r\n\r\n            return partyArr\r\n\r\n    }\r\n    \r\n\r\n\r\n    console.log(makePartyObj())\r\n\r\n    const partyData = makePartyObj()\r\n\r\n        const xValue = d => d.party\r\n        const yValue = optionsFunctions[yOption]\r\n        const secondaryValue = optionsFunctions[secOption]\r\n        const party = d => d.party     \r\n        const partyColor = d => partyColors[party(d)] \r\n\r\n        \r\n\r\n        const svg = d3.select(svgRef.current);\r\n\r\n        const xScale = d3.scaleBand()\r\n                            .domain(partyData.map(xValue))\r\n                            .range([0, width])\r\n                            .padding(0.2)\r\n\r\n\r\n        const yScale = d3.scaleLinear()\r\n                        .domain([0, d3.max(partyData, yValue)])\r\n                        .range([height, 0]);\r\n\r\n        const xAxis = d3.axisBottom(xScale).ticks(partyData.length);\r\n\r\n        svg\r\n            .select(\".x-axis\")\r\n            .attr(\"transform\", \"translate(0,\" + 600 + \")\")\r\n            .transition(2000)\r\n            .call(xAxis)\r\n            .selectAll(\"text\")  \r\n            .style(\"text-anchor\", \"end\")\r\n            .attr(\"dx\", \"-.8em\")\r\n            .attr(\"dy\", \".15em\")\r\n            .attr(\"transform\", \"rotate(-25)\");\r\n\r\n        const yAxis = d3.axisLeft(yScale);\r\n\r\n    svg\r\n        .select(\".y-axis\")\r\n        .attr(\"transform\", \"translate(0,0)\")\r\n        .style(\"color\", \"white\")\r\n        .transition(500)\r\n        .call(yAxis)\r\n\r\n\r\n        \r\n        const tooltip = d3\r\n                .select('body')\r\n                .append('div')\r\n                .attr('class', 'd3-tooltip')\r\n                .style('position', 'absolute')\r\n                .style('z-index', '10')\r\n                .style('visibility', 'hidden')\r\n                .style('padding', '10px')\r\n                .style('background', 'rgba(0,0,0,0.6)')\r\n                .style('border-radius', '4px')\r\n                .style('color', '#fff')\r\n                .text('a simple tooltip');\r\n\r\n\r\n        var rects = d3.select(\"#container-party-bar\")\r\n                    .selectAll(\".bar\")\r\n                    .data(partyData)\r\n                    .join(\"rect\")\r\n                    .attr(\"class\", \"bar\")  \r\n                    .attr(\"fill\", partyColor)\r\n                    .attr(\"x\", d => xScale(xValue(d)))\r\n                    \r\n\r\n                rects.transition()\r\n                    .duration(400)\r\n                    .attr(\"y\", d => yScale(yValue(d)))\r\n                    .attr(\"width\", xScale.bandwidth())\r\n                    .attr(\"height\", d => 600 - yScale(yValue(d)))\r\n\r\n\r\n                    console.log(yScale(yValue(300)))\r\n\r\n\r\n\r\n                const hoverColor = \"#eec42d\"\r\n\r\n\r\n                rects\r\n                    .on('mouseover', function (d, i) {\r\n                        tooltip\r\n                        .html(\r\n                            `<div>Party: ${d.party}</div><div>${options[yOption]}: ${yValue(d).toLocaleString()}</div><div>${options[secOption]}: ${secondaryValue(d).toLocaleString()}</div></div>`\r\n                        )\r\n                            .style('visibility', 'visible');\r\n                            d3.select(this).transition().attr('fill', hoverColor);\r\n                        })\r\n                        .on('mousemove', function () {\r\n                            tooltip\r\n                            .style('top', d3.event.pageY - 10 + 'px')\r\n                            .style('left', d3.event.pageX + 10 + 'px');\r\n                        })\r\n                        .on('mouseout', function () {\r\n                            tooltip.html(``).style('visibility', 'hidden');\r\n                            d3.select(this).transition().attr('fill', partyColor);\r\n                        }); \r\n    }, [TDData, xOption, yOption, secOption, currentWeekIndex])\r\n\r\n\r\n\r\n\r\n\r\n\r\n    return (\r\n    <div className={\"featuredItem\"} style={{textAlign: \"center\"}}>\r\n            <Typography variant=\"h5\">Party Bar Chart</Typography>\r\n            <p style={{marginTop: \"10px\"}}>As of 25/08/21.</p>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">Y-Value</InputLabel>\r\n        <Select onChange={onChangeY} style={{ color: \"white\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n          <ListSubheader>Twitter Data</ListSubheader>\r\n          <MenuItem value={0}>Total Followers</MenuItem>\r\n          <MenuItem value={1}>Total Retweets</MenuItem>\r\n          <MenuItem value={2}>Original Tweets</MenuItem>\r\n          <MenuItem value={3}>TDs on Twitter</MenuItem>\r\n          <MenuItem value={4}>Avg Followers</MenuItem>  \r\n          <MenuItem value={5}>Follower Engagement Rate </MenuItem>       \r\n          <MenuItem value={6}>Retweets per Original Tweet</MenuItem>     \r\n          <ListSubheader>Parliamentary Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={7}>Written Questions Asked</MenuItem> \r\n          <MenuItem value={8}>Oral Questions Asked</MenuItem> \r\n          <MenuItem value={9}>Average Written Questions Asked by TD</MenuItem> \r\n          <MenuItem value={10}>Average Oral Questions Asked by TD</MenuItem>\r\n          <MenuItem value={11}>Total Vote Absences</MenuItem> \r\n          <MenuItem value={12}>Total Vote Presences</MenuItem>  \r\n          <MenuItem value={13}>Average Vote Absences</MenuItem> \r\n          <MenuItem value={14}>Average Vote Presences</MenuItem>  \r\n          <MenuItem value={15}>Total Times On Winning Side</MenuItem> \r\n          <MenuItem value={16}>Total Times On Losing Side</MenuItem> \r\n          <MenuItem value={17}>Average Times On Winning Side</MenuItem> \r\n          <MenuItem value={18}>Average Times On Losing Side</MenuItem> \r\n          <MenuItem disabled>Motions Tabled</MenuItem>\r\n          <MenuItem disabled>Questions Asked</MenuItem>\r\n          <ListSubheader>News Data (Coming Soon)</ListSubheader>\r\n          <MenuItem disabled>News Mentions</MenuItem>\r\n          <ListSubheader>Electoral Data (Coming Soon)</ListSubheader>\r\n          <MenuItem disabled>Votes recieved in last election</MenuItem>\r\n          <MenuItem disabled>Avg. Poll</MenuItem>\r\n        </Select>\r\n      </FormControl>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">Tooltip Value</InputLabel>\r\n        <Select onChange={onChangeSec} style={{ color: \"white\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n          <ListSubheader>Twitter Data</ListSubheader>\r\n          <MenuItem value={0}>Total Followers</MenuItem>\r\n          <MenuItem value={1}>Total Retweets</MenuItem>\r\n          <MenuItem value={2}>Original Tweets</MenuItem>\r\n          <MenuItem value={3}>TDs on Twitter</MenuItem>\r\n          <MenuItem value={4}>Avg Followers</MenuItem>  \r\n          <MenuItem value={5}>Followers per Retweet </MenuItem>       \r\n          <MenuItem value={6}>Retweets per Original Tweet</MenuItem>     \r\n          <ListSubheader>Parliamentary Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={7}>Written Questions Asked</MenuItem> \r\n          <MenuItem value={8}>Oral Questions Asked</MenuItem> \r\n          <MenuItem value={9}>Average Written Questions Asked by TD</MenuItem> \r\n          <MenuItem value={10}>Average Oral Questions Asked by TD</MenuItem>\r\n          <MenuItem value={11}>Total Absences</MenuItem>  \r\n          <MenuItem disabled>Motions Tabled</MenuItem>\r\n          <MenuItem disabled>Questions Asked</MenuItem>\r\n          <ListSubheader>News Data (Coming Soon)</ListSubheader>\r\n          <MenuItem disabled>News Mentions</MenuItem>\r\n          <ListSubheader>Electoral Data (Coming Soon)</ListSubheader>\r\n          <MenuItem disabled>Votes recieved in last election</MenuItem>\r\n          <MenuItem disabled>Avg. Poll</MenuItem>\r\n        </Select>\r\n      </FormControl>\r\n        <div className={\"scroll-svg-container\"}>\r\n            <svg ref={svgRef} height={height + margin.top + margin.bottom} width={width + margin.left + margin.right}>\r\n            <g id=\"container-party-bar\" transform={'translate(' + margin.left + ',' + margin.top + ')'}>\r\n                <g className=\"x-axis\"></g>\r\n                <g className=\"y-axis\"></g>\r\n            </g>\r\n            </svg>\r\n        </div>\r\n    </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport useAutocomplete from '@material-ui/lab/useAutocomplete';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport styled from 'styled-components';\r\nimport { chamber } from '../../../Backend/rollCall';\r\n\r\nconst Label = styled('label')`\r\n  padding: 0 0 4px;\r\n  line-height: 1.5;\r\n  display: block;\r\n`;\r\n\r\nconst InputWrapper = styled('div')`\r\n  width: 300px;\r\n  color: black;\r\n  border: 1px solid #d9d9d9;\r\n  background-color: #fff;\r\n  border-radius: 4px;\r\n  padding: 1px;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n\r\n\r\n  &:hover {\r\n    border-color: #40a9ff;\r\n  }\r\n\r\n  &.focused {\r\n    border-color: #40a9ff;\r\n    box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);\r\n  }\r\n\r\n  & input {\r\n    color: black;\r\n    font-size: 14px;\r\n    height: 30px;\r\n    box-sizing: border-box;\r\n    padding: 4px 6px;\r\n    width: 0;\r\n    min-width: 30px;\r\n    flex-grow: 1;\r\n    border: 0;\r\n    margin: 0;\r\n    outline: 0;\r\n\r\n  }\r\n`;\r\n\r\nconst Tag = styled(({ label, onDelete, ...props }) => (\r\n  <div {...props}>\r\n    <span>{label}</span>\r\n    <CloseIcon onClick={onDelete} />\r\n  </div>\r\n))`\r\n  display: flex;\r\n  align-items: center;\r\n  height: 24px;\r\n  margin: 2px;\r\n  line-height: 22px;\r\n  background-color: #fafafa;\r\n  border: 1px solid #e8e8e8;\r\n  border-radius: 2px;\r\n  box-sizing: content-box;\r\n  padding: 0 4px 0 10px;\r\n  outline: 0;\r\n  overflow: hidden;\r\n\r\n  &:focus {\r\n    border-color: #40a9ff;\r\n    background-color: #e6f7ff;\r\n}\r\n\r\n  & span {\r\n    overflow: hidden;\r\n    white-space: nowrap;\r\n    text-overflow: ellipsis;\r\n  }\r\n\r\n  & svg {\r\n    font-size: 12px;\r\n    cursor: pointer;\r\n    padding: 4px;\r\n  }\r\n`;\r\n\r\nconst Listbox = styled('ul')`\r\n\r\n\r\n  width: 300px;\r\n  margin: 2px 0 0;\r\n  padding: 0;\r\n  position: absolute;\r\n  list-style: none;\r\n  background-color: white;\r\n  overflow: auto;\r\n  max-height: 250px;\r\n  border-radius: 4px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\r\n  z-index: 1;\r\n  color: black;\r\n\r\n  & li {\r\n\r\n    padding: 5px 12px;\r\n    display: flex;\r\n\r\n    & span {\r\n      flex-grow: 1;\r\n    }\r\n\r\n    & svg {\r\n      color: transparent;\r\n    }\r\n  }\r\n\r\n  & li[aria-selected='true'] {\r\n    background-color: #fafafa;\r\n    font-weight: 600;\r\n    color: black;\r\n    \r\n\r\n    & svg {\r\n      color: green;\r\n    }\r\n  }\r\n\r\n  & li[data-focus='true'] {\r\n    background-color: #e6f7ff;\r\n    cursor: pointer;\r\n    color: black;\r\n\r\n    & svg {\r\n        color: black\r\n    }\r\n  }\r\n`;\r\n\r\nexport default function CustomizedHook() {\r\n  const {\r\n    getRootProps,\r\n    getInputLabelProps,\r\n    getInputProps,\r\n    getTagProps,\r\n    getListboxProps,\r\n    getOptionProps,\r\n    groupedOptions,\r\n    value,\r\n    focused,\r\n    setAnchorEl,\r\n  } = useAutocomplete({\r\n    id: 'customized-hook-demo',\r\n    defaultValue: [top100Films[1]],\r\n    multiple: true,\r\n    options: chamber,\r\n    getOptionLabel: (option) => option.name,\r\n  });\r\n\r\n\r\n\r\n\r\n\r\n\r\n  return (\r\n      <div>\r\n        <div {...getRootProps()}>\r\n          <Label {...getInputLabelProps()}>Filter</Label>\r\n          <InputWrapper ref={setAnchorEl} className={focused ? 'focused' : ''}>\r\n\r\n        \r\n            {value.map((option, index) => (\r\n              <Tag label={option.name} {...getTagProps({ index })} />\r\n            ))}\r\n            \r\n            <input {...getInputProps()} />\r\n          </InputWrapper>\r\n        </div>\r\n        {groupedOptions.length > 0 ? (\r\n          <Listbox {...getListboxProps()}>\r\n            {groupedOptions.map((option, index) => (\r\n              <li fill={option.partyColor} {...getOptionProps({ option, index })}>\r\n                <span >{option.name} <span style={{borderRadius: \"50%\", backgroundColor: option.partyColor, height:\"5px\", width:\"5px\", display: \"inline-block\"}}></span></span>\r\n                <CheckIcon fontSize=\"small\" />\r\n              </li>\r\n            ))}\r\n          </Listbox>\r\n        ) : null}\r\n      </div>\r\n\r\n  );\r\n}\r\n\r\n// Top 100 films as rated by IMDb users. http://www.imdb.com/chart/top\r\nconst top100Films = [\r\n  { title: 'The Shawshank Redemption', year: 1994 },\r\n  { title: 'The Godfather', year: 1972 },\r\n  { title: 'The Godfather: Part II', year: 1974 },\r\n  { title: 'The Dark Knight', year: 2008 },\r\n  { title: '12 Angry Men', year: 1957 },\r\n  { title: \"Schindler's List\", year: 1993 },\r\n  { title: 'Pulp Fiction', year: 1994 },\r\n  { title: 'The Lord of the Rings: The Return of the King', year: 2003 },\r\n  { title: 'The Good, the Bad and the Ugly', year: 1966 },\r\n  { title: 'Fight Club', year: 1999 },\r\n  { title: 'The Lord of the Rings: The Fellowship of the Ring', year: 2001 },\r\n  { title: 'Star Wars: Episode V - The Empire Strikes Back', year: 1980 },\r\n  { title: 'Forrest Gump', year: 1994 },\r\n  { title: 'Inception', year: 2010 },\r\n  { title: 'The Lord of the Rings: The Two Towers', year: 2002 },\r\n  { title: \"One Flew Over the Cuckoo's Nest\", year: 1975 },\r\n  { title: 'Goodfellas', year: 1990 },\r\n  { title: 'The Matrix', year: 1999 },\r\n  { title: 'Seven Samurai', year: 1954 },\r\n  { title: 'Star Wars: Episode IV - A New Hope', year: 1977 },\r\n  { title: 'City of God', year: 2002 },\r\n  { title: 'Se7en', year: 1995 },\r\n  { title: 'The Silence of the Lambs', year: 1991 },\r\n  { title: \"It's a Wonderful Life\", year: 1946 },\r\n  { title: 'Life Is Beautiful', year: 1997 },\r\n  { title: 'The Usual Suspects', year: 1995 },\r\n  { title: 'Léon: The Professional', year: 1994 },\r\n  { title: 'Spirited Away', year: 2001 },\r\n  { title: 'Saving Private Ryan', year: 1998 },\r\n  { title: 'Once Upon a Time in the West', year: 1968 },\r\n  { title: 'American History X', year: 1998 },\r\n  { title: 'Interstellar', year: 2014 },\r\n  { title: 'Casablanca', year: 1942 },\r\n  { title: 'City Lights', year: 1931 },\r\n  { title: 'Psycho', year: 1960 },\r\n  { title: 'The Green Mile', year: 1999 },\r\n  { title: 'The Intouchables', year: 2011 },\r\n  { title: 'Modern Times', year: 1936 },\r\n  { title: 'Raiders of the Lost Ark', year: 1981 },\r\n  { title: 'Rear Window', year: 1954 },\r\n  { title: 'The Pianist', year: 2002 },\r\n  { title: 'The Departed', year: 2006 },\r\n  { title: 'Terminator 2: Judgment Day', year: 1991 },\r\n  { title: 'Back to the Future', year: 1985 },\r\n  { title: 'Whiplash', year: 2014 },\r\n  { title: 'Gladiator', year: 2000 },\r\n  { title: 'Memento', year: 2000 },\r\n  { title: 'The Prestige', year: 2006 },\r\n  { title: 'The Lion King', year: 1994 },\r\n  { title: 'Apocalypse Now', year: 1979 },\r\n  { title: 'Alien', year: 1979 },\r\n  { title: 'Sunset Boulevard', year: 1950 },\r\n  { title: 'Dr. Strangelove or: How I Learned to Stop Worrying and Love the Bomb', year: 1964 },\r\n  { title: 'The Great Dictator', year: 1940 },\r\n  { title: 'Cinema Paradiso', year: 1988 },\r\n  { title: 'The Lives of Others', year: 2006 },\r\n  { title: 'Grave of the Fireflies', year: 1988 },\r\n  { title: 'Paths of Glory', year: 1957 },\r\n  { title: 'Django Unchained', year: 2012 },\r\n  { title: 'The Shining', year: 1980 },\r\n  { title: 'WALL·E', year: 2008 },\r\n  { title: 'American Beauty', year: 1999 },\r\n  { title: 'The Dark Knight Rises', year: 2012 },\r\n  { title: 'Princess Mononoke', year: 1997 },\r\n  { title: 'Aliens', year: 1986 },\r\n  { title: 'Oldboy', year: 2003 },\r\n  { title: 'Once Upon a Time in America', year: 1984 },\r\n  { title: 'Witness for the Prosecution', year: 1957 },\r\n  { title: 'Das Boot', year: 1981 },\r\n  { title: 'Citizen Kane', year: 1941 },\r\n  { title: 'North by Northwest', year: 1959 },\r\n  { title: 'Vertigo', year: 1958 },\r\n  { title: 'Star Wars: Episode VI - Return of the Jedi', year: 1983 },\r\n  { title: 'Reservoir Dogs', year: 1992 },\r\n  { title: 'Braveheart', year: 1995 },\r\n  { title: 'M', year: 1931 },\r\n  { title: 'Requiem for a Dream', year: 2000 },\r\n  { title: 'Amélie', year: 2001 },\r\n  { title: 'A Clockwork Orange', year: 1971 },\r\n  { title: 'Like Stars on Earth', year: 2007 },\r\n  { title: 'Taxi Driver', year: 1976 },\r\n  { title: 'Lawrence of Arabia', year: 1962 },\r\n  { title: 'Double Indemnity', year: 1944 },\r\n  { title: 'Eternal Sunshine of the Spotless Mind', year: 2004 },\r\n  { title: 'Amadeus', year: 1984 },\r\n  { title: 'To Kill a Mockingbird', year: 1962 },\r\n  { title: 'Toy Story 3', year: 2010 },\r\n  { title: 'Logan', year: 2017 },\r\n  { title: 'Full Metal Jacket', year: 1987 },\r\n  { title: 'Dangal', year: 2016 },\r\n  { title: 'The Sting', year: 1973 },\r\n  { title: '2001: A Space Odyssey', year: 1968 },\r\n  { title: \"Singin' in the Rain\", year: 1952 },\r\n  { title: 'Toy Story', year: 1995 },\r\n  { title: 'Bicycle Thieves', year: 1948 },\r\n  { title: 'The Kid', year: 1921 },\r\n  { title: 'Inglourious Basterds', year: 2009 },\r\n  { title: 'Snatch', year: 2000 },\r\n  { title: '3 Idiots', year: 2009 },\r\n  { title: 'Monty Python and the Holy Grail', year: 1975 },\r\n];\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport ListSubheader from '@material-ui/core/ListSubheader';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport { options } from './AxisUtils/AxisUtils';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    icon: {\r\n      color: \"white\"\r\n  },\r\n\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n    \r\n  }\r\n\r\n}));\r\n\r\nexport default function GroupedSelect() {\r\n\r\n  \r\n  const classes = useStyles();\r\n\r\n  const onChangeX = (event, child) => {\r\n    console.log('x:' + event.target.value);\r\n    console.log(child);\r\n  };\r\n\r\n  const onChangeY = (event, child) => {\r\n    console.log('y:' + event.target.value);\r\n    console.log(child);\r\n  };\r\n\r\n\r\n\r\n\r\n  return (\r\n    <div>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">X-Value</InputLabel>\r\n        <Select  onChange={onChangeX} style={{ color: \"white\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n          <MenuItem value=\"\">\r\n            <em>None</em>\r\n          </MenuItem>\r\n          <ListSubheader>Twitter Data</ListSubheader>\r\n          <MenuItem value={1}>Total Followers</MenuItem>\r\n          <MenuItem value={2}>Total Retweets</MenuItem>\r\n          <MenuItem value={3}>Avg. Sentimenmt</MenuItem>\r\n          <MenuItem value={4}>Activty</MenuItem>\r\n          <MenuItem value={5}>Connectivity</MenuItem>\r\n          <ListSubheader>Parliamentary Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={6}>Yes Votes</MenuItem>\r\n          <MenuItem value={7}>No Votes</MenuItem>\r\n          <MenuItem value={8}>Motions Tabled</MenuItem>\r\n          <MenuItem value={9}>Questions Asked</MenuItem>\r\n          <ListSubheader>News Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={10}>News Mentions</MenuItem>\r\n          <ListSubheader>Electoral Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={11}>Votes in last election</MenuItem>\r\n          <MenuItem value={12}>Opinion polls</MenuItem>\r\n        </Select>\r\n      </FormControl>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">Y-Value</InputLabel>\r\n        <Select onChange={onChangeY} style={{ color: \"white\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n          <MenuItem value=\"\">\r\n            <em>None</em>\r\n          </MenuItem>\r\n          <ListSubheader>Twitter Data</ListSubheader>\r\n          <MenuItem value={1}>Total Followers</MenuItem>\r\n          <MenuItem value={2}>Total Retweets</MenuItem>\r\n          <MenuItem value={3}>Avg. Sentimenmt</MenuItem>\r\n          <MenuItem value={4}>Activty</MenuItem>\r\n          <MenuItem value={5}>Connectivity</MenuItem>\r\n          <ListSubheader>Parliamentary Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={6}>Yes Votes</MenuItem>\r\n          <MenuItem value={7}>No Votes</MenuItem>\r\n          <MenuItem value={8}>Motions Tabled</MenuItem>\r\n          <MenuItem value={9}>Questions Asked</MenuItem>\r\n          <ListSubheader>News Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={10}>News Mentions</MenuItem>\r\n          <ListSubheader>Electoral Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={11}>Votes in last election</MenuItem>\r\n          <MenuItem value={12}>Opinion polls</MenuItem>\r\n        </Select>\r\n      </FormControl>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">Circle Radius</InputLabel>\r\n        <Select style={{ color: \"white\"}} classes={{icon:classes.icon}}defaultValue=\"\" id=\"grouped-select\">\r\n          <MenuItem value=\"\">\r\n            <em>None</em>\r\n          </MenuItem>\r\n          <ListSubheader>Twitter Data</ListSubheader>\r\n          <MenuItem value={1}>Total Followers</MenuItem>\r\n          <MenuItem value={2}>Total Retweets</MenuItem>\r\n          <MenuItem value={3}>Avg. Sentimenmt</MenuItem>\r\n          <MenuItem value={4}>Activty</MenuItem>\r\n          <MenuItem value={5}>Connectivity</MenuItem>\r\n          <ListSubheader>Parliamentary Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={6}>Yes Votes</MenuItem>\r\n          <MenuItem value={7}>No Votes</MenuItem>\r\n          <MenuItem value={8}>Motions Tabled</MenuItem>\r\n          <MenuItem value={9}>Questions Asked</MenuItem>\r\n          <ListSubheader>News Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={10}>News Mentions</MenuItem>\r\n          <ListSubheader>Electoral Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={11}>Votes in last election</MenuItem>\r\n          <MenuItem value={12}>Opinion polls</MenuItem>\r\n\r\n        </Select>\r\n      </FormControl>\r\n    </div>\r\n  );\r\n}","import React from 'react'\r\nimport { useRef, useEffect, useState} from 'react'\r\nimport * as d3 from 'd3'\r\nimport { chamber } from '../../../Backend/rollCall'\r\nimport { axisBottom, axisLeft, svg } from 'd3'\r\nimport { current } from '../../../Backend/rollCall'\r\nimport { Typography, Checkbox, Select, ListItem } from '@material-ui/core'\r\nimport CustomizedHook from './SearchSelectBox'\r\nimport GroupedSelect from './GroupedSelectBox'\r\nimport './scatterplot.css'\r\nimport { MenuItem, ListSubheader, FormControl, InputLabel, makeStyles, List, ListItemText } from '@material-ui/core'\r\nimport axios from 'axios'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n        icon: {\r\n          color: \"white\"\r\n      },\r\n    \r\n      formControl: {\r\n        margin: theme.spacing(1),\r\n        minWidth: 120,   \r\n      }\r\n    \r\n}));\r\n\r\nconst partyColors = {\r\n\"Sinn Féin\": \"#326760\", \r\n\"Fine Gael\": \"#6699FF\", \r\n\"Fianna Fáil\": \"#66BB66\",\r\n\"Labour Party\": \"#CC0000\",\r\n\"Solidarity - People Before Profit\": \"#8E2420\",\r\n\"Independent\": \"white\",\r\n\"Green Party\": \"#99CC33\",\r\n\"Social Democrats\": \"#752F8B\",\r\n\"Aontú\": \"#44532A\"}\r\n\r\nconst ScatterplotZoom = ({data}) => {\r\n\r\n\r\n\r\n\r\n    const [TDData, setTDData] = useState(null)\r\n    const [xOption, setXOption] = useState(0)\r\n    const [yOption, setYOption] = useState(1)\r\n    const [rOption, setROption] = useState(0)\r\n\r\n    const followers = d => d.followerData[0].followers\r\n    const retweets = d => d.retweetData[0].retweets\r\n    const sentiment = d => d.retweetData[0].original_tweets\r\n    \r\n    const optionsFunctions = [followers, retweets, sentiment]\r\n\r\n    const xValue = optionsFunctions[xOption]\r\n    const yValue = optionsFunctions[yOption]\r\n    const rValue = optionsFunctions[rOption]\r\n\r\n    useEffect(() => {\r\n\r\n        setTDData(data)\r\n        console.log(TDData)\r\n\r\n    }, [data])\r\n\r\n\r\n  function getTDsFromApiAsync() {\r\n  return fetch(\"https://api.oireachtas.ie/v1/members?date_start=1900-01-01&chamber_id=&date_end=2099-01-01&limit=50\")\r\n  .then((response) => response.json())\r\n  .then((responseJson) => {\r\n    return responseJson.movies;\r\n  })\r\n  .catch((error) => {\r\n    console.error(error);\r\n  });\r\n}\r\n\r\n\r\nconsole.log(getTDsFromApiAsync())\r\n\r\n  const wrapperRef = useRef()\r\n  const svgRef = useRef()\r\n\r\n    const options = [\r\n\r\n        \"Followers\", \"Retweets\", \"Sentiment\"\r\n        ]\r\n\r\n\r\n    \r\n    \r\n\r\n    const classes = useStyles();\r\n\r\n\r\n    const onChangeX = (event, child) => {\r\n            setXOption(event.target.value)\r\n            console.log('x:' + event.target.value);\r\n            console.log(child);\r\n    };\r\n\r\n    const onChangeY = (event, child) => {\r\n            setYOption(event.target.value)\r\n            console.log('y:' + event.target.value);\r\n            console.log(child);\r\n    };\r\n\r\n    const onChangeR = (event, child) => {\r\n        setROption(event.target.value)\r\n        console.log('r:' + event.target.value);\r\n        console.log(child);\r\n};\r\n\r\n    const margin = {top: 20, right: 20, bottom: 20, left: 50}\r\n    \r\n    const height = 620 - margin.left - margin.right;\r\n    const width = 820 - margin.top - margin.bottom;        \r\n    \r\n\r\n\r\n\r\n\r\n\r\n\r\n    useEffect(() => {\r\n\r\n      console.log(TDData)\r\n\r\n      if(!TDData) return null;\r\n      \r\n\r\n\r\n\r\n    const filteredTDData = TDData.filter( function(d) {\r\n          \r\n      if(d.followerData[0] != undefined) {\r\n      return d\r\n    }\r\n  }\r\n  )\r\n\r\n\r\n          console.log(filteredTDData)\r\n\r\n      const svg = d3.select(svgRef.current)\r\n\r\n      function zoomed({transform}) {\r\n        const zx = transform.rescaleX(xScale).interpolate(d3.interpolateRound);\r\n        const zy = transform.rescaleY(yScale).interpolate(d3.interpolateRound);\r\n        circles.attr(\"transform\", transform).attr(\"stroke-width\", 5 / transform(height/width));\r\n        svg.select('x-axis').call(xAxis, zx);\r\n        svg.select('y-axis').call(yAxis, zy);\r\n      }\r\n\r\n    const zoom = d3.zoom()\r\n      .scaleExtent([0.5, 32])\r\n      .on(\"zoom\", zoomed);\r\n\r\n    svg.select('container').call(zoom).call(zoom.transform, d3.zoomIdentity);\r\n\r\n\r\n\r\n\r\n        const xScale = d3.scaleLinear()\r\n                        .range([0, width])\r\n                        .domain(d3.extent(filteredTDData, xValue))\r\n\r\n\r\n\r\n        const yScale = d3.scaleLinear()\r\n                        .range([height, 0])\r\n                        .domain(d3.extent(filteredTDData, yValue))\r\n                        \r\n        const rScale = d3.scaleLinear()\r\n                        .range([2, 15])\r\n                        .domain(d3.extent(filteredTDData, rValue))\r\n\r\n        const party = d => d.party\r\n        const partyColor = d => partyColors[party(d)]\r\n        const name = d => d.name\r\n    \r\n       \r\n\r\n        const xAxis = axisBottom(xScale);        \r\n        \r\n        svg.select(\".x-axis\")\r\n            .attr(\"transform\", \"translate(0,\" + height + \")\")\r\n            .transition()\r\n            .duration(500)\r\n            .call(xAxis)\r\n\r\n\r\n\r\n            \r\n\r\n        const yAxis = axisLeft(yScale);\r\n\r\n        svg.select(\".y-axis\")\r\n        .attr(\"transform\", \"translate(0, 0)\")\r\n            .transition()\r\n            .duration(500)\r\n            .call(yAxis)\r\n\r\n            const tooltip = d3\r\n            .select('body')\r\n            .append('div')\r\n            .attr('class', 'd3-tooltip')\r\n            .style('position', 'absolute')\r\n            .style('z-index', '10')\r\n            .style('visibility', 'hidden')\r\n            .style('padding', '10px')\r\n            .style('background', 'rgba(0,0,0,0.6)')\r\n            .style('border-radius', '4px')\r\n            .style('color', '#fff')\r\n            .text('a simple tooltip');\r\n\r\n            const hoverColor = \"#eec42d\"\r\n       \r\n        var circles = d3.select(\"#container\")\r\n                        .selectAll(\".node\")\r\n                        .data(filteredTDData)\r\n                        .join(\"circle\")\r\n                        .attr(\"class\", \"node\")\r\n                        .attr(\"fill\", partyColor)\r\n                        .attr('fill-opacity', 0.75)\r\n                        .attr(\"name\", name)\r\n\r\n            circles.transition()\r\n                    .duration(500)\r\n                    .attr(\"cx\", d => xScale(xValue(d)))\r\n                    .attr(\"cy\", d => yScale(yValue(d)))\r\n                    .attr(\"r\", d => rScale(rValue(d)))\r\n\r\n            circles.on('mouseover', function (d, i) {\r\n            tooltip\r\n            .html(\r\n                `<div>TD: ${d.name}</div><div>Party: ${d.party}</div><div>x: ${options[xOption]}: ${xValue(d)}</div><div>y: ${options[yOption]}: ${yValue(d)}</div><div>r: ${options[rOption]}: ${rValue(d)}</div>`\r\n            )\r\n                .style('visibility', 'visible');\r\n                d3.select(this).transition().attr('fill', hoverColor);\r\n            })\r\n            .on('mousemove', function () {\r\n                tooltip\r\n                .style('top', d3.event.pageY - 10 + 'px')\r\n                .style('left', d3.event.pageX + 10 + 'px');\r\n            })\r\n            .on('mouseout', function () {\r\n                tooltip.html(``).style('visibility', 'hidden');\r\n                d3.select(this).transition().attr('fill', partyColor);\r\n            }); \r\n\r\n\r\n          \r\n    }, [TDData, xOption, yOption, rOption])\r\n\r\n    \r\n    if (!TDData) return null;\r\n\r\n    return (\r\n\r\n        <div className={\"featuredItem\"} style={{textAlign: \"center\", margin: \"10px\", padding: \"10px\"}}>\r\n        <Typography style={{marginBottom: 20}} align=\"center\" variant=\"h5\">Interactive Scatter Plot</Typography>\r\n        \r\n            <div>\r\n                {/* <CustomizedHook/> */}\r\n                <div>\r\n                    \r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">X-Value</InputLabel>\r\n        <Select  onChange={onChangeX} style={{ color: \"white\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n          <ListSubheader>Twitter Data</ListSubheader>\r\n          <MenuItem value={0}>Total Followers</MenuItem>\r\n          <MenuItem value={1}>Total Retweets</MenuItem>\r\n          <MenuItem value={2}>Avg. Sentiment</MenuItem>\r\n          <MenuItem value={3}>Activity</MenuItem>\r\n          <MenuItem value={4}>Connectivity</MenuItem>\r\n          <ListSubheader>Parliamentary Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={5}>Yes Votes</MenuItem>\r\n          <MenuItem value={6}>No Votes</MenuItem>\r\n          <MenuItem value={7}>Motions Tabled</MenuItem>\r\n          <MenuItem value={8}>Questions Asked</MenuItem>\r\n          <ListSubheader>News Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={9}>News Mentions</MenuItem>\r\n          <ListSubheader>Electoral Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={10}>Votes recieved in last election</MenuItem>\r\n          <MenuItem value={11}>Avg. Poll Rating</MenuItem>\r\n        </Select>\r\n      </FormControl>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">Y-Value</InputLabel>\r\n        <Select onChange={onChangeY} style={{ color: \"white\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n          <ListSubheader>Twitter Data</ListSubheader>\r\n          <MenuItem value={0}>Total Followers</MenuItem>\r\n          <MenuItem value={1}>Total Retweets</MenuItem>\r\n          <MenuItem value={2}>Avg. Sentiment</MenuItem>\r\n          <MenuItem value={3}>Activity</MenuItem>\r\n          <MenuItem value={4}>Connectivity</MenuItem>\r\n          <ListSubheader>Parliamentary Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={5}>Yes Votes</MenuItem>\r\n          <MenuItem value={6}>No Votes</MenuItem>\r\n          <MenuItem value={7}>Motions Tabled</MenuItem>\r\n          <MenuItem value={8}>Questions Asked</MenuItem>\r\n          <ListSubheader>News Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={9}>News Mentions</MenuItem>\r\n          <ListSubheader>Electoral Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={10}>Votes recieved in last election</MenuItem>\r\n          <MenuItem value={11}>Avg. Poll</MenuItem>\r\n        </Select>\r\n      </FormControl>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">Circle Radius</InputLabel>\r\n        <Select onChange={onChangeR}style={{ color: \"white\"}} classes={{icon:classes.icon}}defaultValue=\"\" id=\"grouped-select\">\r\n          <MenuItem value={0}>\r\n            <em>None</em>\r\n          </MenuItem>\r\n          <ListSubheader>Twitter Data</ListSubheader>\r\n          <MenuItem value={1}>Total Followers</MenuItem>\r\n          <MenuItem value={2}>Total Retweets</MenuItem>\r\n          <MenuItem value={3}>Avg. Sentiment</MenuItem>\r\n          <MenuItem value={4}>Activity</MenuItem>\r\n          <MenuItem value={5}>Connectivity</MenuItem>\r\n          <ListSubheader>Parliamentary Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={6}>Yes Votes</MenuItem>\r\n          <MenuItem value={7}>No Votes</MenuItem>\r\n          <MenuItem value={8}>Motions Tabled</MenuItem>\r\n          <MenuItem value={9}>Questions Asked</MenuItem>\r\n          <ListSubheader>News Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={10}>News Mentions</MenuItem>\r\n          <ListSubheader>Electoral Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={11}>Votes recieved in last election</MenuItem>\r\n          <MenuItem value={12}>Avg. Poll Rating</MenuItem>\r\n\r\n        </Select>\r\n      </FormControl>\r\n    </div>\r\n    <List style={{display: \"inline-block\"}}>\r\n      <ListItem >\r\n        <ListItemText primary=\"x: Number of Twitter followers a TD has on last check (29/03/02)\"/>\r\n          </ListItem>\r\n          <ListItem>\r\n            <ListItemText primary=\"y: Number of retweets a TD has received since tracking began (29/03/02)\"/>\r\n             </ListItem>\r\n             <ListItem>\r\n            <ListItemText primary=\"r: A TD's average tweet sentiment over the latest 7-day-period\"/>\r\n            </ListItem>\r\n            \r\n    </List>\r\n            </div>\r\n        <div className={\"scroll-svg-container\"}>\r\n        <svg id={\"scatterplot-svg\"}ref={svgRef} height={height + margin.top + margin.bottom} width={width + margin.left + margin.right}>\r\n            <g id=\"container\" transform={'translate(' + margin.left + ',' + margin.top + ')'}>\r\n            <g className=\"x-axis\"></g>\r\n            <g className=\"y-axis\"></g>\r\n            </g>\r\n            </svg>\r\n          </div>\r\n        </div>\r\n    )\r\n}\r\nexport default ScatterplotZoom\r\n","import React from 'react';\r\nimport useAutocomplete from '@material-ui/lab/useAutocomplete';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport styled from 'styled-components';\r\nimport { chamber } from '../../../Backend/rollCall';\r\n\r\nconst Label = styled('label')`\r\n  padding: 0 0 4px;\r\n  line-height: 1.5;\r\n  display: block;\r\n`;\r\n\r\nconst InputWrapper = styled('div')`\r\n  width: 300px;\r\n  color: black;\r\n  border: 1px solid #d9d9d9;\r\n  background-color: #fff;\r\n  border-radius: 4px;\r\n  padding: 1px;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n\r\n\r\n  &:hover {\r\n    border-color: #40a9ff;\r\n  }\r\n\r\n  &.focused {\r\n    border-color: #40a9ff;\r\n    box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);\r\n  }\r\n\r\n  & input {\r\n    color: black;\r\n    font-size: 14px;\r\n    height: 30px;\r\n    box-sizing: border-box;\r\n    padding: 4px 6px;\r\n    width: 0;\r\n    min-width: 30px;\r\n    flex-grow: 1;\r\n    border: 0;\r\n    margin: 0;\r\n    outline: 0;\r\n\r\n  }\r\n`;\r\n\r\nconst Tag = styled(({ label, onDelete, ...props }) => (\r\n  <div {...props}>\r\n    <span>{label}</span>\r\n    <CloseIcon onClick={onDelete} />\r\n  </div>\r\n))`\r\n  display: flex;\r\n  align-items: center;\r\n  height: 24px;\r\n  margin: 2px;\r\n  line-height: 22px;\r\n  background-color: #fafafa;\r\n  border: 1px solid #e8e8e8;\r\n  border-radius: 2px;\r\n  box-sizing: content-box;\r\n  padding: 0 4px 0 10px;\r\n  outline: 0;\r\n  overflow: hidden;\r\n\r\n  &:focus {\r\n    border-color: #40a9ff;\r\n    background-color: #e6f7ff;\r\n}\r\n\r\n  & span {\r\n    overflow: hidden;\r\n    white-space: nowrap;\r\n    text-overflow: ellipsis;\r\n  }\r\n\r\n  & svg {\r\n    font-size: 12px;\r\n    cursor: pointer;\r\n    padding: 4px;\r\n  }\r\n`;\r\n\r\nconst Listbox = styled('ul')`\r\n\r\n\r\n  width: 300px;\r\n  margin: 2px 0 0;\r\n  padding: 0;\r\n  position: absolute;\r\n  list-style: none;\r\n  background-color: white;\r\n  overflow: auto;\r\n  max-height: 250px;\r\n  border-radius: 4px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\r\n  z-index: 1;\r\n  color: black;\r\n\r\n  & li {\r\n\r\n    padding: 5px 12px;\r\n    display: flex;\r\n\r\n    & span {\r\n      flex-grow: 1;\r\n    }\r\n\r\n    & svg {\r\n      color: transparent;\r\n    }\r\n  }\r\n\r\n  & li[aria-selected='true'] {\r\n    background-color: #fafafa;\r\n    font-weight: 600;\r\n    color: black;\r\n    \r\n\r\n    & svg {\r\n      color: green;\r\n    }\r\n  }\r\n\r\n  & li[data-focus='true'] {\r\n    background-color: #e6f7ff;\r\n    cursor: pointer;\r\n    color: black;\r\n\r\n    & svg {\r\n        color: black\r\n    }\r\n  }\r\n`;\r\n\r\nexport default function CustomizedHook() {\r\n  const {\r\n    getRootProps,\r\n    getInputLabelProps,\r\n    getInputProps,\r\n    getTagProps,\r\n    getListboxProps,\r\n    getOptionProps,\r\n    groupedOptions,\r\n    value,\r\n    focused,\r\n    setAnchorEl,\r\n  } = useAutocomplete({\r\n    id: 'customized-hook-demo',\r\n    defaultValue: [top100Films[1]],\r\n    multiple: true,\r\n    options: chamber,\r\n    getOptionLabel: (option) => option.name,\r\n  });\r\n\r\n\r\n\r\n\r\n\r\n\r\n  return (\r\n      <div>\r\n        <div {...getRootProps()}>\r\n          <Label {...getInputLabelProps()}>Filter</Label>\r\n          <InputWrapper ref={setAnchorEl} className={focused ? 'focused' : ''}>\r\n\r\n        \r\n            {value.map((option, index) => (\r\n              <Tag label={option.name} {...getTagProps({ index })} />\r\n            ))}\r\n            \r\n            <input {...getInputProps()} />\r\n          </InputWrapper>\r\n        </div>\r\n        {groupedOptions.length > 0 ? (\r\n          <Listbox {...getListboxProps()}>\r\n            {groupedOptions.map((option, index) => (\r\n              <li fill={option.partyColor} {...getOptionProps({ option, index })}>\r\n                <span >{option.name} <span style={{borderRadius: \"50%\", backgroundColor: option.partyColor, height:\"5px\", width:\"5px\", display: \"inline-block\"}}></span></span>\r\n                <CheckIcon fontSize=\"small\" />\r\n              </li>\r\n            ))}\r\n          </Listbox>\r\n        ) : null}\r\n      </div>\r\n\r\n  );\r\n}\r\n\r\n// Top 100 films as rated by IMDb users. http://www.imdb.com/chart/top\r\nconst top100Films = [\r\n  { title: 'The Shawshank Redemption', year: 1994 },\r\n  { title: 'The Godfather', year: 1972 },\r\n  { title: 'The Godfather: Part II', year: 1974 },\r\n  { title: 'The Dark Knight', year: 2008 },\r\n  { title: '12 Angry Men', year: 1957 },\r\n  { title: \"Schindler's List\", year: 1993 },\r\n  { title: 'Pulp Fiction', year: 1994 },\r\n  { title: 'The Lord of the Rings: The Return of the King', year: 2003 },\r\n  { title: 'The Good, the Bad and the Ugly', year: 1966 },\r\n  { title: 'Fight Club', year: 1999 },\r\n  { title: 'The Lord of the Rings: The Fellowship of the Ring', year: 2001 },\r\n  { title: 'Star Wars: Episode V - The Empire Strikes Back', year: 1980 },\r\n  { title: 'Forrest Gump', year: 1994 },\r\n  { title: 'Inception', year: 2010 },\r\n  { title: 'The Lord of the Rings: The Two Towers', year: 2002 },\r\n  { title: \"One Flew Over the Cuckoo's Nest\", year: 1975 },\r\n  { title: 'Goodfellas', year: 1990 },\r\n  { title: 'The Matrix', year: 1999 },\r\n  { title: 'Seven Samurai', year: 1954 },\r\n  { title: 'Star Wars: Episode IV - A New Hope', year: 1977 },\r\n  { title: 'City of God', year: 2002 },\r\n  { title: 'Se7en', year: 1995 },\r\n  { title: 'The Silence of the Lambs', year: 1991 },\r\n  { title: \"It's a Wonderful Life\", year: 1946 },\r\n  { title: 'Life Is Beautiful', year: 1997 },\r\n  { title: 'The Usual Suspects', year: 1995 },\r\n  { title: 'Léon: The Professional', year: 1994 },\r\n  { title: 'Spirited Away', year: 2001 },\r\n  { title: 'Saving Private Ryan', year: 1998 },\r\n  { title: 'Once Upon a Time in the West', year: 1968 },\r\n  { title: 'American History X', year: 1998 },\r\n  { title: 'Interstellar', year: 2014 },\r\n  { title: 'Casablanca', year: 1942 },\r\n  { title: 'City Lights', year: 1931 },\r\n  { title: 'Psycho', year: 1960 },\r\n  { title: 'The Green Mile', year: 1999 },\r\n  { title: 'The Intouchables', year: 2011 },\r\n  { title: 'Modern Times', year: 1936 },\r\n  { title: 'Raiders of the Lost Ark', year: 1981 },\r\n  { title: 'Rear Window', year: 1954 },\r\n  { title: 'The Pianist', year: 2002 },\r\n  { title: 'The Departed', year: 2006 },\r\n  { title: 'Terminator 2: Judgment Day', year: 1991 },\r\n  { title: 'Back to the Future', year: 1985 },\r\n  { title: 'Whiplash', year: 2014 },\r\n  { title: 'Gladiator', year: 2000 },\r\n  { title: 'Memento', year: 2000 },\r\n  { title: 'The Prestige', year: 2006 },\r\n  { title: 'The Lion King', year: 1994 },\r\n  { title: 'Apocalypse Now', year: 1979 },\r\n  { title: 'Alien', year: 1979 },\r\n  { title: 'Sunset Boulevard', year: 1950 },\r\n  { title: 'Dr. Strangelove or: How I Learned to Stop Worrying and Love the Bomb', year: 1964 },\r\n  { title: 'The Great Dictator', year: 1940 },\r\n  { title: 'Cinema Paradiso', year: 1988 },\r\n  { title: 'The Lives of Others', year: 2006 },\r\n  { title: 'Grave of the Fireflies', year: 1988 },\r\n  { title: 'Paths of Glory', year: 1957 },\r\n  { title: 'Django Unchained', year: 2012 },\r\n  { title: 'The Shining', year: 1980 },\r\n  { title: 'WALL·E', year: 2008 },\r\n  { title: 'American Beauty', year: 1999 },\r\n  { title: 'The Dark Knight Rises', year: 2012 },\r\n  { title: 'Princess Mononoke', year: 1997 },\r\n  { title: 'Aliens', year: 1986 },\r\n  { title: 'Oldboy', year: 2003 },\r\n  { title: 'Once Upon a Time in America', year: 1984 },\r\n  { title: 'Witness for the Prosecution', year: 1957 },\r\n  { title: 'Das Boot', year: 1981 },\r\n  { title: 'Citizen Kane', year: 1941 },\r\n  { title: 'North by Northwest', year: 1959 },\r\n  { title: 'Vertigo', year: 1958 },\r\n  { title: 'Star Wars: Episode VI - Return of the Jedi', year: 1983 },\r\n  { title: 'Reservoir Dogs', year: 1992 },\r\n  { title: 'Braveheart', year: 1995 },\r\n  { title: 'M', year: 1931 },\r\n  { title: 'Requiem for a Dream', year: 2000 },\r\n  { title: 'Amélie', year: 2001 },\r\n  { title: 'A Clockwork Orange', year: 1971 },\r\n  { title: 'Like Stars on Earth', year: 2007 },\r\n  { title: 'Taxi Driver', year: 1976 },\r\n  { title: 'Lawrence of Arabia', year: 1962 },\r\n  { title: 'Double Indemnity', year: 1944 },\r\n  { title: 'Eternal Sunshine of the Spotless Mind', year: 2004 },\r\n  { title: 'Amadeus', year: 1984 },\r\n  { title: 'To Kill a Mockingbird', year: 1962 },\r\n  { title: 'Toy Story 3', year: 2010 },\r\n  { title: 'Logan', year: 2017 },\r\n  { title: 'Full Metal Jacket', year: 1987 },\r\n  { title: 'Dangal', year: 2016 },\r\n  { title: 'The Sting', year: 1973 },\r\n  { title: '2001: A Space Odyssey', year: 1968 },\r\n  { title: \"Singin' in the Rain\", year: 1952 },\r\n  { title: 'Toy Story', year: 1995 },\r\n  { title: 'Bicycle Thieves', year: 1948 },\r\n  { title: 'The Kid', year: 1921 },\r\n  { title: 'Inglourious Basterds', year: 2009 },\r\n  { title: 'Snatch', year: 2000 },\r\n  { title: '3 Idiots', year: 2009 },\r\n  { title: 'Monty Python and the Holy Grail', year: 1975 },\r\n];\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport ListSubheader from '@material-ui/core/ListSubheader';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport { options } from './AxisUtils/AxisUtils';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    icon: {\r\n      color: \"white\"\r\n  },\r\n\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n    \r\n  }\r\n\r\n}));\r\n\r\nexport default function GroupedSelect() {\r\n\r\n  \r\n  const classes = useStyles();\r\n\r\n  const onChangeX = (event, child) => {\r\n    console.log('x:' + event.target.value);\r\n    console.log(child);\r\n  };\r\n\r\n  const onChangeY = (event, child) => {\r\n    console.log('y:' + event.target.value);\r\n    console.log(child);\r\n  };\r\n\r\n\r\n\r\n\r\n  return (\r\n    <div>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">X-Value</InputLabel>\r\n        <Select  onChange={onChangeX} style={{ color: \"white\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n          <MenuItem value=\"\">\r\n            <em>None</em>\r\n          </MenuItem>\r\n          <ListSubheader>Twitter Data</ListSubheader>\r\n          <MenuItem value={1}>Total Followers</MenuItem>\r\n          <MenuItem value={2}>Total Retweets</MenuItem>\r\n          <MenuItem value={3}>Avg. Sentimenmt</MenuItem>\r\n          <MenuItem value={4}>Activty</MenuItem>\r\n          <MenuItem value={5}>Connectivity</MenuItem>\r\n          <ListSubheader>Parliamentary Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={6}>Yes Votes</MenuItem>\r\n          <MenuItem value={7}>No Votes</MenuItem>\r\n          <MenuItem value={8}>Motions Tabled</MenuItem>\r\n          <MenuItem value={9}>Questions Asked</MenuItem>\r\n          <ListSubheader>News Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={10}>News Mentions</MenuItem>\r\n          <ListSubheader>Electoral Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={11}>Votes in last election</MenuItem>\r\n          <MenuItem value={12}>Opinion polls</MenuItem>\r\n        </Select>\r\n      </FormControl>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">Y-Value</InputLabel>\r\n        <Select onChange={onChangeY} style={{ color: \"white\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n          <MenuItem value=\"\">\r\n            <em>None</em>\r\n          </MenuItem>\r\n          <ListSubheader>Twitter Data</ListSubheader>\r\n          <MenuItem value={1}>Total Followers</MenuItem>\r\n          <MenuItem value={2}>Total Retweets</MenuItem>\r\n          <MenuItem value={3}>Avg. Sentimenmt</MenuItem>\r\n          <MenuItem value={4}>Activty</MenuItem>\r\n          <MenuItem value={5}>Connectivity</MenuItem>\r\n          <ListSubheader>Parliamentary Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={6}>Yes Votes</MenuItem>\r\n          <MenuItem value={7}>No Votes</MenuItem>\r\n          <MenuItem value={8}>Motions Tabled</MenuItem>\r\n          <MenuItem value={9}>Questions Asked</MenuItem>\r\n          <ListSubheader>News Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={10}>News Mentions</MenuItem>\r\n          <ListSubheader>Electoral Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={11}>Votes in last election</MenuItem>\r\n          <MenuItem value={12}>Opinion polls</MenuItem>\r\n        </Select>\r\n      </FormControl>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">Circle Radius</InputLabel>\r\n        <Select style={{ color: \"white\"}} classes={{icon:classes.icon}}defaultValue=\"\" id=\"grouped-select\">\r\n          <MenuItem value=\"\">\r\n            <em>None</em>\r\n          </MenuItem>\r\n          <ListSubheader>Twitter Data</ListSubheader>\r\n          <MenuItem value={1}>Total Followers</MenuItem>\r\n          <MenuItem value={2}>Total Retweets</MenuItem>\r\n          <MenuItem value={3}>Avg. Sentimenmt</MenuItem>\r\n          <MenuItem value={4}>Activty</MenuItem>\r\n          <MenuItem value={5}>Connectivity</MenuItem>\r\n          <ListSubheader>Parliamentary Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={6}>Yes Votes</MenuItem>\r\n          <MenuItem value={7}>No Votes</MenuItem>\r\n          <MenuItem value={8}>Motions Tabled</MenuItem>\r\n          <MenuItem value={9}>Questions Asked</MenuItem>\r\n          <ListSubheader>News Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={10}>News Mentions</MenuItem>\r\n          <ListSubheader>Electoral Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={11}>Votes in last election</MenuItem>\r\n          <MenuItem value={12}>Opinion polls</MenuItem>\r\n\r\n        </Select>\r\n      </FormControl>\r\n    </div>\r\n  );\r\n}","import React from 'react'\r\nimport { useRef, useEffect, useState} from 'react'\r\nimport * as d3 from 'd3'\r\nimport { chamber } from '../../../Backend/rollCall'\r\nimport { axisBottom, axisLeft, svg } from 'd3'\r\nimport { current } from '../../../Backend/rollCall'\r\nimport { Typography, Checkbox, Select, ListItem, FormControlLabel, FormGroup } from '@material-ui/core'\r\nimport CustomizedHook from './SearchSelectBox'\r\nimport GroupedSelect from './GroupedSelectBox'\r\nimport './scatterplot.css'\r\nimport { MenuItem, ListSubheader, FormControl, InputLabel, makeStyles, List, ListItemText } from '@material-ui/core'\r\nimport axios from 'axios'\r\nimport { FormatAlignCenter, FormatListNumberedRtlOutlined } from '@material-ui/icons'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n        icon: {\r\n          color: \"white\"\r\n      },\r\n    \r\n      formControl: {\r\n        margin: theme.spacing(1),\r\n        minWidth: 120,   \r\n      }\r\n    \r\n}));\r\n\r\nconst partyColors = {\r\n\"Sinn Féin\": \"#326760\", \r\n\"Fine Gael\": \"#6699FF\", \r\n\"Fianna Fáil\": \"#66BB66\",\r\n\"Labour Party\": \"#CC0000\",\r\n\"Solidarity - People Before Profit\": \"#8E2420\",\r\n\"Independent\": \"white\",\r\n\"Green Party\": \"#99CC33\",\r\n\"Social Democrats\": \"#752F8B\",\r\n\"Aontú\": \"#44532A\",\r\n\"Independents 4 Change\": \"grey\"}\r\n\r\nconst ScatterplotParty = ({data}) => {\r\n\r\n\r\n\r\n    const [TDDataScatter, setTDDataScatter] = useState(null)\r\n    const [filteredTDData, setFilteredTDData] = useState(null)\r\n\r\n    const [partySelect, setPartySelect] = useState([\"Sinn Féin\", \"Fine Gael\", \"Fianna Fáil\", \"Labour Party\", \"Green Party\", \"Solidarity - People Before Profit\", \"Aontú\", \"Social Democrats\", \"Independent\", \"Independents 4 Change\"])\r\n    const [xOption, setXOption] = useState(0)\r\n    const [yOption, setYOption] = useState(1)\r\n    const [rOption, setROption] = useState(0)\r\n    \r\n\r\n\r\n \r\n\r\n    const followers = d => d.totalFollows\r\n    const retweets = d => d.totalRetweets\r\n    const original_tweets = d => d.totalOriginalTweets\r\n    const polarity = d => d.polAvg\r\n    const subjectivity = d => d.subAvg\r\n    const followerEngagementRate = d => d.followerEngagementRate\r\n    const retweetsPerOriginalTweet = d => d.retweetsPerOriginalTweet\r\n    const avgOriginalTweets = d => d.avgOriginalTweets\r\n    const avgFollowers = d => d.avgFollowers\r\n    const avgRetweets = d => d.avgRetweets\r\n    const TDsOnTwitter = d=> d.TDAmount\r\n    \r\n    const optionsFunctions = [followers, retweets, original_tweets, polarity, subjectivity, followerEngagementRate, retweetsPerOriginalTweet, avgOriginalTweets, avgFollowers, avgRetweets, TDsOnTwitter]\r\n\r\n    const xValue = optionsFunctions[xOption]\r\n    const yValue = optionsFunctions[yOption]\r\n    const rValue = optionsFunctions[rOption]\r\n\r\n    useEffect(() => {\r\n\r\n        setTDDataScatter(data.filter(function(d) {\r\n          \r\n          if(d.followerData[0] != undefined) {\r\n          return d\r\n        }\r\n      }\r\n      ))\r\n        setFilteredTDData(TDDataScatter)\r\n\r\n    }, [])\r\n\r\n  const wrapperRef = useRef()\r\n  const svgRef = useRef()\r\n\r\n    const options = [\r\n\r\n        \"Followers\", \"Retweets\", \"Original Tweets\", \"Polarity\", \"Subjectivity\", \"Follower Engagement Rate\", \"Retweets Per Original Tweet\", \"Avg. Original Tweets (Activity)\", \"Avg. Followers\", \"Avg. Retweets\", \"TDs on Twitter\"\r\n        ]\r\n\r\n    const optionsExplanation = [\r\n\r\n      \"Total Followers of party.\",\r\n      \"Total Retweets received by party over last week.\",\r\n      \"Number of original tweets (so excl. retweets) a TD has posted over last week.\",\r\n      \"Average sentiment of a TD's tweets over the past week, value lies between [-1, 1] with 1 being most positive.\",\r\n      \"Average subjectivity of a TD's tweets over the past week, value lies between [0, 1] with 1 being most subjective.\",\r\n      \"Total Followers divided by Total Retweets received over the last week.\",\r\n      \"Total Retweets divided by Total Original Tweets over the last week.\",\r\n      \"How many Original Tweets the average TD posts in a week.\",\r\n      \"How many followers the average TD has.\",\r\n      \"How many retweets the average TD gets in a week.\",\r\n      \"How many TDs a party has on Twitter.\"\r\n      \r\n\r\n    ]\r\n\r\n\r\n    \r\n    \r\n\r\n    const classes = useStyles();\r\n\r\n    const handleChange = (event) => {\r\n\r\n          const holder = partySelect\r\n\r\n          const tester = event.target.value\r\n\r\n            if(partySelect.includes(tester)) {\r\n\r\n              for(let i = 0; i < holder.length; i++) {\r\n                if(holder[i] === tester) {\r\n                  holder.splice(i, 1)\r\n                  setPartySelect(holder)            \r\n                }\r\n              }\r\n            } else {\r\n              holder.push(tester)\r\n              setPartySelect(holder)\r\n            }\r\n\r\n\r\n              const selected = TDDataScatter;\r\n              const inbetween = selected;\r\n\r\n\r\n            const test = inbetween.filter(d => partySelect.includes(d.party))\r\n                     \r\n          \r\n            setFilteredTDData(test)\r\n\r\n            console.log(TDDataScatter)\r\n                \r\n\r\n//             }\r\n            \r\n      }\r\n\r\n\r\n    const onChangeX = (event, child) => {\r\n            setXOption(event.target.value)\r\n            console.log('x:' + event.target.value);\r\n            console.log(child);\r\n    };\r\n\r\n    const onChangeY = (event, child) => {\r\n            setYOption(event.target.value)\r\n            console.log('y:' + event.target.value);\r\n            console.log(child);\r\n    };\r\n\r\n    const onChangeR = (event, child) => {\r\n        setROption(event.target.value)\r\n        console.log('r:' + event.target.value);\r\n        console.log(child);\r\n};\r\n\r\n    const margin = {top: 20, right: 20, bottom: 20, left: 50}\r\n    \r\n    const height = 620 - margin.left - margin.right;\r\n    const width = 820 - margin.top - margin.bottom;        \r\n\r\n    useEffect(() => {\r\n\r\n      if(!TDDataScatter || !filteredTDData) return null;\r\n\r\n      function makePartyObj() {\r\n\r\n        let partyArr = []\r\n\r\n        let parties = filteredTDData.map(d => d.party)\r\n\r\n        parties = [...new Set(parties)];\r\n\r\n        function retweetsPerOriginalTweet(i) {\r\n\r\n          var a = filteredTDData.map(function(d) {\r\n              if(parties[i] === d.party) {\r\n                  return d\r\n              }\r\n          }).filter(function(x) {\r\n                      return x !== undefined\r\n                  })\r\n  \r\n          var retweets = a.map(d => d.retweetData[2].retweets).reduce(function(a, b) {return a + b})\r\n          var original_tweets = a.map(d => d.retweetData[2].original_tweets).reduce(function(a, b) {return a + b})\r\n          var ratio = retweets / original_tweets\r\n  \r\n          if(ratio === Infinity) {\r\n              ratio = 0\r\n          }\r\n          \r\n          ratio = ratio ? ratio : 0;\r\n  \r\n          return ratio \r\n  \r\n         }\r\n         function followerEngagementRate(i) {\r\n\r\n          var a = filteredTDData.map(function(d) {\r\n              if(parties[i] === d.party) {\r\n                  return d\r\n              }\r\n          }).filter(function(x) {\r\n                      return x !== undefined\r\n                  })\r\n  \r\n          var follows = a.map(d => d.followerData[2].followers).reduce(function(a, b) {return a + b})\r\n          var retweets = a.map(d => d.retweetData[2].retweets).reduce(function(a, b) {return a + b})\r\n          var ratio = retweets / follows\r\n  \r\n          if(ratio === Infinity) {\r\n              ratio = 0\r\n          }\r\n  console.log(ratio)\r\n          ratio = ratio ? ratio : 0;\r\n\r\n          return ratio \r\n\r\n          \r\n  \r\n         }\r\n\r\n            for(let i = 0; i < parties.length; i++) {\r\n\r\n\r\n        function partyObj() {\r\n            this.party = parties[i];\r\n            this.TDs = filteredTDData.map(function(d) {\r\n                if(parties[i] === d.party) {\r\n                    return d\r\n                }\r\n            }).filter(function(x) {\r\n                        return x !== undefined\r\n                    })\r\n            this.totalFollows = this.TDs.map(d => d.followerData[2].followers).reduce(function(a, b) {return a + b})\r\n            this.totalRetweets = this.TDs.map(d => d.retweetData[2].retweets).reduce(function(a, b) {return a + b})\r\n            this.totalOriginalTweets = this.TDs.map(d => d.retweetData[2].original_tweets).reduce(function(a, b) {return a + b})\r\n            this.TDAmount = this.TDs.length\r\n            this.polAvg = this.TDs.map(d => d.sentimentData[2].polarity).reduce(function(a, b) {return a + b}) / this.TDAmount\r\n            this.subAvg = this.TDs.map(d => d.sentimentData[2].subjectivity).reduce(function(a, b) {return a + b}) / this.TDAmount\r\n            this.followerEngagementRate = followerEngagementRate(i)\r\n            this.retweetsPerOriginalTweet = retweetsPerOriginalTweet(i)\r\n            this.avgFollowers = this.totalFollows / this.TDAmount\r\n            this.avgRetweets = this.totalRetweets / this.TDAmount\r\n            this.avgOriginalTweets = this.totalOriginalTweets / this.TDAmount\r\n        }\r\n\r\n        partyArr.push(new partyObj())\r\n            }\r\n\r\n            return partyArr\r\n\r\n    }\r\n\r\n    console.log(makePartyObj())\r\n\r\n    const partyData = makePartyObj()\r\n\r\n\r\n      console.log(TDDataScatter)\r\n      console.log(filteredTDData)\r\n\r\n\r\n\r\n    // const selectedFiltered = () => {\r\n\r\n    //   const selected = filteredTDData;\r\n\r\n    //     for(let i = 0; i < selected.length; i++) {\r\n\r\n    //       if(partySelect.includes(selected[i].party) === false) {\r\n    //         selected.splice([i], 1)\r\n    //       }\r\n    //     }\r\n\r\n    //     return selected\r\n\r\n    // }\r\n\r\n    // console.log(selectedFiltered())\r\n\r\n    const selectedFilteredTDData = filteredTDData;\r\n    \r\n\r\n\r\n\r\n  var k = height / width,\r\n  x0 = [-4.5, 4.5],\r\n  y0 = [-4.5 * k, 4.5 * k],\r\n  x = d3.scaleLinear().domain(x0).range([0, width]),\r\n  y = d3.scaleLinear().domain(y0).range([height, 0]),\r\n  z = d3.scaleOrdinal(d3.schemeCategory10);\r\n\r\n \r\n\r\n\r\n      const svg = d3.select(svgRef.current)\r\n\r\n\r\n        const xScale = d3.scaleLinear()\r\n                        .range([0, width])\r\n                        .domain(d3.extent(partyData, xValue))\r\n\r\n\r\n\r\n        const yScale = d3.scaleLinear()\r\n                        .range([height, 0])\r\n                        .domain(d3.extent(partyData, yValue))\r\n                        \r\n        const rScale = d3.scaleLinear()\r\n                        .range([5, 20])\r\n                        .domain(d3.extent(partyData, rValue))\r\n\r\n        const party = d => d.party\r\n        const partyColor = d => partyColors[party(d)]\r\n        const name = d => d.name\r\n\r\n\r\n        const xAxis = axisBottom(xScale);        \r\n        \r\n        svg.select(\".x-axis\")\r\n            .attr(\"transform\", \"translate(0,\" + height + \")\")\r\n            .transition()\r\n            .duration(500)\r\n            .call(xAxis)\r\n\r\n\r\n        const yAxis = axisLeft(yScale);\r\n\r\n        svg.select(\".y-axis\")\r\n        .attr(\"transform\", \"translate(0, 0)\")\r\n            .transition()\r\n            .duration(500)\r\n            .call(yAxis)\r\n\r\n            const tooltip = d3\r\n            .select('body')\r\n            .append('div')\r\n            .attr('class', 'd3-tooltip')\r\n            .style('position', 'absolute')\r\n            .style('z-index', '10')\r\n            .style('visibility', 'hidden')\r\n            .style('padding', '10px')\r\n            .style('background', 'rgba(0,0,0,0.6)')\r\n            .style('border-radius', '4px')\r\n            .style('color', '#fff')\r\n            .text('a simple tooltip');\r\n\r\n            const hoverColor = \"#eec42d\"\r\n       \r\n        var circles = d3.select(\"#container-scatter-party\")\r\n                        .selectAll(\".node\")\r\n                        .data(partyData)\r\n                        .join(\"circle\")\r\n                        .attr(\"class\", \"node\")\r\n                        .attr(\"fill\", partyColor)\r\n                        .attr('fill-opacity', 0.75)\r\n                        .attr(\"name\", name)\r\n\r\n            circles.transition()\r\n                    .duration(500)\r\n                    .attr(\"cx\", d => xScale(xValue(d)))\r\n                    .attr(\"cy\", d => yScale(yValue(d)))\r\n                    .attr(\"r\", d => rScale(rValue(d)))\r\n\r\n            circles.on('mouseover', function (d, i) {\r\n            tooltip\r\n            .html(\r\n                `<div>Party: ${d.party}</div><div>x: ${options[xOption]}: ${xValue(d).toLocaleString()}</div><div>y: ${options[yOption]}: ${yValue(d).toLocaleString()}</div><div>r: ${options[rOption]}: ${rValue(d).toLocaleString()}</div>`\r\n            )\r\n                .style('visibility', 'visible');\r\n                d3.select(this).transition().attr('fill', hoverColor);\r\n            })\r\n            .on('mousemove', function () {\r\n                tooltip\r\n                .style('top', d3.event.pageY - 10 + 'px')\r\n                .style('left', d3.event.pageX + 10 + 'px');\r\n            })\r\n            .on('mouseout', function () {\r\n                tooltip.html(``).style('visibility', 'hidden');\r\n                d3.select(this).transition().attr('fill', partyColor);\r\n            }); \r\n\r\n          console.log(selectedFilteredTDData)\r\n\r\n    }, [TDDataScatter, partySelect, filteredTDData, xOption, yOption, rOption])\r\n\r\n    \r\n    if (!TDDataScatter) return null;\r\n\r\n    return (\r\n\r\n        <div className={\"featuredItem\"} style={{textAlign: \"center\", margin: \"10px\", padding: \"10px\"}}>\r\n        <Typography style={{marginBottom: 20}} align=\"center\" variant=\"h5\">Interactive Scatter Plot</Typography>\r\n        \r\n            <div>\r\n                {/* <CustomizedHook/> */}\r\n                <div>\r\n                    \r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">X-Value</InputLabel>\r\n        <Select onChange={onChangeX} style={{ color: \"white\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n          <ListSubheader>Twitter Data</ListSubheader>\r\n          <MenuItem value={0}>Total Followers</MenuItem>\r\n          <MenuItem value={1}>Total Retweets</MenuItem>\r\n          <MenuItem value={2}>Original Retweets</MenuItem>\r\n          <MenuItem value={3}>Polarity</MenuItem>\r\n          <MenuItem value={4}>Subjectivity</MenuItem>\r\n          <MenuItem value={5}>Followers Per Retweet</MenuItem>\r\n          <MenuItem value={6}>Retweets Per Original Tweet</MenuItem>\r\n          <MenuItem value={7}>Avg. Original Tweets (Activity)</MenuItem>\r\n          <MenuItem value={8}>Avg. Followers</MenuItem>\r\n          <MenuItem value={9}>Avg. Retweets</MenuItem>\r\n          <MenuItem value={10}>TDs on Twitter</MenuItem>\r\n          <ListSubheader>Parliamentary Data (Coming Soon)</ListSubheader>\r\n          <MenuItem disabled value={11}>Yes Votes</MenuItem>\r\n          <MenuItem disabled value={12}>No Votes</MenuItem>\r\n          <MenuItem disabled value={13}>Abstentions</MenuItem>\r\n          <MenuItem disabled value={14}>Motions</MenuItem>\r\n          <MenuItem disabled value={15}>Questions Asked</MenuItem>\r\n          <ListSubheader>News Data (Coming Soon)</ListSubheader>\r\n          <MenuItem disabled value={16}>News Mentions</MenuItem>\r\n          <ListSubheader>Electoral Data (Coming Soon)</ListSubheader>\r\n          <MenuItem disabled value={17}>Votes recieved in last election</MenuItem>\r\n          <MenuItem disabled value={18}>Avg. Poll Rating</MenuItem>\r\n\r\n        </Select>\r\n      </FormControl>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">Y-Value</InputLabel>\r\n        <Select onChange={onChangeY} style={{ color: \"white\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n          <ListSubheader>Twitter Data</ListSubheader>\r\n          <MenuItem value={0}>Total Followers</MenuItem>\r\n          <MenuItem value={1}>Total Retweets</MenuItem>\r\n          <MenuItem value={2}>Original Retweets</MenuItem>\r\n          <MenuItem value={3}>Polarity</MenuItem>\r\n          <MenuItem value={4}>Subjectivity</MenuItem>\r\n          <MenuItem value={5}>Followers Per Retweet</MenuItem>\r\n          <MenuItem value={6}>Retweets Per Original Tweet</MenuItem>\r\n          <MenuItem value={7}>Avg. Original Tweets (Activity)</MenuItem>\r\n          <MenuItem value={8}>Avg. Followers</MenuItem>\r\n          <MenuItem value={9}>Avg. Retweets</MenuItem>\r\n          <MenuItem value={10}>TDs on Twitter</MenuItem>\r\n          <ListSubheader>Parliamentary Data (Coming Soon)</ListSubheader>\r\n          <MenuItem disabled value={11}>Yes Votes</MenuItem>\r\n          <MenuItem disabled value={12}>No Votes</MenuItem>\r\n          <MenuItem disabled value={13}>Abstentions</MenuItem>\r\n          <MenuItem disabled value={14}>Motions</MenuItem>\r\n          <MenuItem disabled value={15}>Questions Asked</MenuItem>\r\n          <ListSubheader>News Data (Coming Soon)</ListSubheader>\r\n          <MenuItem disabled value={16}>News Mentions</MenuItem>\r\n          <ListSubheader>Electoral Data (Coming Soon)</ListSubheader>\r\n          <MenuItem disabled value={17}>Votes recieved in last election</MenuItem>\r\n          <MenuItem disabled value={18}>Avg. Poll Rating</MenuItem>\r\n\r\n        </Select>\r\n      </FormControl>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">Circle Radius</InputLabel>\r\n        <Select onChange={onChangeR}style={{ color: \"white\"}} classes={{icon:classes.icon}}defaultValue=\"\" id=\"grouped-select\">\r\n          <MenuItem value={0}>\r\n            <em>None</em>\r\n          </MenuItem>\r\n          <ListSubheader>Twitter Data</ListSubheader>\r\n          <MenuItem value={0}>Total Followers</MenuItem>\r\n          <MenuItem value={1}>Total Retweets</MenuItem>\r\n          <MenuItem value={2}>Original Retweets</MenuItem>\r\n          <MenuItem value={3}>Polarity</MenuItem>\r\n          <MenuItem value={4}>Subjectivity</MenuItem>\r\n          <MenuItem value={5}>Followers Per Retweet</MenuItem>\r\n          <MenuItem value={6}>Retweets Per Original Tweet</MenuItem>\r\n          <MenuItem value={7}>Avg. Original Tweets (Activity)</MenuItem>\r\n          <MenuItem value={8}>Avg. Followers</MenuItem>\r\n          <MenuItem value={9}>Avg. Retweets</MenuItem>\r\n          <MenuItem value={10}>TDs on Twitter</MenuItem>\r\n          <ListSubheader>Parliamentary Data (Coming Soon)</ListSubheader>\r\n          <MenuItem disabled value={11}>Yes Votes</MenuItem>\r\n          <MenuItem disabled value={12}>No Votes</MenuItem>\r\n          <MenuItem disabled value={13}>Abstentions</MenuItem>\r\n          <MenuItem disabled value={14}>Motions</MenuItem>\r\n          <MenuItem disabled value={15}>Questions Asked</MenuItem>\r\n          <ListSubheader>News Data (Coming Soon)</ListSubheader>\r\n          <MenuItem disabled value={16}>News Mentions</MenuItem>\r\n          <ListSubheader>Electoral Data (Coming Soon)</ListSubheader>\r\n          <MenuItem disabled value={17}>Votes recieved in last election</MenuItem>\r\n          <MenuItem disabled value={18}>Avg. Poll Rating</MenuItem>\r\n        </Select>\r\n      </FormControl>\r\n    </div>\r\n    <List style={{display: \"inline-block\"}}>\r\n      <ListItem >\r\n        <ListItemText primary={\"x: \" + optionsExplanation[xOption] + \" (25/08/21)\"}/>\r\n          </ListItem>\r\n          <ListItem>\r\n            <ListItemText primary={\"y: \" + optionsExplanation[yOption] + \" (25/08/21)\"}/>\r\n             </ListItem>\r\n             <ListItem>\r\n            <ListItemText primary={\"r: \" + optionsExplanation[rOption] + \" (25/08/21)\"}/>\r\n            </ListItem>\r\n            \r\n    </List>\r\n    <div>\r\n<FormGroup style={{display: \"inline-block\",\r\n    verticalAlign: \"top\"}}>\r\n    <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n          defaultChecked=\"true\"\r\n          name=\"checkedB\"\r\n          style={{color: '#326760'}}\r\n          value={\"Sinn Féin\"}\r\n          onChange={handleChange}\r\n          />\r\n        }\r\n        label=\"Sinn Féin\"\r\n        />\r\n            <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: '#6699FF'}}\r\n            value={\"Fine Gael\"}\r\n            onChange={handleChange}\r\n          />\r\n        }\r\n        label=\"Fine Gael\"\r\n        />\r\n            <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: \"#66BB66\"}}\r\n            value={\"Fianna Fáil\"}\r\n            onChange={handleChange}\r\n          />\r\n        }\r\n        label=\"Fianna Fáil\"\r\n        />\r\n            <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: \"#CC0000\"}}\r\n            value={\"Labour Party\"}\r\n            onChange={handleChange}\r\n          />\r\n        }\r\n        label=\"Labour\"\r\n        />\r\n            <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: \"white\"}}\r\n            value={\"Independent\"}\r\n            onChange={handleChange}\r\n          />\r\n        }\r\n        label=\"Independent\"\r\n        />\r\n            <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: \"#8E2420\"}}\r\n            value={\"Solidarity - People Before Profit\"}\r\n            onChange={handleChange}\r\n          />\r\n        }\r\n        label=\"PBP\"\r\n        />\r\n            <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: \"#752F8B\"}}\r\n            value={\"Social Democrats\"}\r\n            onChange={handleChange}\r\n          />\r\n        }\r\n        label=\"Soc Dems\"\r\n        />\r\n            <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: \"#99CC33\"}}\r\n            value={\"Green Party\"}\r\n            onChange={handleChange}\r\n          />\r\n        }\r\n        label=\"Green Party\"\r\n        />\r\n            <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: \"#44532A\"}}\r\n            value={\"Aontú\"}\r\n            onChange={handleChange}\r\n          />\r\n        }\r\n        label=\"Aontú\"\r\n        />\r\n            <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: \"grey\"}}\r\n            value={\"Independents 4 Change\"}\r\n            onChange={handleChange}\r\n          />\r\n        }\r\n        label=\"Independents 4 Change\"\r\n        />\r\n             \r\n        </FormGroup>\r\n        </div>\r\n\r\n            </div>\r\n        <div className={\"scroll-svg-container\"}>\r\n        <svg id={\"scatterplot-svg\"}ref={svgRef} height={height + margin.top + margin.bottom} width={width + margin.left + margin.right}>\r\n            <g id=\"container-scatter-party\" transform={'translate(' + margin.left + ',' + margin.top + ')'}>\r\n            <g className=\"x-axis\"></g>\r\n            <g className=\"y-axis\"></g>\r\n            </g>\r\n            </svg>\r\n          </div>\r\n        </div>\r\n    )\r\n}\r\nexport default ScatterplotParty\r\n","import { arrayOf, shape, string, date as dateProp, number } from \"prop-types\";\r\n\r\nexport const MultiLineDataItemsPropTypes = arrayOf(\r\n  shape({\r\n    date: dateProp,\r\n    change: number,\r\n    retweets: number\r\n  })\r\n);\r\n\r\nexport const MultiLineDataPropTypes = arrayOf(\r\n  shape({\r\n    name: string,\r\n    items: MultiLineDataItemsPropTypes,\r\n    color: string\r\n  })\r\n);\r\n","import * as d3 from 'd3'\r\nimport React from 'react'\r\nimport { useRef, useEffect, useState } from 'react'\r\nimport { allParties } from '../../../Backend/metaData'\r\nimport { chamber, current } from '../../../Backend/rollCall'\r\nimport { Typography, Checkbox, Select, MenuItem, ListSubheader, FormControl, InputLabel, makeStyles } from '@material-ui/core'\r\nimport { ContactSupport } from '@material-ui/icons'\r\nimport axios from 'axios'\r\nimport { scaleBand } from 'd3'\r\n\r\n\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    icon: {\r\n      color: \"white\"\r\n  },\r\n\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,   \r\n  }\r\n\r\n}));\r\n\r\nconst partyColors = {\r\n    \"Sinn Féin\": \"#326760\", \r\n    \"Fine Gael\": \"#6699FF\", \r\n    \"Fianna Fáil\": \"#66BB66\",\r\n    \"Labour Party\": \"#CC0000\",\r\n    \"Solidarity - People Before Profit\": \"#8E2420\",\r\n    \"Independent\": \"white\",\r\n    \"Green Party\": \"#99CC33\",\r\n    \"Social Democrats\": \"#752F8B\",\r\n    \"Aontú\": \"#44532A\",\r\n    \"Independents 4 Change\": \"grey\"}\r\n\r\n\r\nexport const VoteBarchart = ({data}) => {\r\n\r\n\r\n\r\n\r\n\r\n    const options = [\r\n\r\n    \"Followers\", \"Retweets\", \"Original Tweets\", \"TDs\", \"Average Followers\", \"Retweets per Original Tweet\", \"Followers per Retweets\" \r\n    \r\n    ]\r\n\r\n    const followers = d => d.tyoe.results.length\r\n    const retweets = d => d.totalRetweets\r\n    const originalTweets = d => d.totalOriginalTweets\r\n    const TDAmount = d => d.TDAmount\r\n    const TDFollowerAvg = d => d.followersToTDs\r\n\r\n    const optionsFunctions = \r\n    \r\n    [followers, retweets, originalTweets, TDAmount, TDFollowerAvg]\r\n\r\n\r\n    const classes = useStyles();\r\n\r\n    \r\n    const [TDData, setTDData] = useState(null)\r\n    const [oirLossData, setOirLossData] = useState(null)\r\n    const [oirCarriedData, setOirCarriedData] = useState(null)\r\n    const [xOption, setXOption] = useState(1)\r\n    const [yOption, setYOption] = useState(0)\r\n    const [rOption, setROption] = useState(0)\r\n\r\n\r\n    const margin = {top: 20, right: 20, bottom: 20, left: 60}\r\n\r\n    const height = 400\r\n    const width = 420\r\n\r\n    \r\n\r\n    const svgRef= useRef()\r\n\r\n\r\nconst onChangeX = (event, child) => {\r\n        setXOption(event.target.value)\r\n        console.log('x:' + event.target.value);\r\n        console.log(child);\r\n};\r\n\r\nconst onChangeY = (event, child) => {\r\n        setYOption(event.target.value)\r\n        console.log('y:' + event.target.value);\r\n        console.log(child);\r\n};\r\n\r\nconst onChangeR = (event, child) => {\r\n    setROption(event.target.value)\r\n    console.log('r:' + event.target.value);\r\n    console.log(child);\r\n};\r\n\r\n\r\nuseEffect(() => {\r\n\r\n    setTDData(data)\r\n    axios.get('https://api.oireachtas.ie/v1/divisions?chamber_type=house&chamber_id=&chamber=dail&date_start=2020-01-01&date_end=2099-1-1&limit=200&outcome=Lost').then((response) => {\r\n\r\n        setOirLossData(response.data)\r\n        \r\n      });\r\n\r\n}, [])    \r\n\r\nuseEffect(() => {\r\n        \r\n        \r\n        axios.get('https://api.oireachtas.ie/v1/divisions?chamber_type=house&chamber_id=&chamber=dail&date_start=2020-01-01&date_end=2099-1-1&limit=200&outcome=Carried').then((response) => {\r\n\r\n        setOirCarriedData(response.data)\r\n        \r\n      });\r\n\r\n      console.log(oirLossData)\r\n      \r\n    }, []);\r\n\r\n    useEffect(() => {\r\n\r\n        if(!TDData || !oirLossData || !oirCarriedData) return null;\r\n\r\n\r\n        // function makePartyObj() {\r\n\r\n        // let partyArr = []\r\n\r\n        // let parties = TDData.map(d => d.party)\r\n\r\n        // parties = [...new Set(parties)];\r\n\r\n        //     for(let i = 0; i < parties.length; i++) {\r\n\r\n\r\n    //     function partyObj() {\r\n    //         this.party = parties[i];\r\n    //         this.TDs = TDData.map(function(d) {\r\n    //             if(parties[i] === d.party) {\r\n    //                 return d\r\n    //             }\r\n    //         }).filter(function(x) {\r\n    //                     return x !== undefined\r\n    //                 })\r\n    //         this.totalFollows = this.TDs.map(d => d.followerData[0].followers).reduce(function(a, b) {return a + b})\r\n    //         this.totalRetweets = this.TDs.map(d => d.retweetData[0].retweets).reduce(function(a, b) {return a + b})\r\n    //         this.totalOriginalTweets = this.TDs.map(d => d.retweetData[0].original_tweets).reduce(function(a, b) {return a + b})\r\n    //         this.TDAmount = this.TDs.length\r\n    //         this.retweetsToOriginal = this.totalRetweets / this.totalOriginalTweets\r\n    //         this.followersToTDs = (this.totalFollows / this.TDAmount)\r\n    //     }\r\n\r\n    //     partyArr.push(new partyObj())\r\n    //         }\r\n\r\n    //         return partyArr\r\n\r\n    // }\r\n\r\n\r\n    function carriedLost () {\r\n\r\n        const arr = [{color: \"green\", name: \"Carried\", amount: oirCarriedData.results.length, dates: oirCarriedData.results}, {color: \"red\", name:\"Lost\", amount: oirLossData.results.length, dates: oirLossData.results.contextDate}]\r\n\r\n        return arr\r\n\r\n    }\r\n\r\n    const carriedLostData = carriedLost()\r\n\r\n    \r\n\r\n    if(!carriedLostData) return null;\r\n\r\n\r\nfunction dateMap() {\r\n\r\n\r\n    var amount = 0;\r\n    const dates = carriedLost()[0].dates.map(d => d.contextDate)\r\n    var copiedDates = dates\r\n\r\n    const months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"December\"]\r\n    const years = [\"2020\", \"2021\", \"2022\", \"2023\"]\r\n    \r\n    var arrM = []\r\n    var arrY = [];\r\n\r\n    \r\n    \r\n    for(let i = 0; i < dates.length; i++) {\r\n\r\n        var splitStr = copiedDates[i].split('-')\r\n        var m = true;\r\n        var y = true; \r\n\r\n        if(splitStr[0] === '2021') {\r\n                arrY.push(y)\r\n            }\r\n            \r\n            if(splitStr[1] ===  '02') {\r\n                arrM.push(m)\r\n            }\r\n        }\r\n        return arrY\r\n    }\r\n\r\nconsole.log(dateMap())\r\n\r\n// const monthCountArr = new Array(12).fill(0); \r\n//     dates.forEach((date) => monthCountArr[new Date(date).getMonth()] += 1)\r\n\r\n// console.log(monthCountArr)\r\n\r\n// var getDaysArray = function(start, end) {\r\n//     for(var arr=[],dt=new Date(start); dt<=end; dt.setDate(dt.getDate()+1)){\r\n//         arr.push(new Date(dt));\r\n//     }\r\n//     return arr;\r\n// };\r\n\r\n// var daylist = getDaysArray(new Date(\"2018-05-01\"),new Date(\"2018-06-01\"));\r\n// daylist.map((v)=>v.toISOString().slice(0,10)).join(\"\")\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n        const xValue = d => d.name\r\n        const yValue = d => d.amount\r\n        const color = d => d.color\r\n\r\n\r\n        const svg = d3.select(svgRef.current);\r\n\r\n        const xScale = d3.scaleBand()\r\n                            .domain(carriedLostData.map(xValue))\r\n                            .range([0, width])\r\n                            .padding(0.6)\r\n\r\n        const yScale = d3.scaleLinear()\r\n                        .domain([0, d3.max(carriedLostData, yValue)])\r\n                        .range([height, 0]);\r\n\r\n        const xAxis = d3.axisBottom(xScale).ticks(carriedLostData.length);\r\n\r\n        svg\r\n            .select(\".x-axis\")\r\n            .attr(\"transform\", \"translate(0,\" + 400 + \")\")\r\n            .transition(2000)\r\n            .call(xAxis);\r\n\r\n        const yAxis = d3.axisLeft(yScale);\r\n\r\n    svg\r\n        .select(\".y-axis\")\r\n        .attr(\"transform\", \"translate(0,0)\")\r\n        .style(\"color\", \"white\")\r\n        .transition(500)\r\n        .call(yAxis)\r\n\r\n\r\n        \r\n        const tooltip = d3\r\n                .select('body')\r\n                .append('div')\r\n                .attr('class', 'd3-tooltip')\r\n                .style('position', 'absolute')\r\n                .style('z-index', '10')\r\n                .style('visibility', 'hidden')\r\n                .style('padding', '10px')\r\n                .style('background', 'rgba(0,0,0,0.6)')\r\n                .style('border-radius', '4px')\r\n                .style('color', '#fff')\r\n                .text('a simple tooltip');\r\n\r\n\r\n        var rects = d3.select(\"#container-votes-bar\")\r\n                    .selectAll(\".bar\")\r\n                    .data(carriedLostData)\r\n                    .join(\"rect\")\r\n                    .attr(\"class\", \"bar\")  \r\n                    .attr(\"fill\", color)\r\n\r\n\r\n\r\n                rects.transition()\r\n                    .duration(400)\r\n                    .attr(\"x\", d => xScale(xValue(d)))\r\n                    .attr(\"y\", d => yScale(yValue(d)))\r\n                    .attr(\"width\", xScale.bandwidth())\r\n                    .attr(\"height\", d => 400 - yScale(yValue(d)))\r\n\r\n\r\n\r\n                const hoverColor = \"#eec42d\"\r\n\r\n\r\n                rects\r\n                    .on('mouseover', function (d, i) {\r\n                        tooltip\r\n                        .html(\r\n                            `<div>${d.name}: ${yValue(d).toLocaleString()}</div>`\r\n                        )\r\n                            .style('visibility', 'visible');\r\n                            d3.select(this).transition().attr('fill', hoverColor);\r\n                        })\r\n                        .on('mousemove', function () {\r\n                            tooltip\r\n                            .style('top', d3.event.pageY - 10 + 'px')\r\n                            .style('left', d3.event.pageX + 10 + 'px');\r\n                        })\r\n                        .on('mouseout', function () {\r\n                            tooltip.html(``).style('visibility', 'hidden');\r\n                            d3.select(this).transition().attr('fill', color);\r\n                        }); \r\n\r\n\r\n        console.log((yValue(oirCarriedData)))\r\n\r\n\r\n\r\n    }, [TDData, oirLossData, oirCarriedData, xOption, yOption])\r\n\r\n\r\n\r\n\r\n\r\n\r\n    return (\r\n    <div className={\"featuredItem\"} style={{textAlign: \"center\"}}>\r\n            <Typography variant=\"h5\">Votes</Typography>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">Y-Value</InputLabel>\r\n        <Select onChange={onChangeY} style={{ color: \"white\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n          <ListSubheader>Twitter Data</ListSubheader>\r\n          <MenuItem value={0}>Total Followers</MenuItem>\r\n          <MenuItem value={1}>Total Retweets</MenuItem>\r\n          <MenuItem value={2}>Original Tweets</MenuItem>\r\n          <MenuItem value={3}>TDs on Twitter</MenuItem>\r\n          <MenuItem value={4}>Avg Followers</MenuItem>          \r\n          <ListSubheader>Parliamentary Data (Coming Soon)</ListSubheader>\r\n          <MenuItem disabled>Motions Tabled</MenuItem>\r\n          <MenuItem disabled>Questions Asked</MenuItem>\r\n          <ListSubheader>News Data (Coming Soon)</ListSubheader>\r\n          <MenuItem disabled>News Mentions</MenuItem>\r\n          <ListSubheader>Electoral Data (Coming Soon)</ListSubheader>\r\n          <MenuItem disabled>Votes recieved in last election</MenuItem>\r\n          <MenuItem disabled>Avg. Poll</MenuItem>\r\n        </Select>\r\n      </FormControl>\r\n        <div className={\"scroll-svg-container\"}>\r\n            <svg ref={svgRef} height={height + margin.top + margin.bottom} width={width + margin.left + margin.right}>\r\n            <g id=\"container-votes-bar\" transform={'translate(' + margin.left + ',' + margin.top + ')'}>\r\n                <g className=\"x-axis\"></g>\r\n                <g className=\"y-axis\"></g>\r\n            </g>\r\n            </svg>\r\n        </div>\r\n    </div>\r\n    )\r\n}\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Line = ({\r\n  xScale,\r\n  yScale,\r\n  color,\r\n  data,\r\n  isSmooth,\r\n  animation,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  // Define different types of animation that we can use\r\n  const animateLeft = React.useCallback(() => {\r\n    // NOTE: for some reason getTotalLength() doesn't work in tests\r\n    // in this codesandbox so we added default value just for tests\r\n    const totalLength = ref.current.getTotalLength\r\n      ? ref.current.getTotalLength()\r\n      : 500;\r\n    d3.select(ref.current)\r\n      .attr(\"opacity\", 1)\r\n      .attr(\"stroke-dasharray\", `${totalLength},${totalLength}`)\r\n      .attr(\"stroke-dashoffset\", totalLength)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeLinear)\r\n      .attr(\"stroke-dashoffset\", 0);\r\n  }, []);\r\n  const animateFadeIn = React.useCallback(() => {\r\n    d3.select(ref.current)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeLinear)\r\n      .attr(\"opacity\", 1);\r\n  }, []);\r\n  const noneAnimation = React.useCallback(() => {\r\n    d3.select(ref.current).attr(\"opacity\", 1);\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    switch (animation) {\r\n      case \"left\":\r\n        animateLeft();\r\n        break;\r\n      case \"fadeIn\":\r\n        animateFadeIn();\r\n        break;\r\n      case \"none\":\r\n      default:\r\n        noneAnimation();\r\n        break;\r\n    }\r\n  }, [animateLeft, animateFadeIn, noneAnimation, animation]);\r\n\r\n  // Recalculate line length if scale has changed\r\n  React.useEffect(() => {\r\n    if (animation === \"left\") {\r\n      const totalLength = ref.current.getTotalLength\r\n        ? ref.current.getTotalLength()\r\n        : 500;\r\n      d3.select(ref.current).attr(\r\n        \"stroke-dasharray\",\r\n        `${totalLength},${totalLength}`\r\n      );\r\n    }\r\n  }, [xScale, yScale, animation]);\r\n\r\n  const line = d3\r\n    .line()\r\n    .x((d) => xScale(d.date))\r\n    .y((d) => yScale(d.retweets));\r\n\r\n  const d = line(data);\r\n\r\n  return (\r\n    <path\r\n      ref={ref}\r\n      d={d?.match(/NaN|undefined/) ? \"\" : d}\r\n      stroke={color}\r\n      strokeWidth={3}\r\n      fill=\"none\"\r\n      opacity={0}\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n\r\nLine.propTypes = {\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  data: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      date: PropTypes.date,\r\n      change: PropTypes.number\r\n    })\r\n  ),\r\n  color: PropTypes.string,\r\n  isSmooth: PropTypes.bool,\r\n  animation: PropTypes.oneOf([\"left\", \"fadeIn\", \"none\"])\r\n};\r\n\r\nLine.defaultProps = {\r\n  data: [],\r\n  color: \"white\",\r\n  isSmooth: false,\r\n  animation: \"left\"\r\n};\r\n\r\nexport default Line;\r\n","/** Area.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Area = ({ xScale, yScale, color, data, disableAnimation, ...props }) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    if (disableAnimation) {\r\n      d3.select(ref.current).attr(\"opacity\", 1);\r\n      return;\r\n    }\r\n    d3.select(ref.current)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeBackIn)\r\n      .attr(\"opacity\", 1);\r\n  }, [disableAnimation]);\r\n\r\n  const d = React.useMemo(() => {\r\n    const area = d3\r\n      .area()\r\n      .x(({ date }) => xScale(date))\r\n      .y1(({ retweets }) => yScale(retweets))\r\n      .y0(() => yScale(yScale.domain()[0]));\r\n    return area(data);\r\n  }, [xScale, yScale, data]);\r\n\r\n  return (\r\n    <>\r\n      <path\r\n        ref={ref}\r\n        d={d}\r\n        fill={`url(#gradient-${color})`}\r\n        opacity={0}\r\n        {...props}\r\n      />\r\n      <defs>\r\n        <linearGradient\r\n          id={`gradient-${color}`}\r\n          x1=\"0%\"\r\n          x2=\"0%\"\r\n          y1=\"0%\"\r\n          y2=\"100%\"\r\n        >\r\n          <stop offset=\"0%\" stopColor={color} stopOpacity={0.2} />\r\n          <stop offset=\"100%\" stopColor={color} stopOpacity={0} />\r\n        </linearGradient>\r\n      </defs>\r\n    </>\r\n  );\r\n};\r\n\r\nArea.propTypes = {\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  data: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      date: PropTypes.date,\r\n      retweets: PropTypes.number\r\n    })\r\n  ),\r\n  color: PropTypes.string,\r\n  disableAnimation: PropTypes.bool\r\n};\r\n\r\nArea.defaultProps = {\r\n  data: [],\r\n  color: \"white\",\r\n  disableAnimation: false\r\n};\r\n\r\nexport default Area;\r\n","/** AxisX.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Axis = ({\r\n  type,\r\n  scale,\r\n  ticks,\r\n  transform,\r\n  tickFormat,\r\n  disableAnimation,\r\n  anchorEl,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    const axisGenerator = type === \"left\" ? d3.axisRight : d3.axisBottom;\r\n    const axis = axisGenerator(scale).ticks(ticks).tickFormat(tickFormat);\r\n    const axisGroup = d3.select(ref.current);\r\n    if (disableAnimation) {\r\n      axisGroup.call(axis);\r\n    } else {\r\n      axisGroup.transition().duration(750).ease(d3.easeLinear).call(axis);\r\n    }\r\n    axisGroup.select(\".domain\").remove();\r\n    axisGroup.selectAll(\"line\").remove();\r\n    axisGroup\r\n      .selectAll(\"text\")\r\n      .attr(\"opacity\", 0.5)\r\n      .attr(\"color\", \"white\")\r\n      .attr(\"font-size\", \"0.75rem\");\r\n  }, [scale, ticks, tickFormat, disableAnimation]);\r\n\r\n  React.useEffect(() => {\r\n    d3.select(anchorEl)\r\n      .on(\"mouseout.axisX\", () => {\r\n        d3.select(ref.current)\r\n          .selectAll(\"text\")\r\n          .attr(\"opacity\", 0.5)\r\n          .style(\"font-weight\", \"normal\");\r\n      })\r\n      .on(\"mousemove.axisX\", () => {\r\n        const [x] = d3.mouse(anchorEl);\r\n        const xDate = scale.invert(x);\r\n        const textElements = d3.select(ref.current).selectAll(\"text\");\r\n        const data = textElements.data();\r\n        const index = d3.bisector((d) => d).left(data, xDate);\r\n        textElements\r\n          .attr(\"opacity\", (d, i) => (i === index - 1 ? 1 : 0.5))\r\n          .style(\"font-weight\", (d, i) =>\r\n            i === index - 1 ? \"bold\" : \"normal\"\r\n          );\r\n      });\r\n  }, [anchorEl, scale]);\r\n\r\n  return <g ref={ref} transform={transform} {...props} />;\r\n};\r\n\r\nAxis.propTypes = {\r\n  type: PropTypes.oneOf([\"left\", \"bottom\"]).isRequired,\r\n  scale: PropTypes.func.isRequired,\r\n  ticks: PropTypes.oneOfType([PropTypes.number, PropTypes.func]),\r\n  tickFormat: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\r\n  transform: PropTypes.string,\r\n  disableAnimation: PropTypes.bool,\r\n  anchorEl: PropTypes.instanceOf(Element)\r\n};\r\n\r\nAxis.defaultProps = {\r\n  ticks: 0,\r\n  tickFormat: null,\r\n  transform: \"\",\r\n  disableAnimation: false,\r\n  anchorEl: null\r\n};\r\n\r\nexport default Axis;\r\n","/** GridLine.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst GridLine = ({\r\n  type,\r\n  scale,\r\n  ticks,\r\n  size,\r\n  transform,\r\n  disableAnimation,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    const axisGenerator = type === \"vertical\" ? d3.axisBottom : d3.axisLeft;\r\n    const axis = axisGenerator(scale).ticks(ticks).tickSize(-size);\r\n\r\n    const gridGroup = d3.select(ref.current);\r\n    if (disableAnimation) {\r\n      gridGroup.call(axis);\r\n    } else {\r\n      gridGroup.transition().duration(750).ease(d3.easeLinear).call(axis);\r\n    }\r\n    gridGroup.select(\".domain\").remove();\r\n    gridGroup.selectAll(\"text\").remove();\r\n    gridGroup.selectAll(\"line\").attr(\"stroke\", \"rgba(255, 255, 255, 0.1)\");\r\n  }, [scale, ticks, size, disableAnimation]);\r\n\r\n  return <g ref={ref} transform={transform} {...props} />;\r\n};\r\n\r\nGridLine.propTypes = {\r\n  scale: PropTypes.func.isRequired,\r\n  type: PropTypes.oneOf([\"vertical\", \"horizontal\"]).isRequired,\r\n  ticks: PropTypes.oneOfType([PropTypes.number, PropTypes.func]),\r\n  transform: PropTypes.string,\r\n  size: PropTypes.number,\r\n  disableAnimation: PropTypes.bool\r\n};\r\n\r\nGridLine.defaultProps = {\r\n  ticks: 0,\r\n  transform: \"\",\r\n  size: 0,\r\n  disableAnimation: false\r\n};\r\n\r\nexport default GridLine;\r\n","/** Overlay.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\n/**\r\n * Use Overlay as a wrapper for components that need mouse events to be handled.\r\n * For example: Tooltip, AxisX.\r\n */\r\nconst Overlay = React.forwardRef(({ width, height, children }, ref) => (\r\n  <g>\r\n    {children}\r\n    <rect ref={ref} width={width} height={height} opacity={0} />\r\n  </g>\r\n));\r\n\r\nOverlay.propTypes = {\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired,\r\n  children: PropTypes.node.isRequired\r\n};\r\n\r\nexport default Overlay;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\nimport { MultiLineDataPropTypes } from \"../utils/propTypes\";\r\nimport {formatPercent } from \"../utils/commonUtils\"\r\n// import { formatPercent, formatPriceUSD } from \"../utils/commonUtils\";\r\n\r\nconst Tooltip = ({\r\n  xScale,\r\n  yScale,\r\n  width,\r\n  height,\r\n  data,\r\n  margin,\r\n  anchorEl,\r\n  children,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  const drawLine = React.useCallback(\r\n    (x) => {\r\n      d3.select(ref.current)\r\n        .select(\".tooltipLine\")\r\n        .attr(\"x1\", x)\r\n        .attr(\"x2\", x)\r\n        .attr(\"y1\", -margin.top)\r\n        .attr(\"y2\", height);\r\n    },\r\n    [ref, height, margin]\r\n  );\r\n\r\n  const drawContent = React.useCallback(\r\n    (x) => {\r\n      const tooltipContent = d3.select(ref.current).select(\".tooltipContent\");\r\n      tooltipContent.attr(\"transform\", (cur, i, nodes) => {\r\n        const nodeWidth = nodes[i]?.getBoundingClientRect()?.width || 0;\r\n        const translateX = nodeWidth + x > width ? x - nodeWidth - 12 : x + 8;\r\n        return `translate(${translateX}, ${-margin.top})`;\r\n      });\r\n      tooltipContent\r\n        .select(\".contentTitle\")\r\n        .text(d3.timeFormat(\"%b %d, %Y\")(xScale.invert(x)));\r\n    },\r\n    [xScale, margin, width]\r\n  );\r\n\r\n  const drawBackground = React.useCallback(() => {\r\n    // reset background size to defaults\r\n    const contentBackground = d3\r\n      .select(ref.current)\r\n      .select(\".contentBackground\");\r\n    contentBackground.attr(\"width\", 125).attr(\"height\", 40);\r\n\r\n    // calculate new background size\r\n    const tooltipContentElement = d3\r\n      .select(ref.current)\r\n      .select(\".tooltipContent\")\r\n      .node();\r\n    if (!tooltipContentElement) return;\r\n\r\n    const contentSize = tooltipContentElement.getBoundingClientRect();\r\n    contentBackground\r\n      .attr(\"width\", contentSize.width + 8)\r\n      .attr(\"height\", contentSize.height + 4);\r\n  }, []);\r\n\r\n  const onChangePosition = React.useCallback((d, i, isVisible) => {\r\n    d3.selectAll(\".performanceItemChangeRetweets\")\r\n      .filter((td, tIndex) => tIndex === i)\r\n      .text(isVisible ? formatPercent(d.change) : \"\");\r\n\r\n    d3.selectAll(\".performanceItemRetweets\")\r\n      .filter((td, tIndex) => tIndex === i)\r\n      .text(\r\n        d.retweets.toLocaleString() && !isVisible ? \"No data\" : d.retweets.toLocaleString()\r\n      );\r\n       // .text(\r\n      //   d.marketvalue && !isVisible ? \"No data\" : formatPriceUSD(d.marketvalue)\r\n      // );\r\n\r\n    const maxNameWidth = d3.max(\r\n      d3.selectAll(\".performanceItemName\").nodes(),\r\n      (node) => node.getBoundingClientRect().width\r\n    );\r\n    d3.selectAll(\".performanceItemChangeRetweets\").attr(\r\n      \"transform\",\r\n      (datum, index, nodes) =>\r\n        `translate(${\r\n          nodes[index].previousSibling.getBoundingClientRect().width + 14\r\n        },4)`\r\n    );\r\n\r\n    d3.selectAll(\".performanceItemRetweets\").attr(\r\n      \"transform\",\r\n      `translate(${maxNameWidth + 60},4)`\r\n    );\r\n  }, []);\r\n\r\n  const followPoints = React.useCallback(() => {\r\n    const [x] = d3.mouse(anchorEl);\r\n    const xDate = xScale.invert(x);\r\n    const bisectDate = d3.bisector((d) => d.date).left;\r\n    let baseXPos = 0;\r\n\r\n    // draw circles on line\r\n    d3.select(ref.current)\r\n      .selectAll(\".tooltipLinePoint\")\r\n      .attr(\"transform\", (cur, i) => {\r\n        const index = bisectDate(data[i].items, xDate, 1);\r\n        const d0 = data[i].items[index - 1];\r\n        const d1 = data[i].items[index];\r\n        const d = xDate - d0?.date > d1?.date - xDate ? d1 : d0;\r\n        if (d.date === undefined && d.retweets === undefined) {\r\n          // move point out of container\r\n          return \"translate(-100,-100)\";\r\n        }\r\n        const xPos = xScale(d.date);\r\n        if (i === 0) {\r\n          baseXPos = xPos;\r\n        }\r\n\r\n        let isVisible = true;\r\n        if (xPos !== baseXPos) {\r\n          isVisible = false;\r\n        }\r\n        const yPos = yScale(d.retweets);\r\n\r\n        onChangePosition(d, i, isVisible);\r\n\r\n        return isVisible\r\n          ? `translate(${xPos}, ${yPos})`\r\n          : \"translate(-100,-100)\";\r\n      });\r\n\r\n    drawLine(baseXPos);\r\n    drawContent(baseXPos);\r\n    drawBackground();\r\n  }, [\r\n    anchorEl,\r\n    drawLine,\r\n    drawContent,\r\n    drawBackground,\r\n    xScale,\r\n    yScale,\r\n    data,\r\n    onChangePosition\r\n  ]);\r\n\r\n  React.useEffect(() => {\r\n    d3.select(anchorEl)\r\n      .on(\"mouseout.tooltip\", () => {\r\n        d3.select(ref.current).attr(\"opacity\", 0);\r\n      })\r\n      .on(\"mouseover.tooltip\", () => {\r\n        d3.select(ref.current).attr(\"opacity\", 1);\r\n      })\r\n      .on(\"mousemove.tooltip\", () => {\r\n        d3.select(ref.current)\r\n          .selectAll(\".tooltipLinePoint\")\r\n          .attr(\"opacity\", 1);\r\n        followPoints();\r\n      });\r\n  }, [anchorEl, followPoints]);\r\n\r\n  if (!data.length) return null;\r\n\r\n  return (\r\n    <g ref={ref} opacity={0} {...props}>\r\n      <line className=\"tooltipLine\" />\r\n      <g className=\"tooltipContent\">\r\n        <rect className=\"contentBackground\" rx={4} ry={4} opacity={0.2} />\r\n        <text className=\"contentTitle\" transform=\"translate(4,14)\" />\r\n        <g className=\"content\" transform=\"translate(4,32)\">\r\n          {data.map(({ name, color }, i) => (\r\n            <g key={name} transform={`translate(6,${22 * i})`}>\r\n              <circle r={6} fill={color} />\r\n              <text className=\"performanceItemName\" transform=\"translate(10,4)\">\r\n                {name}\r\n              </text>\r\n              <text\r\n                className=\"performanceItemChangeRetweets\"\r\n                opacity={0.5}\r\n                fontSize={10}\r\n              />\r\n              <text className=\"performanceItemRetweets\" />\r\n            </g>\r\n          ))}\r\n        </g>\r\n      </g>\r\n      {data.map(({ name }) => (\r\n        <circle className=\"tooltipLinePoint\" r={6} key={name} opacity={0} />\r\n      ))}\r\n    </g>\r\n  );\r\n};\r\n\r\nTooltip.propTypes = {\r\n  width: PropTypes.number,\r\n  height: PropTypes.number,\r\n  margin: PropTypes.shape({\r\n    top: PropTypes.number,\r\n    bottom: PropTypes.number,\r\n    left: PropTypes.number,\r\n    right: PropTypes.number\r\n  }),\r\n  data: MultiLineDataPropTypes,\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  anchorEl: PropTypes.instanceOf(Element)\r\n};\r\n\r\nTooltip.defaultProps = {\r\n  width: 0,\r\n  height: 0,\r\n  margin: {\r\n    top: 0,\r\n    bottom: 0,\r\n    left: 0,\r\n    right: 0\r\n  },\r\n  data: [],\r\n  anchorEl: null\r\n};\r\n\r\nexport default Tooltip;\r\n","/* eslint-disable no-bitwise */\r\nimport * as d3 from \"d3\";\r\nimport { DateTime, Interval } from \"luxon\";\r\n\r\n// export const formatPriceUSD = (price) =>\r\n//   new Intl.NumberFormat(\"en-US\", { style: \"currency\", currency: \"USD\" }).format(\r\n//     price\r\n//   );\r\n\r\nexport const formatPercent = (percent = 0) => {\r\n  let result = \"0.00%\";\r\n  const isNumber = typeof percent === \"number\";\r\n  const isString = typeof percent === \"string\";\r\n  const isNotNaN = !Number.isNaN(parseFloat(percent));\r\n\r\n  if ((isNumber || isString) && isNotNaN) {\r\n    result = `${parseFloat(percent) > 0 ? \"+\" : \"\"}${d3.format(\".2%\")(\r\n      percent / 100\r\n    )}`;\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const getPeriod = (date) => {\r\n  if (!date) return 6;\r\n  const now = DateTime.utc();\r\n  const before = DateTime.fromJSDate(date);\r\n  const i = Interval.fromDateTimes(before, now);\r\n  return i.length(\"months\");\r\n};\r\n\r\nexport const getXTicks = (months) => {\r\n  if (months <= 2) return d3.timeDay.every(5).filter((d) => d.getDate() !== 31);\r\n  if (months <= 6) return d3.timeMonth.every(1);\r\n  if (months <= 13) return d3.timeMonth.every(2);\r\n  return d3.timeYear.every(1);\r\n};\r\n\r\nexport const getXTickFormat = (months) => {\r\n  if (months <= 2) return d3.timeFormat(\"%d %b\");\r\n  if (months <= 6) return d3.timeFormat(\"%b\");\r\n  if (months <= 13) return d3.timeFormat(\"%b %Y\");\r\n  return d3.timeFormat(\"%Y\");\r\n};\r\n","/** MultilineChart.controller.js */\r\nimport { useMemo } from \"react\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst useController = ({ data, width, height }) => {\r\n  const xMin = useMemo(\r\n    () => d3.min(data, ({ items }) => d3.min(items, ({ date }) => date)),\r\n    [data]\r\n  );\r\n\r\n  const xMax = useMemo(\r\n    () => d3.max(data, ({ items }) => d3.max(items, ({ date }) => date)),\r\n    [data]\r\n  );\r\n\r\n  const xScale = useMemo(\r\n    () => d3.scaleTime().domain([xMin, xMax]).range([0, width]),\r\n    [xMin, xMax, width]\r\n  );\r\n\r\n  const yMin = useMemo(\r\n    () => d3.min(data, ({ items }) => d3.min(items, ({ retweets }) => retweets)),\r\n    [data]\r\n  );\r\n\r\n  const yMax = useMemo(\r\n    () => d3.max(data, ({ items }) => d3.max(items, ({retweets}) => retweets)),\r\n    [data]\r\n  );\r\n\r\n  const yScale = useMemo(() => {\r\n    const indention = (yMax - yMin) * 0.5;\r\n    return d3\r\n      .scaleLinear()\r\n      .domain([yMin - indention, yMax + indention])\r\n      .range([height, 0]);\r\n  }, [height, yMin, yMax]);\r\n\r\n  const yScaleForAxis = useMemo(\r\n    () => d3.scaleBand().domain([yMin, yMax]).range([height, 0]),\r\n    [height, yMin, yMax]\r\n  );\r\n\r\n  const yTickFormat = (d) => {\r\n\r\n    return d\r\n    // `${parseFloat(d) > 0 ? \"+\" : \"\"}${d3.format(\".2%\")(d / 100)}`;\r\n  }\r\n  const xTickFormat = (d) => {\r\n    if (d3.timeFormat(\"%b\")(d) === \"Jan\") {\r\n      return d3.timeFormat(\"%Y\")(d);\r\n    }\r\n    return d3.timeFormat(\"%b\")(d);\r\n  };\r\n  return {\r\n    yTickFormat,\r\n    xScale,\r\n    yScale,\r\n    yScaleForAxis,\r\n    xTickFormat\r\n  };\r\n};\r\n\r\nexport default useController;\r\n","import React from 'react';\r\nimport ResizeObserver from 'resize-observer-polyfill';\r\n\r\n/**\r\n * Use ResizeObserver to listen for the changes to the dimensions of an element\r\n * @params ref - React ref\r\n * @returns {object} - { width, height, top, left }\r\n */\r\nconst useResize = (ref) => {\r\n  const [dimensions, setDimensions] = React.useState(null);\r\n  React.useEffect(() => {\r\n    const element = ref.current;\r\n    const resizeObserver = new ResizeObserver((entries) => {\r\n      entries.forEach((entry) => {\r\n        setDimensions(entry.contentRect);\r\n      });\r\n    });\r\n    resizeObserver.observe(element);\r\n    return () => {\r\n      resizeObserver.unobserve(element);\r\n    };\r\n  }, [ref]);\r\n  return dimensions || {\r\n    width: 0,\r\n    height: 0,\r\n    top: 0,\r\n    left: 0,\r\n  };\r\n};\r\n\r\nexport default useResize;\r\n","import React from \"react\";\r\nimport useResize from \"./useResize\";\r\n\r\nconst useDimensions = ({ maxHeight, margin = {}, scaleCoef = 0.5 }) => {\r\n  const ref = React.useRef(null);\r\n  const { width } = useResize(ref);\r\n\r\n  const height =\r\n    !maxHeight || width * scaleCoef < maxHeight ? width * scaleCoef : maxHeight;\r\n  const innerWidth = width - (margin.left || 0) - (margin.right || 0);\r\n  const innerHeight = height - (margin.top || 0) - (margin.bottom || 0);\r\n\r\n  return [\r\n    ref,\r\n    {\r\n      svgWidth: width,\r\n      svgHeight: height,\r\n      width: innerWidth,\r\n      height: innerHeight\r\n    }\r\n  ];\r\n};\r\n\r\nexport default useDimensions;\r\n","/** MultilineChart.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { MultiLineDataPropTypes } from \"../utils/propTypes\";\r\nimport { Line, Axis, GridLine, Overlay, Tooltip, Area } from \"../components\";\r\nimport useController from \"./MultilineChart.controller\";\r\nimport useDimensions from \"../utils/useDimensions\";\r\n\r\nconst MultilineChart = ({ data = [], margin = {} }) => {\r\n  const overlayRef = React.useRef(null);\r\n  const [containerRef, { svgWidth, svgHeight, width, height }] = useDimensions({\r\n    maxHeight: 400,\r\n    margin\r\n  });\r\n  const controller = useController({ data, width, height });\r\n  const {\r\n    yTickFormat,\r\n    xTickFormat,\r\n    xScale,\r\n    yScale,\r\n    yScaleForAxis\r\n  } = controller;\r\n\r\n  return (\r\n    <div ref={containerRef}>\r\n      <svg width={svgWidth} height={svgHeight}>\r\n        <g transform={`translate(${margin.left},${margin.top})`}>\r\n          <GridLine\r\n            type=\"vertical\"\r\n            scale={xScale}\r\n            ticks={5}\r\n            size={height}\r\n            transform={`translate(0, ${height})`}\r\n          />\r\n          <GridLine\r\n            type=\"horizontal\"\r\n            scale={yScaleForAxis}\r\n            ticks={2}\r\n            size={width}\r\n          />\r\n          <GridLine\r\n            type=\"horizontal\"\r\n            className=\"baseGridLine\"\r\n            scale={yScale}\r\n            ticks={1}\r\n            size={width}\r\n            disableAnimation\r\n          />\r\n          {data.map(({ name, items = [], color }) => (\r\n            <Line\r\n              key={name}\r\n              data={items}\r\n              xScale={xScale}\r\n              yScale={yScale}\r\n              color={color}\r\n            />\r\n          ))}\r\n          {/* <Area data={data[0].items} xScale={xScale} yScale={yScale} /> */}\r\n          <Axis\r\n            type=\"left\"\r\n            scale={yScaleForAxis}\r\n            transform=\"translate(0, -10)\"\r\n            ticks={5}\r\n            tickFormat={yTickFormat}\r\n          />\r\n          <Overlay ref={overlayRef} width={width} height={height}>\r\n            <Axis\r\n              type=\"bottom\"\r\n              className=\"axisX\"\r\n              anchorEl={overlayRef.current}\r\n              scale={xScale}\r\n              transform={`translate(10, ${height - height / 6})`}\r\n              ticks={5}\r\n              tickFormat={xTickFormat}\r\n            />\r\n            <Tooltip\r\n              className=\"tooltip\"\r\n              anchorEl={overlayRef.current}\r\n              width={width}\r\n              height={height}\r\n              margin={margin}\r\n              xScale={xScale}\r\n              yScale={yScale}\r\n              data={data}\r\n            />\r\n          </Overlay>\r\n        </g>\r\n      </svg>\r\n    </div>\r\n  );\r\n};\r\n\r\nMultilineChart.propTypes = {\r\n  data: MultiLineDataPropTypes,\r\n  margin: PropTypes.shape({\r\n    top: PropTypes.number,\r\n    bottom: PropTypes.number,\r\n    left: PropTypes.number,\r\n    right: PropTypes.number\r\n  })\r\n};\r\n\r\nMultilineChart.defaultProps = {\r\n  data: [],\r\n  margin: {\r\n    top: 30,\r\n    right: 15,\r\n    bottom: 15,\r\n    left: 15\r\n  }\r\n};\r\n\r\nexport default MultilineChart;\r\n","import React from \"react\";\r\n\r\nconst Legend = ({ data, selectedItems, onChange }) => (\r\n  <div className=\"legendContainer\">\r\n    {data.map((d) => (\r\n      <div className=\"checkbox\" style={{ color: d.color }} key={d.name}>\r\n        <label>\r\n          {d.name !== \"Total\" && (\r\n            <input\r\n              type=\"checkbox\"\r\n              value={d.name}\r\n              checked={selectedItems.includes(d.name)}\r\n              onChange={() => onChange(d.name)}\r\n            />\r\n          )}\r\n          {d.name}\r\n        </label>\r\n      </div>\r\n    ))}\r\n  </div>\r\n);\r\n\r\nexport default Legend;\r\n","/** App.js */\r\nimport React, {useState, useEffect} from \"react\";\r\nimport MultilineChart from \"./views/MultilineChart\";\r\nimport Legend from \"./components/Legend\";\r\nimport vcit from \"./data/VCIT.json\";\r\nimport portfolio from \"./data/portfolio.json\";\r\nimport schc from \"./data/SCHC.json\";\r\nimport \"./styles.css\";\r\nimport fiannafail from \"./data/fiannaFail.json\"\r\nimport finegael from \"./data/finegael.json\"\r\nimport ind from \"./data/ind.json\"\r\nimport sinnfein from \"./data/sinnfein.json\"\r\nimport labour from \"./data/labour.json\"\r\nimport { chamberStats } from '../../../Backend/metaData';\r\nimport axios from \"axios\";\r\nimport { Typography } from \"@material-ui/core\";\r\n\r\n\r\n\r\n\r\n\r\nexport default function MultilineAppV3PartyRetweets ({data}) {\r\n\r\n  const [selectedItems, setSelectedItems] = useState([\"Aontú\", \"Independents\", \"Green Party\", \"Labour\", \"Fianna Fáil\", \"Fine Gael\", \"Social Democrats\", \"People Before Profit\", \"Independents 4 Change\", \"Sinn Féin\"]);\r\n  const [TDData, setTDData] = useState(null)\r\n  \r\n  \r\n  \r\n  useEffect(() => {\r\n\r\n    setTDData(data.filter(function(d) {\r\n          \r\n      if(d.followerData[0] != undefined) {\r\n      return d\r\n    }\r\n  }\r\n  ))\r\n\r\n}, []);\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst onChangeSelection = (name) => {\r\n    const newSelectedItems = selectedItems.includes(name)\r\n      ? selectedItems.filter((item) => item !== name)\r\n      : [...selectedItems, name];\r\n    setSelectedItems(newSelectedItems);\r\n  };\r\n  \r\nif (!TDData) return null;\r\n\r\n\r\n\r\nconsole.log(TDData.filter(d => d.party == \"Fine Gael\"))\r\n\r\n\r\n\r\n\r\n\r\n  console.log(TDData.map(d => d.retweetData))\r\n\r\n\r\n\r\n\r\n// const totalData = {\r\n//   name: \"Total\",\r\n//   color: \"#ffffff\",\r\n//   items: partyStats('sf').followerData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n// };\r\n  const weeks = TDData[0].retweetData.length\r\n\r\n\r\n\r\n\r\nfunction justParty(party) {\r\n\r\n\r\n  var just = TDData.filter(td => td.party == party)\r\n\r\n  \r\n\r\n  return just\r\n\r\n}\r\n\r\nfunction partyStats(party) {\r\n\r\n  //chamber\r\n  var currentParty = justParty(party) \r\n\r\n  function followers() {\r\n\r\n      var arr = [];\r\n      var followArr = [];\r\n      // var dateArr = currentParty[0].followerData.map(d => d.date);\r\n      var dateArr = currentParty[0].followerData.map(function(d) {\r\n\r\n                      var apart = d.date.split('/')\r\n                      var day = apart[0]\r\n                      var month = apart[1]\r\n                      var year = apart[2]\r\n\r\n                      var together = []\r\n                      together.push(month, day, year)\r\n                      var allDone = together.toString().replace(\",\",\"/\").replace(\",\",\"/\")\r\n                      return allDone\r\n                    })\r\n      var changeArr = [];\r\n\r\n\r\n\r\n      console.log(currentParty[0].retweetData.map(function(d) {\r\n\r\n        var apart = d.date.split('/')\r\n        var day = apart[0]\r\n        var month = apart[1]\r\n        var year = apart[2]\r\n\r\n        var together = []\r\n        together.push(month, day, year)\r\n        var allDone = together.toString().replace(\",\",\"/\").replace(\",\",\"/\")\r\n        return allDone\r\n\r\n      }))\r\n\r\n      // function weekDate () {\r\n\r\n//           for(let i = 0; i < weeks; i++) {\r\n\r\n//           var date = new Date();\r\n//           date.setDate(date.getDate() + (7 * i));\r\n\r\n//               function formatDate(date) {\r\n\r\n//                   var d = new Date(date),\r\n//                       month = '' + (d.getMonth() + 1),\r\n//                       day = '' + d.getDate(),\r\n//                       year = d.getFullYear();\r\n              \r\n//                   if (month.length < 2) \r\n//                       month = '0' + month;\r\n//                   if (day.length < 2) \r\n//                       day = '0' + day;\r\n              \r\n//                   return [year, month, day].join('-');\r\n//               }\r\n\r\n//           dateArr.push(formatDate(date));\r\n//       }\r\n\r\n\r\n//   return dateArr\r\n// }\r\n\r\n//   weekDate();\r\n\r\n\r\n      function follows () {\r\n          \r\n          for( let i = 0; i < weeks; i++) {\r\n\r\n\r\n              var partyFollowers = currentParty.map(td => td.followerData[i].followers)\r\n\r\n              var partyFollowersTotal = partyFollowers.reduce((a, b) => a + b, 0)\r\n\r\n              followArr.push(partyFollowersTotal)\r\n      \r\n          }\r\n      }\r\n\r\n  follows();\r\n\r\n      function change() {\r\n\r\n          for( let i = 0; i < followArr.length; i++) {\r\n\r\n              var lastWeek  = followArr[i - 1]\r\n              var thisWeek = followArr[i]\r\n              var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n              \r\n              //filter NaN at start\r\n\r\n              if(diff !== diff) {changeArr.push(0)} else {\r\n              changeArr.push(diff)\r\n              }\r\n          }\r\n      }\r\n\r\n      change();\r\n\r\n      function toObj() {\r\n\r\n      for(let i = 0; i < weeks; i++) {\r\n\r\n          var followObj = new Object;\r\n          var date = dateArr[i];\r\n          var followers = followArr[i];\r\n          var change = changeArr[i];\r\n\r\n          followObj.date = date;\r\n          followObj.followers = followers;\r\n          followObj.change = change;\r\n          \r\n          arr.push(followObj)\r\n\r\n          \r\n      }\r\n  return arr\r\n      \r\n      }\r\n\r\n      toObj();\r\n\r\n\r\n      return arr\r\n  } \r\n\r\n  function retweets() {\r\n\r\n      var arr = [];\r\n      var retweetArr = [];\r\n      var dateArr = currentParty[0].retweetData.map(function(d) {\r\n\r\n        var apart = d.date.split('/')\r\n        var day = apart[0]\r\n        var month = apart[1]\r\n        var year = apart[2]\r\n\r\n        var together = []\r\n        together.push(month, day, year)\r\n        var allDone = together.toString().replace(\",\",\"/\").replace(\",\",\"/\")\r\n        return allDone\r\n\r\n      })\r\n      var changeArr = [];\r\n\r\n\r\n\r\n      \r\n//       function weekDate () {\r\n\r\n//           for(let i = 0; i < weeks; i++) {\r\n\r\n//           var date = new Date();\r\n//           date.setDate(date.getDate() + (7 * i));\r\n\r\n//               function formatDate(date) {\r\n\r\n//                   var d = new Date(date),\r\n//                       month = '' + (d.getMonth() + 1),\r\n//                       day = '' + d.getDate(),\r\n//                       year = d.getFullYear();\r\n              \r\n//                   if (month.length < 2) \r\n//                       month = '0' + month;\r\n//                   if (day.length < 2) \r\n//                       day = '0' + day;\r\n              \r\n//                   return [year, month, day].join('-');\r\n//               }\r\n\r\n//           dateArr.push(formatDate(date));\r\n//       }\r\n\r\n\r\n//   return dateArr\r\n// }\r\n\r\n//   weekDate();\r\n\r\n\r\n      function retweets () {\r\n          \r\n          for( let i = 0; i < weeks; i++) {\r\n\r\n\r\n              var partyRetweets = currentParty.map(td => td.retweetData[i].retweets)\r\n\r\n              var partyRetweetsTotal = partyRetweets.reduce((a, b) => a + b, 0)\r\n\r\n              retweetArr.push(partyRetweetsTotal)\r\n      \r\n          }\r\n      }\r\n\r\n  retweets();\r\n\r\n      function change() {\r\n\r\n          for( let i = 0; i < retweetArr.length; i++) {\r\n\r\n              var lastWeek  = retweetArr[i - 1]\r\n              var thisWeek = retweetArr[i]\r\n              var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n              \r\n              //filter NaN at start\r\n\r\n              if(diff !== diff) {changeArr.push(0)} else {\r\n              changeArr.push(diff)\r\n              }\r\n          }\r\n      }\r\n\r\n      change();\r\n\r\n      function toObj() {\r\n\r\n      for(let i = 0; i < weeks; i++) {\r\n\r\n          var retweetObj = new Object;\r\n          var date = dateArr[i];\r\n          var retweets = retweetArr[i];\r\n          var change = changeArr[i];\r\n\r\n          retweetObj.date = date;\r\n          retweetObj.retweets = retweets;\r\n          retweetObj.change = change;\r\n          \r\n          arr.push(retweetObj)\r\n\r\n          \r\n      }\r\n  return arr\r\n      \r\n      }\r\n\r\n      toObj();\r\n\r\n\r\n      return arr\r\n  }\r\n\r\n  function polarity() {\r\n\r\n    var arr = [];\r\n    var polarityArr = [];\r\n    var dateArr = currentParty[0].sentimentData.map(function(d) {\r\n\r\n      var apart = d.date.split('/')\r\n      var day = apart[0]\r\n      var month = apart[1]\r\n      var year = apart[2]\r\n\r\n      var together = []\r\n      together.push(month, day, year)\r\n      var allDone = together.toString().replace(\",\",\"/\").replace(\",\",\"/\")\r\n      return allDone\r\n\r\n    })\r\n    var changeArr = [];\r\n\r\n\r\n\r\n    \r\n//       function weekDate () {\r\n\r\n//           for(let i = 0; i < weeks; i++) {\r\n\r\n//           var date = new Date();\r\n//           date.setDate(date.getDate() + (7 * i));\r\n\r\n//               function formatDate(date) {\r\n\r\n//                   var d = new Date(date),\r\n//                       month = '' + (d.getMonth() + 1),\r\n//                       day = '' + d.getDate(),\r\n//                       year = d.getFullYear();\r\n            \r\n//                   if (month.length < 2) \r\n//                       month = '0' + month;\r\n//                   if (day.length < 2) \r\n//                       day = '0' + day;\r\n            \r\n//                   return [year, month, day].join('-');\r\n//               }\r\n\r\n//           dateArr.push(formatDate(date));\r\n//       }\r\n\r\n\r\n//   return dateArr\r\n// }\r\n\r\n//   weekDate();\r\n\r\n\r\n    function polarityAvg () {\r\n        \r\n        for( let i = 0; i < weeks; i++) {\r\n\r\n          var tdAmount = currentParty.length\r\n\r\n            var partyPolarity = currentParty.map(td => td.sentimentData[i].polarity)\r\n\r\n            var partyPolarityAvg = partyPolarity.reduce((a, b) => a + b, 0) \r\n\r\n            polarityArr.push(partyPolarityAvg)\r\n    \r\n        }\r\n    }\r\n\r\npolarityAvg();\r\n\r\n    function change() {\r\n\r\n        for( let i = 0; i < polarityArr.length; i++) {\r\n\r\n            var lastWeek  = polarityArr[i - 1]\r\n            var thisWeek = polarityArr[i]\r\n            var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n            \r\n            //filter NaN at start\r\n\r\n            \r\n\r\n            if(diff !== diff || diff === Infinity) {changeArr.push(0)} else {\r\n            changeArr.push(diff)\r\n            }\r\n        }\r\n    }\r\n\r\n    change();\r\n\r\n    function toObj() {\r\n\r\n    for(let i = 0; i < weeks; i++) {\r\n\r\n        var polarityObj = new Object;\r\n        var date = dateArr[i];\r\n        var polAvg = polarityArr[i];\r\n        var change = changeArr[i];\r\n\r\n        polarityObj.date = date;\r\n        polarityObj.polarityAvg = polAvg\r\n        polarityObj.change = change;\r\n        \r\n        arr.push(polarityObj)\r\n\r\n        \r\n    }\r\nreturn arr\r\n    \r\n    }\r\n\r\n    toObj();\r\n\r\n\r\n    return arr\r\n}\r\n\r\n\r\n  function PartyObj() {\r\n\r\n      this.id = justParty(party)[0].party\r\n      this.name = justParty(party)[0].partyName\r\n      this.partyColor = justParty(party)[0].partyColor\r\n      this.followerData = followers()\r\n      this.retweetData = retweets()\r\n      this.polarityData = polarity()\r\n\r\n  }\r\n\r\n  return new PartyObj()\r\n}\r\n\r\nconsole.log(partyStats(\"Aontú\", TDData))\r\n\r\nconst fineGaelData = {\r\n  name: \"Fine Gael\",\r\n  color: \"#6699FF\",\r\n  items: partyStats('Fine Gael', TDData).retweetData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconsole.log(fineGaelData)\r\nconst sinnFeinData = {\r\n  name: \"Sinn Féin\",\r\n  color: \"#326760\",\r\n  items: partyStats(\"Sinn Féin\", TDData).retweetData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconst fiannaFailData = {\r\n  name: \"Fianna Fáil\",\r\n  color: \"#66BB66\",\r\n  items: partyStats('Fianna Fáil', TDData).retweetData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconst labourData = {\r\n  name: \"Labour\",\r\n  color: \"#CC0000\",\r\n  items: partyStats('Labour Party', TDData).retweetData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconst peopleBeforeProfitData = {\r\n  name: \"People Before Profit\",\r\n  color: \"#660000\",\r\n  items: partyStats('Solidarity - People Before Profit', TDData).retweetData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconst independentData = {\r\n  name: \"Independents\",\r\n  color: \"white\",\r\n  items: partyStats('Independent').retweetData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconst greenPartyData = {\r\n  name: \"Green Party\",\r\n  color: \"#99CC33\",\r\n  items: partyStats('Green Party').retweetData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconst independents4ChangeData = {\r\n  name: \"Independents 4 Change\",\r\n  color: \"grey\",\r\n  items: partyStats('Independents 4 Change').retweetData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconst aontuData = {\r\n  name: \"Aontú\",\r\n  color: \"#44532A\",\r\n  items: partyStats('Aontú').retweetData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconst socDemData = {\r\n  name: \"Social Democrats\",\r\n  color: \"#752F8B\",\r\n  items: partyStats('Social Democrats').retweetData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\n\r\n  console.log(partyStats(\"Aontú\"))\r\n  console.log(aontuData)\r\n  \r\n\r\n  \r\n  const chartData = [\r\n    ...[fineGaelData, fiannaFailData, sinnFeinData, labourData, independentData,  independents4ChangeData, peopleBeforeProfitData, greenPartyData, aontuData, socDemData].filter((d) => selectedItems.includes(d.name))\r\n  ];\r\n\r\n  \r\n\r\n\r\nconst legendData = [ fineGaelData, sinnFeinData, fiannaFailData, independentData, labourData, independents4ChangeData, peopleBeforeProfitData, greenPartyData, aontuData, socDemData];\r\n\r\n\r\n  return (\r\n  <div className=\"featuredItem\" style={{textAlign: \"center\"}}>\r\n    <Typography variant=\"h5\">Party Retweets</Typography>\r\n      <Legend\r\n        data={legendData}\r\n        selectedItems={selectedItems}\r\n        onChange={onChangeSelection}\r\n      />\r\n      <MultilineChart data={chartData} />\r\n      </div>\r\n\r\n  );\r\n}\r\n\r\n","import { arrayOf, shape, string, date as dateProp, number } from \"prop-types\";\r\n\r\nexport const MultiLineDataItemsPropTypes = arrayOf(\r\n  shape({\r\n    date: dateProp,\r\n    change: number,\r\n    polarityAvg: number\r\n  })\r\n);\r\n\r\nexport const MultiLineDataPropTypes = arrayOf(\r\n  shape({\r\n    name: string,\r\n    items: MultiLineDataItemsPropTypes,\r\n    color: string\r\n  })\r\n);\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Line = ({\r\n  xScale,\r\n  yScale,\r\n  color,\r\n  data,\r\n  isSmooth,\r\n  animation,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  // Define different types of animation that we can use\r\n  const animateLeft = React.useCallback(() => {\r\n    // NOTE: for some reason getTotalLength() doesn't work in tests\r\n    // in this codesandbox so we added default value just for tests\r\n    const totalLength = ref.current.getTotalLength\r\n      ? ref.current.getTotalLength()\r\n      : 500;\r\n    d3.select(ref.current)\r\n      .attr(\"opacity\", 1)\r\n      .attr(\"stroke-dasharray\", `${totalLength},${totalLength}`)\r\n      .attr(\"stroke-dashoffset\", totalLength)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeLinear)\r\n      .attr(\"stroke-dashoffset\", 0);\r\n  }, []);\r\n  const animateFadeIn = React.useCallback(() => {\r\n    d3.select(ref.current)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeLinear)\r\n      .attr(\"opacity\", 1);\r\n  }, []);\r\n  const noneAnimation = React.useCallback(() => {\r\n    d3.select(ref.current).attr(\"opacity\", 1);\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    switch (animation) {\r\n      case \"left\":\r\n        animateLeft();\r\n        break;\r\n      case \"fadeIn\":\r\n        animateFadeIn();\r\n        break;\r\n      case \"none\":\r\n      default:\r\n        noneAnimation();\r\n        break;\r\n    }\r\n  }, [animateLeft, animateFadeIn, noneAnimation, animation]);\r\n\r\n  // Recalculate line length if scale has changed\r\n  React.useEffect(() => {\r\n    if (animation === \"left\") {\r\n      const totalLength = ref.current.getTotalLength\r\n        ? ref.current.getTotalLength()\r\n        : 500;\r\n      d3.select(ref.current).attr(\r\n        \"stroke-dasharray\",\r\n        `${totalLength},${totalLength}`\r\n      );\r\n    }\r\n  }, [xScale, yScale, animation]);\r\n\r\n  const line = d3\r\n    .line()\r\n    .x((d) => xScale(d.date))\r\n    .y((d) => yScale(d.polarityAvg));\r\n\r\n  const d = line(data);\r\n\r\n  return (\r\n    <path\r\n      ref={ref}\r\n      d={d?.match(/NaN|undefined/) ? \"\" : d}\r\n      stroke={color}\r\n      strokeWidth={3}\r\n      fill=\"none\"\r\n      opacity={0}\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n\r\nLine.propTypes = {\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  data: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      date: PropTypes.date,\r\n      change: PropTypes.number\r\n    })\r\n  ),\r\n  color: PropTypes.string,\r\n  isSmooth: PropTypes.bool,\r\n  animation: PropTypes.oneOf([\"left\", \"fadeIn\", \"none\"])\r\n};\r\n\r\nLine.defaultProps = {\r\n  data: [],\r\n  color: \"white\",\r\n  isSmooth: false,\r\n  animation: \"left\"\r\n};\r\n\r\nexport default Line;\r\n","/** Area.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Area = ({ xScale, yScale, color, data, disableAnimation, ...props }) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    if (disableAnimation) {\r\n      d3.select(ref.current).attr(\"opacity\", 1);\r\n      return;\r\n    }\r\n    d3.select(ref.current)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeBackIn)\r\n      .attr(\"opacity\", 1);\r\n  }, [disableAnimation]);\r\n\r\n  const d = React.useMemo(() => {\r\n    const area = d3\r\n      .area()\r\n      .x(({ date }) => xScale(date))\r\n      .y1(({ polarityAvg }) => yScale(polarityAvg))\r\n      .y0(() => yScale(yScale.domain()[0]));\r\n    return area(data);\r\n  }, [xScale, yScale, data]);\r\n\r\n  return (\r\n    <>\r\n      <path\r\n        ref={ref}\r\n        d={d}\r\n        fill={`url(#gradient-${color})`}\r\n        opacity={0}\r\n        {...props}\r\n      />\r\n      <defs>\r\n        <linearGradient\r\n          id={`gradient-${color}`}\r\n          x1=\"0%\"\r\n          x2=\"0%\"\r\n          y1=\"0%\"\r\n          y2=\"100%\"\r\n        >\r\n          <stop offset=\"0%\" stopColor={color} stopOpacity={0.2} />\r\n          <stop offset=\"100%\" stopColor={color} stopOpacity={0} />\r\n        </linearGradient>\r\n      </defs>\r\n    </>\r\n  );\r\n};\r\n\r\nArea.propTypes = {\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  data: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      date: PropTypes.date,\r\n      retweets: PropTypes.number\r\n    })\r\n  ),\r\n  color: PropTypes.string,\r\n  disableAnimation: PropTypes.bool\r\n};\r\n\r\nArea.defaultProps = {\r\n  data: [],\r\n  color: \"white\",\r\n  disableAnimation: false\r\n};\r\n\r\nexport default Area;\r\n","/** AxisX.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Axis = ({\r\n  type,\r\n  scale,\r\n  ticks,\r\n  transform,\r\n  tickFormat,\r\n  disableAnimation,\r\n  anchorEl,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    const axisGenerator = type === \"left\" ? d3.axisRight : d3.axisBottom;\r\n    const axis = axisGenerator(scale).ticks(ticks).tickFormat(tickFormat);\r\n    const axisGroup = d3.select(ref.current);\r\n    if (disableAnimation) {\r\n      axisGroup.call(axis);\r\n    } else {\r\n      axisGroup.transition().duration(750).ease(d3.easeLinear).call(axis);\r\n    }\r\n    axisGroup.select(\".domain\").remove();\r\n    axisGroup.selectAll(\"line\").remove();\r\n    axisGroup\r\n      .selectAll(\"text\")\r\n      .attr(\"opacity\", 0.5)\r\n      .attr(\"color\", \"white\")\r\n      .attr(\"font-size\", \"0.75rem\");\r\n  }, [scale, ticks, tickFormat, disableAnimation]);\r\n\r\n  React.useEffect(() => {\r\n    d3.select(anchorEl)\r\n      .on(\"mouseout.axisX\", () => {\r\n        d3.select(ref.current)\r\n          .selectAll(\"text\")\r\n          .attr(\"opacity\", 0.5)\r\n          .style(\"font-weight\", \"normal\");\r\n      })\r\n      .on(\"mousemove.axisX\", () => {\r\n        const [x] = d3.mouse(anchorEl);\r\n        const xDate = scale.invert(x);\r\n        const textElements = d3.select(ref.current).selectAll(\"text\");\r\n        const data = textElements.data();\r\n        const index = d3.bisector((d) => d).left(data, xDate);\r\n        textElements\r\n          .attr(\"opacity\", (d, i) => (i === index - 1 ? 1 : 0.5))\r\n          .style(\"font-weight\", (d, i) =>\r\n            i === index - 1 ? \"bold\" : \"normal\"\r\n          );\r\n      });\r\n  }, [anchorEl, scale]);\r\n\r\n  return <g ref={ref} transform={transform} {...props} />;\r\n};\r\n\r\nAxis.propTypes = {\r\n  type: PropTypes.oneOf([\"left\", \"bottom\"]).isRequired,\r\n  scale: PropTypes.func.isRequired,\r\n  ticks: PropTypes.oneOfType([PropTypes.number, PropTypes.func]).toLocaleString(),\r\n  tickFormat: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\r\n  transform: PropTypes.string,\r\n  disableAnimation: PropTypes.bool,\r\n  anchorEl: PropTypes.instanceOf(Element)\r\n};\r\n\r\nAxis.defaultProps = {\r\n  ticks: 0,\r\n  tickFormat: null,\r\n  transform: \"\",\r\n  disableAnimation: false,\r\n  anchorEl: null\r\n};\r\n\r\nexport default Axis;\r\n","/** GridLine.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst GridLine = ({\r\n  type,\r\n  scale,\r\n  ticks,\r\n  size,\r\n  transform,\r\n  disableAnimation,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    const axisGenerator = type === \"vertical\" ? d3.axisBottom : d3.axisLeft;\r\n    const axis = axisGenerator(scale).ticks(ticks).tickSize(-size);\r\n\r\n    const gridGroup = d3.select(ref.current);\r\n    if (disableAnimation) {\r\n      gridGroup.call(axis);\r\n    } else {\r\n      gridGroup.transition().duration(750).ease(d3.easeLinear).call(axis);\r\n    }\r\n    gridGroup.select(\".domain\").remove();\r\n    gridGroup.selectAll(\"text\").remove();\r\n    gridGroup.selectAll(\"line\").attr(\"stroke\", \"rgba(255, 255, 255, 0.1)\");\r\n  }, [scale, ticks, size, disableAnimation]);\r\n\r\n  return <g ref={ref} transform={transform} {...props} />;\r\n};\r\n\r\nGridLine.propTypes = {\r\n  scale: PropTypes.func.isRequired,\r\n  type: PropTypes.oneOf([\"vertical\", \"horizontal\"]).isRequired,\r\n  ticks: PropTypes.oneOfType([PropTypes.number, PropTypes.func]),\r\n  transform: PropTypes.string,\r\n  size: PropTypes.number,\r\n  disableAnimation: PropTypes.bool\r\n};\r\n\r\nGridLine.defaultProps = {\r\n  ticks: 0,\r\n  transform: \"\",\r\n  size: 0,\r\n  disableAnimation: false\r\n};\r\n\r\nexport default GridLine;\r\n","/** Overlay.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\n/**\r\n * Use Overlay as a wrapper for components that need mouse events to be handled.\r\n * For example: Tooltip, AxisX.\r\n */\r\nconst Overlay = React.forwardRef(({ width, height, children }, ref) => (\r\n  <g>\r\n    {children}\r\n    <rect ref={ref} width={width} height={height} opacity={0} />\r\n  </g>\r\n));\r\n\r\nOverlay.propTypes = {\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired,\r\n  children: PropTypes.node.isRequired\r\n};\r\n\r\nexport default Overlay;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\nimport { MultiLineDataPropTypes } from \"../utils/propTypes\";\r\nimport {formatPercent } from \"../utils/commonUtils\"\r\n// import { formatPercent, formatPriceUSD } from \"../utils/commonUtils\";\r\n\r\nconst Tooltip = ({\r\n  xScale,\r\n  yScale,\r\n  width,\r\n  height,\r\n  data,\r\n  margin,\r\n  anchorEl,\r\n  children,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  const drawLine = React.useCallback(\r\n    (x) => {\r\n      d3.select(ref.current)\r\n        .select(\".tooltipLine\")\r\n        .attr(\"x1\", x)\r\n        .attr(\"x2\", x)\r\n        .attr(\"y1\", -margin.top)\r\n        .attr(\"y2\", height);\r\n    },\r\n    [ref, height, margin]\r\n  );\r\n\r\n  const drawContent = React.useCallback(\r\n    (x) => {\r\n      const tooltipContent = d3.select(ref.current).select(\".tooltipContent\");\r\n      tooltipContent.attr(\"transform\", (cur, i, nodes) => {\r\n        const nodeWidth = nodes[i]?.getBoundingClientRect()?.width || 0;\r\n        const translateX = nodeWidth + x > width ? x - nodeWidth - 12 : x + 8;\r\n        return `translate(${translateX}, ${-margin.top})`;\r\n      });\r\n      tooltipContent\r\n        .select(\".contentTitle\")\r\n        .text(d3.timeFormat(\"%b %d, %Y\")(xScale.invert(x)));\r\n    },\r\n    [xScale, margin, width]\r\n  );\r\n\r\n  const drawBackground = React.useCallback(() => {\r\n    // reset background size to defaults\r\n    const contentBackground = d3\r\n      .select(ref.current)\r\n      .select(\".contentBackground\");\r\n    contentBackground.attr(\"width\", 125).attr(\"height\", 40);\r\n\r\n    // calculate new background size\r\n    const tooltipContentElement = d3\r\n      .select(ref.current)\r\n      .select(\".tooltipContent\")\r\n      .node();\r\n    if (!tooltipContentElement) return;\r\n\r\n    const contentSize = tooltipContentElement.getBoundingClientRect();\r\n    contentBackground\r\n      .attr(\"width\", contentSize.width + 8)\r\n      .attr(\"height\", contentSize.height + 4);\r\n  }, []);\r\n\r\n  const onChangePosition = React.useCallback((d, i, isVisible) => {\r\n    d3.selectAll(\".performanceItemChangePolarity\")\r\n      .filter((td, tIndex) => tIndex === i)\r\n      .text(isVisible ? formatPercent(d.change) : \"\");\r\n\r\n    d3.selectAll(\".performanceItemPolarity\")\r\n      .filter((td, tIndex) => tIndex === i)\r\n      .text(\r\n        d.polarityAvg.toLocaleString() && !isVisible ? \"No data\" : d.polarityAvg.toLocaleString()\r\n      );\r\n       // .text(\r\n      //   d.marketvalue && !isVisible ? \"No data\" : formatPriceUSD(d.marketvalue)\r\n      // );\r\n\r\n    const maxNameWidth = d3.max(\r\n      d3.selectAll(\".performanceItemName\").nodes(),\r\n      (node) => node.getBoundingClientRect().width\r\n    );\r\n    d3.selectAll(\".performanceItemChangePolarity\").attr(\r\n      \"transform\",\r\n      (datum, index, nodes) =>\r\n        `translate(${\r\n          nodes[index].previousSibling.getBoundingClientRect().width + 14\r\n        },4)`\r\n    );\r\n\r\n    d3.selectAll(\".performanceItemPolarity\").attr(\r\n      \"transform\",\r\n      `translate(${maxNameWidth + 60},4)`\r\n    );\r\n  }, []);\r\n\r\n  const followPoints = React.useCallback(() => {\r\n    const [x] = d3.mouse(anchorEl);\r\n    const xDate = xScale.invert(x);\r\n    const bisectDate = d3.bisector((d) => d.date).left;\r\n    let baseXPos = 0;\r\n\r\n    // draw circles on line\r\n    d3.select(ref.current)\r\n      .selectAll(\".tooltipLinePoint\")\r\n      .attr(\"transform\", (cur, i) => {\r\n        const index = bisectDate(data[i].items, xDate, 1);\r\n        const d0 = data[i].items[index - 1];\r\n        const d1 = data[i].items[index];\r\n        const d = xDate - d0?.date > d1?.date - xDate ? d1 : d0;\r\n        if (d.date === undefined && d.polarityAvg === undefined) {\r\n          // move point out of container\r\n          return \"translate(-100,-100)\";\r\n        }\r\n        const xPos = xScale(d.date);\r\n        if (i === 0) {\r\n          baseXPos = xPos;\r\n        }\r\n\r\n        let isVisible = true;\r\n        if (xPos !== baseXPos) {\r\n          isVisible = false;\r\n        }\r\n        const yPos = yScale(d.polarityAvg);\r\n\r\n        onChangePosition(d, i, isVisible);\r\n\r\n        return isVisible\r\n          ? `translate(${xPos}, ${yPos})`\r\n          : \"translate(-100,-100)\";\r\n      });\r\n\r\n    drawLine(baseXPos);\r\n    drawContent(baseXPos);\r\n    drawBackground();\r\n  }, [\r\n    anchorEl,\r\n    drawLine,\r\n    drawContent,\r\n    drawBackground,\r\n    xScale,\r\n    yScale,\r\n    data,\r\n    onChangePosition\r\n  ]);\r\n\r\n  React.useEffect(() => {\r\n    d3.select(anchorEl)\r\n      .on(\"mouseout.tooltip\", () => {\r\n        d3.select(ref.current).attr(\"opacity\", 0);\r\n      })\r\n      .on(\"mouseover.tooltip\", () => {\r\n        d3.select(ref.current).attr(\"opacity\", 1);\r\n      })\r\n      .on(\"mousemove.tooltip\", () => {\r\n        d3.select(ref.current)\r\n          .selectAll(\".tooltipLinePoint\")\r\n          .attr(\"opacity\", 1);\r\n        followPoints();\r\n      });\r\n  }, [anchorEl, followPoints]);\r\n\r\n  if (!data.length) return null;\r\n\r\n  return (\r\n    <g ref={ref} opacity={0} {...props}>\r\n      <line className=\"tooltipLine\" />\r\n      <g className=\"tooltipContent\">\r\n        <rect className=\"contentBackground\" rx={4} ry={4} opacity={0.2} />\r\n        <text className=\"contentTitle\" transform=\"translate(4,14)\" />\r\n        <g className=\"content\" transform=\"translate(4,32)\">\r\n          {data.map(({ name, color }, i) => (\r\n            <g key={name} transform={`translate(6,${22 * i})`}>\r\n              <circle r={6} fill={color} />\r\n              <text className=\"performanceItemName\" transform=\"translate(10,4)\">\r\n                {name}\r\n              </text>\r\n              <text\r\n                className=\"performanceItemChangePolarity\"\r\n                opacity={0.5}\r\n                fontSize={10}\r\n              />\r\n              <text className=\"performanceItemPolarity\" />\r\n            </g>\r\n          ))}\r\n        </g>\r\n      </g>\r\n      {data.map(({ name }) => (\r\n        <circle className=\"tooltipLinePoint\" r={6} key={name} opacity={0} />\r\n      ))}\r\n    </g>\r\n  );\r\n};\r\n\r\nTooltip.propTypes = {\r\n  width: PropTypes.number,\r\n  height: PropTypes.number,\r\n  margin: PropTypes.shape({\r\n    top: PropTypes.number,\r\n    bottom: PropTypes.number,\r\n    left: PropTypes.number,\r\n    right: PropTypes.number\r\n  }),\r\n  data: MultiLineDataPropTypes,\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  anchorEl: PropTypes.instanceOf(Element)\r\n};\r\n\r\nTooltip.defaultProps = {\r\n  width: 0,\r\n  height: 0,\r\n  margin: {\r\n    top: 0,\r\n    bottom: 0,\r\n    left: 0,\r\n    right: 0\r\n  },\r\n  data: [],\r\n  anchorEl: null\r\n};\r\n\r\nexport default Tooltip;\r\n","/* eslint-disable no-bitwise */\r\nimport * as d3 from \"d3\";\r\nimport { DateTime, Interval } from \"luxon\";\r\n\r\n// export const formatPriceUSD = (price) =>\r\n//   new Intl.NumberFormat(\"en-US\", { style: \"currency\", currency: \"USD\" }).format(\r\n//     price\r\n//   );\r\n\r\nexport const formatPercent = (percent = 0) => {\r\n  let result = \"0.00%\";\r\n  const isNumber = typeof percent === \"number\";\r\n  const isString = typeof percent === \"string\";\r\n  const isNotNaN = !Number.isNaN(parseFloat(percent));\r\n\r\n  if ((isNumber || isString) && isNotNaN) {\r\n    result = `${parseFloat(percent) > 0 ? \"+\" : \"\"}${d3.format(\".2%\")(\r\n      percent / 100\r\n    )}`;\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const getPeriod = (date) => {\r\n  if (!date) return 6;\r\n  const now = DateTime.utc();\r\n  const before = DateTime.fromJSDate(date);\r\n  const i = Interval.fromDateTimes(before, now);\r\n  return i.length(\"months\");\r\n};\r\n\r\nexport const getXTicks = (months) => {\r\n  if (months <= 2) return d3.timeDay.every(5).filter((d) => d.getDate() !== 31);\r\n  if (months <= 6) return d3.timeMonth.every(1);\r\n  if (months <= 13) return d3.timeMonth.every(2);\r\n  return d3.timeYear.every(1);\r\n};\r\n\r\nexport const getXTickFormat = (months) => {\r\n  if (months <= 2) return d3.timeFormat(\"%d %b\");\r\n  if (months <= 6) return d3.timeFormat(\"%b\");\r\n  if (months <= 13) return d3.timeFormat(\"%b %Y\");\r\n  return d3.timeFormat(\"%Y\");\r\n};\r\n","/** MultilineChart.controller.js */\r\nimport { useMemo } from \"react\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst useController = ({ data, width, height }) => {\r\n  const xMin = useMemo(\r\n    () => d3.min(data, ({ items }) => d3.min(items, ({ date }) => date)),\r\n    [data]\r\n  );\r\n\r\n  const xMax = useMemo(\r\n    () => d3.max(data, ({ items }) => d3.max(items, ({ date }) => date)),\r\n    [data]\r\n  );\r\n\r\n  const xScale = useMemo(\r\n    () => d3.scaleTime().domain([xMin, xMax]).range([0, width]),\r\n    [xMin, xMax, width]\r\n  );\r\n\r\n  const yMin = useMemo(\r\n    () => d3.min(data, ({ items }) => d3.min(items, ({ polarityAvg }) => polarityAvg)),\r\n    [data]\r\n  );\r\n\r\n  const yMax = useMemo(\r\n    () => d3.max(data, ({ items }) => d3.max(items, ({polarityAvg}) => polarityAvg)),\r\n    [data]\r\n  );\r\n\r\n  const yScale = useMemo(() => {\r\n    const indention = (yMax - yMin) * 0.5;\r\n    return d3\r\n      .scaleLinear()\r\n      .domain([yMin - indention, yMax + indention])\r\n      .range([height, 0]);\r\n  }, [height, yMin, yMax]);\r\n\r\n  const yScaleForAxis = useMemo(\r\n    () => d3.scaleBand().domain([yMin, yMax]).range([height, 0]),\r\n    [height, yMin, yMax]\r\n  );\r\n\r\n  const yTickFormat = (d) => {\r\n\r\n    return d\r\n    // `${parseFloat(d) > 0 ? \"+\" : \"\"}${d3.format(\".2%\")(d / 100)}`;\r\n  }\r\n  const xTickFormat = (d) => {\r\n    if (d3.timeFormat(\"%b\")(d) === \"Jan\") {\r\n      return d3.timeFormat(\"%Y\")(d);\r\n    }\r\n    return d3.timeFormat(\"%b\")(d);\r\n  };\r\n  return {\r\n    yTickFormat,\r\n    xScale,\r\n    yScale,\r\n    yScaleForAxis,\r\n    xTickFormat\r\n  };\r\n};\r\n\r\nexport default useController;\r\n","import React from 'react';\r\nimport ResizeObserver from 'resize-observer-polyfill';\r\n\r\n/**\r\n * Use ResizeObserver to listen for the changes to the dimensions of an element\r\n * @params ref - React ref\r\n * @returns {object} - { width, height, top, left }\r\n */\r\nconst useResize = (ref) => {\r\n  const [dimensions, setDimensions] = React.useState(null);\r\n  React.useEffect(() => {\r\n    const element = ref.current;\r\n    const resizeObserver = new ResizeObserver((entries) => {\r\n      entries.forEach((entry) => {\r\n        setDimensions(entry.contentRect);\r\n      });\r\n    });\r\n    resizeObserver.observe(element);\r\n    return () => {\r\n      resizeObserver.unobserve(element);\r\n    };\r\n  }, [ref]);\r\n  return dimensions || {\r\n    width: 0,\r\n    height: 0,\r\n    top: 0,\r\n    left: 0,\r\n  };\r\n};\r\n\r\nexport default useResize;\r\n","import React from \"react\";\r\nimport useResize from \"./useResize\";\r\n\r\nconst useDimensions = ({ maxHeight, margin = {}, scaleCoef = 0.5 }) => {\r\n  const ref = React.useRef(null);\r\n  const { width } = useResize(ref);\r\n\r\n  const height =\r\n    !maxHeight || width * scaleCoef < maxHeight ? width * scaleCoef : maxHeight;\r\n  const innerWidth = width - (margin.left || 0) - (margin.right || 0);\r\n  const innerHeight = height - (margin.top || 0) - (margin.bottom || 0);\r\n\r\n  return [\r\n    ref,\r\n    {\r\n      svgWidth: width,\r\n      svgHeight: height,\r\n      width: innerWidth,\r\n      height: innerHeight\r\n    }\r\n  ];\r\n};\r\n\r\nexport default useDimensions;\r\n","/** MultilineChart.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { MultiLineDataPropTypes } from \"../utils/propTypes\";\r\nimport { Line, Axis, GridLine, Overlay, Tooltip, Area } from \"../components\";\r\nimport useController from \"./MultilineChart.controller\";\r\nimport useDimensions from \"../utils/useDimensions\";\r\n\r\nconst MultilineChart = ({ data = [], margin = {} }) => {\r\n  const overlayRef = React.useRef(null);\r\n  const [containerRef, { svgWidth, svgHeight, width, height }] = useDimensions({\r\n    maxHeight: 400,\r\n    margin\r\n  });\r\n  const controller = useController({ data, width, height });\r\n  const {\r\n    yTickFormat,\r\n    xTickFormat,\r\n    xScale,\r\n    yScale,\r\n    yScaleForAxis\r\n  } = controller;\r\n\r\n  return (\r\n    <div ref={containerRef}>\r\n      <svg width={svgWidth} height={svgHeight}>\r\n        <g transform={`translate(${margin.left},${margin.top})`}>\r\n          <GridLine\r\n            type=\"vertical\"\r\n            scale={xScale}\r\n            ticks={5}\r\n            size={height}\r\n            transform={`translate(0, ${height})`}\r\n          />\r\n          <GridLine\r\n            type=\"horizontal\"\r\n            scale={yScaleForAxis}\r\n            ticks={2}\r\n            size={width}\r\n          />\r\n          <GridLine\r\n            type=\"horizontal\"\r\n            className=\"baseGridLine\"\r\n            scale={yScale}\r\n            ticks={1}\r\n            size={width}\r\n            disableAnimation\r\n          />\r\n          {data.map(({ name, items = [], color }) => (\r\n            <Line\r\n              key={name}\r\n              data={items}\r\n              xScale={xScale}\r\n              yScale={yScale}\r\n              color={color}\r\n            />\r\n          ))}\r\n          {/* <Area data={data[0].items} xScale={xScale} yScale={yScale} /> */}\r\n          <Axis\r\n            type=\"left\"\r\n            scale={yScaleForAxis}\r\n            transform=\"translate(0, -10)\"\r\n            ticks={5}\r\n            tickFormat={yTickFormat}\r\n          />\r\n          <Overlay ref={overlayRef} width={width} height={height}>\r\n            <Axis\r\n              type=\"bottom\"\r\n              className=\"axisX\"\r\n              anchorEl={overlayRef.current}\r\n              scale={xScale}\r\n              transform={`translate(10, ${height - height / 6})`}\r\n              ticks={5}\r\n              tickFormat={xTickFormat}\r\n            />\r\n            <Tooltip\r\n              className=\"tooltip\"\r\n              anchorEl={overlayRef.current}\r\n              width={width}\r\n              height={height}\r\n              margin={margin}\r\n              xScale={xScale}\r\n              yScale={yScale}\r\n              data={data}\r\n            />\r\n          </Overlay>\r\n        </g>\r\n      </svg>\r\n    </div>\r\n  );\r\n};\r\n\r\nMultilineChart.propTypes = {\r\n  data: MultiLineDataPropTypes,\r\n  margin: PropTypes.shape({\r\n    top: PropTypes.number,\r\n    bottom: PropTypes.number,\r\n    left: PropTypes.number,\r\n    right: PropTypes.number\r\n  })\r\n};\r\n\r\nMultilineChart.defaultProps = {\r\n  data: [],\r\n  margin: {\r\n    top: 30,\r\n    right: 15,\r\n    bottom: 15,\r\n    left: 15\r\n  }\r\n};\r\n\r\nexport default MultilineChart;\r\n","import React from \"react\";\r\n\r\nconst Legend = ({ data, selectedItems, onChange }) => (\r\n  <div className=\"legendContainer\">\r\n    {data.map((d) => (\r\n      <div className=\"checkbox\" style={{ color: d.color }} key={d.name}>\r\n        <label>\r\n          {d.name !== \"Total\" && (\r\n            <input\r\n              type=\"checkbox\"\r\n              value={d.name}\r\n              checked={selectedItems.includes(d.name)}\r\n              onChange={() => onChange(d.name)}\r\n            />\r\n          )}\r\n          {d.name}\r\n        </label>\r\n      </div>\r\n    ))}\r\n  </div>\r\n);\r\n\r\nexport default Legend;\r\n","/** App.js */\r\nimport React, {useState, useEffect} from \"react\";\r\nimport MultilineChart from \"./views/MultilineChart\";\r\nimport Legend from \"./components/Legend\";\r\nimport vcit from \"./data/VCIT.json\";\r\nimport portfolio from \"./data/portfolio.json\";\r\nimport schc from \"./data/SCHC.json\";\r\nimport \"./styles.css\";\r\nimport fiannafail from \"./data/fiannaFail.json\"\r\nimport finegael from \"./data/finegael.json\"\r\nimport ind from \"./data/ind.json\"\r\nimport sinnfein from \"./data/sinnfein.json\"\r\nimport labour from \"./data/labour.json\"\r\nimport { chamberStats } from '../../../Backend/metaData';\r\nimport axios from \"axios\";\r\nimport { Typography } from \"@material-ui/core\";\r\n\r\n\r\n\r\n\r\n\r\nexport default function MultilineAppV3PartyPolarity ({data}) {\r\n\r\n  const [selectedItems, setSelectedItems] = useState([\"Aontú\", \"Independents\", \"Green Party\", \"Labour\", \"Fianna Fáil\", \"Fine Gael\", \"Social Democrats\", \"People Before Profit\", \"Independents 4 Change\", \"Sinn Féin\"]);\r\n  const [TDData, setTDData] = useState(null)\r\n  \r\n  \r\n  \r\n  useEffect(() => {\r\n\r\n    setTDData(data.filter(function(d) {\r\n          \r\n      if(d.followerData[0] != undefined) {\r\n      return d\r\n    }\r\n  }\r\n  ))\r\n\r\n}, []);\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst onChangeSelection = (name) => {\r\n    const newSelectedItems = selectedItems.includes(name)\r\n      ? selectedItems.filter((item) => item !== name)\r\n      : [...selectedItems, name];\r\n    setSelectedItems(newSelectedItems);\r\n  };\r\n  \r\nif (!TDData) return null;\r\n\r\nconsole.log(TDData)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// const totalData = {\r\n//   name: \"Total\",\r\n//   color: \"#ffffff\",\r\n//   items: partyStats('sf').followerData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n// };\r\n  const weeks = TDData[0].retweetData.length\r\n\r\nfunction justParty(party) {\r\n\r\n\r\n  var just = TDData.filter(td => td.party == party)\r\n\r\n  \r\n\r\n  return just\r\n\r\n}\r\n\r\nfunction partyStats(party) {\r\n\r\n  //chamber\r\n  var currentParty = justParty(party) \r\n\r\n  function followers() {\r\n\r\n      var arr = [];\r\n      var followArr = [];\r\n      // var dateArr = currentParty[0].followerData.map(d => d.date);\r\n      var dateArr = currentParty[0].followerData.map(function(d) {\r\n\r\n                      var apart = d.date.split('/')\r\n                      var day = apart[0]\r\n                      var month = apart[1]\r\n                      var year = apart[2]\r\n\r\n                      var together = []\r\n                      together.push(month, day, year)\r\n                      var allDone = together.toString().replace(\",\",\"/\").replace(\",\",\"/\")\r\n                      return allDone\r\n                    })\r\n      var changeArr = [];\r\n\r\n\r\n\r\n      console.log(currentParty[0].retweetData.map(function(d) {\r\n\r\n        var apart = d.date.split('/')\r\n        var day = apart[0]\r\n        var month = apart[1]\r\n        var year = apart[2]\r\n\r\n        var together = []\r\n        together.push(month, day, year)\r\n        var allDone = together.toString().replace(\",\",\"/\").replace(\",\",\"/\")\r\n        return allDone\r\n\r\n      }))\r\n\r\n      // function weekDate () {\r\n\r\n//           for(let i = 0; i < weeks; i++) {\r\n\r\n//           var date = new Date();\r\n//           date.setDate(date.getDate() + (7 * i));\r\n\r\n//               function formatDate(date) {\r\n\r\n//                   var d = new Date(date),\r\n//                       month = '' + (d.getMonth() + 1),\r\n//                       day = '' + d.getDate(),\r\n//                       year = d.getFullYear();\r\n              \r\n//                   if (month.length < 2) \r\n//                       month = '0' + month;\r\n//                   if (day.length < 2) \r\n//                       day = '0' + day;\r\n              \r\n//                   return [year, month, day].join('-');\r\n//               }\r\n\r\n//           dateArr.push(formatDate(date));\r\n//       }\r\n\r\n\r\n//   return dateArr\r\n// }\r\n\r\n//   weekDate();\r\n\r\n\r\n      function follows () {\r\n          \r\n          for( let i = 0; i < weeks; i++) {\r\n\r\n\r\n              var partyFollowers = currentParty.map(td => td.followerData[i].followers)\r\n\r\n              var partyFollowersTotal = partyFollowers.reduce((a, b) => a + b, 0)\r\n\r\n              followArr.push(partyFollowersTotal)\r\n      \r\n          }\r\n      }\r\n\r\n  follows();\r\n\r\n      function change() {\r\n\r\n          for( let i = 0; i < followArr.length; i++) {\r\n\r\n              var lastWeek  = followArr[i - 1]\r\n              var thisWeek = followArr[i]\r\n              var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n              \r\n              //filter NaN at start\r\n\r\n              if(diff !== diff) {changeArr.push(0)} else {\r\n              changeArr.push(diff)\r\n              }\r\n          }\r\n      }\r\n\r\n      change();\r\n\r\n      function toObj() {\r\n\r\n      for(let i = 0; i < weeks; i++) {\r\n\r\n          var followObj = new Object;\r\n          var date = dateArr[i];\r\n          var followers = followArr[i];\r\n          var change = changeArr[i];\r\n\r\n          followObj.date = date;\r\n          followObj.followers = followers;\r\n          followObj.change = change;\r\n          \r\n          arr.push(followObj)\r\n\r\n          \r\n      }\r\n  return arr\r\n      \r\n      }\r\n\r\n      toObj();\r\n\r\n\r\n      return arr\r\n  } \r\n\r\n  function retweets() {\r\n\r\n      var arr = [];\r\n      var retweetArr = [];\r\n      var dateArr = currentParty[0].retweetData.map(function(d) {\r\n\r\n        var apart = d.date.split('/')\r\n        var day = apart[0]\r\n        var month = apart[1]\r\n        var year = apart[2]\r\n\r\n        var together = []\r\n        together.push(month, day, year)\r\n        var allDone = together.toString().replace(\",\",\"/\").replace(\",\",\"/\")\r\n        return allDone\r\n\r\n      })\r\n      var changeArr = [];\r\n\r\n\r\n\r\n      \r\n//       function weekDate () {\r\n\r\n//           for(let i = 0; i < weeks; i++) {\r\n\r\n//           var date = new Date();\r\n//           date.setDate(date.getDate() + (7 * i));\r\n\r\n//               function formatDate(date) {\r\n\r\n//                   var d = new Date(date),\r\n//                       month = '' + (d.getMonth() + 1),\r\n//                       day = '' + d.getDate(),\r\n//                       year = d.getFullYear();\r\n              \r\n//                   if (month.length < 2) \r\n//                       month = '0' + month;\r\n//                   if (day.length < 2) \r\n//                       day = '0' + day;\r\n              \r\n//                   return [year, month, day].join('-');\r\n//               }\r\n\r\n//           dateArr.push(formatDate(date));\r\n//       }\r\n\r\n\r\n//   return dateArr\r\n// }\r\n\r\n//   weekDate();\r\n\r\n\r\n      function retweets () {\r\n          \r\n          for( let i = 0; i < weeks; i++) {\r\n\r\n\r\n              var partyRetweets = currentParty.map(td => td.retweetData[i].retweets)\r\n\r\n              var partyRetweetsTotal = partyRetweets.reduce((a, b) => a + b, 0)\r\n\r\n              retweetArr.push(partyRetweetsTotal)\r\n      \r\n          }\r\n      }\r\n\r\n  retweets();\r\n\r\n      function change() {\r\n\r\n          for( let i = 0; i < retweetArr.length; i++) {\r\n\r\n              var lastWeek  = retweetArr[i - 1]\r\n              var thisWeek = retweetArr[i]\r\n              var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n              \r\n              //filter NaN at start\r\n\r\n              if(diff !== diff) {changeArr.push(0)} else {\r\n              changeArr.push(diff)\r\n              }\r\n          }\r\n      }\r\n\r\n      change();\r\n\r\n      function toObj() {\r\n\r\n      for(let i = 0; i < weeks; i++) {\r\n\r\n          var retweetObj = new Object;\r\n          var date = dateArr[i];\r\n          var retweets = retweetArr[i];\r\n          var change = changeArr[i];\r\n\r\n          retweetObj.date = date;\r\n          retweetObj.retweets = retweets;\r\n          retweetObj.change = change;\r\n          \r\n          arr.push(retweetObj)\r\n\r\n          \r\n      }\r\n  return arr\r\n      \r\n      }\r\n\r\n      toObj();\r\n\r\n\r\n      return arr\r\n  }\r\n\r\n  function polarity() {\r\n\r\n    var arr = [];\r\n    var polarityArr = [];\r\n    var dateArr = currentParty[0].sentimentData.map(function(d) {\r\n\r\n      var apart = d.date.split('/')\r\n      var day = apart[0]\r\n      var month = apart[1]\r\n      var year = apart[2]\r\n\r\n      var together = []\r\n      together.push(month, day, year)\r\n      var allDone = together.toString().replace(\",\",\"/\").replace(\",\",\"/\")\r\n      return allDone\r\n\r\n    })\r\n    var changeArr = [];\r\n\r\n\r\n\r\n    \r\n//       function weekDate () {\r\n\r\n//           for(let i = 0; i < weeks; i++) {\r\n\r\n//           var date = new Date();\r\n//           date.setDate(date.getDate() + (7 * i));\r\n\r\n//               function formatDate(date) {\r\n\r\n//                   var d = new Date(date),\r\n//                       month = '' + (d.getMonth() + 1),\r\n//                       day = '' + d.getDate(),\r\n//                       year = d.getFullYear();\r\n            \r\n//                   if (month.length < 2) \r\n//                       month = '0' + month;\r\n//                   if (day.length < 2) \r\n//                       day = '0' + day;\r\n            \r\n//                   return [year, month, day].join('-');\r\n//               }\r\n\r\n//           dateArr.push(formatDate(date));\r\n//       }\r\n\r\n\r\n//   return dateArr\r\n// }\r\n\r\n//   weekDate();\r\n\r\n\r\n    function polarityAvg () {\r\n        \r\n        for( let i = 0; i < weeks; i++) {\r\n\r\n          var tdAmount = currentParty.length\r\n\r\n            var partyPolarity = currentParty.map(td => td.sentimentData[i].polarity)\r\n\r\n            var partyPolarityAvg = partyPolarity.reduce((a, b) => a + b, 0) / tdAmount\r\n\r\n            // var test = Math.round((partyPolarityAvg * 100)) / 100\r\n          var test = +partyPolarityAvg.toFixed(3)\r\n            polarityArr.push(test)\r\n    \r\n        }\r\n    }\r\n\r\npolarityAvg();\r\n\r\n    function change() {\r\n\r\n        for( let i = 0; i < polarityArr.length; i++) {\r\n\r\n            var lastWeek  = polarityArr[i - 1]\r\n            var thisWeek = polarityArr[i]\r\n            var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n            \r\n            //filter NaN at start\r\n\r\n            if(diff !== diff) {changeArr.push(0)} else {\r\n            changeArr.push(diff)\r\n            }\r\n        }\r\n    }\r\n\r\n    change();\r\n\r\n    function toObj() {\r\n\r\n    for(let i = 0; i < weeks; i++) {\r\n\r\n        var polarityObj = new Object;\r\n        var date = dateArr[i];\r\n        var polAvg = polarityArr[i];\r\n        var change = changeArr[i];\r\n\r\n        polarityObj.date = date;\r\n        polarityObj.polarityAvg = polAvg\r\n        polarityObj.change = change;\r\n        \r\n        arr.push(polarityObj)\r\n\r\n        \r\n    }\r\nreturn arr\r\n    \r\n    }\r\n\r\n    toObj();\r\n\r\n\r\n    return arr\r\n}\r\n\r\n\r\n  function PartyObj() {\r\n\r\n      this.id = justParty(party)[0].party\r\n      this.name = justParty(party)[0].partyName\r\n      this.partyColor = justParty(party)[0].partyColor\r\n      this.followerData = followers()\r\n      this.retweetData = retweets()\r\n      this.polarityData = polarity()\r\n\r\n  }\r\n\r\n  return new PartyObj()\r\n}\r\n\r\nconsole.log(partyStats('Aontú'))\r\n\r\nconsole.log(partyStats(\"Aontú\", TDData))\r\n\r\nconst fineGaelData = {\r\n  name: \"Fine Gael\",\r\n  color: \"#6699FF\",\r\n  items: partyStats('Fine Gael', TDData).polarityData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconsole.log(fineGaelData)\r\nconst sinnFeinData = {\r\n  name: \"Sinn Féin\",\r\n  color: \"#326760\",\r\n  items: partyStats(\"Sinn Féin\", TDData).polarityData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconst fiannaFailData = {\r\n  name: \"Fianna Fáil\",\r\n  color: \"#66BB66\",\r\n  items: partyStats('Fianna Fáil', TDData).polarityData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconst labourData = {\r\n  name: \"Labour\",\r\n  color: \"#CC0000\",\r\n  items: partyStats('Labour Party', TDData).polarityData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconst peopleBeforeProfitData = {\r\n  name: \"People Before Profit\",\r\n  color: \"#660000\",\r\n  items: partyStats('Solidarity - People Before Profit', TDData).polarityData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconst independentData = {\r\n  name: \"Independents\",\r\n  color: \"white\",\r\n  items: partyStats('Independent').polarityData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconst greenPartyData = {\r\n  name: \"Green Party\",\r\n  color: \"#99CC33\",\r\n  items: partyStats('Green Party').polarityData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconst independents4ChangeData = {\r\n  name: \"Independents 4 Change\",\r\n  color: \"grey\",\r\n  items: partyStats('Independents 4 Change').polarityData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconst aontuData = {\r\n  name: \"Aontú\",\r\n  color: \"#44532A\",\r\n  items: partyStats('Aontú').polarityData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconst socDemData = {\r\n  name: \"Social Democrats\",\r\n  color: \"#752F8B\",\r\n  items: partyStats('Social Democrats').polarityData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\n\r\n  console.log(partyStats(\"Aontú\"))\r\n  console.log(aontuData)\r\n  \r\n\r\n  \r\n  const chartData = [\r\n    ...[fineGaelData, fiannaFailData, sinnFeinData, labourData, independentData,  independents4ChangeData, peopleBeforeProfitData, greenPartyData, aontuData ,socDemData].filter((d) => selectedItems.includes(d.name))\r\n  ];\r\n\r\n  \r\n\r\n\r\nconst legendData = [ fineGaelData, sinnFeinData, fiannaFailData, independentData, labourData, independents4ChangeData, peopleBeforeProfitData, greenPartyData, aontuData, socDemData ];\r\n\r\n\r\n  return (\r\n  <div className=\"featuredItem\" style={{textAlign: \"center\"}}>\r\n    <Typography variant=\"h5\">Party Polarity</Typography>\r\n      <Legend\r\n        data={legendData}\r\n        selectedItems={selectedItems}\r\n        onChange={onChangeSelection}\r\n      />\r\n      <MultilineChart data={chartData} />\r\n      </div>\r\n\r\n  );\r\n}\r\n\r\n","import { arrayOf, shape, string, date as dateProp, number } from \"prop-types\";\r\n\r\nexport const MultiLineDataItemsPropTypes = arrayOf(\r\n  shape({\r\n    date: dateProp,\r\n    change: number,\r\n    subjectivityAvg: number\r\n  })\r\n);\r\n\r\nexport const MultiLineDataPropTypes = arrayOf(\r\n  shape({\r\n    name: string,\r\n    items: MultiLineDataItemsPropTypes,\r\n    color: string\r\n  })\r\n);\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Line = ({\r\n  xScale,\r\n  yScale,\r\n  color,\r\n  data,\r\n  isSmooth,\r\n  animation,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  // Define different types of animation that we can use\r\n  const animateLeft = React.useCallback(() => {\r\n    // NOTE: for some reason getTotalLength() doesn't work in tests\r\n    // in this codesandbox so we added default value just for tests\r\n    const totalLength = ref.current.getTotalLength\r\n      ? ref.current.getTotalLength()\r\n      : 500;\r\n    d3.select(ref.current)\r\n      .attr(\"opacity\", 1)\r\n      .attr(\"stroke-dasharray\", `${totalLength},${totalLength}`)\r\n      .attr(\"stroke-dashoffset\", totalLength)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeLinear)\r\n      .attr(\"stroke-dashoffset\", 0);\r\n  }, []);\r\n  const animateFadeIn = React.useCallback(() => {\r\n    d3.select(ref.current)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeLinear)\r\n      .attr(\"opacity\", 1);\r\n  }, []);\r\n  const noneAnimation = React.useCallback(() => {\r\n    d3.select(ref.current).attr(\"opacity\", 1);\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    switch (animation) {\r\n      case \"left\":\r\n        animateLeft();\r\n        break;\r\n      case \"fadeIn\":\r\n        animateFadeIn();\r\n        break;\r\n      case \"none\":\r\n      default:\r\n        noneAnimation();\r\n        break;\r\n    }\r\n  }, [animateLeft, animateFadeIn, noneAnimation, animation]);\r\n\r\n  // Recalculate line length if scale has changed\r\n  React.useEffect(() => {\r\n    if (animation === \"left\") {\r\n      const totalLength = ref.current.getTotalLength\r\n        ? ref.current.getTotalLength()\r\n        : 500;\r\n      d3.select(ref.current).attr(\r\n        \"stroke-dasharray\",\r\n        `${totalLength},${totalLength}`\r\n      );\r\n    }\r\n  }, [xScale, yScale, animation]);\r\n\r\n  const line = d3\r\n    .line()\r\n    .x((d) => xScale(d.date))\r\n    .y((d) => yScale(d.subjectivityAvg));\r\n\r\n  const d = line(data);\r\n\r\n  return (\r\n    <path\r\n      ref={ref}\r\n      d={d?.match(/NaN|undefined/) ? \"\" : d}\r\n      stroke={color}\r\n      strokeWidth={3}\r\n      fill=\"none\"\r\n      opacity={0}\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n\r\nLine.propTypes = {\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  data: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      date: PropTypes.date,\r\n      change: PropTypes.number\r\n    })\r\n  ),\r\n  color: PropTypes.string,\r\n  isSmooth: PropTypes.bool,\r\n  animation: PropTypes.oneOf([\"left\", \"fadeIn\", \"none\"])\r\n};\r\n\r\nLine.defaultProps = {\r\n  data: [],\r\n  color: \"white\",\r\n  isSmooth: false,\r\n  animation: \"left\"\r\n};\r\n\r\nexport default Line;\r\n","/** Area.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Area = ({ xScale, yScale, color, data, disableAnimation, ...props }) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    if (disableAnimation) {\r\n      d3.select(ref.current).attr(\"opacity\", 1);\r\n      return;\r\n    }\r\n    d3.select(ref.current)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeBackIn)\r\n      .attr(\"opacity\", 1);\r\n  }, [disableAnimation]);\r\n\r\n  const d = React.useMemo(() => {\r\n    const area = d3\r\n      .area()\r\n      .x(({ date }) => xScale(date))\r\n      .y1(({ subjectivityAvg }) => yScale(subjectivityAvg))\r\n      .y0(() => yScale(yScale.domain()[0]));\r\n    return area(data);\r\n  }, [xScale, yScale, data]);\r\n\r\n  return (\r\n    <>\r\n      <path\r\n        ref={ref}\r\n        d={d}\r\n        fill={`url(#gradient-${color})`}\r\n        opacity={0}\r\n        {...props}\r\n      />\r\n      <defs>\r\n        <linearGradient\r\n          id={`gradient-${color}`}\r\n          x1=\"0%\"\r\n          x2=\"0%\"\r\n          y1=\"0%\"\r\n          y2=\"100%\"\r\n        >\r\n          <stop offset=\"0%\" stopColor={color} stopOpacity={0.2} />\r\n          <stop offset=\"100%\" stopColor={color} stopOpacity={0} />\r\n        </linearGradient>\r\n      </defs>\r\n    </>\r\n  );\r\n};\r\n\r\nArea.propTypes = {\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  data: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      date: PropTypes.date,\r\n      retweets: PropTypes.number\r\n    })\r\n  ),\r\n  color: PropTypes.string,\r\n  disableAnimation: PropTypes.bool\r\n};\r\n\r\nArea.defaultProps = {\r\n  data: [],\r\n  color: \"white\",\r\n  disableAnimation: false\r\n};\r\n\r\nexport default Area;\r\n","/** AxisX.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Axis = ({\r\n  type,\r\n  scale,\r\n  ticks,\r\n  transform,\r\n  tickFormat,\r\n  disableAnimation,\r\n  anchorEl,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    const axisGenerator = type === \"left\" ? d3.axisRight : d3.axisBottom;\r\n    const axis = axisGenerator(scale).ticks(ticks).tickFormat(tickFormat);\r\n    const axisGroup = d3.select(ref.current);\r\n    if (disableAnimation) {\r\n      axisGroup.call(axis);\r\n    } else {\r\n      axisGroup.transition().duration(750).ease(d3.easeLinear).call(axis);\r\n    }\r\n    axisGroup.select(\".domain\").remove();\r\n    axisGroup.selectAll(\"line\").remove();\r\n    axisGroup\r\n      .selectAll(\"text\")\r\n      .attr(\"opacity\", 0.5)\r\n      .attr(\"color\", \"white\")\r\n      .attr(\"font-size\", \"0.75rem\");\r\n  }, [scale, ticks, tickFormat, disableAnimation]);\r\n\r\n  React.useEffect(() => {\r\n    d3.select(anchorEl)\r\n      .on(\"mouseout.axisX\", () => {\r\n        d3.select(ref.current)\r\n          .selectAll(\"text\")\r\n          .attr(\"opacity\", 0.5)\r\n          .style(\"font-weight\", \"normal\");\r\n      })\r\n      .on(\"mousemove.axisX\", () => {\r\n        const [x] = d3.mouse(anchorEl);\r\n        const xDate = scale.invert(x);\r\n        const textElements = d3.select(ref.current).selectAll(\"text\");\r\n        const data = textElements.data();\r\n        const index = d3.bisector((d) => d).left(data, xDate);\r\n        textElements\r\n          .attr(\"opacity\", (d, i) => (i === index - 1 ? 1 : 0.5))\r\n          .style(\"font-weight\", (d, i) =>\r\n            i === index - 1 ? \"bold\" : \"normal\"\r\n          );\r\n      });\r\n  }, [anchorEl, scale]);\r\n\r\n  return <g ref={ref} transform={transform} {...props} />;\r\n};\r\n\r\nAxis.propTypes = {\r\n  type: PropTypes.oneOf([\"left\", \"bottom\"]).isRequired,\r\n  scale: PropTypes.func.isRequired,\r\n  ticks: PropTypes.oneOfType([PropTypes.number, PropTypes.func]),\r\n  tickFormat: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\r\n  transform: PropTypes.string,\r\n  disableAnimation: PropTypes.bool,\r\n  anchorEl: PropTypes.instanceOf(Element)\r\n};\r\n\r\nAxis.defaultProps = {\r\n  ticks: 0,\r\n  tickFormat: null,\r\n  transform: \"\",\r\n  disableAnimation: false,\r\n  anchorEl: null\r\n};\r\n\r\nexport default Axis;\r\n","/** GridLine.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst GridLine = ({\r\n  type,\r\n  scale,\r\n  ticks,\r\n  size,\r\n  transform,\r\n  disableAnimation,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    const axisGenerator = type === \"vertical\" ? d3.axisBottom : d3.axisLeft;\r\n    const axis = axisGenerator(scale).ticks(ticks).tickSize(-size);\r\n\r\n    const gridGroup = d3.select(ref.current);\r\n    if (disableAnimation) {\r\n      gridGroup.call(axis);\r\n    } else {\r\n      gridGroup.transition().duration(750).ease(d3.easeLinear).call(axis);\r\n    }\r\n    gridGroup.select(\".domain\").remove();\r\n    gridGroup.selectAll(\"text\").remove();\r\n    gridGroup.selectAll(\"line\").attr(\"stroke\", \"rgba(255, 255, 255, 0.1)\");\r\n  }, [scale, ticks, size, disableAnimation]);\r\n\r\n  return <g ref={ref} transform={transform} {...props} />;\r\n};\r\n\r\nGridLine.propTypes = {\r\n  scale: PropTypes.func.isRequired,\r\n  type: PropTypes.oneOf([\"vertical\", \"horizontal\"]).isRequired,\r\n  ticks: PropTypes.oneOfType([PropTypes.number, PropTypes.func]),\r\n  transform: PropTypes.string,\r\n  size: PropTypes.number,\r\n  disableAnimation: PropTypes.bool\r\n};\r\n\r\nGridLine.defaultProps = {\r\n  ticks: 0,\r\n  transform: \"\",\r\n  size: 0,\r\n  disableAnimation: false\r\n};\r\n\r\nexport default GridLine;\r\n","/** Overlay.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\n/**\r\n * Use Overlay as a wrapper for components that need mouse events to be handled.\r\n * For example: Tooltip, AxisX.\r\n */\r\nconst Overlay = React.forwardRef(({ width, height, children }, ref) => (\r\n  <g>\r\n    {children}\r\n    <rect ref={ref} width={width} height={height} opacity={0} />\r\n  </g>\r\n));\r\n\r\nOverlay.propTypes = {\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired,\r\n  children: PropTypes.node.isRequired\r\n};\r\n\r\nexport default Overlay;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\nimport { MultiLineDataPropTypes } from \"../utils/propTypes\";\r\nimport {formatPercent } from \"../utils/commonUtils\"\r\n// import { formatPercent, formatPriceUSD } from \"../utils/commonUtils\";\r\n\r\nconst Tooltip = ({\r\n  xScale,\r\n  yScale,\r\n  width,\r\n  height,\r\n  data,\r\n  margin,\r\n  anchorEl,\r\n  children,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  const drawLine = React.useCallback(\r\n    (x) => {\r\n      d3.select(ref.current)\r\n        .select(\".tooltipLine\")\r\n        .attr(\"x1\", x)\r\n        .attr(\"x2\", x)\r\n        .attr(\"y1\", -margin.top)\r\n        .attr(\"y2\", height);\r\n    },\r\n    [ref, height, margin]\r\n  );\r\n\r\n  const drawContent = React.useCallback(\r\n    (x) => {\r\n      const tooltipContent = d3.select(ref.current).select(\".tooltipContent\");\r\n      tooltipContent.attr(\"transform\", (cur, i, nodes) => {\r\n        const nodeWidth = nodes[i]?.getBoundingClientRect()?.width || 0;\r\n        const translateX = nodeWidth + x > width ? x - nodeWidth - 12 : x + 8;\r\n        return `translate(${translateX}, ${-margin.top})`;\r\n      });\r\n      tooltipContent\r\n        .select(\".contentTitle\")\r\n        .text(d3.timeFormat(\"%b %d, %Y\")(xScale.invert(x)));\r\n    },\r\n    [xScale, margin, width]\r\n  );\r\n\r\n  const drawBackground = React.useCallback(() => {\r\n    // reset background size to defaults\r\n    const contentBackground = d3\r\n      .select(ref.current)\r\n      .select(\".contentBackground\");\r\n    contentBackground.attr(\"width\", 125).attr(\"height\", 40);\r\n\r\n    // calculate new background size\r\n    const tooltipContentElement = d3\r\n      .select(ref.current)\r\n      .select(\".tooltipContent\")\r\n      .node();\r\n    if (!tooltipContentElement) return;\r\n\r\n    const contentSize = tooltipContentElement.getBoundingClientRect();\r\n    contentBackground\r\n      .attr(\"width\", contentSize.width + 8)\r\n      .attr(\"height\", contentSize.height + 4);\r\n  }, []);\r\n\r\n  const onChangePosition = React.useCallback((d, i, isVisible) => {\r\n    d3.selectAll(\".performanceItemChangeSubjectivity\")\r\n      .filter((td, tIndex) => tIndex === i)\r\n      .text(isVisible ? formatPercent(d.change) : \"\");\r\n\r\n    d3.selectAll(\".performanceItemSubjectivity\")\r\n      .filter((td, tIndex) => tIndex === i)\r\n      .text(\r\n        d.subjectivityAvg.toLocaleString() && !isVisible ? \"No data\" : d.subjectivityAvg.toLocaleString()\r\n      );\r\n       // .text(\r\n      //   d.marketvalue && !isVisible ? \"No data\" : formatPriceUSD(d.marketvalue)\r\n      // );\r\n\r\n    const maxNameWidth = d3.max(\r\n      d3.selectAll(\".performanceItemName\").nodes(),\r\n      (node) => node.getBoundingClientRect().width\r\n    );\r\n    d3.selectAll(\".performanceItemChangeSubjectivity\").attr(\r\n      \"transform\",\r\n      (datum, index, nodes) =>\r\n        `translate(${\r\n          nodes[index].previousSibling.getBoundingClientRect().width + 14\r\n        },4)`\r\n    );\r\n\r\n    d3.selectAll(\".performanceItemSubjectivity\").attr(\r\n      \"transform\",\r\n      `translate(${maxNameWidth + 60},4)`\r\n    );\r\n  }, []);\r\n\r\n  const followPoints = React.useCallback(() => {\r\n    const [x] = d3.mouse(anchorEl);\r\n    const xDate = xScale.invert(x);\r\n    const bisectDate = d3.bisector((d) => d.date).left;\r\n    let baseXPos = 0;\r\n\r\n    // draw circles on line\r\n    d3.select(ref.current)\r\n      .selectAll(\".tooltipLinePoint\")\r\n      .attr(\"transform\", (cur, i) => {\r\n        const index = bisectDate(data[i].items, xDate, 1);\r\n        const d0 = data[i].items[index - 1];\r\n        const d1 = data[i].items[index];\r\n        const d = xDate - d0?.date > d1?.date - xDate ? d1 : d0;\r\n        if (d.date === undefined && d.subjectivityAvg === undefined) {\r\n          // move point out of container\r\n          return \"translate(-100,-100)\";\r\n        }\r\n        const xPos = xScale(d.date);\r\n        if (i === 0) {\r\n          baseXPos = xPos;\r\n        }\r\n\r\n        let isVisible = true;\r\n        if (xPos !== baseXPos) {\r\n          isVisible = false;\r\n        }\r\n        const yPos = yScale(d.subjectivityAvg);\r\n\r\n        onChangePosition(d, i, isVisible);\r\n\r\n        return isVisible\r\n          ? `translate(${xPos}, ${yPos})`\r\n          : \"translate(-100,-100)\";\r\n      });\r\n\r\n    drawLine(baseXPos);\r\n    drawContent(baseXPos);\r\n    drawBackground();\r\n  }, [\r\n    anchorEl,\r\n    drawLine,\r\n    drawContent,\r\n    drawBackground,\r\n    xScale,\r\n    yScale,\r\n    data,\r\n    onChangePosition\r\n  ]);\r\n\r\n  React.useEffect(() => {\r\n    d3.select(anchorEl)\r\n      .on(\"mouseout.tooltip\", () => {\r\n        d3.select(ref.current).attr(\"opacity\", 0);\r\n      })\r\n      .on(\"mouseover.tooltip\", () => {\r\n        d3.select(ref.current).attr(\"opacity\", 1);\r\n      })\r\n      .on(\"mousemove.tooltip\", () => {\r\n        d3.select(ref.current)\r\n          .selectAll(\".tooltipLinePoint\")\r\n          .attr(\"opacity\", 1);\r\n        followPoints();\r\n      });\r\n  }, [anchorEl, followPoints]);\r\n\r\n  if (!data.length) return null;\r\n\r\n  return (\r\n    <g ref={ref} opacity={0} {...props}>\r\n      <line className=\"tooltipLine\" />\r\n      <g className=\"tooltipContent\">\r\n        <rect className=\"contentBackground\" rx={4} ry={4} opacity={0.2} />\r\n        <text className=\"contentTitle\" transform=\"translate(4,14)\" />\r\n        <g className=\"content\" transform=\"translate(4,32)\">\r\n          {data.map(({ name, color }, i) => (\r\n            <g key={name} transform={`translate(6,${22 * i})`}>\r\n              <circle r={6} fill={color} />\r\n              <text className=\"performanceItemName\" transform=\"translate(10,4)\">\r\n                {name}\r\n              </text>\r\n              <text\r\n                className=\"performanceItemChangeSubjectivity\"\r\n                opacity={0.5}\r\n                fontSize={10}\r\n              />\r\n              <text className=\"performanceItemSubjectivity\" />\r\n            </g>\r\n          ))}\r\n        </g>\r\n      </g>\r\n      {data.map(({ name }) => (\r\n        <circle className=\"tooltipLinePoint\" r={6} key={name} opacity={0} />\r\n      ))}\r\n    </g>\r\n  );\r\n};\r\n\r\nTooltip.propTypes = {\r\n  width: PropTypes.number,\r\n  height: PropTypes.number,\r\n  margin: PropTypes.shape({\r\n    top: PropTypes.number,\r\n    bottom: PropTypes.number,\r\n    left: PropTypes.number,\r\n    right: PropTypes.number\r\n  }),\r\n  data: MultiLineDataPropTypes,\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  anchorEl: PropTypes.instanceOf(Element)\r\n};\r\n\r\nTooltip.defaultProps = {\r\n  width: 0,\r\n  height: 0,\r\n  margin: {\r\n    top: 0,\r\n    bottom: 0,\r\n    left: 0,\r\n    right: 0\r\n  },\r\n  data: [],\r\n  anchorEl: null\r\n};\r\n\r\nexport default Tooltip;\r\n","/* eslint-disable no-bitwise */\r\nimport * as d3 from \"d3\";\r\nimport { DateTime, Interval } from \"luxon\";\r\n\r\n// export const formatPriceUSD = (price) =>\r\n//   new Intl.NumberFormat(\"en-US\", { style: \"currency\", currency: \"USD\" }).format(\r\n//     price\r\n//   );\r\n\r\nexport const formatPercent = (percent = 0) => {\r\n  let result = \"0.00%\";\r\n  const isNumber = typeof percent === \"number\";\r\n  const isString = typeof percent === \"string\";\r\n  const isNotNaN = !Number.isNaN(parseFloat(percent));\r\n\r\n  if ((isNumber || isString) && isNotNaN) {\r\n    result = `${parseFloat(percent) > 0 ? \"+\" : \"\"}${d3.format(\".2%\")(\r\n      percent / 100\r\n    )}`;\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const getPeriod = (date) => {\r\n  if (!date) return 6;\r\n  const now = DateTime.utc();\r\n  const before = DateTime.fromJSDate(date);\r\n  const i = Interval.fromDateTimes(before, now);\r\n  return i.length(\"months\");\r\n};\r\n\r\nexport const getXTicks = (months) => {\r\n  if (months <= 2) return d3.timeDay.every(5).filter((d) => d.getDate() !== 31);\r\n  if (months <= 6) return d3.timeMonth.every(1);\r\n  if (months <= 13) return d3.timeMonth.every(2);\r\n  return d3.timeYear.every(1);\r\n};\r\n\r\nexport const getXTickFormat = (months) => {\r\n  if (months <= 2) return d3.timeFormat(\"%d %b\");\r\n  if (months <= 6) return d3.timeFormat(\"%b\");\r\n  if (months <= 13) return d3.timeFormat(\"%b %Y\");\r\n  return d3.timeFormat(\"%Y\");\r\n};\r\n","/** MultilineChart.controller.js */\r\nimport { useMemo } from \"react\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst useController = ({ data, width, height }) => {\r\n  const xMin = useMemo(\r\n    () => d3.min(data, ({ items }) => d3.min(items, ({ date }) => date)),\r\n    [data]\r\n  );\r\n\r\n  const xMax = useMemo(\r\n    () => d3.max(data, ({ items }) => d3.max(items, ({ date }) => date)),\r\n    [data]\r\n  );\r\n\r\n  const xScale = useMemo(\r\n    () => d3.scaleTime().domain([xMin, xMax]).range([0, width]),\r\n    [xMin, xMax, width]\r\n  );\r\n\r\n  const yMin = useMemo(\r\n    () => d3.min(data, ({ items }) => d3.min(items, ({ subjectivityAvg }) => subjectivityAvg)),\r\n    [data]\r\n  );\r\n\r\n  const yMax = useMemo(\r\n    () => d3.max(data, ({ items }) => d3.max(items, ({subjectivityAvg}) => subjectivityAvg)),\r\n    [data]\r\n  );\r\n\r\n  const yScale = useMemo(() => {\r\n    const indention = (yMax - yMin) * 0.5;\r\n    return d3\r\n      .scaleLinear()\r\n      .domain([yMin - indention, yMax + indention])\r\n      .range([height, 0]);\r\n  }, [height, yMin, yMax]);\r\n\r\n  const yScaleForAxis = useMemo(\r\n    () => d3.scaleBand().domain([yMin, yMax]).range([height, 0]),\r\n    [height, yMin, yMax]\r\n  );\r\n\r\n  const yTickFormat = (d) => {\r\n\r\n    return d\r\n    // `${parseFloat(d) > 0 ? \"+\" : \"\"}${d3.format(\".2%\")(d / 100)}`;\r\n  }\r\n  const xTickFormat = (d) => {\r\n    if (d3.timeFormat(\"%b\")(d) === \"Jan\") {\r\n      return d3.timeFormat(\"%Y\")(d);\r\n    }\r\n    return d3.timeFormat(\"%b\")(d);\r\n  };\r\n  return {\r\n    yTickFormat,\r\n    xScale,\r\n    yScale,\r\n    yScaleForAxis,\r\n    xTickFormat\r\n  };\r\n};\r\n\r\nexport default useController;\r\n","import React from 'react';\r\nimport ResizeObserver from 'resize-observer-polyfill';\r\n\r\n/**\r\n * Use ResizeObserver to listen for the changes to the dimensions of an element\r\n * @params ref - React ref\r\n * @returns {object} - { width, height, top, left }\r\n */\r\nconst useResize = (ref) => {\r\n  const [dimensions, setDimensions] = React.useState(null);\r\n  React.useEffect(() => {\r\n    const element = ref.current;\r\n    const resizeObserver = new ResizeObserver((entries) => {\r\n      entries.forEach((entry) => {\r\n        setDimensions(entry.contentRect);\r\n      });\r\n    });\r\n    resizeObserver.observe(element);\r\n    return () => {\r\n      resizeObserver.unobserve(element);\r\n    };\r\n  }, [ref]);\r\n  return dimensions || {\r\n    width: 0,\r\n    height: 0,\r\n    top: 0,\r\n    left: 0,\r\n  };\r\n};\r\n\r\nexport default useResize;\r\n","import React from \"react\";\r\nimport useResize from \"./useResize\";\r\n\r\nconst useDimensions = ({ maxHeight, margin = {}, scaleCoef = 0.5 }) => {\r\n  const ref = React.useRef(null);\r\n  const { width } = useResize(ref);\r\n\r\n  const height =\r\n    !maxHeight || width * scaleCoef < maxHeight ? width * scaleCoef : maxHeight;\r\n  const innerWidth = width - (margin.left || 0) - (margin.right || 0);\r\n  const innerHeight = height - (margin.top || 0) - (margin.bottom || 0);\r\n\r\n  return [\r\n    ref,\r\n    {\r\n      svgWidth: width,\r\n      svgHeight: height,\r\n      width: innerWidth,\r\n      height: innerHeight\r\n    }\r\n  ];\r\n};\r\n\r\nexport default useDimensions;\r\n","/** MultilineChart.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { MultiLineDataPropTypes } from \"../utils/propTypes\";\r\nimport { Line, Axis, GridLine, Overlay, Tooltip, Area } from \"../components\";\r\nimport useController from \"./MultilineChart.controller\";\r\nimport useDimensions from \"../utils/useDimensions\";\r\n\r\nconst MultilineChart = ({ data = [], margin = {} }) => {\r\n  const overlayRef = React.useRef(null);\r\n  const [containerRef, { svgWidth, svgHeight, width, height }] = useDimensions({\r\n    maxHeight: 400,\r\n    margin\r\n  });\r\n  const controller = useController({ data, width, height });\r\n  const {\r\n    yTickFormat,\r\n    xTickFormat,\r\n    xScale,\r\n    yScale,\r\n    yScaleForAxis\r\n  } = controller;\r\n\r\n  return (\r\n    <div ref={containerRef}>\r\n      <svg width={svgWidth} height={svgHeight}>\r\n        <g transform={`translate(${margin.left},${margin.top})`}>\r\n          <GridLine\r\n            type=\"vertical\"\r\n            scale={xScale}\r\n            ticks={5}\r\n            size={height}\r\n            transform={`translate(0, ${height})`}\r\n          />\r\n          <GridLine\r\n            type=\"horizontal\"\r\n            scale={yScaleForAxis}\r\n            ticks={2}\r\n            size={width}\r\n          />\r\n          <GridLine\r\n            type=\"horizontal\"\r\n            className=\"baseGridLine\"\r\n            scale={yScale}\r\n            ticks={1}\r\n            size={width}\r\n            disableAnimation\r\n          />\r\n          {data.map(({ name, items = [], color }) => (\r\n            <Line\r\n              key={name}\r\n              data={items}\r\n              xScale={xScale}\r\n              yScale={yScale}\r\n              color={color}\r\n            />\r\n          ))}\r\n          {/* <Area data={data[0].items} xScale={xScale} yScale={yScale} /> */}\r\n          <Axis\r\n            type=\"left\"\r\n            scale={yScaleForAxis}\r\n            transform=\"translate(0, -10)\"\r\n            ticks={5}\r\n            tickFormat={yTickFormat}\r\n          />\r\n          <Overlay ref={overlayRef} width={width} height={height}>\r\n            <Axis\r\n              type=\"bottom\"\r\n              className=\"axisX\"\r\n              anchorEl={overlayRef.current}\r\n              scale={xScale}\r\n              transform={`translate(10, ${height - height / 6})`}\r\n              ticks={5}\r\n              tickFormat={xTickFormat}\r\n            />\r\n            <Tooltip\r\n              className=\"tooltip\"\r\n              anchorEl={overlayRef.current}\r\n              width={width}\r\n              height={height}\r\n              margin={margin}\r\n              xScale={xScale}\r\n              yScale={yScale}\r\n              data={data}\r\n            />\r\n          </Overlay>\r\n        </g>\r\n      </svg>\r\n    </div>\r\n  );\r\n};\r\n\r\nMultilineChart.propTypes = {\r\n  data: MultiLineDataPropTypes,\r\n  margin: PropTypes.shape({\r\n    top: PropTypes.number,\r\n    bottom: PropTypes.number,\r\n    left: PropTypes.number,\r\n    right: PropTypes.number\r\n  })\r\n};\r\n\r\nMultilineChart.defaultProps = {\r\n  data: [],\r\n  margin: {\r\n    top: 30,\r\n    right: 15,\r\n    bottom: 15,\r\n    left: 15\r\n  }\r\n};\r\n\r\nexport default MultilineChart;\r\n","import React from \"react\";\r\n\r\nconst Legend = ({ data, selectedItems, onChange }) => (\r\n  <div className=\"legendContainer\">\r\n    {data.map((d) => (\r\n      <div className=\"checkbox\" style={{ color: d.color }} key={d.name}>\r\n        <label>\r\n          {d.name !== \"Total\" && (\r\n            <input\r\n              type=\"checkbox\"\r\n              value={d.name}\r\n              checked={selectedItems.includes(d.name)}\r\n              onChange={() => onChange(d.name)}\r\n            />\r\n          )}\r\n          {d.name}\r\n        </label>\r\n      </div>\r\n    ))}\r\n  </div>\r\n);\r\n\r\nexport default Legend;\r\n","/** App.js */\r\nimport React, {useState, useEffect} from \"react\";\r\nimport MultilineChart from \"./views/MultilineChart\";\r\nimport Legend from \"./components/Legend\";\r\nimport vcit from \"./data/VCIT.json\";\r\nimport portfolio from \"./data/portfolio.json\";\r\nimport schc from \"./data/SCHC.json\";\r\nimport \"./styles.css\";\r\nimport fiannafail from \"./data/fiannaFail.json\"\r\nimport finegael from \"./data/finegael.json\"\r\nimport ind from \"./data/ind.json\"\r\nimport sinnfein from \"./data/sinnfein.json\"\r\nimport labour from \"./data/labour.json\"\r\nimport { chamberStats } from '../../../Backend/metaData';\r\nimport axios from \"axios\";\r\nimport { Typography } from \"@material-ui/core\";\r\n\r\n\r\n\r\n\r\n\r\nexport default function MultilineAppV3PartySubjectivity ({data}) {\r\n\r\n  const [selectedItems, setSelectedItems] = useState([\"Aontú\", \"Independents\", \"Green Party\", \"Labour\", \"Fianna Fáil\", \"Fine Gael\", \"Social Democrats\", \"People Before Profit\", \"Independents 4 Change\", \"Sinn Féin\"]);\r\n  const [TDData, setTDData] = useState(null)\r\n  \r\n  \r\n  \r\n  useEffect(() => {\r\n\r\n    setTDData(data.filter(function(d) {\r\n          \r\n      if(d.followerData[0] != undefined) {\r\n      return d\r\n    }\r\n  }\r\n  ))\r\n\r\n}, []);\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst onChangeSelection = (name) => {\r\n    const newSelectedItems = selectedItems.includes(name)\r\n      ? selectedItems.filter((item) => item !== name)\r\n      : [...selectedItems, name];\r\n    setSelectedItems(newSelectedItems);\r\n  };\r\n\r\n\r\n  console.log(selectedItems)\r\n  \r\nif (!TDData) return null;\r\n\r\n\r\n\r\nconsole.log(TDData.filter(d => d.party == \"Fine Gael\"))\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// const totalData = {\r\n//   name: \"Total\",\r\n//   color: \"#ffffff\",\r\n//   items: partyStats('sf').followerData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n// };\r\n  const weeks = TDData[0].retweetData.length\r\n\r\nfunction justParty(party) {\r\n\r\n\r\n  var just = TDData.filter(td => td.party == party)\r\n\r\n  \r\n\r\n  return just\r\n\r\n}\r\n\r\nfunction partyStats(party) {\r\n\r\n  //chamber\r\n  var currentParty = justParty(party) \r\n\r\n  function followers() {\r\n\r\n      var arr = [];\r\n      var followArr = [];\r\n      // var dateArr = currentParty[0].followerData.map(d => d.date);\r\n      var dateArr = currentParty[0].followerData.map(function(d) {\r\n\r\n                      var apart = d.date.split('/')\r\n                      var day = apart[0]\r\n                      var month = apart[1]\r\n                      var year = apart[2]\r\n\r\n                      var together = []\r\n                      together.push(month, day, year)\r\n                      var allDone = together.toString().replace(\",\",\"/\").replace(\",\",\"/\")\r\n                      return allDone\r\n                    })\r\n      var changeArr = [];\r\n\r\n\r\n\r\n      console.log(currentParty[0].retweetData.map(function(d) {\r\n\r\n        var apart = d.date.split('/')\r\n        var day = apart[0]\r\n        var month = apart[1]\r\n        var year = apart[2]\r\n\r\n        var together = []\r\n        together.push(month, day, year)\r\n        var allDone = together.toString().replace(\",\",\"/\").replace(\",\",\"/\")\r\n        return allDone\r\n\r\n      }))\r\n\r\n      // function weekDate () {\r\n\r\n//           for(let i = 0; i < weeks; i++) {\r\n\r\n//           var date = new Date();\r\n//           date.setDate(date.getDate() + (7 * i));\r\n\r\n//               function formatDate(date) {\r\n\r\n//                   var d = new Date(date),\r\n//                       month = '' + (d.getMonth() + 1),\r\n//                       day = '' + d.getDate(),\r\n//                       year = d.getFullYear();\r\n              \r\n//                   if (month.length < 2) \r\n//                       month = '0' + month;\r\n//                   if (day.length < 2) \r\n//                       day = '0' + day;\r\n              \r\n//                   return [year, month, day].join('-');\r\n//               }\r\n\r\n//           dateArr.push(formatDate(date));\r\n//       }\r\n\r\n\r\n//   return dateArr\r\n// }\r\n\r\n//   weekDate();\r\n\r\n\r\n      function follows () {\r\n          \r\n          for( let i = 0; i < weeks; i++) {\r\n\r\n\r\n              var partyFollowers = currentParty.map(td => td.followerData[i].followers)\r\n\r\n              var partyFollowersTotal = partyFollowers.reduce((a, b) => a + b, 0)\r\n\r\n              followArr.push(partyFollowersTotal)\r\n      \r\n          }\r\n      }\r\n\r\n  follows();\r\n\r\n      function change() {\r\n\r\n          for( let i = 0; i < followArr.length; i++) {\r\n\r\n              var lastWeek  = followArr[i - 1]\r\n              var thisWeek = followArr[i]\r\n              var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n              \r\n              //filter NaN at start\r\n\r\n              if(diff !== diff) {changeArr.push(0)} else {\r\n              changeArr.push(diff)\r\n              }\r\n          }\r\n      }\r\n\r\n      change();\r\n\r\n      function toObj() {\r\n\r\n      for(let i = 0; i < weeks; i++) {\r\n\r\n          var followObj = new Object;\r\n          var date = dateArr[i];\r\n          var followers = followArr[i];\r\n          var change = changeArr[i];\r\n\r\n          followObj.date = date;\r\n          followObj.followers = followers;\r\n          followObj.change = change;\r\n          \r\n          arr.push(followObj)\r\n\r\n          \r\n      }\r\n  return arr\r\n      \r\n      }\r\n\r\n      toObj();\r\n\r\n\r\n      return arr\r\n  } \r\n\r\n  function retweets() {\r\n\r\n      var arr = [];\r\n      var retweetArr = [];\r\n      var dateArr = currentParty[0].retweetData.map(function(d) {\r\n\r\n        var apart = d.date.split('/')\r\n        var day = apart[0]\r\n        var month = apart[1]\r\n        var year = apart[2]\r\n\r\n        var together = []\r\n        together.push(month, day, year)\r\n        var allDone = together.toString().replace(\",\",\"/\").replace(\",\",\"/\")\r\n        return allDone\r\n\r\n      })\r\n      var changeArr = [];\r\n\r\n\r\n\r\n      \r\n//       function weekDate () {\r\n\r\n//           for(let i = 0; i < weeks; i++) {\r\n\r\n//           var date = new Date();\r\n//           date.setDate(date.getDate() + (7 * i));\r\n\r\n//               function formatDate(date) {\r\n\r\n//                   var d = new Date(date),\r\n//                       month = '' + (d.getMonth() + 1),\r\n//                       day = '' + d.getDate(),\r\n//                       year = d.getFullYear();\r\n              \r\n//                   if (month.length < 2) \r\n//                       month = '0' + month;\r\n//                   if (day.length < 2) \r\n//                       day = '0' + day;\r\n              \r\n//                   return [year, month, day].join('-');\r\n//               }\r\n\r\n//           dateArr.push(formatDate(date));\r\n//       }\r\n\r\n\r\n//   return dateArr\r\n// }\r\n\r\n//   weekDate();\r\n\r\n\r\n      function retweets () {\r\n          \r\n          for( let i = 0; i < weeks; i++) {\r\n\r\n\r\n              var partyRetweets = currentParty.map(td => td.retweetData[i].retweets)\r\n\r\n              var partyRetweetsTotal = partyRetweets.reduce((a, b) => a + b, 0)\r\n\r\n              retweetArr.push(partyRetweetsTotal)\r\n      \r\n          }\r\n      }\r\n\r\n  retweets();\r\n\r\n      function change() {\r\n\r\n          for( let i = 0; i < retweetArr.length; i++) {\r\n\r\n              var lastWeek  = retweetArr[i - 1]\r\n              var thisWeek = retweetArr[i]\r\n              var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n              \r\n              //filter NaN at start\r\n\r\n              if(diff !== diff) {changeArr.push(0)} else {\r\n              changeArr.push(diff)\r\n              }\r\n          }\r\n      }\r\n\r\n      change();\r\n\r\n      function toObj() {\r\n\r\n      for(let i = 0; i < weeks; i++) {\r\n\r\n          var retweetObj = new Object;\r\n          var date = dateArr[i];\r\n          var retweets = retweetArr[i];\r\n          var change = changeArr[i];\r\n\r\n          retweetObj.date = date;\r\n          retweetObj.retweets = retweets;\r\n          retweetObj.change = change;\r\n          \r\n          arr.push(retweetObj)\r\n\r\n          \r\n      }\r\n  return arr\r\n      \r\n      }\r\n\r\n      toObj();\r\n\r\n\r\n      return arr\r\n  }\r\n\r\n  function polarity() {\r\n\r\n    var arr = [];\r\n    var polarityArr = [];\r\n    var dateArr = currentParty[0].sentimentData.map(function(d) {\r\n\r\n      var apart = d.date.split('/')\r\n      var day = apart[0]\r\n      var month = apart[1]\r\n      var year = apart[2]\r\n\r\n      var together = []\r\n      together.push(month, day, year)\r\n      var allDone = together.toString().replace(\",\",\"/\").replace(\",\",\"/\")\r\n      return allDone\r\n\r\n    })\r\n    var changeArr = [];\r\n\r\n\r\n\r\n    \r\n//       function weekDate () {\r\n\r\n//           for(let i = 0; i < weeks; i++) {\r\n\r\n//           var date = new Date();\r\n//           date.setDate(date.getDate() + (7 * i));\r\n\r\n//               function formatDate(date) {\r\n\r\n//                   var d = new Date(date),\r\n//                       month = '' + (d.getMonth() + 1),\r\n//                       day = '' + d.getDate(),\r\n//                       year = d.getFullYear();\r\n            \r\n//                   if (month.length < 2) \r\n//                       month = '0' + month;\r\n//                   if (day.length < 2) \r\n//                       day = '0' + day;\r\n            \r\n//                   return [year, month, day].join('-');\r\n//               }\r\n\r\n//           dateArr.push(formatDate(date));\r\n//       }\r\n\r\n\r\n//   return dateArr\r\n// }\r\n\r\n//   weekDate();\r\n\r\n\r\n    function polarityAvg () {\r\n        \r\n        for( let i = 0; i < weeks; i++) {\r\n\r\n          var tdAmount = currentParty.length\r\n\r\n            var partyPolarity = currentParty.map(td => td.sentimentData[i].polarity)\r\n\r\n            var partyPolarityAvg = partyPolarity.reduce((a, b) => a + b, 0) / tdAmount\r\n\r\n            // var test = Math.round((partyPolarityAvg * 100)) / 100\r\n          var test = +partyPolarityAvg.toFixed(3)\r\n            polarityArr.push(test)\r\n    \r\n        }\r\n    }\r\n\r\npolarityAvg();\r\n\r\n    function change() {\r\n\r\n        for( let i = 0; i < polarityArr.length; i++) {\r\n\r\n            var lastWeek  = polarityArr[i - 1]\r\n            var thisWeek = polarityArr[i]\r\n            var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n            \r\n            //filter NaN at start\r\n\r\n            if(diff !== diff) {changeArr.push(0)} else {\r\n            changeArr.push(diff)\r\n            }\r\n        }\r\n    }\r\n\r\n    change();\r\n\r\n    function toObj() {\r\n\r\n    for(let i = 0; i < weeks; i++) {\r\n\r\n        var polarityObj = new Object;\r\n        var date = dateArr[i];\r\n        var polAvg = polarityArr[i];\r\n        var change = changeArr[i];\r\n\r\n        polarityObj.date = date;\r\n        polarityObj.polarityAvg = polAvg\r\n        polarityObj.change = change;\r\n        \r\n        arr.push(polarityObj)\r\n\r\n        \r\n    }\r\nreturn arr\r\n    \r\n    }\r\n\r\n    toObj();\r\n\r\n\r\n    return arr\r\n}\r\n\r\nfunction subjectivity() {\r\n\r\n  var arr = [];\r\n  var subjectivityArr = [];\r\n  var dateArr = currentParty[0].sentimentData.map(function(d) {\r\n\r\n    var apart = d.date.split('/')\r\n    var day = apart[0]\r\n    var month = apart[1]\r\n    var year = apart[2]\r\n\r\n    var together = []\r\n    together.push(month, day, year)\r\n    var allDone = together.toString().replace(\",\",\"/\").replace(\",\",\"/\")\r\n    return allDone\r\n\r\n  })\r\n  var changeArr = [];\r\n\r\n\r\n\r\n  \r\n//       function weekDate () {\r\n\r\n//           for(let i = 0; i < weeks; i++) {\r\n\r\n//           var date = new Date();\r\n//           date.setDate(date.getDate() + (7 * i));\r\n\r\n//               function formatDate(date) {\r\n\r\n//                   var d = new Date(date),\r\n//                       month = '' + (d.getMonth() + 1),\r\n//                       day = '' + d.getDate(),\r\n//                       year = d.getFullYear();\r\n          \r\n//                   if (month.length < 2) \r\n//                       month = '0' + month;\r\n//                   if (day.length < 2) \r\n//                       day = '0' + day;\r\n          \r\n//                   return [year, month, day].join('-');\r\n//               }\r\n\r\n//           dateArr.push(formatDate(date));\r\n//       }\r\n\r\n\r\n//   return dateArr\r\n// }\r\n\r\n//   weekDate();\r\n\r\n\r\n  function subjectivityAvg () {\r\n      \r\n      for( let i = 0; i < weeks; i++) {\r\n\r\n        var tdAmount = currentParty.length\r\n\r\n          var partySubjectivity = currentParty.map(td => td.sentimentData[i].subjectivity)\r\n\r\n          var partySubjectivityAvg = partySubjectivity.reduce((a, b) => a + b, 0) / tdAmount\r\n\r\n          // var test = Math.round((partyPolarityAvg * 100)) / 100\r\n        var test = +partySubjectivityAvg.toFixed(3)\r\n        subjectivityArr.push(test)\r\n  \r\n      }\r\n  }\r\n\r\nsubjectivityAvg();\r\n\r\n  function change() {\r\n\r\n      for( let i = 0; i < subjectivityArr.length; i++) {\r\n\r\n          var lastWeek  = subjectivityArr[i - 1]\r\n          var thisWeek = subjectivityArr[i]\r\n          var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n          \r\n          //filter NaN at start\r\n\r\n          if(diff !== diff) {changeArr.push(0)} else {\r\n          changeArr.push(diff)\r\n          }\r\n      }\r\n  }\r\n\r\n  change();\r\n\r\n  function toObj() {\r\n\r\n  for(let i = 0; i < weeks; i++) {\r\n\r\n      var subjectivityObj = new Object;\r\n      var date = dateArr[i];\r\n      var subAvg = subjectivityArr[i];\r\n      var change = changeArr[i];\r\n\r\n      subjectivityObj.date = date;\r\n      subjectivityObj.subjectivityAvg = subAvg\r\n      subjectivityObj.change = change;\r\n      \r\n      arr.push(subjectivityObj)\r\n\r\n      \r\n  }\r\nreturn arr\r\n  \r\n  }\r\n\r\n  toObj();\r\n\r\n\r\n  return arr\r\n}\r\n\r\n\r\n  function PartyObj() {\r\n\r\n      this.id = justParty(party)[0].party\r\n      this.name = justParty(party)[0].partyName\r\n      this.partyColor = justParty(party)[0].partyColor\r\n      this.followerData = followers()\r\n      this.retweetData = retweets()\r\n      this.polarityData = polarity()\r\n      this.subjectivityData = subjectivity()\r\n\r\n  }\r\n\r\n  return new PartyObj()\r\n}\r\n\r\nconsole.log(partyStats(\"Aontú\", TDData))\r\n\r\nconst fineGaelData = {\r\n  name: \"Fine Gael\",\r\n  color: \"#6699FF\",\r\n  items: partyStats('Fine Gael', TDData).subjectivityData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconsole.log(fineGaelData)\r\nconst sinnFeinData = {\r\n  name: \"Sinn Féin\",\r\n  color: \"#326760\",\r\n  items: partyStats(\"Sinn Féin\", TDData).subjectivityData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconst fiannaFailData = {\r\n  name: \"Fianna Fáil\",\r\n  color: \"#66BB66\",\r\n  items: partyStats('Fianna Fáil', TDData).subjectivityData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconst labourData = {\r\n  name: \"Labour\",\r\n  color: \"#CC0000\",\r\n  items: partyStats('Labour Party', TDData).subjectivityData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconst peopleBeforeProfitData = {\r\n  name: \"People Before Profit\",\r\n  color: \"#660000\",\r\n  items: partyStats('Solidarity - People Before Profit', TDData).subjectivityData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconst independentData = {\r\n  name: \"Independents\",\r\n  color: \"white\",\r\n  items: partyStats('Independent').subjectivityData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconst greenPartyData = {\r\n  name: \"Green Party\",\r\n  color: \"#99CC33\",\r\n  items: partyStats('Green Party').subjectivityData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconst independents4ChangeData = {\r\n  name: \"Independents 4 Change\",\r\n  color: \"grey\",\r\n  items: partyStats('Independents 4 Change').subjectivityData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconst aontuData = {\r\n  name: \"Aontú\",\r\n  color: \"#44532A\",\r\n  items: partyStats('Aontú').subjectivityData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\nconst socDemData = {\r\n  name: \"Social Democrats\",\r\n  color: \"#752F8B\",\r\n  items: partyStats('Social Democrats').subjectivityData.map((d) => ({ ...d, date: new Date(d.date) }))\r\n};\r\n\r\n\r\n  console.log(partyStats(\"Aontú\"))\r\n  console.log(aontuData)\r\n  \r\n\r\n  \r\n  const chartData = [\r\n    ...[fineGaelData, fiannaFailData, sinnFeinData, labourData, independentData,  independents4ChangeData, peopleBeforeProfitData, greenPartyData, aontuData ,socDemData].filter((d) => selectedItems.includes(d.name))\r\n  ];\r\n\r\n  \r\n\r\n\r\nconst legendData = [ fineGaelData, sinnFeinData, fiannaFailData, independentData, labourData, independents4ChangeData, peopleBeforeProfitData, greenPartyData, aontuData, socDemData ];\r\n\r\n\r\n  return (\r\n  <div className=\"featuredItem\" style={{textAlign: \"center\"}}>\r\n    <Typography variant=\"h5\">Party Subjectivity</Typography>\r\n      <Legend\r\n        data={legendData}\r\n        selectedItems={selectedItems}\r\n        onChange={onChangeSelection}\r\n      />\r\n      <MultilineChart data={chartData} />\r\n      </div>\r\n\r\n  );\r\n}\r\n\r\n","import { Typography } from '@material-ui/core'\r\nimport React from 'react'\r\nimport { Grid } from '@material-ui/core'\r\n\r\nconst ComingSoon = () => {\r\n\r\n\r\n\r\n\r\n    return (\r\n        <Grid container xs={12} sm={12} justifyContent=\"space-around\">\r\n            <Grid item >\r\n        <div className=\"featuredItem\" style={{display: \"inline-block\", justifyContent: \"center\", fontSize: \"20px\", padding: \"50px\", paddingLeft: \"100px\", paddingRight: \"100px\"}}>\r\n            <div>\r\n            <Typography variant=\"h5\" style={{marginBottom: \"20px\"}}>Coming Soon</Typography>\r\n            <ul style={{fontSize: \"18px\"}}>\r\n            <li style={{listStyleType: \"circle\", marginBottom: \"5px\"}}>\r\n            <p>Network Graph</p>\r\n            </li>\r\n            <li style={{listStyleType: \"circle\", marginBottom: \"5px\"}}>\r\n            <p>Parliamentary Data</p>\r\n            </li>\r\n            <li style={{listStyleType: \"circle\", marginBottom: \"5px\"}}>\r\n            <p>Electoral Data</p>\r\n            </li>\r\n            <li style={{listStyleType: \"circle\", marginBottom: \"5px\"}}>\r\n            <p>Standalone TD pages</p>\r\n            </li>\r\n            <li style={{listStyleType: \"circle\", marginBottom: \"5px\"}}>\r\n            <p>API</p>\r\n            </li>\r\n            </ul>\r\n            </div>\r\n        </div>\r\n        </Grid>\r\n        </Grid>\r\n    )\r\n}\r\n\r\nexport default ComingSoon\r\n","import React, {useState, useEffect} from 'react'\r\nimport { Typography } from '@material-ui/core'\r\nimport './welcome.css'\r\n\r\n\r\nconst Welcome = ({data}) => {\r\n\r\n\r\n    const [TDFollowerDataObjArr, setTDFollowerDataObjArr] = useState(null)\r\n    const [currentWeekIndex, setCurrentWeekIndex] = useState(null)\r\n\r\n    useEffect(() => {\r\n\r\n        setTDFollowerDataObjArr(data)\r\n\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n\r\n        if(!TDFollowerDataObjArr) return null;\r\n\r\n        setCurrentWeekIndex(TDFollowerDataObjArr.length - 1)\r\n\r\n    }, [TDFollowerDataObjArr])\r\n\r\n\r\n    if(!currentWeekIndex || !TDFollowerDataObjArr) return null;\r\n\r\n\r\n    return (\r\n        <>\r\n        <div className=\"featuredItem\">\r\n            <Typography variant=\"h5\">What is this site for?</Typography>\r\n            <p style={{marginBottom: \"20px\"}}>Visualising Irish Politics through:</p>\r\n            <ul>\r\n                <li style={{listStyleType: \"circle\", marginLeft: \"20px\", marginBottom: \"5px\"}}>TD Twitter Data</li>\r\n                <li style={{listStyleType: \"circle\", marginLeft: \"20px\", marginBottom: \"5px\"}}>Oireachtas Data (soon)</li> \r\n                <li style={{listStyleType: \"circle\", marginLeft: \"20px\", marginBottom: \"5px\"}}>News/Polling Data (soon)</li>\r\n                <li style={{listStyleType: \"circle\",marginLeft: \"20px\",marginBottom: \"5px\"}}>Electoral Data (soon)</li> \r\n                </ul>\r\n                <p style={{marginTop: \"15px\"}}>Or more succintly, through: <b style={{fontWeight: 600, color: \"lightblue\"}}>what TD's say</b>, <b style={{fontWeight: 600, color: \"darkgreen\"}}>what TD's do</b>, <b style={{fontWeight: 600, color: \"lightpink\"}}>what we think</b>, and <b style={{fontWeight: 600}}>how we vote.</b></p>\r\n                \r\n            \r\n</div><div className=\"featuredItem\">\r\n<Typography variant=\"h5\">Twitter Data</Typography>\r\n            <p style={{marginBottom: \"5px\", marginTop: \"15px\"}}>Every week, each TD has the following metrics recorded:</p>\r\n                <ul>\r\n                <li style={{listStyleType: \"circle\", marginLeft: \"20px\", marginBottom: \"5px\"}}>Followers</li>\r\n                </ul>\r\n                <p style={{marginBottom: \"5px\"}} >And for the last seven days:</p>\r\n                <ul>\r\n                <li style={{listStyleType: \"circle\", marginLeft: \"20px\", marginBottom: \"5px\"}}>Retweets</li>\r\n                <li style={{listStyleType: \"circle\", marginLeft: \"20px\", marginBottom: \"5px\"}}>Original Tweets posted</li> \r\n                <li style={{listStyleType: \"circle\",marginLeft: \"20px\",marginBottom: \"5px\"}}>Tweet subjectivity average</li> \r\n                <li style={{listStyleType: \"circle\", marginLeft: \"20px\", marginBottom: \"5px\"}}>Tweet polarity average</li> \r\n                </ul>\r\n                <p style={{marginBottom: \"5px\", marginTop: \"15px\"}}>To learn how polarity and subjectivity is calculated, click <a href=\"https://textblob.readthedocs.io/en/dev/\">here</a>.</p>            \r\n                <p style={{marginTop: \"20px\"}}>Questions to ask:</p>\r\n            <ul>\r\n                <li style={{listStyleType: \"circle\", marginLeft: \"20px\", marginBottom: \"5px\"}}>\"Which party is most followed?\"</li>\r\n                <li style={{listStyleType: \"circle\", marginLeft: \"20px\", marginBottom: \"5px\"}}>\"Is their a correlation between a TD's subjectivity or polarity, and the Party they are in?\"</li>\r\n                <li style={{listStyleType: \"circle\", marginLeft: \"20px\", marginBottom: \"5px\"}}>\"Are subjective or polarising TD's more or less engaging?\"</li>\r\n                </ul>\r\n                <p style={{marginTop: \"15px\"}}>Collections run every Wednesday since <b style={{fontWeight: 600}}>25/08/2021</b>. Last Collection <b style={{fontWeight: 600}}>{TDFollowerDataObjArr[currentWeekIndex].date}</b>.\r\n                </p>\r\n        </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Welcome\r\n","import { Typography } from '@material-ui/core'\r\nimport React, {useState, useEffect, useRef} from 'react'\r\nimport * as d3 from 'd3'\r\nimport { FormControl, InputLabel, Select, ListSubheader, MenuItem, makeStyles } from '@material-ui/core'\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    icon: {\r\n      color: \"white\"\r\n  },\r\n\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n  }\r\n\r\n}));\r\n\r\n\r\n\r\nconst TopicsBarChart = ({data}) => {\r\n\r\n\r\n    const [TDData, setTDData] = useState(null);\r\n    const [totalQuestions, setTotalQuestions] = useState(null);\r\n    const [writtenQuestions, setWrittenQuestions] = useState(null);\r\n    const [oralQuestions, setOralQuestions] = useState(null);\r\n    const [mostAskedTopicsByTD, setMostAskedTopicsByTD] = useState(null);\r\n    const [mostAskedTopicsTotal, setMostAskedTopicsTotal] = useState(null);\r\n    const [dataOption, setDataOption] = useState(0);\r\n    const [colorOption, setColorOption] = useState(0)\r\n    const [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\r\n    const [height, setHeight] = useState(600)\r\n    const [width, setWidth] = useState(900)\r\n    const [colorMode, setColorMode] = useState(\"Light Mode\")\r\n    const [color, setColor] = useState(null)\r\n    const [fillColor, setFillColor] = useState(null)\r\n    const [backgroundColor, setBackgroundColor] = useState(null)\r\n    const [textColor, setTextColor] = useState(null)\r\n\r\n    // const [dataLength, setDataLength] = useState(0)\r\n\r\n\r\n    const partyColors = {\r\n        \"Sinn Féin\": \"#326760\",\r\n        \"Fine Gael\": \"#6699FF\",\r\n        \"Fianna Fáil\": \"#66BB66\",\r\n        \"Labour Party\": \"#CC0000\",\r\n        \"Solidarity - People Before Profit\": \"#8E2420\",\r\n        \"Independent\": \"white\",\r\n        \"Green Party\": \"#99CC33\",\r\n        \"Social Democrats\": \"#752F8B\",\r\n        \"Aontú\": \"#44532A\",\r\n        \"Independents 4 Change\": \"grey\"}\r\n\r\n\r\n        function getWindowDimensions() {\r\n            const { innerWidth: width, innerHeight: height } = window;\r\n            return {\r\n              width,\r\n              height\r\n            };\r\n          }\r\n      \r\n          function useWindowDimensions() {\r\n           \r\n          \r\n            useEffect(() => {\r\n              function handleResize() {\r\n                setWindowDimensions(getWindowDimensions());\r\n              }\r\n          \r\n              window.addEventListener('resize', handleResize);\r\n              return () => window.removeEventListener('resize', handleResize);\r\n            }, []);\r\n          \r\n            return windowDimensions;\r\n          }\r\n      \r\n          console.log(useWindowDimensions())\r\n      \r\n          const onChangeColorMode = (event, child) => {\r\n      \r\n            if(child == true) {\r\n      \r\n            setColorMode(\"Dark Mode\")\r\n            } \r\n            if(child == false) {\r\n              setColorMode(\"Light Mode\")\r\n            }\r\n            \r\n            console.log('color mode:' + event.target.value);\r\n            console.log(child);\r\n      };\r\n\r\n      useEffect(() => {\r\n\r\n\r\n\r\n        if(windowDimensions.width < 500) {\r\n          setHeight(320)\r\n          setWidth(340)\r\n        }\r\n        if(windowDimensions.width < 400 && windowDimensions.width > 360) {\r\n          setHeight(320)\r\n          setWidth(340)\r\n        }\r\n        if(windowDimensions.width < 470 && windowDimensions.width > 400) {\r\n          setHeight(320)\r\n          setWidth(380)\r\n        }\r\n        if(windowDimensions.width < 680 && windowDimensions.width > 470) {\r\n          setHeight(360)\r\n          setWidth(480)\r\n        }\r\n        if(windowDimensions.width < 800 && windowDimensions.width > 600) {\r\n          setHeight(400)\r\n          setWidth(680)\r\n        }\r\n        if(windowDimensions.width < 980 && windowDimensions.width > 800) {\r\n          setHeight(500)\r\n          setWidth(680)\r\n        }\r\n        if(windowDimensions.width < 1080 && windowDimensions.width > 980) {\r\n          setHeight(600)\r\n          setWidth(700)\r\n        }\r\n        if(windowDimensions.width < 1200 && windowDimensions.width > 1080) {\r\n          setHeight(600)\r\n          setWidth(800)\r\n        }\r\n        if(windowDimensions.width > 1200) {\r\n          setHeight(600)\r\n          setWidth(900)\r\n        }\r\n      }, [windowDimensions])\r\n      \r\n      \r\n          useEffect(() => {\r\n      \r\n      \r\n            console.log(colorMode)\r\n            \r\n                  if(colorMode == \"Dark Mode\") {\r\n                    setFillColor({fill: \"white\", color: \"white\"})\r\n                    setColor({color: \"white\"})\r\n                    setBackgroundColor(\"#191C24\")\r\n                    setTextColor(\"white\")\r\n            \r\n                  }\r\n            \r\n                  if(colorMode == \"Light Mode\") {\r\n                    setFillColor({fill: \"black\", color: \"black\"})\r\n                    setColor({color: \"black\"})\r\n                    setBackgroundColor(\"white\")\r\n                    setTextColor(\"black\")\r\n                  }\r\n            \r\n                  \r\n            \r\n                }, [colorMode])\r\n\r\n\r\n    const tooltipData = [\"TD's Who Asked\", \"Total Questions Asked\",]\r\n    const tooltipData1 = [\"Topic\", \"Topic\"]\r\n\r\nconst onChangeDataOption = (event, child) => {\r\n    setDataOption(event.target.value)\r\n    console.log('Data Option:' + event.target.value);\r\n    console.log(child);\r\n  };\r\n\r\n  const onChangeColorOption = (event, child) => {\r\n    setColorOption(event.target.value)\r\n    console.log('Color Option:' + event.target.value);\r\n    console.log(child);\r\n  };\r\n\r\n    useEffect(() => {\r\n\r\n\r\n        setTDData(data)\r\n\r\n    }, [])\r\n\r\n\r\nuseEffect(() => {\r\n\r\n    if(!TDData) return null;\r\n\r\n    const sumValues = obj => Object.values(obj).reduce((a, b) => a + b);\r\n\r\n    var toOral = TDData.map(d => d.oralQuestions[0].oralQuestions.topic)\r\n    var filteredOral = toOral.filter(d => d != undefined)\r\n    var summedOral = filteredOral.map(d => sumValues(d)).reduce((a, b) => a + b);\r\n    var toWritten = TDData.map(d => d.writtenQuestions[0].writtenQuestions.to)\r\n\r\n    //Who didn't ask any questions in period, minus ministers, minus cc and eoghan murphy\r\n    var whoDidnt = TDData.map(function(d){\r\n\r\n    if(!d.writtenQuestions[1].writtenQuestions.to && !d.oralQuestions[1].oralQuestions.to && d.member_offices[0].length === 0) {\r\n            return d.name\r\n        }\r\n    }).filter(d => d != undefined && d != \"Seán Ó Fearghaíl\" && d != \"Eoghan Murphy\") \r\n\r\n    var filteredWrittenTo = toWritten.filter(d => d != undefined) \r\n    var summedWritten = filteredWrittenTo.map(d => sumValues(d)).reduce((a, b) => a + b);\r\n    var uniqueKeysTo = Object.keys(filteredWrittenTo.reduce(function(result, obj) {\r\n        return Object.assign(result, obj);\r\n      }, {}))\r\n\r\nfunction topicWrittenByTD() {\r\n\r\n\r\n    var topicWritten = TDData.map(d => d.writtenQuestions[0].writtenQuestions.topic)\r\n    var filteredWrittenTopic = topicWritten.filter(d => d != undefined) \r\n    var summedWritten = filteredWrittenTopic.map(d => sumValues(d)).reduce((a, b) => a + b);\r\n\r\n    //Topics asked by TDs\r\n    var workingWithAsked = filteredWrittenTopic.map(d => Object.entries(d)).flat()\r\n    var askedByTopicsTDs = workingWithAsked.map(function(d) {\r\n        return d[0]\r\n    })\r\n\r\n    const mapAskedTopicsTD= askedByTopicsTDs.reduce((acc, e) => acc.set(e, (acc.get(e) || 0) + 1), new Map())\r\n\r\n    var toSortAskedTopicsTD = [...mapAskedTopicsTD.entries()]\r\n\r\n    toSortAskedTopicsTD.sort(function(a, b) {\r\n        return  b[1]-a[1]\r\n     })\r\n     if(toSortAskedTopicsTD.length > 25) {\r\n         toSortAskedTopicsTD.length = 25\r\n       }\r\n\r\n       return toSortAskedTopicsTD\r\n\r\n\r\n}\r\n\r\nfunction topicWrittenTotal() {\r\n\r\n    var topicWritten = TDData.map(d => d.writtenQuestions[0].writtenQuestions.topic)\r\n    var filteredWrittenTopic = topicWritten.filter(d => d != undefined) \r\n\r\n    //Topics asked by TDs\r\n    var workingWithAsked = filteredWrittenTopic.map(d => Object.entries(d)).flat()\r\n    var askedByTopicsTDs = workingWithAsked.map(function(d) {\r\n        return d\r\n    })\r\n\r\n    const mapTotal = askedByTopicsTDs.reduce((acc, e) => acc.set(e[0], (acc.get(e[0]) || 0) + e[1]), new Map())\r\n\r\n    var toSortAskedTopicsTD = [...mapTotal.entries()]\r\n\r\n    toSortAskedTopicsTD.sort(function(a, b) {\r\n        return  b[1]-a[1]\r\n     })\r\n     if(toSortAskedTopicsTD.length > 25) {\r\n         toSortAskedTopicsTD.length = 25\r\n       }\r\n\r\n    return toSortAskedTopicsTD\r\n\r\n}\r\n\r\n    //Horribly named. Fix\r\n    \r\n    setTotalQuestions(summedOral + summedWritten)\r\n    setOralQuestions(summedOral)\r\n    setWrittenQuestions(summedWritten)\r\n\r\n    setMostAskedTopicsByTD(topicWrittenByTD())\r\n    setMostAskedTopicsTotal(topicWrittenTotal())\r\n\r\n\r\n}, [TDData])\r\n\r\n\r\nconst margin = {top: 20, right: 20, bottom: 100, left: 70}\r\n\r\nconst heightMargin = height - margin.left - margin.right;\r\nconst widthMargin = width - margin.top - margin.bottom;  \r\n\r\nconst svgRef= useRef()\r\n\r\nconst classes = useStyles();\r\n\r\nuseEffect(() => {\r\n\r\n    if(!mostAskedTopicsByTD || !mostAskedTopicsTotal) return null;\r\n\r\n\r\nfunction coloredByPartyWithMostUniqueTDContributionsToTopic(topic) {\r\n\r\nfunction getUniqueTDTopicContributionOfParty(party) {\r\n\r\n\r\n    // var listToCheck = topicWrittenByTD()\r\n\r\n    var justPartyJustQuestion = TDData.filter(d => d.party == party).filter(d => d.writtenQuestions[0].writtenQuestions.topic != undefined)\r\n\r\n    var testMostByParty = justPartyJustQuestion.map(d => d.writtenQuestions[0].writtenQuestions.topic)\r\n\r\n    var sumTestParty = testMostByParty.map(d => Object.entries(d)).flat()\r\n\r\n    var sumTestPartyFlat = sumTestParty.map(function(d) {\r\n        return d[0]\r\n    })\r\n\r\n    const mapAskedTopicsTD = sumTestPartyFlat.reduce((acc, e) => acc.set(e, (acc.get(e) || 0) + 1), new Map())\r\n\r\n    var toSortAskedTopicsTD = [...mapAskedTopicsTD.entries()]\r\n\r\n    toSortAskedTopicsTD.sort(function(a, b) {\r\n        return  b[1]-a[1]\r\n     })\r\n\r\n    return toSortAskedTopicsTD\r\n\r\n}\r\n\r\nfunction whichPartyHasMostUniqueContributionsToTopicByTD() {\r\n\r\n    const parties = [\"Aontú\", \"Independents\", \"Green Party\", \"Labour\", \"Fianna Fáil\", \"Fine Gael\", \"Social Democrats\", \"People Before Profit\", \"Independents 4 Change\", \"Sinn Féin\"];\r\n\r\n    var holderArr = []\r\n\r\n    for(let i = 0; i < parties.length; i++) {\r\n\r\n    var holder = getUniqueTDTopicContributionOfParty(parties[i])\r\n\r\n    holderArr.push({party: parties[i], holder})\r\n\r\n    }\r\n\r\n    return holderArr\r\n\r\n}\r\n\r\nfunction partyWithMostUniqueTDContributionsToTopic(topic) {\r\n\r\n    var partySortedContributions = whichPartyHasMostUniqueContributionsToTopicByTD() \r\n\r\n    var holder = []\r\n\r\n    const party = d => d.party\r\n\r\n    for(let i = 0; i < partySortedContributions.length; i++) {\r\n\r\n        var test = partySortedContributions[i].holder.map(function(d) {\r\n            if(d[0] === topic) {\r\n                return d\r\n            }\r\n        }).filter(d => d != undefined)\r\n\r\n\r\n        holder.push({party: partySortedContributions[i].party, test})\r\n\r\n\r\n    }\r\n\r\n    var filterEmpty = holder.filter(d => d.test.length != 0)\r\n\r\n    var sorted = filterEmpty.sort((a, b) => b.test[0][1] - a.test[0][1])\r\n\r\n    var most = sorted[0]\r\n\r\n    if(sorted.length > 1) {\r\n        most = sorted[0]\r\n    }\r\n\r\n    var arr = [partyColors[party(most)], most.party, most.test[0][1]]\r\n\r\n\r\n    return arr\r\n\r\n}\r\n\r\nreturn partyWithMostUniqueTDContributionsToTopic(topic)\r\n\r\n}\r\n\r\nfunction coloredByPartyWithMostContributionsToTopic(topic) { \r\n\r\nfunction getTotalContributionOfPartyToTopic(party) {\r\n\r\n\r\n    // var listToCheck = topicWrittenByTD()\r\n\r\n    var justPartyJustQuestion = TDData.filter(d => d.party == party).filter(d => d.writtenQuestions[0].writtenQuestions.topic != undefined)\r\n\r\n    var testMostByParty = justPartyJustQuestion.map(d => d.writtenQuestions[0].writtenQuestions.topic)\r\n\r\n    var sumTestParty = testMostByParty.map(d => Object.entries(d)).flat()\r\n\r\n    var sumTestPartyFlat = sumTestParty.map(function(d) {\r\n        return d\r\n    })\r\n\r\n    const mapAskedTopicsTD = sumTestPartyFlat.reduce((acc, e) => acc.set(e[0], (acc.get(e[0]) || 0) + e[1]), new Map())\r\n\r\n    var toSortAskedTopicsTD = [...mapAskedTopicsTD.entries()]\r\n\r\n    toSortAskedTopicsTD.sort(function(a, b) {\r\n        return  b[1]-a[1]\r\n     })\r\n\r\n    return toSortAskedTopicsTD\r\n\r\n}\r\n\r\nfunction whichPartyHasMostTotalContributionsToTopic() {\r\n\r\n    const parties = [\"Aontú\", \"Independents\", \"Green Party\", \"Labour\", \"Fianna Fáil\", \"Fine Gael\", \"Social Democrats\", \"People Before Profit\", \"Independents 4 Change\", \"Sinn Féin\"];\r\n\r\n    var holderArr = []\r\n\r\n    for(let i = 0; i < parties.length; i++) {\r\n\r\n    var holder = getTotalContributionOfPartyToTopic(parties[i])\r\n\r\n    holderArr.push({party: parties[i], holder})\r\n\r\n    }\r\n\r\n    return holderArr\r\n\r\n}\r\n\r\nfunction partyWithMostTotalContributionsToTopic(topic) {\r\n\r\n    var partySortedContributions = whichPartyHasMostTotalContributionsToTopic() \r\n\r\n    var holder = []\r\n\r\n    const party = d => d.party\r\n\r\n\r\n    for(let i = 0; i < partySortedContributions.length; i++) {\r\n\r\n        var test = partySortedContributions[i].holder.map(function(d) {\r\n            if(d[0] == topic) {\r\n                return d\r\n            }\r\n        }).filter(d => d != undefined)\r\n\r\n\r\n        holder.push({party: partySortedContributions[i].party, test})\r\n\r\n\r\n    }\r\n\r\n    var filterEmpty = holder.filter(d => d.test.length != 0)\r\n\r\n    var sorted = filterEmpty.sort((a, b) => b.test[0][1] - a.test[0][1])\r\n\r\n    var most = sorted[0]\r\n\r\n    if(sorted.length > 1) {\r\n        most = sorted[0]\r\n    }\r\n\r\n    var arr = [partyColors[party(most)], most.party, most.test[0][1]]\r\n\r\n\r\n    return arr\r\n\r\n}\r\n\r\nreturn partyWithMostTotalContributionsToTopic(topic)\r\n\r\n}\r\n\r\nfunction coloredByPartyWithTDWhoHasContributedMostToTopic(topic) { \r\n\r\n    function getTDWhoHasContributedMostToTopic(topic) {\r\n\r\n        const parties = [\"Aontú\", \"Independents\", \"Green Party\", \"Labour\", \"Fianna Fáil\", \"Fine Gael\", \"Social Democrats\", \"People Before Profit\", \"Independents 4 Change\", \"Sinn Féin\"];\r\n\r\n        const party = d => d[0]\r\n    \r\n        var justQuestionJustTopic = TDData.filter(d => d.writtenQuestions[0].writtenQuestions.topic != undefined).filter(d => d.writtenQuestions[0].writtenQuestions.topic[topic] != undefined)\r\n\r\n        var arrToSort = justQuestionJustTopic.map(function(d) {\r\n    \r\n        var amount = d.writtenQuestions[0].writtenQuestions.topic[topic];\r\n        var party = d.party\r\n        var name = d.name\r\n    \r\n          return  [party, amount, name]\r\n    \r\n    \r\n        })\r\n    \r\n        var arrSorted = arrToSort.sort((a,b) => b[1] - a[1])\r\n\r\n        var most = arrSorted[0]\r\n\r\n        most.unshift(partyColors[party(most)])\r\n\r\n        return most\r\n\r\n    }\r\n\r\n    return getTDWhoHasContributedMostToTopic(topic)\r\n    \r\n    }\r\n\r\nconsole.log(coloredByPartyWithTDWhoHasContributedMostToTopic(\"Covid-19 Pandemic\"))\r\n\r\n    const dataOptionArr = [mostAskedTopicsByTD, mostAskedTopicsTotal]\r\n\r\n    const colorOptionArr = [coloredByPartyWithMostUniqueTDContributionsToTopic, coloredByPartyWithMostContributionsToTopic, coloredByPartyWithTDWhoHasContributedMostToTopic]\r\n\r\n    const xValue = d => d[0]\r\n    const yValue = d => d[1]\r\n    const color = d => colorOptionArr[colorOption](d[0])\r\n\r\n\r\n    const xScale = d3.scaleBand()\r\n    .domain(dataOptionArr[dataOption].map(xValue))\r\n    .range([0, widthMargin])\r\n    .padding(0.2)\r\n\r\n    const svg = d3.select(svgRef.current);\r\n\r\nconst yScale = d3.scaleLinear()\r\n.domain([0, d3.max(dataOptionArr[dataOption], yValue)])\r\n.range([heightMargin, 0]);\r\n\r\n\r\n\r\nconsole.log(yValue)\r\n\r\nconst xAxis = d3.axisBottom(xScale).ticks(dataOptionArr[dataOption].length)\r\n\r\nsvg\r\n.select(\".x-axis-topics-bar\")\r\n.attr(\"transform\", \"translate(0,\" + heightMargin + \")\")\r\n.transition(2000)\r\n.call(xAxis)\r\n.selectAll(\"text\")  \r\n.attr(\"font-size\", \"1px\")\r\n.attr(\"dx\", \"-.8em\")\r\n.attr(\"dy\", \".15em\")\r\n.attr(\"transform\", \"rotate(-25)\");\r\n\r\n\r\nconst yAxis = d3.axisLeft(yScale);\r\n\r\nsvg\r\n.select(\".y-axis-topics-bar\")\r\n.attr(\"transform\", \"translate(0,0)\")\r\n.style(\"color\", \"white\")\r\n.transition(500)\r\n.call(yAxis)\r\n\r\n\r\n\r\nconst tooltip = d3\r\n.select('body')\r\n.append('div')\r\n.attr('class', 'd3-tooltip')\r\n.style('position', 'absolute')\r\n.style('z-index', '10')\r\n.style('visibility', 'hidden')\r\n.style('padding', '10px')\r\n.style('background', 'rgba(0,0,0,0.6)')\r\n.style('border-radius', '4px')\r\n.style('color', '#fff')\r\n.text('a simple tooltip');\r\n\r\n\r\nvar rects = d3.select(\"#container-topics\")\r\n.selectAll(\".bar\")\r\n.data(dataOptionArr[dataOption])\r\n.join(\"rect\")\r\n.attr(\"class\", \"bar\")\r\n\r\nrects.transition()\r\n.duration(400)\r\n.attr(\"x\", d => xScale(xValue(d)))\r\n.attr(\"y\", d => yScale(yValue(d)))\r\n.attr(\"width\", xScale.bandwidth())\r\n.attr(\"height\", d => heightMargin - yScale(yValue(d)))\r\n.attr(\"fill\", d=> color(d)[0])\r\n\r\n\r\nconst hoverColor = \"#eec42d\"\r\n\r\n\r\n\r\n\r\n\r\n\r\nrects\r\n.on('mouseover', function (d, i) {\r\n    \r\nif(color(d).length == 4) {\r\n\r\n\r\ntooltip\r\n.html(\r\n    `<div>${tooltipData1[dataOption]}: ${d[0]}</div> \r\n    <div>${tooltipData[dataOption]}: ${d[1].toLocaleString()}</div>\r\n    <div>${color(d)[3]} had ${color(d)[2]} questions</div>\r\n    `\r\n)\r\n    .style('visibility', 'visible');\r\n    d3.select(this).transition().attr('fill', hoverColor);\r\n\r\n\r\n} else if(colorOption === 0) {\r\n\r\n    tooltip\r\n    .html(\r\n        `<div>${tooltipData1[dataOption]}: ${d[0]}</div> \r\n        <div>${tooltipData[dataOption]}: ${d[1].toLocaleString()}</div>\r\n        <div>${color(d)[2]} ${color(d)[1]} TD's contributed to this topic</div>\r\n        `\r\n    )\r\n        .style('visibility', 'visible');\r\n        d3.select(this).transition().attr('fill', hoverColor);\r\n\r\n\r\n}\r\n\r\n\r\nelse {\r\n\r\n\r\n    tooltip\r\n    .html(\r\n        `<div>${tooltipData1[dataOption]}: ${d[0]}</div> \r\n        <div>${tooltipData[dataOption]}: ${d[1].toLocaleString()}</div>\r\n        <div>${color(d)[1]} had ${color(d)[2]} questions</div>\r\n        `\r\n    )\r\n        .style('visibility', 'visible');\r\n        d3.select(this).transition().attr('fill', hoverColor);\r\n}\r\n\r\n\r\n\r\n})\r\n.on('mousemove', function () {\r\n    tooltip\r\n    .style('top', d3.event.pageY - 10 + 'px')\r\n    .style('left', d3.event.pageX + 10 + 'px');\r\n})\r\n.on('mouseout', function () {\r\n    tooltip.html(``).style('visibility', 'hidden');\r\n    d3.select(this).transition().attr('fill', d => color(d)[0]);\r\n}); \r\n\r\n}, [mostAskedTopicsByTD, mostAskedTopicsTotal, dataOption, colorOption, height, width, colorMode])\r\n\r\nif(!TDData || !totalQuestions ||!oralQuestions || !writtenQuestions || !mostAskedTopicsByTD || !mostAskedTopicsTotal) return null;\r\n\r\n    return (\r\n        <div className=\"featuredItem\" style={{textAlign: \"center\"}}>\r\n                        <Typography variant=\"h5\">Topics</Typography>\r\n                        <p style={{marginTop: 10, marginBottom: 10}}>Showing top 25 out of 590.</p>\r\n\r\n        <FormControl className={classes.formControl}>\r\n        <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">Data-Value</InputLabel>\r\n        <Select onChange={onChangeDataOption} style={{ color: \"white\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n          <ListSubheader>Data Value</ListSubheader>\r\n          <MenuItem value={0}>Topics Asked By Most Unique TDs</MenuItem>\r\n          <MenuItem value={1}>Topics Asked Most Overall</MenuItem>\r\n        </Select>\r\n      </FormControl>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">Color-Value</InputLabel>\r\n        <Select onChange={onChangeColorOption} style={{ color: \"white\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n          <ListSubheader>Color Data</ListSubheader>\r\n          <MenuItem value={0}>Party with most unique TD Contributions</MenuItem>\r\n          <MenuItem value={1}>Party with most total questions</MenuItem>\r\n          <MenuItem value={2}>TD with most questions</MenuItem>\r\n        </Select>\r\n      </FormControl>\r\n      {/* <FormControl className={classes.formControl}>\r\n        <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">Data Amount</InputLabel>\r\n        <Select onChange={onChangeDataLength} style={{ color: \"white\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n          <ListSubheader>Twitter Data</ListSubheader>\r\n          <MenuItem value={0}>Top 20</MenuItem>\r\n          <MenuItem value={1}>Show All</MenuItem>\r\n        </Select>\r\n      </FormControl> */}\r\n            <div className={\"scroll-svg-container\"}>\r\n            <svg ref={svgRef} height={heightMargin + margin.top + margin.bottom} width={widthMargin + margin.left + margin.right}>\r\n            <g id=\"container-topics\" transform={'translate(' + margin.left + ',' + margin.top + ')'}>\r\n                <g className=\"x-axis-topics-bar\"></g>\r\n                <g className=\"y-axis-topics-bar\"></g>\r\n            </g>\r\n            </svg>\r\n        </div> \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default TopicsBarChart","import { Typography } from '@material-ui/core'\r\nimport React, {useState, useEffect, useRef} from 'react'\r\nimport * as d3 from 'd3'\r\nimport { FormControl, InputLabel, Select, ListSubheader, MenuItem, makeStyles } from '@material-ui/core'\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    icon: {\r\n      color: \"white\"\r\n  },\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n  }\r\n}));\r\n\r\n\r\nconst MinisterQuestionsBarChart = ({data}) => {\r\n\r\n\r\n    const [TDData, setTDData] = useState(null);\r\n    const [totalQuestions, setTotalQuestions] = useState(null);\r\n    const [writtenQuestions, setWrittenQuestions] = useState(null);\r\n    const [oralQuestions, setOralQuestions] = useState(null);\r\n    const [mostAskedToByTD, setMostAskedToByTD] = useState(null);\r\n    const [mostAskedToTotal, setMostAskedToTotal] = useState(null);\r\n    const [dataOption, setDataOption] = useState(0);\r\n    const [colorOption, setColorOption] = useState(0)\r\n\r\n\r\n    const [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\r\n    const [height, setHeight] = useState(600)\r\n    const [width, setWidth] = useState(900)\r\n    const [colorMode, setColorMode] = useState(\"Light Mode\")\r\n    const [color, setColor] = useState(null)\r\n    const [fillColor, setFillColor] = useState(null)\r\n    const [backgroundColor, setBackgroundColor] = useState(null)\r\n    const [textColor, setTextColor] = useState(null)\r\n    const [textSize, setTextSize] = useState(\"10px\")\r\n\r\n    function getWindowDimensions() {\r\n      const { innerWidth: width, innerHeight: height } = window;\r\n      return {\r\n        width,\r\n        height\r\n      };\r\n    }\r\n\r\n    function useWindowDimensions() {\r\n     \r\n    \r\n      useEffect(() => {\r\n        function handleResize() {\r\n          setWindowDimensions(getWindowDimensions());\r\n        }\r\n    \r\n        window.addEventListener('resize', handleResize);\r\n        return () => window.removeEventListener('resize', handleResize);\r\n      }, []);\r\n    \r\n      return windowDimensions;\r\n    }\r\n\r\n    console.log(useWindowDimensions())\r\n\r\n    const onChangeColorMode = (event, child) => {\r\n\r\n      if(child == true) {\r\n\r\n      setColorMode(\"Dark Mode\")\r\n      } \r\n      if(child == false) {\r\n        setColorMode(\"Light Mode\")\r\n      }\r\n      \r\n      console.log('color mode:' + event.target.value);\r\n      console.log(child);\r\n};\r\n\r\n\r\n    useEffect(() => {\r\n\r\n\r\n      console.log(colorMode)\r\n      \r\n            if(colorMode == \"Dark Mode\") {\r\n              setFillColor({fill: \"white\", color: \"white\"})\r\n              setColor({color: \"white\"})\r\n              setBackgroundColor(\"#191C24\")\r\n              setTextColor(\"white\")\r\n      \r\n            }\r\n      \r\n            if(colorMode == \"Light Mode\") {\r\n              setFillColor({fill: \"black\", color: \"black\"})\r\n              setColor({color: \"black\"})\r\n              setBackgroundColor(\"white\")\r\n              setTextColor(\"black\")\r\n            }\r\n      \r\n            \r\n      \r\n          }, [colorMode])\r\n\r\n    useEffect(() => {\r\n\r\n      if(windowDimensions.width  < 430) {\r\n        setHeight(320)\r\n        setWidth(340)\r\n        setTextSize(\"6px\")\r\n      }\r\n      if(windowDimensions.width < 450 && windowDimensions.width > 430) {\r\n        setHeight(320)\r\n        setWidth(360)\r\n        setTextSize(\"8px\")\r\n      }\r\n      if(windowDimensions.width < 470 && windowDimensions.width > 450) {\r\n        setHeight(320)\r\n        setWidth(380)\r\n        setTextSize(\"10px\")\r\n      }\r\n      if(windowDimensions.width < 680 && windowDimensions.width > 470) {\r\n        setHeight(360)\r\n        setWidth(480)\r\n        setTextSize(\"10px\")\r\n      }\r\n      if(windowDimensions.width < 800 && windowDimensions.width > 600) {\r\n        setHeight(400)\r\n        setWidth(680)\r\n        setTextSize(\"10px\")\r\n      }\r\n      if(windowDimensions.width < 980 && windowDimensions.width > 800) {\r\n        setHeight(500)\r\n        setWidth(680)\r\n        setTextSize(\"10px\")\r\n      }\r\n      if(windowDimensions.width < 1080 && windowDimensions.width > 980) {\r\n        setHeight(600)\r\n        setWidth(700)\r\n        setTextSize(\"10px\")\r\n      }\r\n      if(windowDimensions.width < 1200 && windowDimensions.width > 1080) {\r\n        setHeight(600)\r\n        setWidth(800)\r\n        setTextSize(\"10px\")\r\n      }\r\n      if(windowDimensions.width > 1200) {\r\n        setHeight(600)\r\n        setWidth(900)\r\n        setTextSize(\"10px\")\r\n      }\r\n    }, [windowDimensions])\r\n\r\n\r\n\r\n    // const [dataLength, setDataLength] = useState(0)\r\n\r\n\r\n    const partyColors = {\r\n        \"Sinn Féin\": \"#326760\",\r\n        \"Fine Gael\": \"#6699FF\",\r\n        \"Fianna Fáil\": \"#66BB66\",\r\n        \"Labour Party\": \"#CC0000\",\r\n        \"Solidarity - People Before Profit\": \"#8E2420\",\r\n        \"Independent\": \"white\",\r\n        \"Green Party\": \"#99CC33\",\r\n        \"Social Democrats\": \"#752F8B\",\r\n        \"Aontú\": \"#44532A\",\r\n        \"Independents 4 Change\": \"grey\"}\r\n\r\n\r\n    const tooltipData = [\"TD's Who Asked\", \"Total Questions Asked\"]\r\n    const tooltipData1 = [\"To\", \"To\"]\r\n\r\nconst onChangeDataOption = (event, child) => {\r\n    setDataOption(event.target.value)\r\n    console.log('Data Option:' + event.target.value);\r\n    console.log(child);\r\n  };\r\n\r\n  const onChangeColorOption = (event, child) => {\r\n    setColorOption(event.target.value)\r\n    console.log('Color Option:' + event.target.value);\r\n    console.log(child);\r\n  };\r\n\r\n//   const onChangeDataLength = (event, child) => {\r\n//     setDataLength(event.target.value)\r\n//     console.log('Data Length:' + event.target.value);\r\n//     console.log(child);\r\n//   };\r\n\r\n\r\n\r\n\r\n    useEffect(() => {\r\n\r\n\r\n        setTDData(data)\r\n\r\n    }, [])\r\n\r\n\r\nuseEffect(() => {\r\n\r\n    if(!TDData) return null;\r\n\r\n\r\n    var tdsNoQuestion = TDData.map(function(d) {\r\n\r\n        if(!d.writtenQuestions[1].writtenQuestions.topic && !d.oralQuestions[1].oralQuestions.topic) {\r\n            return true\r\n        } else {\r\n            return false\r\n        }\r\n    })\r\n    \r\n    console.log(tdsNoQuestion)\r\n\r\n    const sumValues = obj => Object.values(obj).reduce((a, b) => a + b);\r\n\r\n    var toOral = TDData.map(d => d.oralQuestions[0].oralQuestions.topic)\r\n    var filteredOral = toOral.filter(d => d != undefined)\r\n    var summedOral = filteredOral.map(d => sumValues(d)).reduce((a, b) => a + b);\r\n    var toWritten = TDData.map(d => d.writtenQuestions[0].writtenQuestions.to)\r\n\r\n    //Who didn't ask any questions in period, minus ministers, minus cc and eoghan murphy\r\n    var whoDidnt = TDData.map(function(d){\r\n\r\n        if(!d.writtenQuestions[1].writtenQuestions.to && !d.oralQuestions[1].oralQuestions.to && d.member_offices[0].length === 0) {\r\n            return d.name\r\n        }\r\n    }).filter(d => d != undefined && d != \"Seán Ó Fearghaíl\" && d != \"Eoghan Murphy\")\r\n\r\n    var filteredWrittenTo = toWritten.filter(d => d != undefined) \r\n    var summedWritten = filteredWrittenTo.map(d => sumValues(d)).reduce((a, b) => a + b);\r\n    var uniqueKeysTo = Object.keys(filteredWrittenTo.reduce(function(result, obj) {\r\n        return Object.assign(result, obj);\r\n      }, {}))\r\n\r\nfunction toWrittenByTD() {\r\n\r\n\r\n\r\n    var topicWritten = TDData.map(d => d.writtenQuestions[0].writtenQuestions.to)\r\n    var filteredWrittenTopic = topicWritten.filter(d => d != undefined) \r\n    var summedWritten = filteredWrittenTopic.map(d => sumValues(d)).reduce((a, b) => a + b);\r\n\r\n    //Topics asked by TDs\r\n    var workingWithAsked = filteredWrittenTopic.map(d => Object.entries(d)).flat()\r\n    var askedByTopicsTDs = workingWithAsked.map(function(d) {\r\n        return d[0]\r\n    })\r\n\r\n    const mapAskedTopicsTD= askedByTopicsTDs.reduce((acc, e) => acc.set(e, (acc.get(e) || 0) + 1), new Map())\r\n\r\n    var toSortAskedTopicsTD = [...mapAskedTopicsTD.entries()]\r\n\r\n    toSortAskedTopicsTD.sort(function(a, b) {\r\n        return  b[1]-a[1]\r\n     })\r\n     if(toSortAskedTopicsTD.length > 25) {\r\n         toSortAskedTopicsTD.length = 25\r\n       }\r\n\r\n       return toSortAskedTopicsTD\r\n\r\n}\r\n\r\nfunction toWrittenTotal() {\r\n\r\n\r\n\r\n    var topicWritten = TDData.map(d => d.writtenQuestions[0].writtenQuestions.to)\r\n    var filteredWrittenTopic = topicWritten.filter(d => d != undefined) \r\n\r\n    //Topics asked by TDs\r\n    var workingWithAsked = filteredWrittenTopic.map(d => Object.entries(d)).flat()\r\n    var askedByTopicsTDs = workingWithAsked.map(function(d) {\r\n        return d\r\n    })\r\n    \r\n    const mapTotal = askedByTopicsTDs.reduce((acc, e) => acc.set(e[0], (acc.get(e[0]) || 0) + e[1]), new Map())\r\n\r\n    var toSortAskedTopicsTD = [...mapTotal.entries()]\r\n\r\n    toSortAskedTopicsTD.sort(function(a, b) {\r\n        return  b[1]-a[1]\r\n     })\r\n     if(toSortAskedTopicsTD.length > 25) {\r\n         toSortAskedTopicsTD.length = 25\r\n       }\r\n\r\n       return toSortAskedTopicsTD\r\n\r\n\r\n\r\n}\r\n\r\n\r\n    //Horribly named. Fix\r\n    \r\n    setTotalQuestions(summedOral + summedWritten)\r\n    setOralQuestions(summedOral)\r\n    setWrittenQuestions(summedWritten)\r\n\r\n    setMostAskedToByTD(toWrittenByTD())\r\n    setMostAskedToTotal(toWrittenTotal())\r\n\r\n\r\n}, [TDData])\r\n\r\n\r\nconst margin = {top: 20, right: 20, bottom: 100, left: 50}\r\nconst heightMargin = height - margin.left - margin.right;\r\nconst widthMargin = width - margin.top - margin.bottom; \r\n\r\nconst svgRef= useRef()\r\n\r\nconst classes = useStyles();\r\n\r\nuseEffect(() => {\r\n\r\n    if(!mostAskedToByTD || !mostAskedToTotal) return null;\r\n\r\n\r\n\r\n\r\nfunction coloredByPartyWithMostUniqueTDContributionsToMinister(minister) {\r\n\r\n        function getUniqueTDTopicContributionOfParty(party) {\r\n        \r\n        \r\n            // var listToCheck = topicWrittenByTD()\r\n        \r\n            var justPartyJustQuestion = TDData.filter(d => d.party == party).filter(d => d.writtenQuestions[0].writtenQuestions.to != undefined)\r\n        \r\n            var testMostByParty = justPartyJustQuestion.map(d => d.writtenQuestions[0].writtenQuestions.to)\r\n        \r\n            var sumTestParty = testMostByParty.map(d => Object.entries(d)).flat()\r\n        \r\n            var sumTestPartyFlat = sumTestParty.map(function(d) {\r\n                return d[0]\r\n            })\r\n        \r\n            const mapAskedTopicsTD = sumTestPartyFlat.reduce((acc, e) => acc.set(e, (acc.get(e) || 0) + 1), new Map())\r\n        \r\n            var toSortAskedTopicsTD = [...mapAskedTopicsTD.entries()]\r\n        \r\n            toSortAskedTopicsTD.sort(function(a, b) {\r\n                return  b[1]-a[1]\r\n             })\r\n        \r\n            return toSortAskedTopicsTD\r\n        \r\n        }\r\n        \r\n        function whichPartyHasMostUniqueContributionsToTopicByTD() {\r\n        \r\n            const parties = [\"Aontú\", \"Independents\", \"Green Party\", \"Labour\", \"Fianna Fáil\", \"Fine Gael\", \"Social Democrats\", \"People Before Profit\", \"Independents 4 Change\", \"Sinn Féin\"];\r\n        \r\n            var holderArr = []\r\n        \r\n            for(let i = 0; i < parties.length; i++) {\r\n        \r\n            var holder = getUniqueTDTopicContributionOfParty(parties[i])\r\n        \r\n            holderArr.push({party: parties[i], holder})\r\n        \r\n            }\r\n        \r\n            return holderArr\r\n        \r\n        }\r\n        \r\n        function partyWithMostUniqueTDContributionsToTopic(minister) {\r\n        \r\n            var partySortedContributions = whichPartyHasMostUniqueContributionsToTopicByTD() \r\n        \r\n            var holder = []\r\n        \r\n            const party = d => d.party\r\n        \r\n            for(let i = 0; i < partySortedContributions.length; i++) {\r\n        \r\n                var test = partySortedContributions[i].holder.map(function(d) {\r\n                    if(d[0] === minister) {\r\n                        return d\r\n                    }\r\n                }).filter(d => d != undefined)\r\n        \r\n        \r\n                holder.push({party: partySortedContributions[i].party, test})\r\n        \r\n        \r\n            }\r\n        \r\n            var filterEmpty = holder.filter(d => d.test.length != 0)\r\n        \r\n            var sorted = filterEmpty.sort((a, b) => b.test[0][1] - a.test[0][1])\r\n        \r\n            var most = sorted[0]\r\n        \r\n\r\n            if(colorOption < 2) {\r\n\r\n                most = sorted[0]\r\n\r\n            } else {\r\n                most = sorted[1]\r\n            }\r\n\r\n\r\n            var arr = [partyColors[party(most)], most.party, most.test[0][1]]\r\n        \r\n        \r\n            return arr\r\n        \r\n        }\r\n        \r\n        return partyWithMostUniqueTDContributionsToTopic(minister)\r\n        \r\n        }    \r\n\r\nfunction coloredByPartyWithMostContributionsToMinister(minister) { \r\n        \r\n        function getTotalContributionOfPartyToTopic(party) {\r\n        \r\n        \r\n            // var listToCheck = topicWrittenByTD()\r\n        \r\n            var justPartyJustQuestion = TDData.filter(d => d.party == party).filter(d => d.writtenQuestions[0].writtenQuestions.to != undefined)\r\n        \r\n            var testMostByParty = justPartyJustQuestion.map(d => d.writtenQuestions[0].writtenQuestions.to)\r\n        \r\n            var sumTestParty = testMostByParty.map(d => Object.entries(d)).flat()\r\n        \r\n            var sumTestPartyFlat = sumTestParty.map(function(d) {\r\n                return d\r\n            })\r\n        \r\n            const mapAskedTopicsTD = sumTestPartyFlat.reduce((acc, e) => acc.set(e[0], (acc.get(e[0]) || 0) + e[1]), new Map())\r\n        \r\n            var toSortAskedTopicsTD = [...mapAskedTopicsTD.entries()]\r\n        \r\n            toSortAskedTopicsTD.sort(function(a, b) {\r\n                return  b[1]-a[1]\r\n             })\r\n        \r\n            return toSortAskedTopicsTD\r\n        \r\n        }\r\n        \r\n        function whichPartyHasMostTotalContributionsToTopic() {\r\n        \r\n            const parties = [\"Aontú\", \"Independents\", \"Green Party\", \"Labour\", \"Fianna Fáil\", \"Fine Gael\", \"Social Democrats\", \"People Before Profit\", \"Independents 4 Change\", \"Sinn Féin\"];\r\n        \r\n            var holderArr = []\r\n        \r\n            for(let i = 0; i < parties.length; i++) {\r\n        \r\n            var holder = getTotalContributionOfPartyToTopic(parties[i])\r\n        \r\n            holderArr.push({party: parties[i], holder})\r\n        \r\n            }\r\n        \r\n            return holderArr\r\n        \r\n        }\r\n        \r\n        \r\n        function partyWithMostTotalContributionsToTopic(minister) {\r\n        \r\n            var partySortedContributions = whichPartyHasMostTotalContributionsToTopic() \r\n        \r\n            var holder = []\r\n        \r\n            const party = d => d.party\r\n        \r\n        \r\n            for(let i = 0; i < partySortedContributions.length; i++) {\r\n        \r\n                var test = partySortedContributions[i].holder.map(function(d) {\r\n                    if(d[0] == minister) {\r\n                        return d\r\n                    }\r\n                }).filter(d => d != undefined)\r\n        \r\n        \r\n                holder.push({party: partySortedContributions[i].party, test})\r\n        \r\n        \r\n            }\r\n        \r\n            var filterEmpty = holder.filter(d => d.test.length != 0)\r\n        \r\n            var sorted = filterEmpty.sort((a, b) => b.test[0][1] - a.test[0][1])\r\n        \r\n            var most = sorted[0]\r\n        \r\n            if(colorOption < 2) {\r\n                most = sorted[0]\r\n            } else {\r\n                most = sorted[1]\r\n            }\r\n        \r\n            var arr = [partyColors[party(most)], most.party, most.test[0][1]]\r\n        \r\n        \r\n            return arr\r\n        \r\n        }\r\n        \r\n        return partyWithMostTotalContributionsToTopic(minister)\r\n        \r\n        }\r\n\r\n        \r\nfunction coloredByPartyWithTDWhoHasContributedMostToMinister(minister) { \r\n        \r\n            function getTDWhoHasContributedMostToTopic(minister) {\r\n        \r\n                const parties = [\"Aontú\", \"Independents\", \"Green Party\", \"Labour\", \"Fianna Fáil\", \"Fine Gael\", \"Social Democrats\", \"People Before Profit\", \"Independents 4 Change\", \"Sinn Féin\"];\r\n        \r\n                const party = d => d[0]\r\n            \r\n                var justQuestionJustTopic = TDData.filter(d => d.writtenQuestions[0].writtenQuestions.to != undefined).filter(d => d.writtenQuestions[0].writtenQuestions.to[minister] != undefined)\r\n        \r\n                var arrToSort = justQuestionJustTopic.map(function(d) {\r\n            \r\n                var amount = d.writtenQuestions[0].writtenQuestions.to[minister];\r\n                var party = d.party\r\n                var name = d.name\r\n            \r\n                  return  [party, amount, name]\r\n            \r\n            \r\n                })\r\n            \r\n                var arrSorted = arrToSort.sort((a,b) => b[1] - a[1])\r\n\r\n        \r\n\r\n                    var most = arrSorted[0]\r\n\r\n \r\n        \r\n                \r\n        \r\n                most.unshift(partyColors[party(most)])\r\n        \r\n                return most\r\n        \r\n            }\r\n        \r\n            return getTDWhoHasContributedMostToTopic(minister)\r\n            \r\n        }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    const dataOptionArr = [mostAskedToByTD, mostAskedToTotal]\r\n\r\n    const colorOptionArr = [coloredByPartyWithMostUniqueTDContributionsToMinister, coloredByPartyWithMostContributionsToMinister, coloredByPartyWithMostUniqueTDContributionsToMinister, coloredByPartyWithMostContributionsToMinister, coloredByPartyWithTDWhoHasContributedMostToMinister]\r\n\r\n    console.log(dataOptionArr[dataOption])\r\n\r\n    const xValue = d => d[0]\r\n    const yValue = d => d[1]\r\n    const color = d => colorOptionArr[colorOption](d[0])\r\n\r\n\r\n    const xScale = d3.scaleBand()\r\n    .domain(dataOptionArr[dataOption].map(xValue))\r\n    .range([0, widthMargin])\r\n    .padding(0.2)\r\n\r\n    const svg = d3.select(svgRef.current);\r\n\r\nconst yScale = d3.scaleLinear()\r\n.domain([0, d3.max(dataOptionArr[dataOption], yValue)])\r\n.range([heightMargin, 0]);\r\n\r\n\r\n\r\nconsole.log(yValue)\r\n\r\nconst xAxis = d3.axisBottom(xScale).ticks(dataOptionArr[dataOption].length)\r\n\r\nsvg\r\n.select(\".x-axis-minister-questions-bar\")\r\n.attr(\"transform\", \"translate(0,\" + heightMargin + \")\")\r\n.transition(2000)\r\n.call(xAxis)\r\n.selectAll(\"text\")  \r\n.style(\"text-anchor\", \"end\")\r\n.style(\"font-size\", textSize)\r\n.attr(\"dx\", \"-.8em\")\r\n.attr(\"dy\", \".15em\")\r\n.attr(\"transform\", \"rotate(-25)\");\r\n\r\n\r\nconst yAxis = d3.axisLeft(yScale);\r\n\r\nsvg\r\n.select(\".y-axis-minister-questions-bar\")\r\n.attr(\"transform\", \"translate(0,0)\")\r\n.style(\"color\", \"white\")\r\n.transition(500)\r\n.call(yAxis)\r\n\r\n\r\n\r\nconst tooltip = d3\r\n.select('body')\r\n.append('div')\r\n.attr('class', 'd3-tooltip')\r\n.style('position', 'absolute')\r\n.style('z-index', '10')\r\n.style('visibility', 'hidden')\r\n.style('padding', '10px')\r\n.style('background', 'rgba(0,0,0,0.6)')\r\n.style('border-radius', '4px')\r\n.style('color', '#fff')\r\n.text('a simple tooltip');\r\n\r\n\r\nvar rects = d3.select(\"#container-minister-questions\")\r\n.selectAll(\".bar\")\r\n.data(dataOptionArr[dataOption])\r\n.join(\"rect\")\r\n.attr(\"class\", \"bar\")\r\n\r\nrects.transition()\r\n.duration(400)\r\n.attr(\"x\", d => xScale(xValue(d)))\r\n.attr(\"y\", d => yScale(yValue(d)))\r\n.attr(\"width\", xScale.bandwidth())\r\n.attr(\"height\", d => heightMargin - yScale(yValue(d)))\r\n.attr(\"fill\", d=> color(d)[0])\r\n\r\n\r\nconst hoverColor = \"#eec42d\"\r\n\r\n\r\n\r\nrects.on('mouseover', function (d, i) {\r\nif(color(d).length == 4) {\r\n\r\n\r\n    tooltip\r\n    .html(\r\n        `<div>${tooltipData1[dataOption]}: ${d[0]}</div> \r\n        <div>${tooltipData[dataOption]}: ${d[1].toLocaleString()}</div>\r\n        <div>${color(d)[3]} had ${color(d)[2]} questions</div>\r\n        `\r\n    )\r\n        .style('visibility', 'visible');\r\n        d3.select(this).transition().attr('fill', hoverColor);\r\n    \r\n    \r\n    } else if(colorOption === 0) {\r\n    \r\n        tooltip\r\n        .html(\r\n            `<div>${tooltipData1[dataOption]}: ${d[0]}</div> \r\n            <div>${tooltipData[dataOption]}: ${d[1].toLocaleString()}</div>\r\n            <div>${color(d)[2]} ${color(d)[1]} TD's contributed to this topic</div>\r\n            `\r\n        )\r\n            .style('visibility', 'visible');\r\n            d3.select(this).transition().attr('fill', hoverColor);\r\n    \r\n    \r\n    }\r\n    \r\n    \r\n    else {\r\n    \r\n    \r\n        tooltip\r\n        .html(\r\n            `<div>${tooltipData1[dataOption]}: ${d[0]}</div> \r\n            <div>${tooltipData[dataOption]}: ${d[1].toLocaleString()}</div>\r\n            <div>${color(d)[1]} had ${color(d)[2]} questions</div>\r\n            `\r\n        )\r\n            .style('visibility', 'visible');\r\n            d3.select(this).transition().attr('fill', hoverColor);\r\n    \r\n    \r\n    }\r\n\r\n})\r\n.on('mousemove', function () {\r\n    tooltip\r\n    .style('top', d3.event.pageY - 10 + 'px')\r\n    .style('left', d3.event.pageX + 10 + 'px');\r\n})\r\n.on('mouseout', function () {\r\n    tooltip.html(``).style('visibility', 'hidden');\r\n    d3.select(this).transition().attr('fill', d=> color(d)[0]);\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\n}, [TDData, textSize, mostAskedToByTD, mostAskedToTotal, dataOption, colorOption, height, width])\r\n\r\nif(!TDData || !totalQuestions ||!oralQuestions || !writtenQuestions ||!mostAskedToByTD ||!mostAskedToTotal) return null;\r\n\r\nreturn (\r\n    <div className=\"featuredItem\" style={{textAlign: \"center\"}}>\r\n        <Typography variant=\"h5\">Minister's Questions</Typography>\r\n            <FormControl className={classes.formControl}>\r\n    <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">Data-Value</InputLabel>\r\n    <Select onChange={onChangeDataOption} style={{ color: \"white\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n      <ListSubheader>Twitter Data</ListSubheader>\r\n      <MenuItem value={0}>Ministers Asked By Most Unique TDs</MenuItem>\r\n      <MenuItem value={1}>Minister Asked Most Total Questions</MenuItem>\r\n    </Select>\r\n  </FormControl>\r\n  <FormControl className={classes.formControl}>\r\n    <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">Data Amount</InputLabel>\r\n    <Select onChange={onChangeColorOption} style={{ color: \"white\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n      <ListSubheader>Twitter Data</ListSubheader>\r\n        <MenuItem value={0}>Party with most unique TD Contributions</MenuItem>\r\n        <MenuItem value={1}>Party with most total questions</MenuItem>\r\n        <MenuItem value={2}>Party with second most unique TD Contributions</MenuItem>\r\n        <MenuItem value={3}>Party with second most total questions</MenuItem>\r\n        <MenuItem value={4}>TD with most questions</MenuItem>\r\n    </Select>\r\n  </FormControl>\r\n        <div className={\"scroll-svg-container\"}>\r\n        <svg ref={svgRef} height={heightMargin + margin.top + margin.bottom} width={widthMargin + margin.left + margin.right}>\r\n        <g id=\"container-minister-questions\" transform={'translate(' + margin.left + ',' + margin.top + ')'}>\r\n            <g className=\"x-axis-minister-questions-bar\"></g>\r\n            <g className=\"y-axis-minister-questions-bar\"></g>\r\n        </g>\r\n        </svg>\r\n    </div>   \r\n</div>\r\n)\r\n}\r\n\r\nexport default MinisterQuestionsBarChart","import { Typography } from '@material-ui/core'\r\nimport React, {useState, useEffect, useRef} from 'react'\r\nimport * as d3 from 'd3'\r\nimport { FormControl, InputLabel, Select, ListSubheader, MenuItem, makeStyles } from '@material-ui/core'\r\nimport TopicsBarChart from './TopicsBarChart';\r\nimport MinisterQuestionsBarChart from './MinisterQuestionsBarChart';\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    icon: {\r\n      color: \"white\"\r\n  },\r\n\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n  }\r\n\r\n}));\r\n\r\nconst Issues = ({data}) => {\r\n\r\n    const [TDData, setTDData] = useState(null);\r\n    const [totalQuestions, setTotalQuestions] = useState(null);\r\n    const [writtenQuestions, setWrittenQuestions] = useState(null);\r\n    const [oralQuestions, setOralQuestions] = useState(null);\r\n    const [mostAskedTopicsByTD, setMostAskedTopicsByTD] = useState(null);\r\n    const [mostAskedTopicsTotal, setMostAskedTopicsTotal] = useState(null);\r\n    const [mostAskedToByTD, setMostAskedToByTD] = useState(null);\r\n    const [mostAskedToTotal, setMostAskedToTotal] = useState(null);\r\n    const [dataOption, setDataOption] = useState(2);\r\n\r\n\r\n    // const [dataLength, setDataLength] = useState(0)\r\n\r\n\r\n    const partyColors = {\r\n        \"Sinn Féin\": \"#326760\",\r\n        \"Fine Gael\": \"#6699FF\",\r\n        \"Fianna Fáil\": \"#66BB66\",\r\n        \"Labour Party\": \"#CC0000\",\r\n        \"Solidarity - People Before Profit\": \"#8E2420\",\r\n        \"Independent\": \"white\",\r\n        \"Green Party\": \"#99CC33\",\r\n        \"Social Democrats\": \"#752F8B\",\r\n        \"Aontú\": \"#44532A\",\r\n        \"Independents 4 Change\": \"grey\"}\r\n\r\n\r\n    const tooltipData = [\"TD's Who Asked\", \"Total Questions Asked\", \"TD's Who Asked\", \"Total Questions Asked\"]\r\n    const tooltipData1 = [\"Topic\", \"Topic\", \"To\", \"To\"]\r\n\r\nconst onChangeDataOption = (event, child) => {\r\n    setDataOption(event.target.value)\r\n    console.log('Data Option:' + event.target.value);\r\n    console.log(child);\r\n  };\r\n\r\n//   const onChangeDataLength = (event, child) => {\r\n//     setDataLength(event.target.value)\r\n//     console.log('Data Length:' + event.target.value);\r\n//     console.log(child);\r\n//   };\r\n\r\n\r\n\r\n\r\n    useEffect(() => {\r\n\r\n\r\n        setTDData(data)\r\n\r\n    }, [])\r\n\r\n\r\nuseEffect(() => {\r\n\r\n    if(!TDData) return null;\r\n\r\n\r\n    var tdsNoQuestion = TDData.map(function(d) {\r\n\r\n        if(!d.writtenQuestions[1].writtenQuestions.topic && !d.oralQuestions[1].oralQuestions.topic) {\r\n            return true\r\n        } else {\r\n            return false\r\n        }\r\n    })\r\n    \r\n    console.log(tdsNoQuestion)\r\n\r\n    console.log(TDData[0].writtenQuestions[0].writtenQuestions.topic)\r\n\r\n    console.log(TDData[0].writtenQuestions[0].writtenQuestions.to)\r\n\r\n    const sumValues = obj => Object.values(obj).reduce((a, b) => a + b);\r\n\r\n    var toOral = TDData.map(d => d.oralQuestions[0].oralQuestions.topic)\r\n    var filteredOral = toOral.filter(d => d != undefined)\r\n    var summedOral = filteredOral.map(d => sumValues(d)).reduce((a, b) => a + b);\r\n\r\n    var toWritten = TDData.map(d => d.writtenQuestions[0].writtenQuestions.to)\r\n\r\n    //Who didn't ask any questions in period, minus ministers, minus cc and eoghan murphy\r\n    var whoDidnt = TDData.map(function(d){\r\n\r\n        if(!d.writtenQuestions[1].writtenQuestions.to && !d.oralQuestions[1].oralQuestions.to && d.member_offices[0].length === 0) {\r\n            return d.name\r\n        }\r\n\r\n\r\n    }).filter(d => d != undefined && d != \"Seán Ó Fearghaíl\" && d != \"Eoghan Murphy\")\r\n    \r\n\r\n    var filteredWrittenTo = toWritten.filter(d => d != undefined) \r\n    var summedWritten = filteredWrittenTo.map(d => sumValues(d)).reduce((a, b) => a + b);\r\n    var uniqueKeysTo = Object.keys(filteredWrittenTo.reduce(function(result, obj) {\r\n        return Object.assign(result, obj);\r\n      }, {}))\r\n\r\nconsole.log(uniqueKeysTo)\r\n\r\nfunction topicWrittenByTD() {\r\n\r\n\r\n    var topicWritten = TDData.map(d => d.writtenQuestions[0].writtenQuestions.topic)\r\n    var filteredWrittenTopic = topicWritten.filter(d => d != undefined) \r\n    var summedWritten = filteredWrittenTopic.map(d => sumValues(d)).reduce((a, b) => a + b);\r\n\r\n    //Topics asked by TDs\r\n    var workingWithAsked = filteredWrittenTopic.map(d => Object.entries(d)).flat()\r\n    var askedByTopicsTDs = workingWithAsked.map(function(d) {\r\n        return d[0]\r\n    })\r\n\r\n    const mapAskedTopicsTD= askedByTopicsTDs.reduce((acc, e) => acc.set(e, (acc.get(e) || 0) + 1), new Map())\r\n\r\n    var toSortAskedTopicsTD = [...mapAskedTopicsTD.entries()]\r\n\r\n    toSortAskedTopicsTD.sort(function(a, b) {\r\n        return  b[1]-a[1]\r\n     })\r\n     if(toSortAskedTopicsTD.length > 25) {\r\n         toSortAskedTopicsTD.length = 25\r\n       }\r\n\r\n       return toSortAskedTopicsTD\r\n\r\n\r\n}\r\n\r\nfunction topicWrittenTotal() {\r\n\r\n    var topicWritten = TDData.map(d => d.writtenQuestions[0].writtenQuestions.topic)\r\n    var filteredWrittenTopic = topicWritten.filter(d => d != undefined) \r\n\r\n    //Topics asked by TDs\r\n    var workingWithAsked = filteredWrittenTopic.map(d => Object.entries(d)).flat()\r\n    var askedByTopicsTDs = workingWithAsked.map(function(d) {\r\n        return d\r\n    })\r\n\r\n    const mapTotal = askedByTopicsTDs.reduce((acc, e) => acc.set(e[0], (acc.get(e[0]) || 0) + e[1]), new Map())\r\n\r\n    var toSortAskedTopicsTD = [...mapTotal.entries()]\r\n\r\n    toSortAskedTopicsTD.sort(function(a, b) {\r\n        return  b[1]-a[1]\r\n     })\r\n     if(toSortAskedTopicsTD.length > 25) {\r\n         toSortAskedTopicsTD.length = 25\r\n       }\r\n\r\n    return toSortAskedTopicsTD\r\n\r\n}\r\n\r\nfunction toWrittenByTD() {\r\n\r\n\r\n\r\n    var topicWritten = TDData.map(d => d.writtenQuestions[0].writtenQuestions.to)\r\n    var filteredWrittenTopic = topicWritten.filter(d => d != undefined) \r\n    var summedWritten = filteredWrittenTopic.map(d => sumValues(d)).reduce((a, b) => a + b);\r\n\r\n    //Topics asked by TDs\r\n    var workingWithAsked = filteredWrittenTopic.map(d => Object.entries(d)).flat()\r\n    var askedByTopicsTDs = workingWithAsked.map(function(d) {\r\n        return d[0]\r\n    })\r\n\r\n    const mapAskedTopicsTD= askedByTopicsTDs.reduce((acc, e) => acc.set(e, (acc.get(e) || 0) + 1), new Map())\r\n\r\n    var toSortAskedTopicsTD = [...mapAskedTopicsTD.entries()]\r\n\r\n    toSortAskedTopicsTD.sort(function(a, b) {\r\n        return  b[1]-a[1]\r\n     })\r\n     if(toSortAskedTopicsTD.length > 25) {\r\n         toSortAskedTopicsTD.length = 25\r\n       }\r\n\r\n       return toSortAskedTopicsTD\r\n\r\n}\r\n\r\nfunction toWrittenTotal() {\r\n\r\n\r\n\r\n    var topicWritten = TDData.map(d => d.writtenQuestions[0].writtenQuestions.to)\r\n    var filteredWrittenTopic = topicWritten.filter(d => d != undefined) \r\n\r\n    //Topics asked by TDs\r\n    var workingWithAsked = filteredWrittenTopic.map(d => Object.entries(d)).flat()\r\n    var askedByTopicsTDs = workingWithAsked.map(function(d) {\r\n        return d\r\n    })\r\n    \r\n    const mapTotal = askedByTopicsTDs.reduce((acc, e) => acc.set(e[0], (acc.get(e[0]) || 0) + e[1]), new Map())\r\n\r\n    var toSortAskedTopicsTD = [...mapTotal.entries()]\r\n\r\n    toSortAskedTopicsTD.sort(function(a, b) {\r\n        return  b[1]-a[1]\r\n     })\r\n     if(toSortAskedTopicsTD.length > 25) {\r\n         toSortAskedTopicsTD.length = 25\r\n       }\r\n\r\n       return toSortAskedTopicsTD\r\n\r\n\r\n\r\n}\r\n\r\nconsole.log(topicWrittenByTD())\r\nconsole.log(topicWrittenTotal())\r\n\r\n\r\n    //Horribly named. Fix\r\n    \r\n    setTotalQuestions(summedOral + summedWritten)\r\n    setOralQuestions(summedOral)\r\n    setWrittenQuestions(summedWritten)\r\n\r\n    setMostAskedTopicsByTD(topicWrittenByTD())\r\n    setMostAskedTopicsTotal(topicWrittenTotal())\r\n    setMostAskedToByTD(toWrittenByTD())\r\n    setMostAskedToTotal(toWrittenTotal())\r\n\r\n\r\n}, [TDData])\r\n\r\n\r\nconst margin = {top: 20, right: 20, bottom: 120, left: 70}\r\n\r\nconst height = 600\r\nconst width = 900\r\n\r\nconst svgRef= useRef()\r\n\r\nconst classes = useStyles();\r\n\r\nuseEffect(() => {\r\n\r\n    if(!mostAskedTopicsByTD || !mostAskedTopicsTotal) return null;\r\n\r\n\r\nfunction coloredByPartyWithMostUniqueTDContributionsToTopic(topic) {\r\n\r\nfunction getUniqueTDTopicContributionOfParty(party) {\r\n\r\n\r\n    // var listToCheck = topicWrittenByTD()\r\n\r\n    var justPartyJustQuestion = TDData.filter(d => d.party == party).filter(d => d.writtenQuestions[0].writtenQuestions.topic != undefined)\r\n\r\n    var testMostByParty = justPartyJustQuestion.map(d => d.writtenQuestions[0].writtenQuestions.topic)\r\n\r\n    var sumTestParty = testMostByParty.map(d => Object.entries(d)).flat()\r\n\r\n    var sumTestPartyFlat = sumTestParty.map(function(d) {\r\n        return d[0]\r\n    })\r\n\r\n    const mapAskedTopicsTD = sumTestPartyFlat.reduce((acc, e) => acc.set(e, (acc.get(e) || 0) + 1), new Map())\r\n\r\n    var toSortAskedTopicsTD = [...mapAskedTopicsTD.entries()]\r\n\r\n    toSortAskedTopicsTD.sort(function(a, b) {\r\n        return  b[1]-a[1]\r\n     })\r\n\r\n    return toSortAskedTopicsTD\r\n\r\n}\r\n\r\nfunction whichPartyHasMostUniqueContributionsToTopicByTD() {\r\n\r\n    const parties = [\"Aontú\", \"Independents\", \"Green Party\", \"Labour\", \"Fianna Fáil\", \"Fine Gael\", \"Social Democrats\", \"People Before Profit\", \"Independents 4 Change\", \"Sinn Féin\"];\r\n\r\n    var holderArr = []\r\n\r\n    for(let i = 0; i < parties.length; i++) {\r\n\r\n    var holder = getUniqueTDTopicContributionOfParty(parties[i])\r\n\r\n    holderArr.push({party: parties[i], holder})\r\n\r\n    }\r\n\r\n    return holderArr\r\n\r\n}\r\n\r\nfunction partyWithMostUniqueTDContributionsToTopic(topic) {\r\n\r\n    var partySortedContributions = whichPartyHasMostUniqueContributionsToTopicByTD() \r\n\r\n    var holder = []\r\n\r\n\r\n    for(let i = 0; i < partySortedContributions.length; i++) {\r\n\r\n        var test = partySortedContributions[i].holder.map(function(d) {\r\n            if(d[0] === topic) {\r\n                return d\r\n            }\r\n        }).filter(d => d != undefined)\r\n\r\n\r\n        holder.push({party: partySortedContributions[i].party, test})\r\n\r\n\r\n    }\r\n\r\n    var filterEmpty = holder.filter(d => d.test.length != 0)\r\n\r\n    var sorted = filterEmpty.sort((a, b) => b.test[0][1] - a.test[0][1])\r\n\r\n    var most = sorted[0]\r\n\r\n    if(sorted.length > 1) {\r\n        most = sorted[0]\r\n    }\r\n\r\n    const party = d => d.party\r\n\r\n    return partyColors[party(most)]\r\n\r\n}\r\n\r\nreturn partyWithMostUniqueTDContributionsToTopic(topic)\r\n\r\n}\r\n\r\nfunction coloredByPartyWithMostContributionsToTopic(topic) { \r\n\r\nfunction getTotalContributionOfPartyToTopic(party) {\r\n\r\n\r\n    // var listToCheck = topicWrittenByTD()\r\n\r\n    var justPartyJustQuestion = TDData.filter(d => d.party == party).filter(d => d.writtenQuestions[0].writtenQuestions.topic != undefined)\r\n\r\n    var testMostByParty = justPartyJustQuestion.map(d => d.writtenQuestions[0].writtenQuestions.topic)\r\n\r\n    var sumTestParty = testMostByParty.map(d => Object.entries(d)).flat()\r\n\r\n    var sumTestPartyFlat = sumTestParty.map(function(d) {\r\n        return d\r\n    })\r\n\r\n    const mapAskedTopicsTD = sumTestPartyFlat.reduce((acc, e) => acc.set(e[0], (acc.get(e[0]) || 0) + e[1]), new Map())\r\n\r\n    var toSortAskedTopicsTD = [...mapAskedTopicsTD.entries()]\r\n\r\n    toSortAskedTopicsTD.sort(function(a, b) {\r\n        return  b[1]-a[1]\r\n     })\r\n\r\n    return toSortAskedTopicsTD\r\n\r\n}\r\n\r\nfunction whichPartyHasMostTotalContributionsToTopic() {\r\n\r\n    const parties = [\"Aontú\", \"Independents\", \"Green Party\", \"Labour\", \"Fianna Fáil\", \"Fine Gael\", \"Social Democrats\", \"People Before Profit\", \"Independents 4 Change\", \"Sinn Féin\"];\r\n\r\n    var holderArr = []\r\n\r\n    for(let i = 0; i < parties.length; i++) {\r\n\r\n    var holder = getTotalContributionOfPartyToTopic(parties[i])\r\n\r\n    holderArr.push({party: parties[i], holder})\r\n\r\n    }\r\n\r\n    return holderArr\r\n\r\n}\r\n\r\nfunction partyWithMostTotalContributionsToTopic(topic) {\r\n\r\n    var partySortedContributions = whichPartyHasMostTotalContributionsToTopic() \r\n\r\n    var holder = []\r\n\r\n    for(let i = 0; i < partySortedContributions.length; i++) {\r\n\r\n        var test = partySortedContributions[i].holder.map(function(d) {\r\n            if(d[0] == topic) {\r\n                return d\r\n            }\r\n        }).filter(d => d != undefined)\r\n\r\n\r\n        holder.push({party: partySortedContributions[i].party, test})\r\n\r\n\r\n    }\r\n\r\n    var filterEmpty = holder.filter(d => d.test.length != 0)\r\n\r\n    var sorted = filterEmpty.sort((a, b) => b.test[0][1] - a.test[0][1])\r\n\r\n    var most = sorted[0]\r\n\r\n    if(sorted.length > 1) {\r\n        most = sorted[1]\r\n    }\r\n\r\n    const party = d => d.party\r\n\r\n    return partyColors[party(most)]\r\n\r\n}\r\n\r\nreturn partyWithMostTotalContributionsToTopic(topic)\r\n\r\n}\r\n\r\nfunction coloredByPartyWithMostUniqueTDContributionsToMinister(minister) {\r\n\r\n    function getUniqueTDMinisterContributionOfParty(party) {\r\n    \r\n    \r\n        // var listToCheck = topicWrittenByTD()\r\n    \r\n        var justPartyJustQuestion = TDData.filter(d => d.party == party).filter(d => d.writtenQuestions[0].writtenQuestions.to != undefined)\r\n    \r\n        var testMostByParty = justPartyJustQuestion.map(d => d.writtenQuestions[0].writtenQuestions.to)\r\n    \r\n        var sumTestParty = testMostByParty.map(d => Object.entries(d)).flat()\r\n    \r\n        var sumTestPartyFlat = sumTestParty.map(function(d) {\r\n            return d[0]\r\n        })\r\n    \r\n        const mapAskedTopicsTD = sumTestPartyFlat.reduce((acc, e) => acc.set(e, (acc.get(e) || 0) + 1), new Map())\r\n    \r\n        var toSortAskedTopicsTD = [...mapAskedTopicsTD.entries()]\r\n    \r\n        toSortAskedTopicsTD.sort(function(a, b) {\r\n            return  b[1]-a[1]\r\n         })\r\n    \r\n        return toSortAskedTopicsTD\r\n    \r\n    }\r\n    \r\n    function whichPartyHasMostUniqueContributionsToMinisterByTD() {\r\n    \r\n        const parties = [\"Aontú\", \"Independents\", \"Green Party\", \"Labour\", \"Fianna Fáil\", \"Fine Gael\", \"Social Democrats\", \"People Before Profit\", \"Independents 4 Change\", \"Sinn Féin\"];\r\n    \r\n        var holderArr = []\r\n    \r\n        for(let i = 0; i < parties.length; i++) {\r\n    \r\n        var holder = getUniqueTDMinisterContributionOfParty(parties[i])\r\n    \r\n        holderArr.push({party: parties[i], holder})\r\n    \r\n        }\r\n    \r\n        return holderArr\r\n    \r\n    }\r\n    \r\n    function partyWithMostUniqueTDContributionsToMinister(minister) {\r\n    \r\n        var partySortedContributions = whichPartyHasMostUniqueContributionsToMinisterByTD() \r\n    \r\n        var holder = []\r\n    \r\n    \r\n        for(let i = 0; i < partySortedContributions.length; i++) {\r\n    \r\n            var test = partySortedContributions[i].holder.map(function(d) {\r\n                if(d[0] === minister) {\r\n                    return d\r\n                }\r\n            }).filter(d => d != undefined)\r\n    \r\n    \r\n            holder.push({party: partySortedContributions[i].party, test})\r\n    \r\n    \r\n        }\r\n    \r\n        var filterEmpty = holder.filter(d => d.test.length != 0)\r\n    \r\n        var sorted = filterEmpty.sort((a, b) => b.test[0][1] - a.test[0][1])\r\n    \r\n        var most = sorted[0]\r\n    \r\n        if(sorted.length > 1) {\r\n            most = sorted[0]\r\n        }\r\n    \r\n        const party = d => d.party\r\n    \r\n        return partyColors[party(most)]\r\n    \r\n    }\r\n    \r\n    // return partyWithMostUniqueTDContributionsToMinister(minister)\r\n\r\n    return partyWithMostUniqueTDContributionsToMinister(minister)\r\n    \r\n    }\r\n\r\n\r\n    console.log(coloredByPartyWithMostUniqueTDContributionsToMinister(\"Taoiseach\"))\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    const dataOptionArr = [mostAskedTopicsByTD, mostAskedTopicsTotal, mostAskedToByTD, mostAskedToTotal]\r\n\r\n    console.log(dataOptionArr[dataOption])\r\n\r\n    const xValue = d => d[0]\r\n    const yValue = d => d[1]\r\n    const color = d => coloredByPartyWithMostUniqueTDContributionsToMinister(d[0])\r\n\r\n\r\n    const xScale = d3.scaleBand()\r\n    .domain(dataOptionArr[dataOption].map(xValue))\r\n    .range([0, width])\r\n    .padding(0.2)\r\n\r\n    const svg = d3.select(svgRef.current);\r\n\r\nconst yScale = d3.scaleLinear()\r\n.domain([0, d3.max(dataOptionArr[dataOption], yValue)])\r\n.range([height, 0]);\r\n\r\n\r\n\r\nconsole.log(yValue)\r\n\r\nconst xAxis = d3.axisBottom(xScale).ticks(dataOptionArr[dataOption].length)\r\n\r\nsvg\r\n.select(\".x-axis-issues-bar\")\r\n.attr(\"transform\", \"translate(0,\" + 600 + \")\")\r\n.transition(2000)\r\n.call(xAxis)\r\n.selectAll(\"text\")  \r\n.style(\"text-anchor\", \"end\")\r\n.attr(\"dx\", \"-.8em\")\r\n.attr(\"dy\", \".15em\")\r\n.attr(\"transform\", \"rotate(-25)\");\r\n\r\n\r\nconst yAxis = d3.axisLeft(yScale);\r\n\r\nsvg\r\n.select(\".y-axis-issues-bar\")\r\n.attr(\"transform\", \"translate(0,0)\")\r\n.style(\"color\", \"white\")\r\n.transition(500)\r\n.call(yAxis)\r\n\r\n\r\n\r\nconst tooltip = d3\r\n.select('body')\r\n.append('div')\r\n.attr('class', 'd3-tooltip')\r\n.style('position', 'absolute')\r\n.style('z-index', '10')\r\n.style('visibility', 'hidden')\r\n.style('padding', '10px')\r\n.style('background', 'rgba(0,0,0,0.6)')\r\n.style('border-radius', '4px')\r\n.style('color', '#fff')\r\n.text('a simple tooltip');\r\n\r\n\r\nvar rects = d3.select(\"#container-topics\")\r\n.selectAll(\".bar\")\r\n.data(dataOptionArr[dataOption])\r\n.join(\"rect\")\r\n.attr(\"class\", \"bar\")\r\n\r\nrects.transition()\r\n.duration(400)\r\n.attr(\"x\", d => xScale(xValue(d)))\r\n.attr(\"y\", d => yScale(yValue(d)))\r\n.attr(\"width\", xScale.bandwidth())\r\n.attr(\"height\", d => 600 - yScale(yValue(d)))\r\n.attr(\"fill\", color)\r\n\r\n\r\nconst hoverColor = \"#eec42d\"\r\n\r\n\r\nrects\r\n.on('mouseover', function (d, i) {\r\ntooltip\r\n.html(\r\n    `<div>${tooltipData1[dataOption]}: ${d[0]}</div> <div>${tooltipData[dataOption]}: ${d[1].toLocaleString()}</div>`\r\n)\r\n    .style('visibility', 'visible');\r\n    d3.select(this).transition().attr('fill', hoverColor);\r\n})\r\n.on('mousemove', function () {\r\n    tooltip\r\n    .style('top', d3.event.pageY - 10 + 'px')\r\n    .style('left', d3.event.pageX + 10 + 'px');\r\n})\r\n.on('mouseout', function () {\r\n    tooltip.html(``).style('visibility', 'hidden');\r\n    d3.select(this).transition().attr('fill', color);\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\n}, [mostAskedTopicsByTD, mostAskedTopicsTotal, mostAskedToByTD, mostAskedToTotal, dataOption])\r\n\r\nif(!TDData || !totalQuestions ||!oralQuestions || !writtenQuestions || !mostAskedTopicsByTD || !mostAskedTopicsTotal ||!mostAskedToByTD ||!mostAskedToTotal) return null;\r\n\r\n    return (\r\n        <div className=\"featuredItem\" style={{textAlign: \"center\"}}>\r\n            <Typography variant=\"h5\">Questions Asked</Typography>\r\n\r\n\r\n            <p>Between 01/07/21 and 30/07/01:</p> \r\n\r\n            <ul>\r\n                <li>\r\n                {writtenQuestions.toLocaleString()} written, and {oralQuestions.toLocaleString()} oral questions were asked.\r\n                </li>\r\n                <li>\r\n\r\n                </li>\r\n                </ul>\r\n\r\n    <TopicsBarChart data={TDData}/>\r\n    <MinisterQuestionsBarChart data={TDData}/>\r\n\r\n        </div>\r\n        \r\n\r\n    )\r\n}\r\n\r\nexport default Issues\r\n","import { arrayOf, shape, string, date as dateProp, number } from \"prop-types\";\r\n\r\nexport const MultiLineDataItemsPropTypes = arrayOf(\r\n  shape({\r\n    date: dateProp,\r\n    change: number,\r\n    polarity: number\r\n  })\r\n);\r\n\r\nexport const MultiLineDataPropTypes = arrayOf(\r\n  shape({\r\n    name: string,\r\n    items: MultiLineDataItemsPropTypes,\r\n    color: string\r\n  })\r\n);\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Line = ({\r\n  xScale,\r\n  yScale,\r\n  color,\r\n  data,\r\n  isSmooth,\r\n  animation,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  // Define different types of animation that we can use\r\n  const animateLeft = React.useCallback(() => {\r\n    // NOTE: for some reason getTotalLength() doesn't work in tests\r\n    // in this codesandbox so we added default value just for tests\r\n    const totalLength = ref.current.getTotalLength\r\n      ? ref.current.getTotalLength()\r\n      : 500;\r\n    d3.select(ref.current)\r\n      .attr(\"opacity\", 1)\r\n      .attr(\"stroke-dasharray\", `${totalLength},${totalLength}`)\r\n      .attr(\"stroke-dashoffset\", totalLength)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeLinear)\r\n      .attr(\"stroke-dashoffset\", 0);\r\n  }, []);\r\n  const animateFadeIn = React.useCallback(() => {\r\n    d3.select(ref.current)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeLinear)\r\n      .attr(\"opacity\", 1);\r\n  }, []);\r\n  const noneAnimation = React.useCallback(() => {\r\n    d3.select(ref.current).attr(\"opacity\", 1);\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    switch (animation) {\r\n      case \"left\":\r\n        animateLeft();\r\n        break;\r\n      case \"fadeIn\":\r\n        animateFadeIn();\r\n        break;\r\n      case \"none\":\r\n      default:\r\n        noneAnimation();\r\n        break;\r\n    }\r\n  }, [animateLeft, animateFadeIn, noneAnimation, animation]);\r\n\r\n  // Recalculate line length if scale has changed\r\n  React.useEffect(() => {\r\n    if (animation === \"left\") {\r\n      const totalLength = ref.current.getTotalLength\r\n        ? ref.current.getTotalLength()\r\n        : 500;\r\n      d3.select(ref.current).attr(\r\n        \"stroke-dasharray\",\r\n        `${totalLength},${totalLength}`\r\n      );\r\n    }\r\n  }, [xScale, yScale, animation]);\r\n\r\n  const line = d3\r\n    .line()\r\n    .x((d) => xScale(d.date))\r\n    .y((d) => yScale(d.polarity));\r\n\r\n  const d = line(data);\r\n\r\n  return (\r\n    <path\r\n      ref={ref}\r\n      d={d?.match(/NaN|undefined/) ? \"\" : d}\r\n      stroke={color}\r\n      strokeWidth={3}\r\n      fill=\"none\"\r\n      opacity={0}\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n\r\nLine.propTypes = {\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  data: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      date: PropTypes.date,\r\n      change: PropTypes.number\r\n    })\r\n  ),\r\n  color: PropTypes.string,\r\n  isSmooth: PropTypes.bool,\r\n  animation: PropTypes.oneOf([\"left\", \"fadeIn\", \"none\"])\r\n};\r\n\r\nLine.defaultProps = {\r\n  data: [],\r\n  color: \"white\",\r\n  isSmooth: false,\r\n  animation: \"left\"\r\n};\r\n\r\nexport default Line;\r\n","/** Area.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Area = ({ xScale, yScale, color, data, disableAnimation, ...props }) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    if (disableAnimation) {\r\n      d3.select(ref.current).attr(\"opacity\", 1);\r\n      return;\r\n    }\r\n    d3.select(ref.current)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeBackIn)\r\n      .attr(\"opacity\", 1);\r\n  }, [disableAnimation]);\r\n\r\n  const d = React.useMemo(() => {\r\n    const area = d3\r\n      .area()\r\n      .x(({ date }) => xScale(date))\r\n      .y1(({polarity }) => yScale(polarity))\r\n      .y0(({polarity}) => {\r\n\r\n        \r\n\r\n        return yScale(polarity * 0.95)\r\n      }\r\n      \r\n      \r\n      \r\n      \r\n       )\r\n      // .y0(() => yScale(yScale.domain()[0]));\r\n    return area(data);\r\n  }, [xScale, yScale, data]);\r\n\r\n  return (\r\n    <>\r\n      <path\r\n        ref={ref}\r\n        d={d}\r\n        fill={`url(#gradient-${color})`}\r\n        opacity={0}\r\n        {...props}\r\n      />\r\n      <defs>\r\n        <linearGradient\r\n          id={`gradient-${color}`}\r\n          x1=\"0%\"\r\n          x2=\"0%\"\r\n          y1=\"0%\"\r\n          y2=\"100%\"\r\n        >\r\n          <stop offset=\"0%\" stopColor={color} stopOpacity={0.5} />\r\n          <stop offset=\"100%\" stopColor={color} stopOpacity={0.5} />\r\n        </linearGradient>\r\n      </defs>\r\n    </>\r\n  );\r\n};\r\n\r\nArea.propTypes = {\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  data: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      date: PropTypes.date,\r\n      retweets: PropTypes.number\r\n    })\r\n  ),\r\n  color: PropTypes.string,\r\n  disableAnimation: PropTypes.bool\r\n};\r\n\r\nArea.defaultProps = {\r\n  data: [],\r\n  color: \"white\",\r\n  disableAnimation: false\r\n};\r\n\r\nexport default Area;\r\n","/** AxisX.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Axis = ({\r\n  type,\r\n  scale,\r\n  ticks,\r\n  transform,\r\n  tickFormat,\r\n  disableAnimation,\r\n  anchorEl,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    const axisGenerator = type === \"left\" ? d3.axisRight : d3.axisBottom;\r\n    const axis = axisGenerator(scale).ticks(ticks).tickFormat(tickFormat);\r\n    const axisGroup = d3.select(ref.current);\r\n    if (disableAnimation) {\r\n      axisGroup.call(axis);\r\n    } else {\r\n      axisGroup.transition().duration(750).ease(d3.easeLinear).call(axis);\r\n    }\r\n    axisGroup.select(\".domain\").remove();\r\n    axisGroup.selectAll(\"line\").remove();\r\n    axisGroup\r\n      .selectAll(\"text\")\r\n      .attr(\"opacity\", 0.5)\r\n      .attr(\"color\", \"white\")\r\n      .attr(\"font-size\", \"0.75rem\");\r\n  }, [scale, ticks, tickFormat, disableAnimation]);\r\n\r\n  React.useEffect(() => {\r\n    d3.select(anchorEl)\r\n      .on(\"mouseout.axisX\", () => {\r\n        d3.select(ref.current)\r\n          .selectAll(\"text\")\r\n          .attr(\"opacity\", 0.5)\r\n          .style(\"font-weight\", \"normal\");\r\n      })\r\n      .on(\"mousemove.axisX\", () => {\r\n        const [x] = d3.mouse(anchorEl);\r\n        const xDate = scale.invert(x);\r\n        const textElements = d3.select(ref.current).selectAll(\"text\");\r\n        const data = textElements.data();\r\n        const index = d3.bisector((d) => d).left(data, xDate);\r\n        textElements\r\n          .attr(\"opacity\", (d, i) => (i === index - 1 ? 1 : 0.5))\r\n          .style(\"font-weight\", (d, i) =>\r\n            i === index - 1 ? \"bold\" : \"normal\"\r\n          );\r\n      });\r\n  }, [anchorEl, scale]);\r\n\r\n  return <g ref={ref} transform={transform} {...props} />;\r\n};\r\n\r\nAxis.propTypes = {\r\n  type: PropTypes.oneOf([\"left\", \"bottom\"]).isRequired,\r\n  scale: PropTypes.func.isRequired,\r\n  ticks: PropTypes.oneOfType([PropTypes.number, PropTypes.func]),\r\n  tickFormat: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\r\n  transform: PropTypes.string,\r\n  disableAnimation: PropTypes.bool,\r\n  anchorEl: PropTypes.instanceOf(Element)\r\n};\r\n\r\nAxis.defaultProps = {\r\n  ticks: 0,\r\n  tickFormat: null,\r\n  transform: \"\",\r\n  disableAnimation: false,\r\n  anchorEl: null\r\n};\r\n\r\nexport default Axis;\r\n","/** GridLine.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst GridLine = ({\r\n  type,\r\n  scale,\r\n  ticks,\r\n  size,\r\n  transform,\r\n  disableAnimation,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    const axisGenerator = type === \"vertical\" ? d3.axisBottom : d3.axisLeft;\r\n    const axis = axisGenerator(scale).ticks(ticks).tickSize(-size);\r\n\r\n    const gridGroup = d3.select(ref.current);\r\n    if (disableAnimation) {\r\n      gridGroup.call(axis);\r\n    } else {\r\n      gridGroup.transition().duration(750).ease(d3.easeLinear).call(axis);\r\n    }\r\n    gridGroup.select(\".domain\").remove();\r\n    gridGroup.selectAll(\"text\").remove();\r\n    gridGroup.selectAll(\"line\").attr(\"stroke\", \"rgba(255, 255, 255, 0.1)\");\r\n  }, [scale, ticks, size, disableAnimation]);\r\n\r\n  return <g ref={ref} transform={transform} {...props} />;\r\n};\r\n\r\nGridLine.propTypes = {\r\n  scale: PropTypes.func.isRequired,\r\n  type: PropTypes.oneOf([\"vertical\", \"horizontal\"]).isRequired,\r\n  ticks: PropTypes.oneOfType([PropTypes.number, PropTypes.func]),\r\n  transform: PropTypes.string,\r\n  size: PropTypes.number,\r\n  disableAnimation: PropTypes.bool\r\n};\r\n\r\nGridLine.defaultProps = {\r\n  ticks: 0,\r\n  transform: \"\",\r\n  size: 0,\r\n  disableAnimation: false\r\n};\r\n\r\nexport default GridLine;\r\n","/** Overlay.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\n/**\r\n * Use Overlay as a wrapper for components that need mouse events to be handled.\r\n * For example: Tooltip, AxisX.\r\n */\r\nconst Overlay = React.forwardRef(({ width, height, children }, ref) => (\r\n  <g>\r\n    {children}\r\n    <rect ref={ref} width={width} height={height} opacity={0} />\r\n  </g>\r\n));\r\n\r\nOverlay.propTypes = {\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired,\r\n  children: PropTypes.node.isRequired\r\n};\r\n\r\nexport default Overlay;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\nimport { MultiLineDataPropTypes } from \"../utils/propTypes\";\r\nimport {formatPercent } from \"../utils/commonUtils\"\r\n// import { formatPercent, formatPriceUSD } from \"../utils/commonUtils\";\r\n\r\nconst Tooltip = ({\r\n  xScale,\r\n  yScale,\r\n  width,\r\n  height,\r\n  data,\r\n  margin,\r\n  anchorEl,\r\n  children,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  const drawLine = React.useCallback(\r\n    (x) => {\r\n      d3.select(ref.current)\r\n        .select(\".tooltipLine\")\r\n        .attr(\"x1\", x)\r\n        .attr(\"x2\", x)\r\n        .attr(\"y1\", -margin.top)\r\n        .attr(\"y2\", height);\r\n    },\r\n    [ref, height, margin]\r\n  );\r\n\r\n  const drawContent = React.useCallback(\r\n    (x) => {\r\n      const tooltipContent = d3.select(ref.current).select(\".tooltipContent\");\r\n      tooltipContent.attr(\"transform\", (cur, i, nodes) => {\r\n        const nodeWidth = nodes[i]?.getBoundingClientRect()?.width || 0;\r\n        const translateX = nodeWidth + x > width ? x - nodeWidth - 12 : x + 8;\r\n        return `translate(${translateX}, ${-margin.top})`;\r\n      });\r\n      tooltipContent\r\n        .select(\".contentTitle\")\r\n        .text(d3.timeFormat(\"%b %d, %Y\")(xScale.invert(x)));\r\n    },\r\n    [xScale, margin, width]\r\n  );\r\n\r\n  const drawBackground = React.useCallback(() => {\r\n    // reset background size to defaults\r\n    const contentBackground = d3\r\n      .select(ref.current)\r\n      .select(\".contentBackground\");\r\n    contentBackground.attr(\"width\", 125).attr(\"height\", 40);\r\n\r\n    // calculate new background size\r\n    const tooltipContentElement = d3\r\n      .select(ref.current)\r\n      .select(\".tooltipContent\")\r\n      .node();\r\n    if (!tooltipContentElement) return;\r\n\r\n    const contentSize = tooltipContentElement.getBoundingClientRect();\r\n    contentBackground\r\n      .attr(\"width\", contentSize.width + 8)\r\n      .attr(\"height\", contentSize.height + 4);\r\n  }, []);\r\n\r\n  const onChangePosition = React.useCallback((d, i, isVisible) => {\r\n    d3.selectAll(\".performanceItemChangePolarity\")\r\n      .filter((td, tIndex) => tIndex === i)\r\n      .text(isVisible ? formatPercent(d.change) : \"\");\r\n\r\n    d3.selectAll(\".performanceItemPolarity\")\r\n      .filter((td, tIndex) => tIndex === i)\r\n      .text(\r\n        d.polarity.toLocaleString() && !isVisible ? \"No data\" : d.polarity.toLocaleString()\r\n      );\r\n       // .text(\r\n      //   d.marketvalue && !isVisible ? \"No data\" : formatPriceUSD(d.marketvalue)\r\n      // );\r\n\r\n    const maxNameWidth = d3.max(\r\n      d3.selectAll(\".performanceItemName\").nodes(),\r\n      (node) => node.getBoundingClientRect().width\r\n    );\r\n    d3.selectAll(\".performanceItemChangePolarity\").attr(\r\n      \"transform\",\r\n      (datum, index, nodes) =>\r\n        `translate(${\r\n          nodes[index].previousSibling.getBoundingClientRect().width + 14\r\n        },4)`\r\n    );\r\n\r\n    d3.selectAll(\".performanceItemPolarity\").attr(\r\n      \"transform\",\r\n      `translate(${maxNameWidth + 60},4)`\r\n    );\r\n  }, []);\r\n\r\n  const followPoints = React.useCallback(() => {\r\n    const [x] = d3.mouse(anchorEl);\r\n    const xDate = xScale.invert(x);\r\n    const bisectDate = d3.bisector((d) => d.date).left;\r\n    let baseXPos = 0;\r\n\r\n    // draw circles on line\r\n    d3.select(ref.current)\r\n      .selectAll(\".tooltipLinePoint\")\r\n      .attr(\"transform\", (cur, i) => {\r\n        const index = bisectDate(data[i].items, xDate, 1);\r\n        const d0 = data[i].items[index - 1];\r\n        const d1 = data[i].items[index];\r\n        const d = xDate - d0?.date > d1?.date - xDate ? d1 : d0;\r\n        if (d.date === undefined && d.polarity === undefined) {\r\n          // move point out of container\r\n          return \"translate(-100,-100)\";\r\n        }\r\n        const xPos = xScale(d.date);\r\n        if (i === 0) {\r\n          baseXPos = xPos;\r\n        }\r\n\r\n        let isVisible = true;\r\n        if (xPos !== baseXPos) {\r\n          isVisible = false;\r\n        }\r\n        const yPos = yScale(d.polarity);\r\n\r\n        onChangePosition(d, i, isVisible);\r\n\r\n        return isVisible\r\n          ? `translate(${xPos}, ${yPos})`\r\n          : \"translate(-100,-100)\";\r\n      });\r\n\r\n    drawLine(baseXPos);\r\n    drawContent(baseXPos);\r\n    drawBackground();\r\n  }, [\r\n    anchorEl,\r\n    drawLine,\r\n    drawContent,\r\n    drawBackground,\r\n    xScale,\r\n    yScale,\r\n    data,\r\n    onChangePosition\r\n  ]);\r\n\r\n  React.useEffect(() => {\r\n    d3.select(anchorEl)\r\n      .on(\"mouseout.tooltip\", () => {\r\n        d3.select(ref.current).attr(\"opacity\", 0);\r\n      })\r\n      .on(\"mouseover.tooltip\", () => {\r\n        d3.select(ref.current).attr(\"opacity\", 1);\r\n      })\r\n      .on(\"mousemove.tooltip\", () => {\r\n        d3.select(ref.current)\r\n          .selectAll(\".tooltipLinePoint\")\r\n          .attr(\"opacity\", 1);\r\n        followPoints();\r\n      });\r\n  }, [anchorEl, followPoints]);\r\n\r\n  if (!data.length) return null;\r\n\r\n  return (\r\n    <g ref={ref} opacity={0} {...props}>\r\n      <line className=\"tooltipLine\" />\r\n      <g className=\"tooltipContent\">\r\n        <rect className=\"contentBackground\" rx={4} ry={4} opacity={0.2} />\r\n        <text className=\"contentTitle\" transform=\"translate(4,14)\" />\r\n        <g className=\"content\" transform=\"translate(4,32)\">\r\n          {data.map(({ name, color }, i) => (\r\n            <g key={name} transform={`translate(6,${22 * i})`}>\r\n              <circle r={6} fill={color} />\r\n              <text className=\"performanceItemName\" transform=\"translate(10,4)\">\r\n                {name}\r\n              </text>\r\n              <text\r\n                className=\"performanceItemChangePolarity\"\r\n                opacity={0.5}\r\n                fontSize={10}\r\n              />\r\n              <text className=\"performanceItemPolarity\" />\r\n            </g>\r\n          ))}\r\n        </g>\r\n      </g>\r\n      {data.map(({ name }) => (\r\n        <circle className=\"tooltipLinePoint\" r={6} key={name} opacity={0} />\r\n      ))}\r\n    </g>\r\n  );\r\n};\r\n\r\nTooltip.propTypes = {\r\n  width: PropTypes.number,\r\n  height: PropTypes.number,\r\n  margin: PropTypes.shape({\r\n    top: PropTypes.number,\r\n    bottom: PropTypes.number,\r\n    left: PropTypes.number,\r\n    right: PropTypes.number\r\n  }),\r\n  data: MultiLineDataPropTypes,\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  anchorEl: PropTypes.instanceOf(Element)\r\n};\r\n\r\nTooltip.defaultProps = {\r\n  width: 0,\r\n  height: 0,\r\n  margin: {\r\n    top: 0,\r\n    bottom: 0,\r\n    left: 0,\r\n    right: 0\r\n  },\r\n  data: [],\r\n  anchorEl: null\r\n};\r\n\r\nexport default Tooltip;\r\n","/* eslint-disable no-bitwise */\r\nimport * as d3 from \"d3\";\r\nimport { DateTime, Interval } from \"luxon\";\r\n\r\n// export const formatPriceUSD = (price) =>\r\n//   new Intl.NumberFormat(\"en-US\", { style: \"currency\", currency: \"USD\" }).format(\r\n//     price\r\n//   );\r\n\r\nexport const formatPercent = (percent = 0) => {\r\n  let result = \"0.00%\";\r\n  const isNumber = typeof percent === \"number\";\r\n  const isString = typeof percent === \"string\";\r\n  const isNotNaN = !Number.isNaN(parseFloat(percent));\r\n\r\n  if ((isNumber || isString) && isNotNaN) {\r\n    result = `${parseFloat(percent) > 0 ? \"+\" : \"\"}${d3.format(\".2%\")(\r\n      percent / 100\r\n    )}`;\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const getPeriod = (date) => {\r\n  if (!date) return 6;\r\n  const now = DateTime.utc();\r\n  const before = DateTime.fromJSDate(date);\r\n  const i = Interval.fromDateTimes(before, now);\r\n  return i.length(\"months\");\r\n};\r\n\r\nexport const getXTicks = (months) => {\r\n  if (months <= 2) return d3.timeDay.every(5).filter((d) => d.getDate() !== 31);\r\n  if (months <= 6) return d3.timeMonth.every(1);\r\n  if (months <= 13) return d3.timeMonth.every(2);\r\n  return d3.timeYear.every(1);\r\n};\r\n\r\nexport const getXTickFormat = (months) => {\r\n  if (months <= 2) return d3.timeFormat(\"%d %b\");\r\n  if (months <= 6) return d3.timeFormat(\"%b\");\r\n  if (months <= 13) return d3.timeFormat(\"%b %Y\");\r\n  return d3.timeFormat(\"%Y\");\r\n};\r\n","/** MultilineChart.controller.js */\r\nimport { useMemo } from \"react\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst useController = ({ data, width, height }) => {\r\n  const xMin = useMemo(\r\n    () => d3.min(data, ({ items }) => d3.min(items, ({ date }) => date)),\r\n    [data]\r\n  );\r\n\r\n  const xMax = useMemo(\r\n    () => d3.max(data, ({ items }) => d3.max(items, ({ date }) => date)),\r\n    [data]\r\n  );\r\n\r\n  const xScale = useMemo(\r\n    () => d3.scaleTime().domain([xMin, xMax]).range([0, width]),\r\n    [xMin, xMax, width]\r\n  );\r\n\r\n  const yMin = useMemo(\r\n    () => d3.min(data, ({ items }) => d3.min(items, ({ polarity }) => polarity)),\r\n    [data]\r\n  );\r\n\r\n  const yMax = useMemo(\r\n    () => d3.max(data, ({ items }) => d3.max(items, ({polarity}) => polarity)),\r\n    [data]\r\n  );\r\n\r\n  const yScale = useMemo(() => {\r\n    const indention = (yMax - yMin) * 0.5;\r\n    return d3\r\n      .scaleLinear()\r\n      .domain([yMin - indention, yMax + indention])\r\n      .range([height, 0]);\r\n  }, [height, yMin, yMax]);\r\n\r\n  const yScaleForAxis = useMemo(\r\n    () => d3.scaleBand().domain([yMin, yMax]).range([height, 0]),\r\n    [height, yMin, yMax]\r\n  );\r\n\r\n  const yTickFormat = (d) => {\r\n\r\n    return d\r\n    // `${parseFloat(d) > 0 ? \"+\" : \"\"}${d3.format(\".2%\")(d / 100)}`;\r\n  }\r\n  const xTickFormat = (d) => {\r\n    if (d3.timeFormat(\"%b\")(d) === \"Jan\") {\r\n      return d3.timeFormat(\"%Y\")(d);\r\n    }\r\n    return d3.timeFormat(\"%b\")(d);\r\n  };\r\n  return {\r\n    yTickFormat,\r\n    xScale,\r\n    yScale,\r\n    yScaleForAxis,\r\n    xTickFormat\r\n  };\r\n};\r\n\r\nexport default useController;\r\n","import React from 'react';\r\nimport ResizeObserver from 'resize-observer-polyfill';\r\n\r\n/**\r\n * Use ResizeObserver to listen for the changes to the dimensions of an element\r\n * @params ref - React ref\r\n * @returns {object} - { width, height, top, left }\r\n */\r\nconst useResize = (ref) => {\r\n  const [dimensions, setDimensions] = React.useState(null);\r\n  React.useEffect(() => {\r\n    const element = ref.current;\r\n    const resizeObserver = new ResizeObserver((entries) => {\r\n      entries.forEach((entry) => {\r\n        setDimensions(entry.contentRect);\r\n      });\r\n    });\r\n    resizeObserver.observe(element);\r\n    return () => {\r\n      resizeObserver.unobserve(element);\r\n    };\r\n  }, [ref]);\r\n  return dimensions || {\r\n    width: 0,\r\n    height: 0,\r\n    top: 0,\r\n    left: 0,\r\n  };\r\n};\r\n\r\nexport default useResize;\r\n","import React from \"react\";\r\nimport useResize from \"./useResize\";\r\n\r\nconst useDimensions = ({ maxHeight, margin = {}, scaleCoef = 0.5 }) => {\r\n  const ref = React.useRef(null);\r\n  const { width } = useResize(ref);\r\n\r\n  const height =\r\n    !maxHeight || width * scaleCoef < maxHeight ? width * scaleCoef : maxHeight;\r\n  const innerWidth = width - (margin.left || 0) - (margin.right || 0);\r\n  const innerHeight = height - (margin.top || 0) - (margin.bottom || 0);\r\n\r\n  return [\r\n    ref,\r\n    {\r\n      svgWidth: width,\r\n      svgHeight: height,\r\n      width: innerWidth,\r\n      height: innerHeight\r\n    }\r\n  ];\r\n};\r\n\r\nexport default useDimensions;\r\n","/** MultilineChart.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { MultiLineDataPropTypes } from \"../utils/propTypes\";\r\nimport { Line, Axis, GridLine, Overlay, Tooltip, Area } from \"../components\";\r\nimport useController from \"./MultilineChart.controller\";\r\nimport useDimensions from \"../utils/useDimensions\";\r\n\r\nconst MultilineChart = ({ data = [], margin = {} }) => {\r\n  const overlayRef = React.useRef(null);\r\n  const [containerRef, { svgWidth, svgHeight, width, height }] = useDimensions({\r\n    maxHeight: 400,\r\n    margin\r\n  });\r\n  const controller = useController({ data, width, height });\r\n  const {\r\n    yTickFormat,\r\n    xTickFormat,\r\n    xScale,\r\n    yScale,\r\n    yScaleForAxis\r\n  } = controller;\r\n\r\n  return (\r\n    <div ref={containerRef}>\r\n      <svg width={svgWidth} height={svgHeight}>\r\n        <g transform={`translate(${margin.left},${margin.top})`}>\r\n          <GridLine\r\n            type=\"vertical\"\r\n            scale={xScale}\r\n            ticks={5}\r\n            size={height}\r\n            transform={`translate(0, ${height})`}\r\n          />\r\n          <GridLine\r\n            type=\"horizontal\"\r\n            scale={yScaleForAxis}\r\n            ticks={2}\r\n            size={width}\r\n          />\r\n          <GridLine\r\n            type=\"horizontal\"\r\n            className=\"baseGridLine\"\r\n            scale={yScale}\r\n            ticks={1}\r\n            size={width}\r\n            disableAnimation\r\n          />\r\n          {data.map(({ name, items = [], color }) => (\r\n            <Line\r\n              key={name}\r\n              data={items}\r\n              xScale={xScale}\r\n              yScale={yScale}\r\n              color={color}\r\n            />\r\n          ))}\r\n          {/* <Area data={data[0].items} xScale={xScale} yScale={yScale} /> */}\r\n          <Axis\r\n            type=\"left\"\r\n            scale={yScaleForAxis}\r\n            transform=\"translate(0, -10)\"\r\n            ticks={5}\r\n            tickFormat={yTickFormat}\r\n          />\r\n          <Overlay ref={overlayRef} width={width} height={height}>\r\n            <Axis\r\n              type=\"bottom\"\r\n              className=\"axisX\"\r\n              anchorEl={overlayRef.current}\r\n              scale={xScale}\r\n              transform={`translate(10, ${height - height / 6})`}\r\n              ticks={5}\r\n              tickFormat={xTickFormat}\r\n            />\r\n            <Tooltip\r\n              className=\"tooltip\"\r\n              anchorEl={overlayRef.current}\r\n              width={width}\r\n              height={height}\r\n              margin={margin}\r\n              xScale={xScale}\r\n              yScale={yScale}\r\n              data={data}\r\n            />\r\n          </Overlay>\r\n        </g>\r\n      </svg>\r\n    </div>\r\n  );\r\n};\r\n\r\nMultilineChart.propTypes = {\r\n  data: MultiLineDataPropTypes,\r\n  margin: PropTypes.shape({\r\n    top: PropTypes.number,\r\n    bottom: PropTypes.number,\r\n    left: PropTypes.number,\r\n    right: PropTypes.number\r\n  })\r\n};\r\n\r\nMultilineChart.defaultProps = {\r\n  data: [],\r\n  margin: {\r\n    top: 30,\r\n    right: 15,\r\n    bottom: 15,\r\n    left: 15\r\n  }\r\n};\r\n\r\nexport default MultilineChart;\r\n","import React from \"react\";\r\nimport { FormControlLabel, Checkbox } from \"@material-ui/core\";\r\n\r\nconst Legend = ({ data, selectedItems, onChange }) => (\r\n  <div className=\"legendContainer\">\r\n    {data.map((d) => (\r\n      <div className=\"checkbox\" style={{ color: d.color }} key={d.name}>\r\n\r\n<FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: d.color}}\r\n            value={d.name}\r\n            onChange={() => onChange(d.name)}\r\n          />\r\n        }\r\n        label={d.name}\r\n\r\n        />\r\n      </div>\r\n    ))}\r\n  </div>\r\n);\r\n\r\nexport default Legend;\r\n","/** App.js */\r\nimport React, {useState, useEffect} from \"react\";\r\nimport MultilineChart from \"./views/MultilineChart\";\r\nimport Legend from \"./components/Legend\";\r\nimport \"./styles.css\";\r\nimport axios from \"axios\";\r\nimport { Typography } from \"@material-ui/core\";\r\n\r\n\r\n\r\n\r\n\r\nexport default function StreamGraphPolarity ({data}) {\r\n\r\n  const [selectedItems, setSelectedItems] = useState([]);\r\n  const [TDData, setTDData] = useState(null)\r\n  \r\n  \r\n  \r\n  useEffect(() => {\r\n\r\n    setTDData(data.filter(function(d) {\r\n          \r\n      if(d.followerData[0] != undefined) {\r\n      return d\r\n    }\r\n  }\r\n  ))\r\n  setSelectedItems([\"Dáil Most Negative\", \"Dáil Most Positive\", \"Dáil Average\"])\r\n}, []);\r\n\r\n\r\n\r\nconst onChangeSelection = (name) => {\r\n    const newSelectedItems = selectedItems.includes(name)\r\n      ? selectedItems.filter((item) => item !== name)\r\n      : [...selectedItems, name];\r\n    setSelectedItems(newSelectedItems);\r\n  };\r\n\r\n  \r\nif (!TDData) return null;\r\n\r\n\r\nfunction getDailMeanObj() {\r\n\r\n\r\n  let justTDsOnTwitter =TDData.filter(function(d) {\r\n              \r\n    if(d.sentimentData != undefined) {\r\n    return d\r\n  }\r\n}\r\n)\r\n\r\nlet totalPolarityArr = []\r\nlet averagePolarityArr = []\r\nlet dateArr = []\r\nlet changeArr = [0, ]\r\nlet dailMeanObjArr = []\r\n\r\nfor(let i = 0; i < justTDsOnTwitter[0].sentimentData.length; i ++) {\r\n\r\nlet holder = justTDsOnTwitter.map(d => d.sentimentData[i].polarity)\r\nlet total = holder.reduce(function(a, b) {\r\n  return a + b\r\n})\r\n\r\nlet averagePolarityCount = total / justTDsOnTwitter.length;\r\n\r\n\r\n\r\naveragePolarityArr.push(Number(averagePolarityCount.toFixed(3)))\r\n\r\n}\r\ndateArr = justTDsOnTwitter[0].sentimentData.map(d => d.date)\r\n\r\n\r\nfor(let i = 1; i < averagePolarityArr.length; i++) {\r\n\r\n\r\n  var lastWeek  = averagePolarityArr[i - 1]\r\n  var thisWeek = averagePolarityArr[i]\r\n  var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n  \r\n  //filter NaN at start\r\n\r\n  if(diff !== diff) {changeArr.push(0) } else {\r\n  changeArr.push(diff) \r\n  }\r\n}\r\n\r\nfor(let i = 0; i < justTDsOnTwitter[0].sentimentData.length; i++) {\r\n\r\n  function dailMeanObj() {\r\n\r\n    this.polarity = averagePolarityArr[i]\r\n    this.date = dateArr[i]\r\n    this.change = changeArr[i]\r\n  }\r\ndailMeanObjArr.push(new dailMeanObj)\r\n}\r\n\r\nreturn dailMeanObjArr\r\n\r\n\r\n}\r\n\r\nfunction getDailMostPositiveObj() {\r\n\r\n\r\n  let justTDsOnTwitter =TDData.filter(function(d) {\r\n              \r\n    if(d.sentimentData != undefined) {\r\n    return d\r\n  }\r\n}\r\n)\r\n\r\n\r\nlet mostPositiveArr = []\r\nlet dateArr = []\r\nlet changeArr = [0, ]\r\nlet dailMostPositiveObjArr = []\r\n\r\nfor(let i = 0; i < justTDsOnTwitter[0].sentimentData.length; i ++) {\r\n\r\n  var holder = justTDsOnTwitter\r\n\r\n  holder.sort((a, b) => b.sentimentData[i].polarity - a.sentimentData[i].polarity)\r\n\r\n\r\n  let mostPositive = holder[0].sentimentData[i].polarity\r\n\r\n  mostPositiveArr.push(Number(mostPositive.toFixed(3)))\r\n\r\n}\r\n\r\ndateArr = justTDsOnTwitter[0].sentimentData.map(d => d.date)\r\n\r\n\r\nfor(let i = 1; i < mostPositiveArr.length; i++) {\r\n\r\n\r\n  var lastWeek  = mostPositiveArr[i - 1]\r\n  var thisWeek = mostPositiveArr[i]\r\n  var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n  \r\n  //filter NaN at start\r\n\r\n  if(diff !== diff) {changeArr.push(0) } else {\r\n  changeArr.push(diff) \r\n  }\r\n}\r\n\r\nfor(let i = 0; i < justTDsOnTwitter[0].sentimentData.length; i++) {\r\n\r\n  function dailMostPositiveObj() {\r\n\r\n    this.polarity = mostPositiveArr[i]\r\n    this.date = dateArr[i]\r\n    this.change = changeArr[i]\r\n  }\r\ndailMostPositiveObjArr.push(new dailMostPositiveObj)\r\n}\r\n\r\nreturn dailMostPositiveObjArr\r\n\r\n\r\n}\r\n\r\nfunction getDailMostNegativeObj() {\r\n\r\n\r\n  let justTDsOnTwitter = TDData.filter(function(d) {\r\n              \r\n    if(d.sentimentData != undefined) {\r\n    return d\r\n  }\r\n}\r\n)\r\n\r\n\r\nlet mostNegativeArr = []\r\nlet dateArr = []\r\nlet changeArr = [0, ]\r\nlet dailMostNegativeObjArr = []\r\n\r\nfor(let i = 0; i < justTDsOnTwitter[0].sentimentData.length; i ++) {\r\n\r\n  var holder = justTDsOnTwitter\r\n\r\n  holder.sort((a, b) =>  a.sentimentData[i].polarity - b.sentimentData[i].polarity)\r\n\r\n\r\n  let mostNegative = holder[0].sentimentData[i].polarity\r\n\r\n  mostNegativeArr.push(Number(mostNegative.toFixed(3)))\r\n\r\n}\r\n\r\ndateArr = justTDsOnTwitter[0].sentimentData.map(d => d.date)\r\n\r\n\r\nfor(let i = 1; i < mostNegativeArr.length; i++) {\r\n\r\n\r\n  var lastWeek  = mostNegativeArr[i - 1]\r\n  var thisWeek = mostNegativeArr[i]\r\n  var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n  \r\n  //filter NaN at start\r\n\r\n  if(diff !== diff) {changeArr.push(0) } else {\r\n  changeArr.push(diff) \r\n  }\r\n}\r\n\r\nfor(let i = 0; i < justTDsOnTwitter[0].sentimentData.length; i++) {\r\n\r\n  function dailMostNegativeObj() {\r\n\r\n    this.polarity = mostNegativeArr[i]\r\n    this.date = dateArr[i]\r\n    this.change = changeArr[i]\r\n  }\r\ndailMostNegativeObjArr.push(new dailMostNegativeObj)\r\n}\r\n\r\nreturn dailMostNegativeObjArr\r\n\r\n\r\n}\r\n\r\nconst getDate = (d) => { \r\n    \r\n  let together = []\r\n  let apart = d.date.split('/')\r\n  let day = apart[0]\r\n  let month = apart[1]\r\n  let year = apart[2]\r\n\r\n  together.push(month, day, year)\r\n  together.toString().replace(\",\",\"/\").replace(\",\",\"/\")\r\n  return new Date(together)\r\n}\r\n\r\nconst dailMeanDataMap = {\r\n  name: \"Dáil Average\",\r\n  color: \"white\",\r\n  items: getDailMeanObj().map((d) => ({ ...d, date: getDate(d)}))\r\n}\r\n\r\nconst dailMostPositiveDataMap = {\r\n  name: \"Dáil Most Positive\",\r\n  color: \"green\",\r\n  items: getDailMostPositiveObj().map((d) => ({ ...d, date: getDate(d)}))\r\n}\r\n\r\nconst dailMostNegativeDataMap = {\r\n  name: \"Dáil Most Negative\",\r\n  color: \"orange\",\r\n  items: getDailMostNegativeObj().map((d) => ({ ...d, date: getDate(d)}))\r\n}\r\n\r\n\r\n  const chartData = [\r\n    ...[dailMostPositiveDataMap, dailMeanDataMap,  dailMostNegativeDataMap].filter((d) => selectedItems.includes(d.name))\r\n  ];\r\n\r\n  \r\n\r\n\r\nconst legendData = [ dailMostPositiveDataMap, dailMeanDataMap,  dailMostNegativeDataMap ];\r\n\r\n\r\n  return (\r\n  <div className=\"featuredItem\" style={{textAlign: \"center\", background: \"#004D44\", padding: \"10px\"}}>\r\n    <Typography variant=\"h5\" style={{marginTop: \"25px\"}} >Dáil Sentiment</Typography>\r\n    <p style={{marginTop: 16, marginBottom: 16, marginLeft: \"24px\", marginRight: \"24px\", lineHeight: \"24px\"}}>\r\n      \r\n      \r\n      \r\n      How positive or negative TD's have been on Twitter over the last week. Calculated by feeding their tweets into <a className=\"textblob-link\" href=\"https://textblob.readthedocs.io/en/dev/\">Textblob</a>, which scores polarity (sentiment) between -1 and 1.\r\n      <br></br> \r\n      So, a TD who uses positive language will score closer to 1.\r\n      <br></br> \r\n      The graph below displays the range of TD's polarity scores, and the average polarity score, for a given week.        \r\n      </p>\r\n      <Legend\r\n        data={legendData}\r\n        selectedItems={selectedItems}\r\n        onChange={onChangeSelection}\r\n      />\r\n      <MultilineChart data={chartData} />\r\n      </div>\r\n\r\n  );\r\n}\r\n\r\n","import { arrayOf, shape, string, date as dateProp, number } from \"prop-types\";\r\n\r\nexport const MultiLineDataItemsPropTypes = arrayOf(\r\n  shape({\r\n    date: dateProp,\r\n    change: number,\r\n    subjectivity: number\r\n  })\r\n);\r\n\r\nexport const MultiLineDataPropTypes = arrayOf(\r\n  shape({\r\n    name: string,\r\n    items: MultiLineDataItemsPropTypes,\r\n    color: string\r\n  })\r\n);\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Line = ({\r\n  xScale,\r\n  yScale,\r\n  color,\r\n  data,\r\n  isSmooth,\r\n  animation,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  // Define different types of animation that we can use\r\n  const animateLeft = React.useCallback(() => {\r\n    // NOTE: for some reason getTotalLength() doesn't work in tests\r\n    // in this codesandbox so we added default value just for tests\r\n    const totalLength = ref.current.getTotalLength\r\n      ? ref.current.getTotalLength()\r\n      : 500;\r\n    d3.select(ref.current)\r\n      .attr(\"opacity\", 1)\r\n      .attr(\"stroke-dasharray\", `${totalLength},${totalLength}`)\r\n      .attr(\"stroke-dashoffset\", totalLength)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeLinear)\r\n      .attr(\"stroke-dashoffset\", 0);\r\n  }, []);\r\n  const animateFadeIn = React.useCallback(() => {\r\n    d3.select(ref.current)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeLinear)\r\n      .attr(\"opacity\", 1);\r\n  }, []);\r\n  const noneAnimation = React.useCallback(() => {\r\n    d3.select(ref.current).attr(\"opacity\", 1);\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    switch (animation) {\r\n      case \"left\":\r\n        animateLeft();\r\n        break;\r\n      case \"fadeIn\":\r\n        animateFadeIn();\r\n        break;\r\n      case \"none\":\r\n      default:\r\n        noneAnimation();\r\n        break;\r\n    }\r\n  }, [animateLeft, animateFadeIn, noneAnimation, animation]);\r\n\r\n  // Recalculate line length if scale has changed\r\n  React.useEffect(() => {\r\n    if (animation === \"left\") {\r\n      const totalLength = ref.current.getTotalLength\r\n        ? ref.current.getTotalLength()\r\n        : 500;\r\n      d3.select(ref.current).attr(\r\n        \"stroke-dasharray\",\r\n        `${totalLength},${totalLength}`\r\n      );\r\n    }\r\n  }, [xScale, yScale, animation]);\r\n\r\n  const line = d3\r\n    .line()\r\n    .x((d) => xScale(d.date))\r\n    .y((d) => yScale(d.subjectivity));\r\n\r\n  const d = line(data);\r\n\r\n  return (\r\n    <path\r\n      ref={ref}\r\n      d={d?.match(/NaN|undefined/) ? \"\" : d}\r\n      stroke={color}\r\n      strokeWidth={3}\r\n      fill=\"none\"\r\n      opacity={0}\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n\r\nLine.propTypes = {\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  data: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      date: PropTypes.date,\r\n      change: PropTypes.number\r\n    })\r\n  ),\r\n  color: PropTypes.string,\r\n  isSmooth: PropTypes.bool,\r\n  animation: PropTypes.oneOf([\"left\", \"fadeIn\", \"none\"])\r\n};\r\n\r\nLine.defaultProps = {\r\n  data: [],\r\n  color: \"white\",\r\n  isSmooth: false,\r\n  animation: \"left\"\r\n};\r\n\r\nexport default Line;\r\n","/** Area.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Area = ({ xScale, yScale, color, data, disableAnimation, ...props }) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    if (disableAnimation) {\r\n      d3.select(ref.current).attr(\"opacity\", 1);\r\n      return;\r\n    }\r\n    d3.select(ref.current)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeBackIn)\r\n      .attr(\"opacity\", 1);\r\n  }, [disableAnimation]);\r\n\r\n  const d = React.useMemo(() => {\r\n    const area = d3\r\n      .area()\r\n      .x(({ date }) => xScale(date))\r\n      .y1(({subjectivity }) => yScale(subjectivity))\r\n      .y0(({subjectivity}) => {\r\n\r\n        \r\n\r\n        return yScale(subjectivity * 0.95)\r\n      }\r\n      \r\n      \r\n      \r\n      \r\n       )\r\n      // .y0(() => yScale(yScale.domain()[0]));\r\n    return area(data);\r\n  }, [xScale, yScale, data]);\r\n\r\n  return (\r\n    <>\r\n      <path\r\n        ref={ref}\r\n        d={d}\r\n        fill={`url(#gradient-${color})`}\r\n        opacity={0}\r\n        {...props}\r\n      />\r\n      <defs>\r\n        <linearGradient\r\n          id={`gradient-${color}`}\r\n          x1=\"0%\"\r\n          x2=\"0%\"\r\n          y1=\"0%\"\r\n          y2=\"100%\"\r\n        >\r\n          <stop offset=\"0%\" stopColor={color} stopOpacity={0.5} />\r\n          <stop offset=\"100%\" stopColor={color} stopOpacity={0.5} />\r\n        </linearGradient>\r\n      </defs>\r\n    </>\r\n  );\r\n};\r\n\r\nArea.propTypes = {\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  data: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      date: PropTypes.date,\r\n      retweets: PropTypes.number\r\n    })\r\n  ),\r\n  color: PropTypes.string,\r\n  disableAnimation: PropTypes.bool\r\n};\r\n\r\nArea.defaultProps = {\r\n  data: [],\r\n  color: \"white\",\r\n  disableAnimation: false\r\n};\r\n\r\nexport default Area;\r\n","/** AxisX.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Axis = ({\r\n  type,\r\n  scale,\r\n  ticks,\r\n  transform,\r\n  tickFormat,\r\n  disableAnimation,\r\n  anchorEl,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    const axisGenerator = type === \"left\" ? d3.axisRight : d3.axisBottom;\r\n    const axis = axisGenerator(scale).ticks(ticks).tickFormat(tickFormat);\r\n    const axisGroup = d3.select(ref.current);\r\n    if (disableAnimation) {\r\n      axisGroup.call(axis);\r\n    } else {\r\n      axisGroup.transition().duration(750).ease(d3.easeLinear).call(axis);\r\n    }\r\n    axisGroup.select(\".domain\").remove();\r\n    axisGroup.selectAll(\"line\").remove();\r\n    axisGroup\r\n      .selectAll(\"text\")\r\n      .attr(\"opacity\", 0.5)\r\n      .attr(\"color\", \"white\")\r\n      .attr(\"font-size\", \"0.75rem\");\r\n  }, [scale, ticks, tickFormat, disableAnimation]);\r\n\r\n  React.useEffect(() => {\r\n    d3.select(anchorEl)\r\n      .on(\"mouseout.axisX\", () => {\r\n        d3.select(ref.current)\r\n          .selectAll(\"text\")\r\n          .attr(\"opacity\", 0.5)\r\n          .style(\"font-weight\", \"normal\");\r\n      })\r\n      .on(\"mousemove.axisX\", () => {\r\n        const [x] = d3.mouse(anchorEl);\r\n        const xDate = scale.invert(x);\r\n        const textElements = d3.select(ref.current).selectAll(\"text\");\r\n        const data = textElements.data();\r\n        const index = d3.bisector((d) => d).left(data, xDate);\r\n        textElements\r\n          .attr(\"opacity\", (d, i) => (i === index - 1 ? 1 : 0.5))\r\n          .style(\"font-weight\", (d, i) =>\r\n            i === index - 1 ? \"bold\" : \"normal\"\r\n          );\r\n      });\r\n  }, [anchorEl, scale]);\r\n\r\n  return <g ref={ref} transform={transform} {...props} />;\r\n};\r\n\r\nAxis.propTypes = {\r\n  type: PropTypes.oneOf([\"left\", \"bottom\"]).isRequired,\r\n  scale: PropTypes.func.isRequired,\r\n  ticks: PropTypes.oneOfType([PropTypes.number, PropTypes.func]),\r\n  tickFormat: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\r\n  transform: PropTypes.string,\r\n  disableAnimation: PropTypes.bool,\r\n  anchorEl: PropTypes.instanceOf(Element)\r\n};\r\n\r\nAxis.defaultProps = {\r\n  ticks: 0,\r\n  tickFormat: null,\r\n  transform: \"\",\r\n  disableAnimation: false,\r\n  anchorEl: null\r\n};\r\n\r\nexport default Axis;\r\n","/** GridLine.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst GridLine = ({\r\n  type,\r\n  scale,\r\n  ticks,\r\n  size,\r\n  transform,\r\n  disableAnimation,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    const axisGenerator = type === \"vertical\" ? d3.axisBottom : d3.axisLeft;\r\n    const axis = axisGenerator(scale).ticks(ticks).tickSize(-size);\r\n\r\n    const gridGroup = d3.select(ref.current);\r\n    if (disableAnimation) {\r\n      gridGroup.call(axis);\r\n    } else {\r\n      gridGroup.transition().duration(750).ease(d3.easeLinear).call(axis);\r\n    }\r\n    gridGroup.select(\".domain\").remove();\r\n    gridGroup.selectAll(\"text\").remove();\r\n    gridGroup.selectAll(\"line\").attr(\"stroke\", \"rgba(255, 255, 255, 0.1)\");\r\n  }, [scale, ticks, size, disableAnimation]);\r\n\r\n  return <g ref={ref} transform={transform} {...props} />;\r\n};\r\n\r\nGridLine.propTypes = {\r\n  scale: PropTypes.func.isRequired,\r\n  type: PropTypes.oneOf([\"vertical\", \"horizontal\"]).isRequired,\r\n  ticks: PropTypes.oneOfType([PropTypes.number, PropTypes.func]),\r\n  transform: PropTypes.string,\r\n  size: PropTypes.number,\r\n  disableAnimation: PropTypes.bool\r\n};\r\n\r\nGridLine.defaultProps = {\r\n  ticks: 0,\r\n  transform: \"\",\r\n  size: 0,\r\n  disableAnimation: false\r\n};\r\n\r\nexport default GridLine;\r\n","/** Overlay.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\n/**\r\n * Use Overlay as a wrapper for components that need mouse events to be handled.\r\n * For example: Tooltip, AxisX.\r\n */\r\nconst Overlay = React.forwardRef(({ width, height, children }, ref) => (\r\n  <g>\r\n    {children}\r\n    <rect ref={ref} width={width} height={height} opacity={0} />\r\n  </g>\r\n));\r\n\r\nOverlay.propTypes = {\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired,\r\n  children: PropTypes.node.isRequired\r\n};\r\n\r\nexport default Overlay;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\nimport { MultiLineDataPropTypes } from \"../utils/propTypes\";\r\nimport {formatPercent } from \"../utils/commonUtils\"\r\n// import { formatPercent, formatPriceUSD } from \"../utils/commonUtils\";\r\n\r\nconst Tooltip = ({\r\n  xScale,\r\n  yScale,\r\n  width,\r\n  height,\r\n  data,\r\n  margin,\r\n  anchorEl,\r\n  children,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  const drawLine = React.useCallback(\r\n    (x) => {\r\n      d3.select(ref.current)\r\n        .select(\".tooltipLine\")\r\n        .attr(\"x1\", x)\r\n        .attr(\"x2\", x)\r\n        .attr(\"y1\", -margin.top)\r\n        .attr(\"y2\", height);\r\n    },\r\n    [ref, height, margin]\r\n  );\r\n\r\n  const drawContent = React.useCallback(\r\n    (x) => {\r\n      const tooltipContent = d3.select(ref.current).select(\".tooltipContent\");\r\n      tooltipContent.attr(\"transform\", (cur, i, nodes) => {\r\n        const nodeWidth = nodes[i]?.getBoundingClientRect()?.width || 0;\r\n        const translateX = nodeWidth + x > width ? x - nodeWidth - 12 : x + 8;\r\n        return `translate(${translateX}, ${-margin.top})`;\r\n      });\r\n      tooltipContent\r\n        .select(\".contentTitle\")\r\n        .text(d3.timeFormat(\"%b %d, %Y\")(xScale.invert(x)));\r\n    },\r\n    [xScale, margin, width]\r\n  );\r\n\r\n  const drawBackground = React.useCallback(() => {\r\n    // reset background size to defaults\r\n    const contentBackground = d3\r\n      .select(ref.current)\r\n      .select(\".contentBackground\");\r\n    contentBackground.attr(\"width\", 125).attr(\"height\", 40);\r\n\r\n    // calculate new background size\r\n    const tooltipContentElement = d3\r\n      .select(ref.current)\r\n      .select(\".tooltipContent\")\r\n      .node();\r\n    if (!tooltipContentElement) return;\r\n\r\n    const contentSize = tooltipContentElement.getBoundingClientRect();\r\n    contentBackground\r\n      .attr(\"width\", contentSize.width + 8)\r\n      .attr(\"height\", contentSize.height + 4);\r\n  }, []);\r\n\r\n  const onChangePosition = React.useCallback((d, i, isVisible) => {\r\n    d3.selectAll(\".performanceItemChangeSubjectivity\")\r\n      .filter((td, tIndex) => tIndex === i)\r\n      .text(isVisible ? formatPercent(d.change) : \"\");\r\n\r\n    d3.selectAll(\".performanceItemSubjectivity\")\r\n      .filter((td, tIndex) => tIndex === i)\r\n      .text(\r\n        d.subjectivity.toLocaleString() && !isVisible ? \"No data\" : d.subjectivity.toLocaleString()\r\n      );\r\n       // .text(\r\n      //   d.marketvalue && !isVisible ? \"No data\" : formatPriceUSD(d.marketvalue)\r\n      // );\r\n\r\n    const maxNameWidth = d3.max(\r\n      d3.selectAll(\".performanceItemName\").nodes(),\r\n      (node) => node.getBoundingClientRect().width\r\n    );\r\n    d3.selectAll(\".performanceItemChangeSubjectivity\").attr(\r\n      \"transform\",\r\n      (datum, index, nodes) =>\r\n        `translate(${\r\n          nodes[index].previousSibling.getBoundingClientRect().width + 14\r\n        },4)`\r\n    );\r\n\r\n    d3.selectAll(\".performanceItemSubjectivity\").attr(\r\n      \"transform\",\r\n      `translate(${maxNameWidth + 60},4)`\r\n    );\r\n  }, []);\r\n\r\n  const followPoints = React.useCallback(() => {\r\n    const [x] = d3.mouse(anchorEl);\r\n    const xDate = xScale.invert(x);\r\n    const bisectDate = d3.bisector((d) => d.date).left;\r\n    let baseXPos = 0;\r\n\r\n    // draw circles on line\r\n    d3.select(ref.current)\r\n      .selectAll(\".tooltipLinePoint\")\r\n      .attr(\"transform\", (cur, i) => {\r\n        const index = bisectDate(data[i].items, xDate, 1);\r\n        const d0 = data[i].items[index - 1];\r\n        const d1 = data[i].items[index];\r\n        const d = xDate - d0?.date > d1?.date - xDate ? d1 : d0;\r\n        if (d.date === undefined && d.subjectivity === undefined) {\r\n          // move point out of container\r\n          return \"translate(-100,-100)\";\r\n        }\r\n        const xPos = xScale(d.date);\r\n        if (i === 0) {\r\n          baseXPos = xPos;\r\n        }\r\n\r\n        let isVisible = true;\r\n        if (xPos !== baseXPos) {\r\n          isVisible = false;\r\n        }\r\n        const yPos = yScale(d.subjectivity);\r\n\r\n        onChangePosition(d, i, isVisible);\r\n\r\n        return isVisible\r\n          ? `translate(${xPos}, ${yPos})`\r\n          : \"translate(-100,-100)\";\r\n      });\r\n\r\n    drawLine(baseXPos);\r\n    drawContent(baseXPos);\r\n    drawBackground();\r\n  }, [\r\n    anchorEl,\r\n    drawLine,\r\n    drawContent,\r\n    drawBackground,\r\n    xScale,\r\n    yScale,\r\n    data,\r\n    onChangePosition\r\n  ]);\r\n\r\n  React.useEffect(() => {\r\n    d3.select(anchorEl)\r\n      .on(\"mouseout.tooltip\", () => {\r\n        d3.select(ref.current).attr(\"opacity\", 0);\r\n      })\r\n      .on(\"mouseover.tooltip\", () => {\r\n        d3.select(ref.current).attr(\"opacity\", 1);\r\n      })\r\n      .on(\"mousemove.tooltip\", () => {\r\n        d3.select(ref.current)\r\n          .selectAll(\".tooltipLinePoint\")\r\n          .attr(\"opacity\", 1);\r\n        followPoints();\r\n      });\r\n  }, [anchorEl, followPoints]);\r\n\r\n  if (!data.length) return null;\r\n\r\n  return (\r\n    <g ref={ref} opacity={0} {...props}>\r\n      <line className=\"tooltipLine\" />\r\n      <g className=\"tooltipContent\">\r\n        <rect className=\"contentBackground\" rx={4} ry={4} opacity={0.2} />\r\n        <text className=\"contentTitle\" transform=\"translate(4,14)\" />\r\n        <g className=\"content\" transform=\"translate(4,32)\">\r\n          {data.map(({ name, color }, i) => (\r\n            <g key={name} transform={`translate(6,${22 * i})`}>\r\n              <circle r={6} fill={color} />\r\n              <text className=\"performanceItemName\" transform=\"translate(10,4)\">\r\n                {name}\r\n              </text>\r\n              <text\r\n                className=\"performanceItemChangeSubjectivity\"\r\n                opacity={0.5}\r\n                fontSize={10}\r\n              />\r\n              <text className=\"performanceItemSubjectivity\" />\r\n            </g>\r\n          ))}\r\n        </g>\r\n      </g>\r\n      {data.map(({ name }) => (\r\n        <circle className=\"tooltipLinePoint\" r={6} key={name} opacity={0} />\r\n      ))}\r\n    </g>\r\n  );\r\n};\r\n\r\nTooltip.propTypes = {\r\n  width: PropTypes.number,\r\n  height: PropTypes.number,\r\n  margin: PropTypes.shape({\r\n    top: PropTypes.number,\r\n    bottom: PropTypes.number,\r\n    left: PropTypes.number,\r\n    right: PropTypes.number\r\n  }),\r\n  data: MultiLineDataPropTypes,\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  anchorEl: PropTypes.instanceOf(Element)\r\n};\r\n\r\nTooltip.defaultProps = {\r\n  width: 0,\r\n  height: 0,\r\n  margin: {\r\n    top: 0,\r\n    bottom: 0,\r\n    left: 0,\r\n    right: 0\r\n  },\r\n  data: [],\r\n  anchorEl: null\r\n};\r\n\r\nexport default Tooltip;\r\n","/* eslint-disable no-bitwise */\r\nimport * as d3 from \"d3\";\r\nimport { DateTime, Interval } from \"luxon\";\r\n\r\n// export const formatPriceUSD = (price) =>\r\n//   new Intl.NumberFormat(\"en-US\", { style: \"currency\", currency: \"USD\" }).format(\r\n//     price\r\n//   );\r\n\r\nexport const formatPercent = (percent = 0) => {\r\n  let result = \"0.00%\";\r\n  const isNumber = typeof percent === \"number\";\r\n  const isString = typeof percent === \"string\";\r\n  const isNotNaN = !Number.isNaN(parseFloat(percent));\r\n\r\n  if ((isNumber || isString) && isNotNaN) {\r\n    result = `${parseFloat(percent) > 0 ? \"+\" : \"\"}${d3.format(\".2%\")(\r\n      percent / 100\r\n    )}`;\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const getPeriod = (date) => {\r\n  if (!date) return 6;\r\n  const now = DateTime.utc();\r\n  const before = DateTime.fromJSDate(date);\r\n  const i = Interval.fromDateTimes(before, now);\r\n  return i.length(\"months\");\r\n};\r\n\r\nexport const getXTicks = (months) => {\r\n  if (months <= 2) return d3.timeDay.every(5).filter((d) => d.getDate() !== 31);\r\n  if (months <= 6) return d3.timeMonth.every(1);\r\n  if (months <= 13) return d3.timeMonth.every(2);\r\n  return d3.timeYear.every(1);\r\n};\r\n\r\nexport const getXTickFormat = (months) => {\r\n  if (months <= 2) return d3.timeFormat(\"%d %b\");\r\n  if (months <= 6) return d3.timeFormat(\"%b\");\r\n  if (months <= 13) return d3.timeFormat(\"%b %Y\");\r\n  return d3.timeFormat(\"%Y\");\r\n};\r\n","/** MultilineChart.controller.js */\r\nimport { useMemo } from \"react\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst useController = ({ data, width, height }) => {\r\n  const xMin = useMemo(\r\n    () => d3.min(data, ({ items }) => d3.min(items, ({ date }) => date)),\r\n    [data]\r\n  );\r\n\r\n  const xMax = useMemo(\r\n    () => d3.max(data, ({ items }) => d3.max(items, ({ date }) => date)),\r\n    [data]\r\n  );\r\n\r\n  const xScale = useMemo(\r\n    () => d3.scaleTime().domain([xMin, xMax]).range([0, width]),\r\n    [xMin, xMax, width]\r\n  );\r\n\r\n  const yMin = useMemo(\r\n    () => d3.min(data, ({ items }) => d3.min(items, ({ subjectivity }) => subjectivity)),\r\n    [data]\r\n  );\r\n\r\n  const yMax = useMemo(\r\n    () => d3.max(data, ({ items }) => d3.max(items, ({subjectivity}) => subjectivity)),\r\n    [data]\r\n  );\r\n\r\n  const yScale = useMemo(() => {\r\n    const indention = (yMax - yMin) * 0.5;\r\n    return d3\r\n      .scaleLinear()\r\n      .domain([yMin - indention, yMax + indention])\r\n      .range([height, 0]);\r\n  }, [height, yMin, yMax]);\r\n\r\n  const yScaleForAxis = useMemo(\r\n    () => d3.scaleBand().domain([yMin, yMax]).range([height, 0]),\r\n    [height, yMin, yMax]\r\n  );\r\n\r\n  const yTickFormat = (d) => {\r\n\r\n    return d\r\n    // `${parseFloat(d) > 0 ? \"+\" : \"\"}${d3.format(\".2%\")(d / 100)}`;\r\n  }\r\n  const xTickFormat = (d) => {\r\n    if (d3.timeFormat(\"%b\")(d) === \"Jan\") {\r\n      return d3.timeFormat(\"%Y\")(d);\r\n    }\r\n    return d3.timeFormat(\"%b\")(d);\r\n  };\r\n  return {\r\n    yTickFormat,\r\n    xScale,\r\n    yScale,\r\n    yScaleForAxis,\r\n    xTickFormat\r\n  };\r\n};\r\n\r\nexport default useController;\r\n","import React from 'react';\r\nimport ResizeObserver from 'resize-observer-polyfill';\r\n\r\n/**\r\n * Use ResizeObserver to listen for the changes to the dimensions of an element\r\n * @params ref - React ref\r\n * @returns {object} - { width, height, top, left }\r\n */\r\nconst useResize = (ref) => {\r\n  const [dimensions, setDimensions] = React.useState(null);\r\n  React.useEffect(() => {\r\n    const element = ref.current;\r\n    const resizeObserver = new ResizeObserver((entries) => {\r\n      entries.forEach((entry) => {\r\n        setDimensions(entry.contentRect);\r\n      });\r\n    });\r\n    resizeObserver.observe(element);\r\n    return () => {\r\n      resizeObserver.unobserve(element);\r\n    };\r\n  }, [ref]);\r\n  return dimensions || {\r\n    width: 0,\r\n    height: 0,\r\n    top: 0,\r\n    left: 0,\r\n  };\r\n};\r\n\r\nexport default useResize;\r\n","import React from \"react\";\r\nimport useResize from \"./useResize\";\r\n\r\nconst useDimensions = ({ maxHeight, margin = {}, scaleCoef = 0.5 }) => {\r\n  const ref = React.useRef(null);\r\n  const { width } = useResize(ref);\r\n\r\n  const height =\r\n    !maxHeight || width * scaleCoef < maxHeight ? width * scaleCoef : maxHeight;\r\n  const innerWidth = width - (margin.left || 0) - (margin.right || 0);\r\n  const innerHeight = height - (margin.top || 0) - (margin.bottom || 0);\r\n\r\n  return [\r\n    ref,\r\n    {\r\n      svgWidth: width,\r\n      svgHeight: height,\r\n      width: innerWidth,\r\n      height: innerHeight\r\n    }\r\n  ];\r\n};\r\n\r\nexport default useDimensions;\r\n","/** MultilineChart.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { MultiLineDataPropTypes } from \"../utils/propTypes\";\r\nimport { Line, Axis, GridLine, Overlay, Tooltip, Area } from \"../components\";\r\nimport useController from \"./MultilineChart.controller\";\r\nimport useDimensions from \"../utils/useDimensions\";\r\n\r\nconst MultilineChart = ({ data = [], margin = {} }) => {\r\n  const overlayRef = React.useRef(null);\r\n  const [containerRef, { svgWidth, svgHeight, width, height }] = useDimensions({\r\n    maxHeight: 400,\r\n    margin\r\n  });\r\n  const controller = useController({ data, width, height });\r\n  const {\r\n    yTickFormat,\r\n    xTickFormat,\r\n    xScale,\r\n    yScale,\r\n    yScaleForAxis\r\n  } = controller;\r\n\r\n  return (\r\n    <div ref={containerRef}>\r\n      <svg width={svgWidth} height={svgHeight}>\r\n        <g transform={`translate(${margin.left},${margin.top})`}>\r\n          <GridLine\r\n            type=\"vertical\"\r\n            scale={xScale}\r\n            ticks={5}\r\n            size={height}\r\n            transform={`translate(0, ${height})`}\r\n          />\r\n          <GridLine\r\n            type=\"horizontal\"\r\n            scale={yScaleForAxis}\r\n            ticks={2}\r\n            size={width}\r\n          />\r\n          <GridLine\r\n            type=\"horizontal\"\r\n            className=\"baseGridLine\"\r\n            scale={yScale}\r\n            ticks={1}\r\n            size={width}\r\n            disableAnimation\r\n          />\r\n          {data.map(({ name, items = [], color }) => (\r\n            <Line\r\n              key={name}\r\n              data={items}\r\n              xScale={xScale}\r\n              yScale={yScale}\r\n              color={color}\r\n            />\r\n          ))}\r\n          {/* <Area data={data[0].items} xScale={xScale} yScale={yScale} /> */}\r\n          <Axis\r\n            type=\"left\"\r\n            scale={yScaleForAxis}\r\n            transform=\"translate(0, -10)\"\r\n            ticks={5}\r\n            tickFormat={yTickFormat}\r\n          />\r\n          <Overlay ref={overlayRef} width={width} height={height}>\r\n            <Axis\r\n              type=\"bottom\"\r\n              className=\"axisX\"\r\n              anchorEl={overlayRef.current}\r\n              scale={xScale}\r\n              transform={`translate(10, ${height - height / 6})`}\r\n              ticks={5}\r\n              tickFormat={xTickFormat}\r\n            />\r\n            <Tooltip\r\n              className=\"tooltip\"\r\n              anchorEl={overlayRef.current}\r\n              width={width}\r\n              height={height}\r\n              margin={margin}\r\n              xScale={xScale}\r\n              yScale={yScale}\r\n              data={data}\r\n            />\r\n          </Overlay>\r\n        </g>\r\n      </svg>\r\n    </div>\r\n  );\r\n};\r\n\r\nMultilineChart.propTypes = {\r\n  data: MultiLineDataPropTypes,\r\n  margin: PropTypes.shape({\r\n    top: PropTypes.number,\r\n    bottom: PropTypes.number,\r\n    left: PropTypes.number,\r\n    right: PropTypes.number\r\n  })\r\n};\r\n\r\nMultilineChart.defaultProps = {\r\n  data: [],\r\n  margin: {\r\n    top: 30,\r\n    right: 15,\r\n    bottom: 15,\r\n    left: 15\r\n  }\r\n};\r\n\r\nexport default MultilineChart;\r\n","import React from \"react\";\r\nimport { FormControlLabel, Checkbox } from \"@material-ui/core\";\r\n\r\nconst Legend = ({ data, selectedItems, onChange }) => (\r\n  <div className=\"legendContainer\">\r\n    {data.map((d) => (\r\n      <div className=\"checkbox\" style={{ color: d.color }} key={d.name}>\r\n  <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: d.color}}\r\n            value={d.name}\r\n            onChange={() => onChange(d.name)}\r\n          />\r\n        }\r\n        label={d.name}\r\n\r\n        />\r\n      </div>\r\n    ))}\r\n  </div>\r\n);\r\n\r\nexport default Legend;\r\n","/** App.js */\r\nimport React, {useState, useEffect} from \"react\";\r\nimport MultilineChart from \"./views/MultilineChart\";\r\nimport Legend from \"./components/Legend\";\r\nimport \"./styles.css\";\r\nimport axios from \"axios\";\r\nimport { Typography } from \"@material-ui/core\";\r\n\r\n\r\n\r\n\r\n\r\nexport default function StreamGraphSubjectivity ({data}) {\r\n\r\n  const [selectedItems, setSelectedItems] = useState([]);\r\n  const [TDData, setTDData] = useState(null)\r\n  \r\n  \r\n  \r\n  useEffect(() => {\r\n\r\n    setTDData(data.filter(function(d) {\r\n          \r\n      if(d.followerData[0] != undefined) {\r\n      return d\r\n    }\r\n  }\r\n  ))\r\n  setSelectedItems([\"Dáil Most Subjective\", \"Dáil Least Subjective\", \"Dáil Average\"])\r\n}, []);\r\n\r\n\r\n\r\nconst onChangeSelection = (name) => {\r\n    const newSelectedItems = selectedItems.includes(name)\r\n      ? selectedItems.filter((item) => item !== name)\r\n      : [...selectedItems, name];\r\n    setSelectedItems(newSelectedItems);\r\n  };\r\n\r\nif (!TDData) return null;\r\n\r\nfunction getDailMeanObj() {\r\n\r\n\r\n  let justTDsOnTwitter =TDData.filter(function(d) {\r\n              \r\n    if(d.sentimentData != undefined) {\r\n    return d\r\n  }\r\n}\r\n)\r\n\r\n\r\nlet averageSubjectivityArr = []\r\nlet dateArr = []\r\nlet changeArr = [0, ]\r\nlet dailMeanObjArr = []\r\n\r\nfor(let i = 0; i < justTDsOnTwitter[0].sentimentData.length; i ++) {\r\n\r\nlet holder = justTDsOnTwitter.map(d => d.sentimentData[i].subjectivity)\r\nlet total = holder.reduce(function(a, b) {\r\n  return a + b\r\n})\r\n\r\nlet averageSubjectivityCount = total / justTDsOnTwitter.length;\r\n\r\n\r\n\r\naverageSubjectivityArr.push(Number(averageSubjectivityCount.toFixed(3)))\r\n\r\n}\r\ndateArr = justTDsOnTwitter[0].sentimentData.map(d => d.date)\r\n\r\n\r\nfor(let i = 1; i < averageSubjectivityArr.length; i++) {\r\n\r\n\r\n  var lastWeek  = averageSubjectivityArr[i - 1]\r\n  var thisWeek = averageSubjectivityArr[i]\r\n  var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n  \r\n  //filter NaN at start\r\n\r\n  if(diff !== diff) {changeArr.push(0) } else {\r\n  changeArr.push(diff) \r\n  }\r\n}\r\n\r\nfor(let i = 0; i < justTDsOnTwitter[0].sentimentData.length; i++) {\r\n\r\n  function dailMeanObj() {\r\n\r\n    this.subjectivity = averageSubjectivityArr[i]\r\n    this.date = dateArr[i]\r\n    this.change = changeArr[i]\r\n  }\r\ndailMeanObjArr.push(new dailMeanObj)\r\n}\r\n\r\nreturn dailMeanObjArr\r\n\r\n\r\n}\r\n\r\nfunction getDailMostSubjectiveObj() {\r\n\r\n\r\n  let justTDsOnTwitter =TDData.filter(function(d) {\r\n              \r\n    if(d.sentimentData != undefined) {\r\n    return d\r\n  }\r\n}\r\n)\r\n\r\n\r\nlet mostPositiveArr = []\r\nlet dateArr = []\r\nlet changeArr = [0, ]\r\nlet dailMostPositiveObjArr = []\r\n\r\nfor(let i = 0; i < justTDsOnTwitter[0].sentimentData.length; i ++) {\r\n\r\n  var holder = justTDsOnTwitter\r\n\r\n  holder.sort((a, b) => b.sentimentData[i].subjectivity - a.sentimentData[i].subjectivity)\r\n\r\n\r\n  let mostPositive = holder[0].sentimentData[i].subjectivity\r\n\r\n  mostPositiveArr.push(Number(mostPositive.toFixed(3)))\r\n\r\n}\r\n\r\ndateArr = justTDsOnTwitter[0].sentimentData.map(d => d.date)\r\n\r\n\r\nfor(let i = 1; i < mostPositiveArr.length; i++) {\r\n\r\n\r\n  var lastWeek  = mostPositiveArr[i - 1]\r\n  var thisWeek = mostPositiveArr[i]\r\n  var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n  \r\n  //filter NaN at start\r\n\r\n  if(diff !== diff) {changeArr.push(0) } else {\r\n  changeArr.push(diff) \r\n  }\r\n}\r\n\r\nfor(let i = 0; i < justTDsOnTwitter[0].sentimentData.length; i++) {\r\n\r\n  function dailMostPositiveObj() {\r\n\r\n    this.subjectivity = mostPositiveArr[i]\r\n    this.date = dateArr[i]\r\n    this.change = changeArr[i]\r\n  }\r\ndailMostPositiveObjArr.push(new dailMostPositiveObj)\r\n}\r\n\r\nreturn dailMostPositiveObjArr\r\n\r\n\r\n}\r\n\r\nfunction getDailLeastSubjectiveObj() {\r\n\r\n\r\n  let justTDsOnTwitter = TDData.filter(function(d) {\r\n              \r\n    if(d.sentimentData != undefined) {\r\n    return d\r\n  }\r\n}\r\n)\r\n\r\n\r\nlet mostNegativeArr = []\r\nlet dateArr = []\r\nlet changeArr = [0, ]\r\nlet dailMostNegativeObjArr = []\r\n\r\nfor(let i = 0; i < justTDsOnTwitter[0].sentimentData.length; i ++) {\r\n\r\n  var holder = justTDsOnTwitter\r\n\r\n  holder.sort((a, b) =>  a.sentimentData[i].subjectivity - b.sentimentData[i].subjectivity)\r\n\r\n\r\n  let mostNegative = holder[0].sentimentData[i].subjectivity\r\n\r\n  mostNegativeArr.push(Number(mostNegative.toFixed(3)))\r\n\r\n}\r\n\r\ndateArr = justTDsOnTwitter[0].sentimentData.map(d => d.date)\r\n\r\n\r\nfor(let i = 1; i < mostNegativeArr.length; i++) {\r\n\r\n\r\n  var lastWeek  = mostNegativeArr[i - 1]\r\n  var thisWeek = mostNegativeArr[i]\r\n  var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n  \r\n  //filter NaN at start\r\n\r\n  if(diff !== diff) {changeArr.push(0) } else {\r\n  changeArr.push(diff) \r\n  }\r\n}\r\n\r\nfor(let i = 0; i < justTDsOnTwitter[0].sentimentData.length; i++) {\r\n\r\n  function dailMostNegativeObj() {\r\n\r\n    this.subjectivity = mostNegativeArr[i]\r\n    this.date = dateArr[i]\r\n    this.change = changeArr[i]\r\n  }\r\ndailMostNegativeObjArr.push(new dailMostNegativeObj)\r\n}\r\n\r\nreturn dailMostNegativeObjArr\r\n\r\n\r\n}\r\n\r\nconst getDate = (d) => { \r\n    \r\n  let together = []\r\n  let apart = d.date.split('/')\r\n  let day = apart[0]\r\n  let month = apart[1]\r\n  let year = apart[2]\r\n\r\n  together.push(month, day, year)\r\n  together.toString().replace(\",\",\"/\").replace(\",\",\"/\")\r\n  return new Date(together)\r\n}\r\n\r\n\r\n\r\n\r\n\r\nconst dailMeanDataMap = {\r\n  name: \"Dáil Average\",\r\n  color: \"white\",\r\n  items: getDailMeanObj().map((d) => ({ ...d, date: getDate(d)}))\r\n}\r\n\r\nconst dailMostSubjectiveDataMap = {\r\n  name: \"Dáil Most Subjective\",\r\n  color: \"green\",\r\n  items: getDailMostSubjectiveObj().map((d) => ({ ...d, date: getDate(d)}))\r\n}\r\n\r\nconst dailLeastSubjectiveDataMap = {\r\n  name: \"Dáil Least Subjective\",\r\n  color: \"orange\",\r\n  items: getDailLeastSubjectiveObj().map((d) => ({ ...d, date: getDate(d)}))\r\n}\r\n\r\nconsole.log(dailMeanDataMap)\r\n\r\n  const chartData = [\r\n    ...[dailMostSubjectiveDataMap, dailMeanDataMap,  dailLeastSubjectiveDataMap].filter((d) => selectedItems.includes(d.name))\r\n  ];\r\n\r\n  \r\n\r\n\r\nconst legendData = [ dailMostSubjectiveDataMap, dailMeanDataMap,  dailLeastSubjectiveDataMap ];\r\n\r\n\r\n  return (\r\n  <div className=\"featuredItem\" style={{textAlign: \"center\"}}>\r\n    <Typography variant=\"h5\">Dáil Subjectivity</Typography>\r\n    <p style={{marginTop: 15, marginBottom: 15}}>Subjective sentences generally refer to personal opinion, emotion or judgment whereas objective refers to factual information. Subjectivity also lies between [0,1], with 1 being most subjective.</p>\r\n      <Legend\r\n        data={legendData}\r\n        selectedItems={selectedItems}\r\n        onChange={onChangeSelection}\r\n      />\r\n      <MultilineChart data={chartData} />\r\n      </div>\r\n\r\n  );\r\n}\r\n\r\n","import React, { useEffect, useState } from 'react'\r\nimport {Grid} from '@material-ui/core'\r\nimport {MostFollowedTD, MostFollowedParty, MostRetweetedTD, DailTotal, MostNegativeTD, MostActiveTD, MostPositiveTD } from './FeaturedItem/FeaturedItem'\r\nimport SimpleLineChart from './SimpleLineChart/SimpleLineChart'\r\nimport SimplePieChart from './SimplePieChart/SimplePieChart'\r\nimport {DailSentimentGauge, DailConnectivityGauge} from './SimpleGauge/SimpleGauge'\r\nimport MultilineAppV3PartyFollowers from './MultilineChartV3PartyFollowers/MultilineAppV3PartyFollowers'\r\nimport PartyFollowersGraph from './PartyFollowersGraph/PartyFollowersGraph'\r\nimport Scatterplot from './Scatterplot/Scatterplot'\r\nimport { PartyBarchart } from './PartyBarchart/PartyBarchart'\r\nimport Test from '../Test/Test'\r\nimport ForceGraph from './ForceGraph/ForceGraph'\r\nimport axios from 'axios'\r\nimport ScatterplotZoom from './ScatterplotZoom/ScatterplotZoom'\r\nimport { BarChart } from './BarChart.js'\r\nimport ScatterplotParty from './ScatterplotParty/ScatterplotParty'\r\nimport { VoteBarchart } from './VoteBarchart/VoteBarchart'\r\nimport LineChart from '../LineChart/LineChart'\r\nimport GroupedBarChart from './GroupedBarChart/GroupedBarChart'\r\nimport GroupedBarChartTest from './GroupedBarChartTest/GroupedBarChartTest'\r\nimport { Typography } from '@material-ui/core'\r\nimport PieChart from './PieChart/PieChart'\r\nimport MultilineAppV3PartyRetweets from './MultilineChartV3PartyRetweets/MultilineAppV3PartyRetweets'\r\nimport MultilineAppV3PartyPolarity from './MultilineChartV3PartyPolarity/MultilineAppV3PartyPolarity'\r\nimport MultilineAppV3PartySubjectivity from './MultilineChartV3PartySubjectivity/MultilineAppV3PartySubjectivity'\r\nimport ComingSoon from './ComingSoon'\r\nimport Welcome from './Welcome/Welcome'\r\nimport Issues from './Issues/Issues'\r\nimport StreamGraphPolarity from './StreamGraphPolarity/StreamGraphPolarity'\r\nimport StreamGraphSubjectivity from './StreamGraphSubjectivity/StreamGraphSubjectivity'\r\n\r\n\r\n\r\nconst Dashboard = ({data}) => {\r\n\r\n    const [TDData, setTDData] = useState(null)\r\n\r\n\r\n    // React.useEffect(() => {\r\n    //     axios.get('https://eirpol.herokuapp.com/api').then((response) => {\r\n    //        setTDData(response.data);\r\n            \r\n        // .filter(function(d) {\r\n          \r\n        //     if(d.followerData[0] != undefined) {\r\n        //     return d\r\n        //   }\r\n        // }\r\n        // \r\n\r\n          \r\n        // });\r\n\r\n        // axios.get('https://api.oireachtas.ie/v1/members?date_start=2020-01-01&chamber_id=&date_end=2099-01-01&limit=50').then((response) => {\r\n\r\n        //     setOirData(response.data)\r\n            \r\n        //   });\r\n        \r\n        \r\n    //   }, []);\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        setTDData(data)\r\n\r\n    }, [])\r\n    \r\nconsole.log(data)\r\n\r\n\r\n\r\n      if (!TDData) return null;\r\n\r\n        \r\n\r\n    return (\r\n        \r\n\r\n        <Grid container xs={12} spacing={0}>         \r\n\r\n            <Grid item xs={12} sm={12}>\r\n                <Welcome data={TDData[0].followerData}/>\r\n            </Grid>\r\n\r\n            <Grid item xs={12} sm={4}>\r\n                <MostFollowedTD data={TDData}/>\r\n            </Grid>\r\n\r\n            <Grid item xs={12} sm={4}>\r\n                <MostFollowedParty data={TDData}/>\r\n            </Grid>\r\n            <Grid item xs={12} sm={4}>\r\n                <MostRetweetedTD data={TDData}/>\r\n            </Grid>    \r\n\r\n            <Grid item xs={12} sm={4}>\r\n                <MostPositiveTD data={TDData}/>\r\n            </Grid>\r\n            <Grid item xs={12} sm={4}>\r\n                <MostNegativeTD data={TDData}/>\r\n            </Grid>    \r\n            <Grid item xs={12} sm={4}>\r\n                <MostActiveTD data={TDData}/>\r\n            </Grid>     \r\n            \r\n            <Grid item xs={12} sm={12}>\r\n            <StreamGraphPolarity data={TDData}/>\r\n            </Grid>  \r\n            <Grid item xs={12} sm={12}>\r\n            <StreamGraphSubjectivity data={TDData}/>\r\n            </Grid> \r\n\r\n            <Grid item xs={12} sm={6}>\r\n            <DailSentimentGauge data={TDData}/>\r\n            </Grid>\r\n            <Grid item xs={12} sm={6}>\r\n                <DailConnectivityGauge data={TDData}/>\r\n            </Grid>        \r\n            <Grid item xs={12} sm={12}>\r\n                <BarChart data={TDData}/>\r\n            </Grid> \r\n            <Grid item xs={12} sm={12}>\r\n                <Scatterplot data={TDData}/>\r\n            </Grid>\r\n            <Grid item xs={12} sm={12}>\r\n                <PartyBarchart data={TDData}/>\r\n            </Grid>\r\n            {/* <Grid item xs={12} sm={12}>\r\n                <ForceGraph/>\r\n            </Grid> */}\r\n            <Grid item xs={12} sm={12}>\r\n                <ScatterplotParty data={TDData}/>\r\n            </Grid>\r\n\r\n            <Grid item xs={12} sm={12}>\r\n                <MultilineAppV3PartyFollowers data={TDData}/>\r\n            </Grid>\r\n            <Grid item xs={12} sm={12}>\r\n                <MultilineAppV3PartyRetweets data={TDData}/>\r\n            </Grid>\r\n            <Grid item xs={12} sm={12}>\r\n                <MultilineAppV3PartyPolarity data={TDData}/>\r\n            </Grid>\r\n            <Grid item xs={12} sm={12}>\r\n                <MultilineAppV3PartySubjectivity data={TDData}/>\r\n            </Grid>\r\n            <Grid item xs={12} sm={12}>\r\n                <Issues data={TDData}/>\r\n            </Grid>            \r\n            {/* <Grid item xs={12} sm={6}>\r\n                <VoteBarchart data={TDData}/>\r\n            </Grid>\r\n            <Grid item xs={12} sm={6}>\r\n                <LineChart data={TDData}/>\r\n            </Grid> */}\r\n            <Grid item xs={12} sm={12}>\r\n                <ComingSoon/>\r\n            </Grid>\r\n\r\n\r\n\r\n\r\n        </Grid>\r\n\r\n    )\r\n}\r\n\r\nexport default Dashboard\r\n","import React, { useState } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport \"./navbar.css\";\r\n\r\nfunction Navbar() {\r\n  const [click, setClick] = useState(false);\r\n\r\n  const handleClick = () => setClick(!click);\r\n  return (\r\n    <>\r\n      <nav className=\"navbar\">\r\n        <div className=\"nav-container\">\r\n          <NavLink exact to=\"/\" className=\"nav-logo\">\r\n            <img className=\"logo-img\" src=\"https://vectr.com/tmp/a6z2fwTvN/cd00KuhHM.svg?width=640&height=640&select=cd00KuhHMpage0\" style={{height: \"80px\", width: \"170px\"}}/>\r\n          </NavLink>\r\n\r\n          <ul className={click ? \"nav-menu active\" : \"nav-menu\"}>\r\n            <li className=\"nav-item\">\r\n              <NavLink\r\n                exact\r\n                to=\"/\"\r\n                activeClassName=\"active\"\r\n                className=\"nav-links\"\r\n                onClick={handleClick}\r\n              >\r\n                Twitter Data\r\n              </NavLink>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n              <NavLink\r\n                exact\r\n                to=\"/TDs\"\r\n                activeClassName=\"active\"\r\n                className=\"nav-links\"\r\n                onClick={handleClick}\r\n              >\r\n                TD List\r\n              </NavLink>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n              <NavLink\r\n                exact\r\n                to=\"/Constituencies\"\r\n                activeClassName=\"active\"\r\n                className=\"nav-links\"\r\n                onClick={handleClick}\r\n              >\r\n                Constituency Map\r\n              </NavLink>\r\n            </li>\r\n            {/* <li className=\"nav-item\">\r\n              <NavLink\r\n                exact\r\n                to=\"/tdlist\"\r\n                activeClassName=\"active\"\r\n                className=\"nav-links\"\r\n                onClick={handleClick}\r\n              >\r\n                TD List\r\n              </NavLink>\r\n            </li> */}\r\n            {/* <li className=\"nav-item\">\r\n              <NavLink\r\n                exact\r\n                to=\"/td/michaelmartin\"\r\n                activeClassName=\"active\"\r\n                className=\"nav-links\"\r\n                onClick={handleClick}\r\n              >\r\n                News Coverage\r\n              </NavLink>\r\n            </li> */}\r\n            {/* <li className=\"nav-item\">\r\n              <NavLink\r\n                exact\r\n                to=\"/contact\"\r\n                activeClassName=\"active\"\r\n                className=\"nav-links\"\r\n                onClick={handleClick}\r\n              >\r\n                Electoral Data\r\n              </NavLink>\r\n            </li> */}\r\n          </ul>\r\n          <div className=\"nav-icon\" onClick={handleClick}>\r\n            <i className={click ? \"fas fa-times\" : \"fas fa-bars\"}></i>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Navbar;","import React, {useState, useEffect} from 'react'\r\nimport { Avatar, Typography, Grid } from '@material-ui/core'\r\n\r\nconst TDHeader = ({justThisTDData}) => {\r\n\r\n\r\n    const [thisTDData, setThisTDData] = useState(null)\r\n    const [name, setName] = useState(null)\r\n    const [member_uri, set_member_uri] = useState(null)\r\n    const [constituency, setConstituency] = useState(null)\r\n    const [office, setOffice] = useState(null)\r\n    const [imgLink, setImgLink] = useState(null)\r\n    const [partyDot, setPartyDot] = useState(null)\r\n\r\n    const partyDotAbrevArr = [\r\n        \"ff\", \"fg\", \"grn\", \"soc-dem\", \"ind\", \"pbp\", \"I4C\", \"sf\", \"aon\", \"lab\"\r\n    ]\r\n\r\n    const partDotFullNameArr = [\"Fianna Fáil\", \"Fine Gael\", \"Green Party\", \"Social Democrats\", \"Independent\", \"Solidarity - People Before Profit\", \"Independents 4 Change\", \"Sinn Féin\", \"Aontú\", \"Labour Party\"]\r\n\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        setThisTDData(justThisTDData[0])\r\n\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n\r\n        if(!thisTDData) return null;\r\n\r\n         console.log(thisTDData)\r\n\r\n\r\n       const TDName = thisTDData.name;\r\n\r\n        setName(TDName)\r\n\r\n    }, [thisTDData])\r\n\r\n    useEffect(() => {\r\n\r\n        if(!thisTDData) return null;\r\n\r\n       const member_uri = thisTDData.member_uri[0];\r\n\r\n        set_member_uri(member_uri)\r\n\r\n    }, [thisTDData])\r\n\r\n    useEffect(() => {\r\n\r\n        if(!thisTDData) return null;\r\n\r\n       const party = thisTDData.party;\r\n\r\n       const index = partDotFullNameArr.indexOf(party)\r\n\r\n       const partyDot = partyDotAbrevArr[index]\r\n\r\n        setPartyDot(partyDot)\r\n\r\n    }, [thisTDData])\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        if(!thisTDData) return null;\r\n\r\n        var indexOfLastSlash = thisTDData.member_constituency_uri[0].lastIndexOf('/') + 1\r\n        var justName = thisTDData.member_constituency_uri[0].substr(indexOfLastSlash)\r\n\r\n\r\n        setConstituency(justName)\r\n\r\n    }, [thisTDData])\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        if(!thisTDData) return null;\r\n\r\n        var officeArr = [];\r\n\r\n        console.log(thisTDData)\r\nif(thisTDData.member_offices[0].length != 0) {\r\n\r\n\r\n        for(let i = 0; i < thisTDData.member_offices[0].length; i++) {\r\n\r\n        var office = thisTDData.member_offices[0][i].office.officeName.showAs\r\n\r\n        if(!thisTDData.member_offices[0][i].office.dateRange.end) {\r\n            officeArr.push(office)\r\n        } \r\n    }\r\n\r\n    setOffice(officeArr)\r\n        } else {\r\n            setOffice([])\r\n        }\r\n\r\n\r\n\r\n    }, [thisTDData])\r\n\r\n\r\n\r\n    if(!thisTDData || !name || !partyDot || !constituency || !office) return null;\r\n    console.log(office)\r\n    return (\r\n\r\n\r\n        <div className=\"td-header\" style={{color: 'black', background: \"white\"}}>\r\n            <Grid container direction=\"column\" alignItems=\"center\"><Typography variant=\"h4\">{name}</Typography>\r\n            <Avatar variant=\"\" src={member_uri + \"/image/large\"} style={{height: '150px', width: '150px', marginBottom: '20px', marginTop: '10px'}}/>\r\n            <Typography variant=\"h5\">{thisTDData.party}<span class={\"party-dot-\" + partyDot}/></Typography>\r\n            <Typography variant=\"h5\"><a href={\"/Constituencies/\" + constituency }>{constituency}</a></Typography>\r\n            <Typography variant=\"h5\">{office.toString().replaceAll(',', ' & ')}</Typography>\r\n            </Grid>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default TDHeader","import React, {useState, useEffect} from 'react'\r\nimport { Grid, Typography, Avatar } from '@material-ui/core'\r\nimport { ArrowDownward, ArrowUpward, ContactSupportOutlined } from '@material-ui/icons'\r\nimport GaugeChart from 'react-gauge-chart'\r\nimport { ascending, descending } from 'd3-array'\r\nimport { ifStatement } from '@babel/types'\r\n\r\n\r\nexport const TDFollowerStats = ({justThisTDData, justThisTDPartyData, allTDData}) => {\r\n\r\n    const [thisTDData, setThisTDData] = useState(null)\r\n    const [thisTDParty, setThisTDParty] = useState(null)\r\n    const [dailData, setDailData] = useState(null)\r\n    const [currentWeek, setCurrentWeek] = useState(null)\r\n    const [rankInParty, setRankInParty] = useState(null)\r\n    const [rankInDail, setRankInDail] = useState(null)\r\n    const [change, setChange] = useState(null)\r\n    const [changeSign, setChangeSign] = useState(null)\r\n\r\n    useEffect(() => {\r\n\r\n    setThisTDData(justThisTDData)\r\n    setThisTDParty(justThisTDPartyData)\r\n    setDailData(allTDData)\r\n\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n\r\n        if(!thisTDData) return null;\r\n\r\n        setCurrentWeek(thisTDData[0].followerData.length - 1)\r\n\r\n    }, [thisTDData])\r\n\r\n\r\n    useEffect(() => {\r\n\r\n    if(!thisTDParty || !currentWeek || !thisTDData) return null;\r\n\r\n    let justTDsOnTwitter = thisTDParty.filter(function(d) {\r\n          \r\n        if(d.followerData[0] != undefined) {\r\n        return d\r\n      }\r\n    }\r\n    )\r\n\r\n    justTDsOnTwitter.sort(function(a, b) {\r\n        return descending(a.followerData[currentWeek].followers, b.followerData[currentWeek].followers)\r\n       })\r\n\r\n       const index = justTDsOnTwitter.map(d => d.name).indexOf(thisTDData[0].name);\r\n\r\n       setRankInParty(index + 1)\r\n\r\n    }, [thisTDData, thisTDParty, currentWeek])\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        if(!thisTDData || !dailData || !currentWeek) return null;\r\n\r\n        console.log(dailData)\r\n\r\n        let justTDsOnTwitter = dailData.filter(function(d) {\r\n          \r\n            if(d.followerData[0] != undefined) {\r\n            return d\r\n          }\r\n        }\r\n        )\r\n\r\n        justTDsOnTwitter.sort(function(a, b) {\r\n            return descending(a.followerData[currentWeek].followers, b.followerData[currentWeek].followers)\r\n           })\r\n\r\n\r\n        const index = justTDsOnTwitter.map(d => d.name).indexOf(thisTDData[0].name)\r\n\r\n        setRankInDail(index + 1)\r\n\r\n    }, [thisTDData, dailData, currentWeek])\r\n\r\n\r\n    useEffect(() => {\r\n\r\n    if(!thisTDData || !currentWeek) return null;\r\n\r\n    function getChange() {\r\n\r\n        var thisWeek = currentWeek;\r\n        var lastWeek = currentWeek - 1;\r\n        var thisWeekVal = thisTDData[0].followerData[thisWeek].followers\r\n        var lastWeekVal = thisTDData[0].followerData[lastWeek].followers\r\n        var change = ((thisWeekVal - lastWeekVal) / lastWeekVal) * 100\r\n\r\n        return change\r\n    }\r\n\r\n    if(getChange() < 0) {\r\n        setChangeSign('-')\r\n    } else {\r\n        setChangeSign('+')\r\n    }\r\n\r\n    setChange(getChange())\r\n\r\n\r\n    }, [currentWeek, thisTDData])\r\n\r\n\r\n\r\n\r\n    if(!thisTDData || !currentWeek || !rankInParty || !rankInDail ||!change) return null;\r\n\r\n\r\n    return (\r\n        \r\n\r\n    <div className=\"featuredItem\" style={{background: \"white\", boxShadow: \"rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -30px\" }}>\r\n        <span className=\"featuredTitle\" style={{marginLeft: 0, color: \"black\"}}>Twitter Followers</span>\r\n            <span className=\"featuredSub\" style={{marginLeft: '10px', color: \"black\"}}>#{rankInParty} in party</span>\r\n            <span className=\"featuredSub\" style={{marginLeft: '10px', color: \"black\"}}>#{rankInDail} in Dáil</span>\r\n            \r\n        <div className=\"featuredFollowerContainer\">\r\n            <span className=\"featuredFollowers\" style={{color: \"black\"}}>{thisTDData[0].followerData[currentWeek].followers.toLocaleString()}</span>\r\n               {changeSign == '+' ? <span className=\"featuredFollowerChange\" style={{color: \"black\"}}>{changeSign}{change.toLocaleString()}% <ArrowUpward style={{fill: \"green\"}}/></span> : <span className=\"featuredFollowerChange\">{change.toLocaleString()}% <ArrowDownward style={{fill: \"red\"}}/></span>} \r\n        </div>\r\n    </div>\r\n\r\n\r\n            \r\n    )\r\n}\r\n\r\nexport const TDRetweetStats = ({justThisTDData, justThisTDPartyData, allTDData}) => {\r\n\r\n\r\n    const [thisTDData, setThisTDData] = useState(null)\r\n    const [thisTDParty, setThisTDParty] = useState(null)\r\n    const [dailData, setDailData] = useState(null)\r\n    const [currentWeek, setCurrentWeek] = useState(null)\r\n    const [rankInParty, setRankInParty] = useState(null)\r\n    const [rankInDail, setRankInDail] = useState(null)\r\n    const [change, setChange] = useState(null)\r\n    const [changeSign, setChangeSign] = useState(null)\r\n\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        setThisTDData(justThisTDData)\r\n        setThisTDParty(justThisTDPartyData)\r\n        setDailData(allTDData)\r\n\r\n    }, [])\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        if(!thisTDData) return null;\r\n\r\n\r\n        setCurrentWeek(thisTDData[0].retweetData.length - 1)\r\n\r\n    }, [thisTDData])\r\n\r\n    useEffect(() => {\r\n\r\n        if(!thisTDParty || !currentWeek || !thisTDData) return null;\r\n    \r\n        let justTDsOnTwitter = thisTDParty.filter(function(d) {\r\n          \r\n            if(d.retweetData[0] != undefined) {\r\n            return d\r\n          }\r\n        }\r\n        )\r\n    \r\n        justTDsOnTwitter.sort(function(a, b) {\r\n            return descending(a.retweetData[currentWeek].retweets, b.retweetData[currentWeek].retweets)\r\n           })\r\n    \r\n           const index = justTDsOnTwitter.map(d => d.name).indexOf(thisTDData[0].name);\r\n    \r\n           setRankInParty(index + 1)\r\n    \r\n        }, [thisTDData, thisTDParty, currentWeek])\r\n\r\n        useEffect(() => {\r\n\r\n            if(!thisTDData || !dailData || !currentWeek) return null;\r\n    \r\n            console.log(dailData)\r\n    \r\n            const justTDsOnTwitter = dailData.filter(function(d) {\r\n              \r\n                if(d.retweetData[0] != undefined) {\r\n                return d\r\n              }\r\n            }\r\n            )\r\n    \r\n            justTDsOnTwitter.sort(function(a, b) {\r\n                return descending(a.retweetData[currentWeek].retweets, b.retweetData[currentWeek].retweets)\r\n               })\r\n    \r\n    \r\n            const index = justTDsOnTwitter.map(d => d.name).indexOf(thisTDData[0].name)\r\n    \r\n            setRankInDail(index + 1)\r\n    \r\n        }, [thisTDData, dailData, currentWeek])\r\n    \r\n    \r\n        useEffect(() => {\r\n    \r\n        if(!thisTDData || !currentWeek) return null;\r\n    \r\n        function getChange() {\r\n    \r\n            var thisWeek = currentWeek;\r\n            var lastWeek = currentWeek - 1;\r\n            var thisWeekVal = thisTDData[0].retweetData[thisWeek].retweets\r\n            var lastWeekVal = thisTDData[0].retweetData[lastWeek].retweets\r\n            var change = ((thisWeekVal - lastWeekVal) / lastWeekVal) * 100\r\n\r\n            if(!change) {\r\n                return change = 0\r\n            } else if (change === Infinity){\r\n                return change = thisWeekVal * 100\r\n            }\r\n            else {\r\n                return change\r\n            }\r\n    \r\n            \r\n        }\r\n    \r\n        if(getChange() < 0) {\r\n            setChangeSign('-')\r\n        } else {\r\n            setChangeSign('+')\r\n        }\r\n    \r\n        setChange(getChange())\r\n    \r\n    \r\n        }, [currentWeek, thisTDData])\r\n\r\n        console.log(change)\r\n\r\n        if(!thisTDData || !currentWeek || !rankInParty || !rankInDail) return null;\r\n        \r\n    return (\r\n\r\n        <div className=\"featuredItem\" style={{background: \"white\", boxShadow: \"rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -30px\"}}>\r\n        <span className=\"featuredTitle\" style={{marginLeft: 0, color: \"black\"}}>Retweets this week</span>\r\n            <span className=\"featuredSub\" style={{marginLeft: '10px', color: \"black\"}}>#{rankInParty} in party</span>\r\n            <span className=\"featuredSub\" style={{marginLeft: '10px', color: \"black\"}}>#{rankInDail} in Dáil</span>\r\n        <div className=\"featuredFollowerContainer\" style={{color: \"black\"}}>\r\n            <span className=\"featuredFollowers\" style={{color: \"black\"}}>{thisTDData[0].retweetData[currentWeek].retweets.toLocaleString()}</span>\r\n            {changeSign == '+' ? <span className=\"featuredFollowerChange\" style={{color: \"black\"}}>{changeSign}{change.toLocaleString()}% <ArrowUpward style={{fill: \"green\"}}/></span> : <span className=\"featuredFollowerChange\">{change.toLocaleString()}% <ArrowDownward style={{fill: \"red\"}}/></span>}\r\n        </div>\r\n    </div>\r\n    )\r\n}\r\n\r\nexport const TDActivityStats = ({justThisTDData, justThisTDPartyData, allTDData}) => {\r\n\r\n\r\n    const [thisTDData, setThisTDData] = useState(null)\r\n    const [thisTDParty, setThisTDParty] = useState(null)\r\n    const [dailData, setDailData] = useState(null)\r\n    const [currentWeek, setCurrentWeek] = useState(null)\r\n    const [rankInParty, setRankInParty] = useState(null)\r\n    const [rankInDail, setRankInDail] = useState(null)\r\n    const [change, setChange] = useState(null)\r\n    const [changeSign, setChangeSign] = useState(null)\r\n\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        setThisTDData(justThisTDData)\r\n        setThisTDParty(justThisTDPartyData)\r\n        setDailData(allTDData)\r\n\r\n    }, [])\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        if(!thisTDData) return null;\r\n\r\n\r\n        setCurrentWeek(thisTDData[0].retweetData.length - 1)\r\n\r\n    }, [thisTDData])\r\n\r\n    useEffect(() => {\r\n\r\n        if(!thisTDParty || !currentWeek || !thisTDData) return null;\r\n    \r\n        let justTDsOnTwitter = thisTDParty.filter(function(d) {\r\n          \r\n            if(d.retweetData[0] != undefined) {\r\n            return d\r\n          }\r\n        }\r\n        )\r\n    \r\n        justTDsOnTwitter.sort(function(a, b) {\r\n            return descending(a.retweetData[currentWeek].original_tweets, b.retweetData[currentWeek].original_tweets)\r\n           })\r\n    \r\n           const index = justTDsOnTwitter.map(d => d.name).indexOf(thisTDData[0].name);\r\n    \r\n           setRankInParty(index + 1)\r\n    \r\n        }, [thisTDData, thisTDParty, currentWeek])\r\n\r\n        useEffect(() => {\r\n\r\n            if(!thisTDData || !dailData || !currentWeek) return null;\r\n    \r\n            console.log(dailData)\r\n    \r\n            const justTDsOnTwitter = dailData.filter(function(d) {\r\n              \r\n                if(d.retweetData[0] != undefined) {\r\n                return d\r\n              }\r\n            }\r\n            )\r\n    \r\n            justTDsOnTwitter.sort(function(a, b) {\r\n                return descending(a.retweetData[currentWeek].original_tweets, b.retweetData[currentWeek].original_tweets)\r\n               })\r\n    \r\n    \r\n            const index = justTDsOnTwitter.map(d => d.name).indexOf(thisTDData[0].name)\r\n    \r\n            setRankInDail(index + 1)\r\n    \r\n        }, [thisTDData, dailData, currentWeek])\r\n    \r\n    \r\n        useEffect(() => {\r\n    \r\n        if(!thisTDData || !currentWeek) return null;\r\n    \r\n        function getChange() {\r\n    \r\n            var thisWeek = currentWeek;\r\n            var lastWeek = currentWeek - 1;\r\n            var thisWeekVal = thisTDData[0].retweetData[thisWeek].original_tweets\r\n            var lastWeekVal = thisTDData[0].retweetData[lastWeek].original_tweets\r\n            var change = ((thisWeekVal - lastWeekVal) / lastWeekVal) * 100\r\n\r\n            if(!change) {\r\n                return change = 0\r\n            } else if (change === Infinity){\r\n                return change = thisWeekVal * 100\r\n            }\r\n            else {\r\n                return change\r\n            }\r\n        }\r\n    \r\n        if(getChange() < 0) {\r\n            setChangeSign('-')\r\n        } else {\r\n            setChangeSign('+')\r\n        }\r\n    \r\n        setChange(getChange())\r\n    \r\n    \r\n        }, [currentWeek, thisTDData])\r\n        \r\n        console.log(currentWeek)\r\n\r\n        if(!thisTDData || !currentWeek || !rankInParty || !rankInDail) return null;\r\n\r\n\r\n        \r\n    return (\r\n\r\n        <div className=\"featuredItem\" style={{background: \"white\", boxShadow: \"rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -30px\"}}>\r\n        <span className=\"featuredTitle\" style={{marginLeft: 0, color: \"black\"}}>Original Tweets this week</span>\r\n            <span className=\"featuredSub\" style={{marginLeft: '10px', color: \"black\"}}>#{rankInParty} in party</span>\r\n            <span className=\"featuredSub\" style={{marginLeft: '10px', color: \"black\"}}>#{rankInDail} in Dáil</span>\r\n        <div className=\"featuredFollowerContainer\" style={{color: \"black\"}}>\r\n            <span className=\"featuredFollowers\" style={{color: \"black\"}}>{thisTDData[0].retweetData[currentWeek].original_tweets.toLocaleString()}</span>\r\n            {changeSign == '+' ? <span className=\"featuredFollowerChange\" >{changeSign}{change.toLocaleString()}% <ArrowUpward style={{fill: \"green\"}}/></span> : <span className=\"featuredFollowerChange\">{change.toLocaleString()}% <ArrowDownward style={{fill: \"red\"}}/></span>}\r\n        </div>\r\n    </div>\r\n    )\r\n}\r\n\r\nexport const TDPolarityStats = ({justThisTDData, justThisTDPartyData, allTDData}) => {\r\n\r\n\r\n    const [thisTDData, setThisTDData] = useState(null)\r\n    const [thisTDParty, setThisTDParty] = useState(null)\r\n    const [dailData, setDailData] = useState(null)\r\n    const [currentWeek, setCurrentWeek] = useState(null)\r\n    const [rankInParty, setRankInParty] = useState(null)\r\n    const [rankInDail, setRankInDail] = useState(null)\r\n    const [change, setChange] = useState(null)\r\n    const [changeSign, setChangeSign] = useState(null)\r\n\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        setThisTDData(justThisTDData)\r\n        setThisTDParty(justThisTDPartyData)\r\n        setDailData(allTDData)\r\n\r\n    }, [])\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        if(!thisTDData) return null;\r\n\r\n\r\n        setCurrentWeek(thisTDData[0].sentimentData.length - 1)\r\n\r\n    }, [thisTDData])\r\n\r\n    useEffect(() => {\r\n\r\n        if(!thisTDParty || !currentWeek || !thisTDData) return null;\r\n    \r\n        let justTDsOnTwitter = thisTDParty.filter(function(d) {\r\n          \r\n            if(d.sentimentData != undefined) {\r\n            return d\r\n          }\r\n        }\r\n        )\r\n    \r\n        justTDsOnTwitter.sort(function(a, b) {\r\n            return ascending(a.sentimentData[currentWeek].polarity, b.sentimentData[currentWeek].polarity)\r\n           })\r\n    \r\n           const index = justTDsOnTwitter.map(d => d.name).indexOf(thisTDData[0].name);\r\n    \r\n           setRankInParty(index + 1)\r\n    \r\n        }, [thisTDData, thisTDParty, currentWeek])\r\n\r\n        useEffect(() => {\r\n\r\n            if(!thisTDData || !dailData || !currentWeek) return null;\r\n    \r\n            console.log(dailData)\r\n    \r\n            const justTDsOnTwitter = dailData.filter(function(d) {\r\n              \r\n                if(d.sentimentData != undefined) {\r\n                return d\r\n              }\r\n            }\r\n            )\r\n    \r\n            justTDsOnTwitter.sort(function(a, b) {\r\n                return ascending(a.sentimentData[currentWeek].polarity, b.sentimentData[currentWeek].polarity)\r\n               })\r\n    \r\n    \r\n            const index = justTDsOnTwitter.map(d => d.name).indexOf(thisTDData[0].name)\r\n    \r\n            setRankInDail(index + 1)\r\n    \r\n        }, [thisTDData, dailData, currentWeek])\r\n    \r\n    \r\n        useEffect(() => {\r\n    \r\n        if(!thisTDData || !currentWeek) return null;\r\n    \r\n        function getChange() {\r\n    \r\n            var thisWeek = currentWeek;\r\n            var lastWeek = currentWeek - 1;\r\n            var thisWeekVal = thisTDData[0].sentimentData[thisWeek].polarity\r\n            var lastWeekVal = thisTDData[0].sentimentData[lastWeek].polarity\r\n            var change = ((thisWeekVal - lastWeekVal) / lastWeekVal) * 100\r\n\r\n            if(!change) {\r\n                return change = 0\r\n            } else if (change === Infinity){\r\n                return change = thisWeekVal * 100\r\n            }\r\n            else {\r\n                return change\r\n            }\r\n    \r\n            \r\n        }\r\n    \r\n        if(getChange() < 0) {\r\n            setChangeSign('-')\r\n        } else {\r\n            setChangeSign('+')\r\n        }\r\n    \r\n        setChange(getChange())\r\n    \r\n    \r\n        }, [currentWeek, thisTDData])\r\n\r\n        console.log(change)\r\n\r\n        if(!thisTDData || !currentWeek || !rankInParty || !rankInDail) return null;\r\n        \r\n    return (\r\n\r\n        <div className=\"featuredItem\" style={{background: \"white\", boxShadow: \"rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -30px\"}}>\r\n        <span className=\"featuredTitle\" style={{marginLeft: 0, color: \"black\"}}>Sentiment over last week</span>\r\n            <span className=\"featuredSub\" style={{marginLeft: '10px', color: \"black\"}}>#{rankInParty} most negative in party</span>\r\n            <span className=\"featuredSub\" style={{marginLeft: '10px', color: \"black\"}}>#{rankInDail} in Dáil</span>\r\n        <div className=\"featuredFollowerContainer\" style={{color: \"black\"}}>\r\n            <span className=\"featuredFollowers\" style={{color: \"black\"}}>{thisTDData[0].sentimentData[currentWeek].polarity.toLocaleString()}</span>\r\n            {changeSign == '+' ? <span className=\"featuredFollowerChange\" style={{color: \"black\"}}>{changeSign}{change.toLocaleString()}% <ArrowUpward style={{fill: \"green\"}}/></span> : <span className=\"featuredFollowerChange\">{change.toLocaleString()}% <ArrowDownward style={{fill: \"red\"}}/></span>}\r\n        </div>\r\n    </div>\r\n    )\r\n}\r\n\r\nexport const TDSubjectivityStats = ({justThisTDData, justThisTDPartyData, allTDData}) => {\r\n\r\n\r\n    const [thisTDData, setThisTDData] = useState(null)\r\n    const [thisTDParty, setThisTDParty] = useState(null)\r\n    const [dailData, setDailData] = useState(null)\r\n    const [currentWeek, setCurrentWeek] = useState(null)\r\n    const [rankInParty, setRankInParty] = useState(null)\r\n    const [rankInDail, setRankInDail] = useState(null)\r\n    const [change, setChange] = useState(null)\r\n    const [changeSign, setChangeSign] = useState(null)\r\n\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        setThisTDData(justThisTDData)\r\n        setThisTDParty(justThisTDPartyData)\r\n        setDailData(allTDData)\r\n\r\n    }, [])\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        if(!thisTDData) return null;\r\n\r\n\r\n        setCurrentWeek(thisTDData[0].sentimentData.length - 1)\r\n\r\n    }, [thisTDData])\r\n\r\n    useEffect(() => {\r\n\r\n        if(!thisTDParty || !currentWeek || !thisTDData) return null;\r\n    \r\n        let justTDsOnTwitter = thisTDParty.filter(function(d) {\r\n          \r\n            if(d.sentimentData != undefined) {\r\n            return d\r\n          }\r\n        }\r\n        )\r\n    \r\n        justTDsOnTwitter.sort(function(a, b) {\r\n            return descending(a.sentimentData[currentWeek].subjectivity, b.sentimentData[currentWeek].subjectivity)\r\n           })\r\n    \r\n           const index = justTDsOnTwitter.map(d => d.name).indexOf(thisTDData[0].name);\r\n    \r\n           setRankInParty(index + 1)\r\n    \r\n        }, [thisTDData, thisTDParty, currentWeek])\r\n\r\n        useEffect(() => {\r\n\r\n            if(!thisTDData || !dailData || !currentWeek) return null;\r\n    \r\n            console.log(dailData)\r\n    \r\n            const justTDsOnTwitter = dailData.filter(function(d) {\r\n              \r\n                if(d.sentimentData != undefined) {\r\n                return d\r\n              }\r\n            }\r\n            )\r\n    \r\n            justTDsOnTwitter.sort(function(a, b) {\r\n                return descending(a.sentimentData[currentWeek].subjectivity, b.sentimentData[currentWeek].subjectivity)\r\n               })\r\n    \r\n    \r\n            const index = justTDsOnTwitter.map(d => d.name).indexOf(thisTDData[0].name)\r\n    \r\n            setRankInDail(index + 1)\r\n    \r\n        }, [thisTDData, dailData, currentWeek])\r\n    \r\n    \r\n        useEffect(() => {\r\n    \r\n        if(!thisTDData || !currentWeek) return null;\r\n    \r\n        function getChange() {\r\n    \r\n            var thisWeek = currentWeek;\r\n            var lastWeek = currentWeek - 1;\r\n            var thisWeekVal = thisTDData[0].sentimentData[thisWeek].subjectivity\r\n            var lastWeekVal = thisTDData[0].sentimentData[lastWeek].subjectivity\r\n            var change = ((thisWeekVal - lastWeekVal) / lastWeekVal) * 100\r\n\r\n            if(!change) {\r\n                return change = 0\r\n            } else if (change === Infinity){\r\n                return change = thisWeekVal * 100\r\n            }\r\n            else {\r\n                return change\r\n            }\r\n    \r\n            \r\n        }\r\n    \r\n        if(getChange() < 0) {\r\n            setChangeSign('-')\r\n        } else {\r\n            setChangeSign('+')\r\n        }\r\n    \r\n        setChange(getChange())\r\n    \r\n    \r\n        }, [currentWeek, thisTDData])\r\n\r\n        console.log(change)\r\n\r\n        if(!thisTDData || !currentWeek || !rankInParty || !rankInDail) return null;\r\n        \r\n    return (\r\n\r\n        <div className=\"featuredItem\" style={{background: \"white\", boxShadow: \"rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -30px\"}}>\r\n        <span className=\"featuredTitle\" style={{marginLeft: 0, color: \"black\"}}>Subjectivity over last week</span>\r\n            <span className=\"featuredSub\" style={{marginLeft: '10px', color: \"black\"}}>#{rankInParty} in party</span>\r\n            <span className=\"featuredSub\" style={{marginLeft: '10px', color: \"black\"}}>#{rankInDail} in Dáil</span>\r\n        <div className=\"featuredFollowerContainer\" style={{color: \"black\"}}>\r\n            <span className=\"featuredFollowers\" style={{color: \"black\"}}>{thisTDData[0].sentimentData[currentWeek].subjectivity.toLocaleString()}</span>\r\n            {changeSign == '+' ? <span className=\"featuredFollowerChange\" style={{color: \"black\"}}>{changeSign}{change.toLocaleString()}% <ArrowUpward style={{fill: \"green\"}}/></span> : <span className=\"featuredFollowerChange\">{change.toLocaleString()}% <ArrowDownward style={{fill: \"red\"}}/></span>}\r\n        </div>\r\n    </div>\r\n    )\r\n}\r\n\r\nexport const TDSentimentGauge = ({data}) => {\r\n\r\n\r\n    const [thisTDData, setThisTDData] = useState(null)\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        setThisTDData(data)\r\n\r\n\r\n\r\n    }, [data])\r\n\r\n\r\n    if(!thisTDData) return null;\r\n\r\n    console.log(thisTDData.name)\r\n\r\n\r\n\r\n\r\nreturn (\r\n    <div className=\"featuredItem\">\r\n    <Typography style={{marginBottom: \"5px\"}} variant=\"h6\">{thisTDData.name} has a sunny disposition</Typography>\r\n    <p>Micheál ranks 1st  in his party, and 1st overall for positive tweet sentiment. See through <a href=\"#\" style={{color: \"lightblue\"}}> time</a></p>\r\n    <GaugeChart\r\n    percent={0.15}\r\n    style={{marginTop: \"20px\"}}\r\n    formatTextValue={value=>value/100}\r\n    />\r\n</div>\r\n)\r\n\r\n} \r\n\r\nexport const TDInterests = ({justThisTDData, justThisTDPartyData, allTDData}) => {\r\n\r\n\r\n    const [thisTDData, setThisTDData] = useState(null)\r\n    const [topics, setTopics] = useState(null)\r\n    const [thisTDParty, setThisTDParty] = useState(null)\r\n    const [dailData, setDailData] = useState(null)\r\n    const [currentWeek, setCurrentWeek] = useState(null)\r\n    const [rankInParty, setRankInParty] = useState(null)\r\n    const [rankInDail, setRankInDail] = useState(null)\r\n    const [change, setChange] = useState(null)\r\n    const [changeSign, setChangeSign] = useState(null)\r\n\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        setThisTDData(justThisTDData)\r\n        setThisTDParty(justThisTDPartyData)\r\n        setDailData(allTDData)\r\n\r\n    }, [])\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        if(!thisTDData) return null;\r\n        setCurrentWeek(thisTDData[0].retweetData.length - 1)\r\n\r\n    }, [thisTDData])\r\n    \r\n        useEffect(() => {\r\n    \r\n        if(!thisTDData) return null;\r\n\r\n        if(!thisTDData[0].writtenQuestions[0].writtenQuestions.topic) return null;\r\n\r\n        var topicInterestedIn = thisTDData[0].writtenQuestions[0].writtenQuestions.topic\r\n\r\n        var toSort = Object.entries(topicInterestedIn)\r\n\r\n        console.log(toSort)\r\n\r\n\r\n        toSort.sort(function(a, b) {\r\n           return  b[1]-a[1]\r\n        })\r\n\r\n        if(toSort.length > 3) {\r\n          toSort.length = 3 \r\n        }\r\n\r\n        console.log(toSort)\r\n\r\n        \r\n\r\n        for(let i = 0; i < toSort.length; i++) {\r\n            if(toSort[i].length == 2) {\r\n            toSort[i].length = 1\r\n            }\r\n        }\r\n\r\n\r\n        setTopics(toSort)\r\n\r\n        console.log(thisTDData)\r\n\r\n        console.log(topicInterestedIn)\r\n\r\n        \r\n    \r\n    \r\n        }, [currentWeek, thisTDData])\r\n        \r\n        console.log(currentWeek)\r\n\r\n        if(!thisTDData || !currentWeek || !topics) return null;\r\n\r\n  \r\n    return (\r\n\r\n        <div className=\"featuredItem\" style={{background: \"white\", boxShadow: \"rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -30px\"}}>\r\n        <span className=\"featuredTitle\" style={{marginLeft: 0, color: \"black\"}}>Topics most interested in...</span>\r\n            {/* <span className=\"featuredSub\" style={{marginLeft: '10px'}}>#{rankInParty} in {thisTDData[0].party}</span>\r\n            <span className=\"featuredSub\" style={{marginLeft: '10px'}}>#{rankInDail} in Dáil</span> */}\r\n        <div className=\"featuredFollowerContainer\">\r\n            <span className=\"featuredFollowers\" style={{fontSize: 24, color: \"black\"}}> \r\n            <span style={{fontSize: \"24px\"}}>{topics[0]}</span><span style={{fontSize: \"20px\", opacity: 0.7}}> {topics[1]}</span><span style={{fontSize: \"16px\", opacity: 0.7}}> {topics[2]}</span>\r\n                \r\n                </span>\r\n        </div>\r\n    </div>\r\n    )\r\n}\r\n\r\nexport const TDQuestionsTowardsTopic = ({justThisTDData, justThisTDPartyData, allTDData}) => {\r\n\r\n\r\n    const [thisTDData, setThisTDData] = useState(null)\r\n    const [topics, setTopics] = useState(null)\r\n    const [thisTDParty, setThisTDParty] = useState(null)\r\n    const [dailData, setDailData] = useState(null)\r\n    const [currentWeek, setCurrentWeek] = useState(null)\r\n    const [rankInParty, setRankInParty] = useState(null)\r\n    const [rankInDail, setRankInDail] = useState(null)\r\n    const [change, setChange] = useState(null)\r\n    const [changeSign, setChangeSign] = useState(null)\r\n\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        setThisTDData(justThisTDData)\r\n        setThisTDParty(justThisTDPartyData)\r\n        setDailData(allTDData)\r\n\r\n    }, [])\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        if(!thisTDData) return null;\r\n        setCurrentWeek(thisTDData[0].retweetData.length - 1)\r\n\r\n    }, [thisTDData])\r\n    \r\n        useEffect(() => {\r\n    \r\n        if(!thisTDData) return null;\r\n\r\n        if(!thisTDData[0].writtenQuestions[0].writtenQuestions.topic) return null;\r\n\r\n        var topicInterestedIn = thisTDData[0].writtenQuestions[0].writtenQuestions.topic\r\n\r\n        var toSort = Object.entries(topicInterestedIn)\r\n\r\n        console.log(toSort)\r\n\r\n\r\n        toSort.sort(function(a, b) {\r\n           return  b[1]-a[1]\r\n        })\r\n\r\n        if(toSort.length > 3) {\r\n          toSort.length = 3 \r\n        }\r\n\r\n        console.log(toSort)\r\n\r\n        \r\n\r\n        for(let i = 0; i < toSort.length; i++) {\r\n            if(toSort[i].length == 2) {\r\n            toSort[i].length = 1\r\n            }\r\n        }\r\n\r\n\r\n        setTopics(toSort)\r\n\r\n        console.log(thisTDData)\r\n\r\n        console.log(topicInterestedIn)\r\n\r\n        \r\n    \r\n    \r\n        }, [currentWeek, thisTDData])\r\n\r\n\r\n        useEffect(() => {\r\n\r\n            if(!thisTDParty || !topics || !thisTDData || !dailData) return null\r\n\r\n            const topic = topics[0]\r\n\r\n            function getWrittenTopicInterestRankInParty() {\r\n\r\n                var test = thisTDParty.map(function(d) {\r\n\r\n                    if(d.writtenQuestions[0].writtenQuestions.topic == undefined) {\r\n                        return [d.name, 0]\r\n                    }\r\n\r\n                    if(d.writtenQuestions[0].writtenQuestions.topic[topic]) {\r\n\r\n                        return [d.name, d.writtenQuestions[0].writtenQuestions.topic[topic]]\r\n                    }\r\n\r\n                    if(!d.writtenQuestions[0].writtenQuestions.topic[topic]) {\r\n                        return [d.name, 0]\r\n                    }\r\n\r\n                })\r\n\r\n                return test\r\n\r\n\r\n\r\n\r\n\r\n            }\r\n\r\n            console.log(getWrittenTopicInterestRankInParty())\r\n\r\n\r\n\r\n        }, [topics, thisTDParty])\r\n        \r\n        console.log(currentWeek)\r\n\r\n        if(!thisTDData || !currentWeek || !topics) return null;\r\n\r\n  \r\n    return (\r\n\r\n        <div className=\"featuredItem\" style={{background: \"white\", boxShadow: \"rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -30px\"}}>\r\n        <span className=\"featuredTitle\" style={{marginLeft: 0, color: \"black\"}}>Topics most interested in...</span>\r\n            {/* <span className=\"featuredSub\" style={{marginLeft: '10px'}}>#{rankInParty} in {thisTDData[0].party}</span>\r\n            <span className=\"featuredSub\" style={{marginLeft: '10px'}}>#{rankInDail} in Dáil</span> */}\r\n        <div className=\"featuredFollowerContainer\">\r\n            <span className=\"featuredFollowers\" style={{fontSize: 24, color: \"black\"}}> \r\n            <span style={{fontSize: \"24px\"}}>{topics[0]}</span><span style={{fontSize: \"20px\", opacity: 0.7}}> {topics[1]}</span><span style={{fontSize: \"16px\", opacity: 0.7}}> {topics[2]}</span>\r\n                \r\n                </span>\r\n        </div>\r\n    </div>\r\n    )\r\n}\r\n\r\nexport const TDQuestionsAskedTo = ({justThisTDData, justThisTDPartyData, allTDData}) => {\r\n\r\n\r\n    const [thisTDData, setThisTDData] = useState(null)\r\n    const [to, setTo] = useState(null)\r\n    const [thisTDParty, setThisTDParty] = useState(null)\r\n    const [dailData, setDailData] = useState(null)\r\n    const [currentWeek, setCurrentWeek] = useState(null)\r\n    const [rankInParty, setRankInParty] = useState(null)\r\n    const [rankInDail, setRankInDail] = useState(null)\r\n    const [change, setChange] = useState(null)\r\n    const [changeSign, setChangeSign] = useState(null)\r\n\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        setThisTDData(justThisTDData)\r\n        setThisTDParty(justThisTDPartyData)\r\n        setDailData(allTDData)\r\n\r\n    }, [])\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        if(!thisTDData) return null;\r\n        setCurrentWeek(thisTDData[0].retweetData.length - 1)\r\n\r\n    }, [thisTDData])\r\n    \r\n        useEffect(() => {\r\n    \r\n        if(!thisTDData) return null;\r\n\r\n        if(!thisTDData[0].writtenQuestions[0].writtenQuestions.to) return null;\r\n\r\n        var usuallyAsks = thisTDData[0].writtenQuestions[0].writtenQuestions.to\r\n\r\n        var toSort = Object.entries(usuallyAsks)\r\n\r\n\r\n        toSort.sort(function(a, b) {\r\n           return  b[1]-a[1]\r\n        })\r\n\r\n        if(toSort.length > 3) {\r\n            toSort.length = 3  \r\n          }\r\n\r\n        for(let i = 0; i < toSort.length; i++) {\r\n            if(toSort[i].length == 2) {\r\n                toSort[i].length = 1\r\n            }\r\n            \r\n        }\r\n\r\n        setTo(toSort)\r\n    \r\n        }, [currentWeek, thisTDData])\r\n        \r\n        console.log(currentWeek)\r\n\r\n        if(!thisTDData || !currentWeek || !to) return null;\r\n        \r\n    return (\r\n\r\n        <div className=\"featuredItem\" style={{background: \"white\", boxShadow: \"rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -30px\"}}>>\r\n        <span className=\"featuredTitle\" style={{marginLeft: 0, color: \"black\"}}>Usually has questions towards...</span>\r\n            {/* <span className=\"featuredSub\" style={{marginLeft: '10px'}}>#{rankInParty} in {thisTDData[0].party}</span>\r\n            <span className=\"featuredSub\" style={{marginLeft: '10px'}}>#{rankInDail} in Dáil</span> */}\r\n        <div className=\"featuredFollowerContainer\">\r\n            <span className=\"featuredFollowers\" style={{fontSize: 24, color: \"black\", marginLeft: \"10px\"}}>\r\n                \r\n                \r\n                <span style={{fontSize: \"24px\"}}>{to[0]}</span><span style={{fontSize: \"20px\", opacity: 0.7}}> {to[1]}</span><span style={{fontSize: \"16px\", opacity: 0.7}}> {to[2]}</span>\r\n                </span>\r\n        </div>\r\n    </div>\r\n    )\r\n}\r\n\r\n","import { arrayOf, shape, string, date as dateProp, number } from \"prop-types\";\r\n\r\nexport const MultiLineDataItemsPropTypes = arrayOf(\r\n  shape({\r\n    date: dateProp,\r\n    change: number,\r\n    followers: number\r\n  })\r\n);\r\n\r\nexport const MultiLineDataPropTypes = arrayOf(\r\n  shape({\r\n    name: string,\r\n    items: MultiLineDataItemsPropTypes,\r\n    color: string\r\n  })\r\n);\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Line = ({\r\n  xScale,\r\n  yScale,\r\n  color,\r\n  data,\r\n  isSmooth,\r\n  animation,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  // Define different types of animation that we can use\r\n  const animateLeft = React.useCallback(() => {\r\n    // NOTE: for some reason getTotalLength() doesn't work in tests\r\n    // in this codesandbox so we added default value just for tests\r\n    const totalLength = ref.current.getTotalLength\r\n      ? ref.current.getTotalLength()\r\n      : 500;\r\n    d3.select(ref.current)\r\n      .attr(\"opacity\", 1)\r\n      .attr(\"stroke-dasharray\", `${totalLength},${totalLength}`)\r\n      .attr(\"stroke-dashoffset\", totalLength)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeLinear)\r\n      .attr(\"stroke-dashoffset\", 0);\r\n  }, []);\r\n  const animateFadeIn = React.useCallback(() => {\r\n    d3.select(ref.current)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeLinear)\r\n      .attr(\"opacity\", 1);\r\n  }, []);\r\n  const noneAnimation = React.useCallback(() => {\r\n    d3.select(ref.current).attr(\"opacity\", 1);\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    switch (animation) {\r\n      case \"left\":\r\n        animateLeft();\r\n        break;\r\n      case \"fadeIn\":\r\n        animateFadeIn();\r\n        break;\r\n      case \"none\":\r\n      default:\r\n        noneAnimation();\r\n        break;\r\n    }\r\n  }, [animateLeft, animateFadeIn, noneAnimation, animation]);\r\n\r\n  // Recalculate line length if scale has changed\r\n  React.useEffect(() => {\r\n    if (animation === \"left\") {\r\n      const totalLength = ref.current.getTotalLength\r\n        ? ref.current.getTotalLength()\r\n        : 500;\r\n      d3.select(ref.current).attr(\r\n        \"stroke-dasharray\",\r\n        `${totalLength},${totalLength}`\r\n      );\r\n    }\r\n  }, [xScale, yScale, animation]);\r\n\r\n  const line = d3\r\n    .line()\r\n    .x((d) => xScale(d.date))\r\n    .y((d) => yScale(d.followers));\r\n\r\n  const d = line(data);\r\n\r\n  return (\r\n    <path\r\n      ref={ref}\r\n      d={d?.match(/NaN|undefined/) ? \"\" : d}\r\n      stroke={color}\r\n      strokeWidth={3}\r\n      fill=\"none\"\r\n      opacity={0}\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n\r\nLine.propTypes = {\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  data: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      date: PropTypes.date,\r\n      change: PropTypes.number\r\n    })\r\n  ),\r\n  color: PropTypes.string,\r\n  isSmooth: PropTypes.bool,\r\n  animation: PropTypes.oneOf([\"left\", \"fadeIn\", \"none\"])\r\n};\r\n\r\nLine.defaultProps = {\r\n  data: [],\r\n  color: \"white\",\r\n  isSmooth: false,\r\n  animation: \"left\"\r\n};\r\n\r\nexport default Line;\r\n","/** Area.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Area = ({ xScale, yScale, color, data, disableAnimation, ...props }) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    if (disableAnimation) {\r\n      d3.select(ref.current).attr(\"opacity\", 1);\r\n      return;\r\n    }\r\n    d3.select(ref.current)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeBackIn)\r\n      .attr(\"opacity\", 1);\r\n  }, [disableAnimation]);\r\n\r\n  const d = React.useMemo(() => {\r\n    const area = d3\r\n      .area()\r\n      .x(({ date }) => xScale(date))\r\n      .y1(({ followers }) => yScale(followers))\r\n      .y0(() => yScale(yScale.domain()[0]));\r\n    return area(data);\r\n  }, [xScale, yScale, data]);\r\n\r\n  return (\r\n    <>\r\n      <path\r\n        ref={ref}\r\n        d={d}\r\n        fill={`url(#gradient-${color})`}\r\n        opacity={0}\r\n        {...props}\r\n      />\r\n      <defs>\r\n        <linearGradient\r\n          id={`gradient-${color}`}\r\n          x1=\"0%\"\r\n          x2=\"0%\"\r\n          y1=\"0%\"\r\n          y2=\"100%\"\r\n        >\r\n          <stop offset=\"0%\" stopColor={color} stopOpacity={0.2} />\r\n          <stop offset=\"100%\" stopColor={color} stopOpacity={0} />\r\n        </linearGradient>\r\n      </defs>\r\n    </>\r\n  );\r\n};\r\n\r\nArea.propTypes = {\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  data: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      date: PropTypes.date,\r\n      followers: PropTypes.number\r\n    })\r\n  ),\r\n  color: PropTypes.string,\r\n  disableAnimation: PropTypes.bool\r\n};\r\n\r\nArea.defaultProps = {\r\n  data: [],\r\n  color: \"white\",\r\n  disableAnimation: false\r\n};\r\n\r\nexport default Area;\r\n","/** AxisX.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Axis = ({\r\n  type,\r\n  scale,\r\n  ticks,\r\n  transform,\r\n  tickFormat,\r\n  disableAnimation,\r\n  anchorEl,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    const axisGenerator = type === \"left\" ? d3.axisRight : d3.axisBottom;\r\n    const axis = axisGenerator(scale).ticks(ticks).tickFormat(tickFormat);\r\n    const axisGroup = d3.select(ref.current);\r\n    if (disableAnimation) {\r\n      axisGroup.call(axis);\r\n    } else {\r\n      axisGroup.transition().duration(750).ease(d3.easeLinear).call(axis);\r\n    }\r\n    axisGroup.select(\".domain\").remove();\r\n    axisGroup.selectAll(\"line\").remove();\r\n    axisGroup\r\n      .selectAll(\"text\")\r\n      .attr(\"opacity\", 0.5)\r\n      .attr(\"color\", \"white\")\r\n      .attr(\"font-size\", \"0.75rem\");\r\n  }, [scale, ticks, tickFormat, disableAnimation]);\r\n\r\n  React.useEffect(() => {\r\n    d3.select(anchorEl)\r\n      .on(\"mouseout.axisX\", () => {\r\n        d3.select(ref.current)\r\n          .selectAll(\"text\")\r\n          .attr(\"opacity\", 0.5)\r\n          .style(\"font-weight\", \"normal\");\r\n      })\r\n      .on(\"mousemove.axisX\", () => {\r\n        const [x] = d3.mouse(anchorEl);\r\n        const xDate = scale.invert(x);\r\n        const textElements = d3.select(ref.current).selectAll(\"text\");\r\n        const data = textElements.data();\r\n        const index = d3.bisector((d) => d).left(data, xDate);\r\n        textElements\r\n          .attr(\"opacity\", (d, i) => (i === index - 1 ? 1 : 0.5))\r\n          .style(\"font-weight\", (d, i) =>\r\n            i === index - 1 ? \"bold\" : \"normal\"\r\n          );\r\n      });\r\n  }, [anchorEl, scale]);\r\n\r\n  return <g ref={ref} transform={transform} {...props} />;\r\n};\r\n\r\nAxis.propTypes = {\r\n  type: PropTypes.oneOf([\"left\", \"bottom\"]).isRequired,\r\n  scale: PropTypes.func.isRequired,\r\n  ticks: PropTypes.oneOfType([PropTypes.number, PropTypes.func]),\r\n  tickFormat: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\r\n  transform: PropTypes.string,\r\n  disableAnimation: PropTypes.bool,\r\n  anchorEl: PropTypes.instanceOf(Element)\r\n};\r\n\r\nAxis.defaultProps = {\r\n  ticks: 0,\r\n  tickFormat: null,\r\n  transform: \"\",\r\n  disableAnimation: false,\r\n  anchorEl: null\r\n};\r\n\r\nexport default Axis;\r\n","/** GridLine.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst GridLine = ({\r\n  type,\r\n  scale,\r\n  ticks,\r\n  size,\r\n  transform,\r\n  disableAnimation,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    const axisGenerator = type === \"vertical\" ? d3.axisBottom : d3.axisLeft;\r\n    const axis = axisGenerator(scale).ticks(ticks).tickSize(-size);\r\n\r\n    const gridGroup = d3.select(ref.current);\r\n    if (disableAnimation) {\r\n      gridGroup.call(axis);\r\n    } else {\r\n      gridGroup.transition().duration(750).ease(d3.easeLinear).call(axis);\r\n    }\r\n    gridGroup.select(\".domain\").remove();\r\n    gridGroup.selectAll(\"text\").remove();\r\n    gridGroup.selectAll(\"line\").attr(\"stroke\", \"rgba(255, 255, 255, 0.1)\");\r\n  }, [scale, ticks, size, disableAnimation]);\r\n\r\n  return <g ref={ref} transform={transform} {...props} />;\r\n};\r\n\r\nGridLine.propTypes = {\r\n  scale: PropTypes.func.isRequired,\r\n  type: PropTypes.oneOf([\"vertical\", \"horizontal\"]).isRequired,\r\n  ticks: PropTypes.oneOfType([PropTypes.number, PropTypes.func]),\r\n  transform: PropTypes.string,\r\n  size: PropTypes.number,\r\n  disableAnimation: PropTypes.bool\r\n};\r\n\r\nGridLine.defaultProps = {\r\n  ticks: 0,\r\n  transform: \"\",\r\n  size: 0,\r\n  disableAnimation: false\r\n};\r\n\r\nexport default GridLine;\r\n","/** Overlay.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\n/**\r\n * Use Overlay as a wrapper for components that need mouse events to be handled.\r\n * For example: Tooltip, AxisX.\r\n */\r\nconst Overlay = React.forwardRef(({ width, height, children }, ref) => (\r\n  <g>\r\n    {children}\r\n    <rect ref={ref} width={width} height={height} opacity={0} />\r\n  </g>\r\n));\r\n\r\nOverlay.propTypes = {\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired,\r\n  children: PropTypes.node.isRequired\r\n};\r\n\r\nexport default Overlay;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\nimport { MultiLineDataPropTypes } from \"../utils/propTypes\";\r\nimport {formatPercent } from \"../utils/commonUtils\"\r\n// import { formatPercent, formatPriceUSD } from \"../utils/commonUtils\";\r\n\r\nconst Tooltip = ({\r\n  xScale,\r\n  yScale,\r\n  width,\r\n  height,\r\n  data,\r\n  margin,\r\n  anchorEl,\r\n  children,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  const drawLine = React.useCallback(\r\n    (x) => {\r\n      d3.select(ref.current)\r\n        .select(\".tooltipLine\")\r\n        .attr(\"x1\", x)\r\n        .attr(\"x2\", x)\r\n        .attr(\"y1\", -margin.top)\r\n        .attr(\"y2\", height);\r\n    },\r\n    [ref, height, margin]\r\n  );\r\n\r\n  const drawContent = React.useCallback(\r\n    (x) => {\r\n      const tooltipContent = d3.select(ref.current).select(\".tooltipContent\");\r\n      tooltipContent.attr(\"transform\", (cur, i, nodes) => {\r\n        const nodeWidth = nodes[i]?.getBoundingClientRect()?.width || 0;\r\n        const translateX = nodeWidth + x > width ? x - nodeWidth - 12 : x + 8;\r\n        return `translate(${translateX}, ${-margin.top})`;\r\n      });\r\n      tooltipContent\r\n        .select(\".contentTitle\")\r\n        .text(d3.timeFormat(\"%b %d, %Y\")(xScale.invert(x)));\r\n    },\r\n    [xScale, margin, width]\r\n  );\r\n\r\n  const drawBackground = React.useCallback(() => {\r\n    // reset background size to defaults\r\n    const contentBackground = d3\r\n      .select(ref.current)\r\n      .select(\".contentBackground\");\r\n    contentBackground.attr(\"width\", 125).attr(\"height\", 40);\r\n\r\n    // calculate new background size\r\n    const tooltipContentElement = d3\r\n      .select(ref.current)\r\n      .select(\".tooltipContent\")\r\n      .node();\r\n    if (!tooltipContentElement) return;\r\n\r\n    const contentSize = tooltipContentElement.getBoundingClientRect();\r\n    contentBackground\r\n      .attr(\"width\", contentSize.width + 8)\r\n      .attr(\"height\", contentSize.height + 4);\r\n  }, []);\r\n\r\n  const onChangePosition = React.useCallback((d, i, isVisible) => {\r\n    d3.selectAll(\".performanceItemThisTDChange\")\r\n      .filter((td, tIndex) => tIndex === i)\r\n      .text(isVisible ? formatPercent(d.change) : \"\");\r\n\r\n    d3.selectAll(\".performanceItemThisTDFollowers\")\r\n      .filter((td, tIndex) => tIndex === i)\r\n      .text(\r\n        d.followers.toLocaleString() && !isVisible ? \"No data\" : d.followers.toLocaleString()\r\n      );\r\n       // .text(\r\n      //   d.marketvalue && !isVisible ? \"No data\" : formatPriceUSD(d.marketvalue)\r\n      // );\r\n\r\n    const maxNameWidth = d3.max(\r\n      d3.selectAll(\".performanceItemThisTDName\").nodes(),\r\n      (node) => node.getBoundingClientRect().width\r\n    );\r\n    d3.selectAll(\".performanceItemThisTDChange\").attr(\r\n      \"transform\",\r\n      (datum, index, nodes) =>\r\n        `translate(${\r\n          nodes[index].previousSibling.getBoundingClientRect().width + 14\r\n        },4)`\r\n    );\r\n\r\n    d3.selectAll(\".performanceItemThisTDFollowers\").attr(\r\n      \"transform\",\r\n      `translate(${maxNameWidth + 60},4)`\r\n    );\r\n  }, []);\r\n\r\n  const followPoints = React.useCallback(() => {\r\n    const [x] = d3.mouse(anchorEl);\r\n    const xDate = xScale.invert(x);\r\n    const bisectDate = d3.bisector((d) => d.date).left;\r\n    let baseXPos = 0;\r\n\r\n    // draw circles on line\r\n    d3.select(ref.current)\r\n      .selectAll(\".tooltipLinePoint\")\r\n      .attr(\"transform\", (cur, i) => {\r\n        const index = bisectDate(data[i].items, xDate, 1);\r\n        const d0 = data[i].items[index - 1];\r\n        const d1 = data[i].items[index];\r\n        const d = xDate - d0?.date > d1?.date - xDate ? d1 : d0;\r\n        if (d.date === undefined && d.followers === undefined) {\r\n          // move point out of container\r\n          return \"translate(-100,-100)\";\r\n        }\r\n        const xPos = xScale(d.date);\r\n        if (i === 0) {\r\n          baseXPos = xPos;\r\n        }\r\n\r\n        let isVisible = true;\r\n        if (xPos !== baseXPos) {\r\n          isVisible = false;\r\n        }\r\n        const yPos = yScale(d.followers);\r\n\r\n        onChangePosition(d, i, isVisible);\r\n\r\n        return isVisible\r\n          ? `translate(${xPos}, ${yPos})`\r\n          : \"translate(-100,-100)\";\r\n      });\r\n\r\n    drawLine(baseXPos);\r\n    drawContent(baseXPos);\r\n    drawBackground();\r\n  }, [\r\n    anchorEl,\r\n    drawLine,\r\n    drawContent,\r\n    drawBackground,\r\n    xScale,\r\n    yScale,\r\n    data,\r\n    onChangePosition\r\n  ]);\r\n\r\n  React.useEffect(() => {\r\n    d3.select(anchorEl)\r\n      .on(\"mouseout.tooltip\", () => {\r\n        d3.select(ref.current).attr(\"opacity\", 0);\r\n      })\r\n      .on(\"mouseover.tooltip\", () => {\r\n        d3.select(ref.current).attr(\"opacity\", 1);\r\n      })\r\n      .on(\"mousemove.tooltip\", () => {\r\n        d3.select(ref.current)\r\n          .selectAll(\".tooltipLinePoint\")\r\n          .attr(\"opacity\", 1);\r\n        followPoints();\r\n      });\r\n  }, [anchorEl, followPoints]);\r\n\r\n  if (!data.length) return null;\r\n\r\n  return (\r\n    <g ref={ref} opacity={0} {...props}>\r\n      <line className=\"tooltipLine\" />\r\n      <g className=\"tooltipContent\">\r\n        <rect className=\"contentBackground\" rx={4} ry={4} opacity={0.2} />\r\n        <text className=\"contentTitle\" transform=\"translate(4,14)\" />\r\n        <g className=\"content\" transform=\"translate(4,32)\">\r\n          {data.map(({ name, color }, i) => (\r\n            <g key={name} transform={`translate(6,${22 * i})`}>\r\n              <circle r={6} fill={color} />\r\n              <text className=\"performanceItemThisTDName\" transform=\"translate(10,4)\">\r\n                {name}\r\n              </text>\r\n              <text\r\n                className=\"performanceItemThisTDChange\"\r\n                opacity={0.5}\r\n                fontSize={10}\r\n              />\r\n              <text className=\"performanceItemThisTDFollowers\" />\r\n            </g>\r\n          ))}\r\n        </g>\r\n      </g>\r\n      {data.map(({ name }) => (\r\n        <circle className=\"tooltipLinePoint\" r={6} key={name} opacity={0} />\r\n      ))}\r\n    </g>\r\n  );\r\n};\r\n\r\nTooltip.propTypes = {\r\n  width: PropTypes.number,\r\n  height: PropTypes.number,\r\n  margin: PropTypes.shape({\r\n    top: PropTypes.number,\r\n    bottom: PropTypes.number,\r\n    left: PropTypes.number,\r\n    right: PropTypes.number\r\n  }),\r\n  data: MultiLineDataPropTypes,\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  anchorEl: PropTypes.instanceOf(Element)\r\n};\r\n\r\nTooltip.defaultProps = {\r\n  width: 0,\r\n  height: 0,\r\n  margin: {\r\n    top: 0,\r\n    bottom: 0,\r\n    left: 0,\r\n    right: 0\r\n  },\r\n  data: [],\r\n  anchorEl: null\r\n};\r\n\r\nexport default Tooltip;\r\n","/* eslint-disable no-bitwise */\r\nimport * as d3 from \"d3\";\r\nimport { DateTime, Interval } from \"luxon\";\r\n\r\n// export const formatPriceUSD = (price) =>\r\n//   new Intl.NumberFormat(\"en-US\", { style: \"currency\", currency: \"USD\" }).format(\r\n//     price\r\n//   );\r\n\r\nexport const formatPercent = (percent = 0) => {\r\n  let result = \"0.00%\";\r\n  const isNumber = typeof percent === \"number\";\r\n  const isString = typeof percent === \"string\";\r\n  const isNotNaN = !Number.isNaN(parseFloat(percent));\r\n\r\n  if ((isNumber || isString) && isNotNaN) {\r\n    result = `${parseFloat(percent) > 0 ? \"+\" : \"\"}${d3.format(\".2%\")(\r\n      percent / 100\r\n    )}`;\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const getPeriod = (date) => {\r\n  if (!date) return 6;\r\n  const now = DateTime.utc();\r\n  const before = DateTime.fromJSDate(date);\r\n  const i = Interval.fromDateTimes(before, now);\r\n  return i.length(\"months\");\r\n};\r\n\r\nexport const getXTicks = (months) => {\r\n  if (months <= 2) return d3.timeDay.every(5).filter((d) => d.getDate() !== 31);\r\n  if (months <= 6) return d3.timeMonth.every(1);\r\n  if (months <= 13) return d3.timeMonth.every(2);\r\n  return d3.timeYear.every(1);\r\n};\r\n\r\nexport const getXTickFormat = (months) => {\r\n  if (months <= 2) return d3.timeFormat(\"%d %b\");\r\n  if (months <= 6) return d3.timeFormat(\"%b\");\r\n  if (months <= 13) return d3.timeFormat(\"%b %Y\");\r\n  return d3.timeFormat(\"%Y\");\r\n};\r\n","/** MultilineChart.controller.js */\r\nimport { useMemo } from \"react\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst useController = ({ data, width, height }) => {\r\n  const xMin = useMemo(\r\n    () => d3.min(data, ({ items }) => d3.min(items, ({ date }) => date)),\r\n    [data]\r\n  );\r\n\r\n  const xMax = useMemo(\r\n    () => d3.max(data, ({ items }) => d3.max(items, ({ date }) => date)),\r\n    [data]\r\n  );\r\n\r\n  const xScale = useMemo(\r\n    () => d3.scaleTime().domain([xMin, xMax]).range([0, width]),\r\n    [xMin, xMax, width]\r\n  );\r\n\r\n  const yMin = useMemo(\r\n    () => d3.min(data, ({ items }) => d3.min(items, ({ followers }) => followers)),\r\n    [data]\r\n  );\r\n\r\n  const yMax = useMemo(\r\n    () => d3.max(data, ({ items }) => d3.max(items, ({followers}) => followers)),\r\n    [data]\r\n  );\r\n\r\n  const yScale = useMemo(() => {\r\n    const indention = (yMax - yMin) * 0.5;\r\n    return d3\r\n      .scaleLinear()\r\n      .domain([yMin - indention, yMax + indention])\r\n      .range([height, 0]);\r\n  }, [height, yMin, yMax]);\r\n\r\n  const yScaleForAxis = useMemo(\r\n    () => d3.scaleBand().domain([yMin, yMax]).range([height, 0]),\r\n    [height, yMin, yMax]\r\n  );\r\n\r\n  const yTickFormat = (d) => {\r\n\r\n    return d\r\n    // `${parseFloat(d) > 0 ? \"+\" : \"\"}${d3.format(\".2%\")(d / 100)}`;\r\n  }\r\n  const xTickFormat = (d) => {\r\n    if (d3.timeFormat(\"%b\")(d) === \"Jan\") {\r\n      return d3.timeFormat(\"%Y\")(d);\r\n    }\r\n    return d3.timeFormat(\"%b\")(d);\r\n  };\r\n  return {\r\n    yTickFormat,\r\n    xScale,\r\n    yScale,\r\n    yScaleForAxis,\r\n    xTickFormat\r\n  };\r\n};\r\n\r\nexport default useController;\r\n","import React from 'react';\r\nimport ResizeObserver from 'resize-observer-polyfill';\r\n\r\n/**\r\n * Use ResizeObserver to listen for the changes to the dimensions of an element\r\n * @params ref - React ref\r\n * @returns {object} - { width, height, top, left }\r\n */\r\nconst useResize = (ref) => {\r\n  const [dimensions, setDimensions] = React.useState(null);\r\n  React.useEffect(() => {\r\n    const element = ref.current;\r\n    const resizeObserver = new ResizeObserver((entries) => {\r\n      entries.forEach((entry) => {\r\n        setDimensions(entry.contentRect);\r\n      });\r\n    });\r\n    resizeObserver.observe(element);\r\n    return () => {\r\n      resizeObserver.unobserve(element);\r\n    };\r\n  }, [ref]);\r\n  return dimensions || {\r\n    width: 0,\r\n    height: 0,\r\n    top: 0,\r\n    left: 0,\r\n  };\r\n};\r\n\r\nexport default useResize;\r\n","import React from \"react\";\r\nimport useResize from \"./useResize\";\r\n\r\nconst useDimensions = ({ maxHeight, margin = {}, scaleCoef = 0.5 }) => {\r\n  const ref = React.useRef(null);\r\n  const { width } = useResize(ref);\r\n\r\n  const height =\r\n    !maxHeight || width * scaleCoef < maxHeight ? width * scaleCoef : maxHeight;\r\n  const innerWidth = width - (margin.left || 0) - (margin.right || 0);\r\n  const innerHeight = height - (margin.top || 0) - (margin.bottom || 0);\r\n\r\n  return [\r\n    ref,\r\n    {\r\n      svgWidth: width,\r\n      svgHeight: height,\r\n      width: innerWidth,\r\n      height: innerHeight\r\n    }\r\n  ];\r\n};\r\n\r\nexport default useDimensions;\r\n","/** MultilineChart.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { MultiLineDataPropTypes } from \"../utils/propTypes\";\r\nimport { Line, Axis, GridLine, Overlay, Tooltip, Area } from \"../components\";\r\nimport useController from \"./MultilineChart.controller\";\r\nimport useDimensions from \"../utils/useDimensions\";\r\n\r\nconst MultilineChart = ({ data = [], margin = {} }) => {\r\n  const overlayRef = React.useRef(null);\r\n  const [containerRef, { svgWidth, svgHeight, width, height }] = useDimensions({\r\n    maxHeight: 400,\r\n    margin\r\n  });\r\n  const controller = useController({ data, width, height });\r\n  const {\r\n    yTickFormat,\r\n    xTickFormat,\r\n    xScale,\r\n    yScale,\r\n    yScaleForAxis\r\n  } = controller;\r\n\r\n  return (\r\n    <div ref={containerRef}>\r\n      <svg width={svgWidth} height={svgHeight}>\r\n        <g transform={`translate(${margin.left},${margin.top})`}>\r\n          <GridLine\r\n            type=\"vertical\"\r\n            scale={xScale}\r\n            ticks={5}\r\n            size={height}\r\n            transform={`translate(0, ${height})`}\r\n          />\r\n          <GridLine\r\n            type=\"horizontal\"\r\n            scale={yScaleForAxis}\r\n            ticks={2}\r\n            size={width}\r\n          />\r\n          <GridLine\r\n            type=\"horizontal\"\r\n            className=\"baseGridLine\"\r\n            scale={yScale}\r\n            ticks={1}\r\n            size={width}\r\n            disableAnimation\r\n          />\r\n          {data.map(({ name, items = [], color }) => (\r\n            <Line\r\n              key={name}\r\n              data={items}\r\n              xScale={xScale}\r\n              yScale={yScale}\r\n              color={color}\r\n            />\r\n          ))}\r\n          {/* <Area data={data[0].items} xScale={xScale} yScale={yScale} /> */}\r\n          <Axis\r\n            type=\"left\"\r\n            scale={yScaleForAxis}\r\n            transform=\"translate(0, -10)\"\r\n            ticks={5}\r\n            tickFormat={yTickFormat}\r\n          />\r\n          <Overlay ref={overlayRef} width={width} height={height}>\r\n            <Axis\r\n              type=\"bottom\"\r\n              className=\"axisX\"\r\n              anchorEl={overlayRef.current}\r\n              scale={xScale}\r\n              transform={`translate(10, ${height - height / 6})`}\r\n              ticks={5}\r\n              tickFormat={xTickFormat}\r\n            />\r\n            <Tooltip\r\n              className=\"tooltip\"\r\n              anchorEl={overlayRef.current}\r\n              width={width}\r\n              height={height}\r\n              margin={margin}\r\n              xScale={xScale}\r\n              yScale={yScale}\r\n              data={data}\r\n            />\r\n          </Overlay>\r\n        </g>\r\n      </svg>\r\n    </div>\r\n  );\r\n};\r\n\r\nMultilineChart.propTypes = {\r\n  data: MultiLineDataPropTypes,\r\n  margin: PropTypes.shape({\r\n    top: PropTypes.number,\r\n    bottom: PropTypes.number,\r\n    left: PropTypes.number,\r\n    right: PropTypes.number\r\n  })\r\n};\r\n\r\nMultilineChart.defaultProps = {\r\n  data: [],\r\n  margin: {\r\n    top: 30,\r\n    right: 15,\r\n    bottom: 15,\r\n    left: 15\r\n  }\r\n};\r\n\r\nexport default MultilineChart;\r\n","import React from \"react\";\r\nimport { FormControlLabel, Checkbox } from \"@material-ui/core\";\r\n\r\nconst Legend = ({ data, selectedItems, onChange }) => (\r\n  <div className=\"legendContainer\">\r\n    {data.map((d) => (\r\n      <div className=\"checkbox\" style={{ color: d.color }} key={d.name}>\r\n\r\n<FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: d.color}}\r\n            value={d.name}\r\n            onChange={() => onChange(d.name)}\r\n          />\r\n        }\r\n        label={d.name}\r\n\r\n        />\r\n      </div>\r\n    ))}\r\n  </div>\r\n);\r\n\r\nexport default Legend;\r\n","/** App.js */\r\nimport React, {useState, useEffect} from \"react\";\r\nimport MultilineChart from \"./views/MultilineChart\";\r\nimport Legend from \"./components/Legend\";\r\nimport vcit from \"./data/VCIT.json\";\r\nimport portfolio from \"./data/portfolio.json\";\r\nimport schc from \"./data/SCHC.json\";\r\nimport \"./styles.css\";\r\nimport fiannafail from \"./data/fiannaFail.json\"\r\nimport finegael from \"./data/finegael.json\"\r\nimport ind from \"./data/ind.json\"\r\nimport sinnfein from \"./data/sinnfein.json\"\r\nimport labour from \"./data/labour.json\"\r\nimport { chamberStats } from '../../../Backend/metaData';\r\nimport axios from \"axios\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport { gridColumnsTotalWidthSelector } from \"@material-ui/data-grid\";\r\n\r\n\r\n\r\n\r\n\r\nexport default function TDLineChartFollowers ({justThisTDData, justThisTDPartyData, allTDData}) {\r\n\r\n  const [selectedItems, setSelectedItems] = useState([]);\r\n  const [thisTDData, setThisTDData] = useState(null)\r\n  const [thisTDPartyData, setThisTDPartyData] = useState(null)\r\n  const [dailData, setDailData] = useState(null)\r\n\r\n  const partyColors = {\r\n    \"Sinn Féin\": \"#326760\",\r\n    \"Fine Gael\": \"#6699FF\",\r\n    \"Fianna Fáil\": \"#66BB66\",\r\n    \"Labour Party\": \"#CC0000\",\r\n    \"Solidarity - People Before Profit\": \"#8E2420\",\r\n    \"Independent\": \"white\",\r\n    \"Green Party\": \"#99CC33\",\r\n    \"Social Democrats\": \"#752F8B\",\r\n    \"Aontú\": \"#44532A\",\r\n    \"Independents 4 Change\": \"grey\"}\r\n\r\n    const tdPartyColors = {\r\n\r\n      \"Sinn Féin\": \"#4b9b90\",\r\n      \"Fine Gael\": \"#b3ccff\",\r\n      \"Fianna Fáil\": \"#9bd39b\",\r\n      \"Labour Party\": \"#ff1a1a\",\r\n      \"Solidarity - People Before Profit\": \"#b82f29\",\r\n      \"Independent\": \"#d9d9d9\",\r\n      \"Green Party\": \"#b8db70\",\r\n      \"Social Democrats\": \"#a346c0\",\r\n      \"Aontú\": \"#84a152\",\r\n      \"Independents 4 Change\": \"#a6a6a6\"\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n  useEffect(() => {\r\n\r\n    setThisTDData(justThisTDData)\r\n    setThisTDPartyData(justThisTDPartyData)\r\n    setDailData(allTDData)\r\n    \r\n}, []);\r\n\r\n\r\nuseEffect(() => {\r\n\r\n  if(!thisTDData) return null;\r\n\r\n  setSelectedItems([thisTDData[0].name, \"Dáil Average\", \"Party Average\"])\r\n\r\n}, [thisTDData])\r\n\r\nconst onChangeSelection = (name) => {\r\n    const newSelectedItems = selectedItems.includes(name)\r\n      ? selectedItems.filter((item) => item !== name)\r\n      : [...selectedItems, name];\r\n    setSelectedItems(newSelectedItems);\r\n  };\r\n\r\n  if(!thisTDData) return null;\r\n\r\n\r\nfunction getTDObj() {\r\n\r\n    let justTDOnTwitter = thisTDData.filter(function(d) {\r\n                \r\n      if(d.followerData[0] != undefined) {\r\n      return d\r\n    }\r\n  }\r\n  )\r\n  \r\n\r\n  let followerArr = justTDOnTwitter[0].followerData.map(d => d.followers);\r\n  let dateArr = justTDOnTwitter[0].followerData.map(d => d.date);\r\n  let changeArr = [0, ];\r\n  let tdObjArr = [];\r\n  \r\n  \r\n  for(let i = 1; i < followerArr.length; i++) {\r\n  \r\n  \r\n    var lastWeek  = followerArr[i - 1]\r\n    var thisWeek = followerArr[i]\r\n    var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n    \r\n    //filter NaN at start\r\n  \r\n    if(diff !== diff) {changeArr.push(0) } else {\r\n    changeArr.push(diff) \r\n    }\r\n  }\r\n  \r\n  for(let i = 0; i < justTDOnTwitter[0].followerData.length; i++) {\r\n  \r\n    function tdObj() {\r\n  \r\n      this.followers = followerArr[i]\r\n      this.date = dateArr[i]\r\n      this.change = changeArr[i]\r\n    }\r\n  tdObjArr.push(new tdObj)\r\n  }\r\n  \r\n  return tdObjArr\r\n  \r\n  \r\n}\r\n\r\nfunction getDailObj() {\r\n\r\n  let justTDsOnTwitter = dailData.filter(function(d) {\r\n              \r\n    if(d.followerData[0] != undefined) {\r\n    return d\r\n  }\r\n}\r\n)\r\n\r\nlet totalFollowerArr = []\r\nlet averageFollowerArr = []\r\nlet dateArr = []\r\nlet changeArr = [0, ]\r\nlet dailMeanObjArr = []\r\n\r\nfor(let i = 0; i < justTDsOnTwitter[0].followerData.length; i ++) {\r\n\r\nlet holder = justTDsOnTwitter.map(d => d.followerData[i].followers)\r\nlet total = holder.reduce(function(a, b) {\r\n  return a + b\r\n})\r\n\r\nlet averageFollowerCount = total / justTDsOnTwitter.length\r\n\r\naverageFollowerArr.push(Number(averageFollowerCount.toFixed()))\r\n\r\n}\r\n\r\ndateArr = justTDsOnTwitter[0].followerData.map(d => d.date)\r\n\r\n\r\nfor(let i = 1; i < averageFollowerArr.length; i++) {\r\n\r\n\r\n  var lastWeek  = averageFollowerArr[i - 1]\r\n  var thisWeek = averageFollowerArr[i]\r\n  var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n  \r\n  //filter NaN at start\r\n\r\n  if(diff !== diff) {changeArr.push(0) } else {\r\n  changeArr.push(diff) \r\n  }\r\n}\r\n\r\nfor(let i = 0; i < justTDsOnTwitter[0].followerData.length; i++) {\r\n\r\n  function dailMeanObj() {\r\n\r\n    this.followers = averageFollowerArr[i]\r\n    this.date = dateArr[i]\r\n    this.change = changeArr[i]\r\n  }\r\ndailMeanObjArr.push(new dailMeanObj)\r\n}\r\n\r\nreturn dailMeanObjArr\r\n\r\n\r\n}\r\n\r\nfunction getPartyObj() {\r\n\r\n  let justTDsOnTwitter = thisTDPartyData.filter(function(d) {\r\n              \r\n    if(d.followerData[0] != undefined) {\r\n    return d\r\n  }\r\n}\r\n)\r\n\r\nlet averageFollowerArr = []\r\nlet dateArr = []\r\nlet changeArr = [0, ]\r\nlet partyMeanObjArr = []\r\n\r\nfor(let i = 0; i < justTDsOnTwitter[0].followerData.length; i ++) {\r\n\r\nlet holder = justTDsOnTwitter.map(d => d.followerData[i].followers)\r\nlet total = holder.reduce(function(a, b) {\r\n  return a + b\r\n})\r\n\r\nlet averageFollowerCount = total / justTDsOnTwitter.length\r\n\r\naverageFollowerArr.push(Number(averageFollowerCount.toFixed()))\r\n\r\n}\r\n\r\ndateArr = justTDsOnTwitter[0].followerData.map(d => d.date)\r\n\r\n\r\nfor(let i = 1; i < averageFollowerArr.length; i++) {\r\n\r\n\r\n  var lastWeek  = averageFollowerArr[i - 1]\r\n  var thisWeek = averageFollowerArr[i]\r\n  var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n  \r\n  //filter NaN at start\r\n\r\n  if(diff !== diff) {changeArr.push(0) } else {\r\n  changeArr.push(diff) \r\n  }\r\n}\r\n\r\nfor(let i = 0; i < justTDsOnTwitter[0].followerData.length; i++) {\r\n\r\n  function partyMeanObj() {\r\n\r\n    this.followers = averageFollowerArr[i]\r\n    this.date = dateArr[i]\r\n    this.change = changeArr[i]\r\n  }\r\npartyMeanObjArr.push(new partyMeanObj)\r\n}\r\n\r\nreturn partyMeanObjArr\r\n\r\n\r\n}\r\n\r\nconst getDate = (d) => { \r\n    \r\n    let together = []\r\n    let apart = d.date.split('/')\r\n    let day = apart[0]\r\n    let month = apart[1]\r\n    let year = apart[2]\r\n\r\n    together.push(month, day, year)\r\n    together.toString().replace(\",\",\"/\").replace(\",\",\"/\")\r\n    return new Date(together)\r\n  }\r\n\r\n\r\n\r\nconst thisTDDataMap = {\r\n  name: thisTDData[0].name,\r\n  color: tdPartyColors[thisTDData[0].party],\r\n  items: getTDObj().map((d) => ({ ...d, date: getDate(d)}))\r\n};\r\n\r\nconsole.log(thisTDDataMap)\r\n\r\n\r\n\r\nconst dailMeanDataMap = {\r\n  name: \"Dáil Average\",\r\n  color: \"white\",\r\n  items: getDailObj().map((d) => ({ ...d, date: getDate(d)}))\r\n}\r\n\r\nconst partyMeanDataMap = {\r\n  name: \"Party Average\",\r\n  color: partyColors[thisTDData[0].party],\r\n  items: getPartyObj().map((d) => ({ ...d, date: getDate(d)}))\r\n}\r\n\r\nconsole.log(thisTDData)\r\n\r\n\r\nconsole.log(thisTDDataMap)\r\n\r\nif(!thisTDDataMap) return null;\r\n\r\n  const chartData = [\r\n    ...[thisTDDataMap, dailMeanDataMap, partyMeanDataMap].filter((d) => selectedItems.includes(d.name))\r\n  ];\r\n\r\nconst legendData = [thisTDDataMap, dailMeanDataMap, partyMeanDataMap];\r\n\r\n\r\n  return (\r\n  <div className=\"featuredItem\" style={{textAlign: \"center\"}}>\r\n    <Typography variant=\"h5\">Followers</Typography>\r\n      <Legend\r\n        data={legendData}\r\n        selectedItems={selectedItems}\r\n        onChange={onChangeSelection}\r\n      />\r\n      <MultilineChart data={chartData} />\r\n      </div>\r\n\r\n  );\r\n}\r\n\r\n","import { arrayOf, shape, string, date as dateProp, number } from \"prop-types\";\r\n\r\nexport const MultiLineDataItemsPropTypes = arrayOf(\r\n  shape({\r\n    date: dateProp,\r\n    change: number,\r\n    retweets: number\r\n  })\r\n);\r\n\r\nexport const MultiLineDataPropTypes = arrayOf(\r\n  shape({\r\n    name: string,\r\n    items: MultiLineDataItemsPropTypes,\r\n    color: string\r\n  })\r\n);\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Line = ({\r\n  xScale,\r\n  yScale,\r\n  color,\r\n  data,\r\n  isSmooth,\r\n  animation,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  // Define different types of animation that we can use\r\n  const animateLeft = React.useCallback(() => {\r\n    // NOTE: for some reason getTotalLength() doesn't work in tests\r\n    // in this codesandbox so we added default value just for tests\r\n    const totalLength = ref.current.getTotalLength\r\n      ? ref.current.getTotalLength()\r\n      : 500;\r\n    d3.select(ref.current)\r\n      .attr(\"opacity\", 1)\r\n      .attr(\"stroke-dasharray\", `${totalLength},${totalLength}`)\r\n      .attr(\"stroke-dashoffset\", totalLength)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeLinear)\r\n      .attr(\"stroke-dashoffset\", 0);\r\n  }, []);\r\n  const animateFadeIn = React.useCallback(() => {\r\n    d3.select(ref.current)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeLinear)\r\n      .attr(\"opacity\", 1);\r\n  }, []);\r\n  const noneAnimation = React.useCallback(() => {\r\n    d3.select(ref.current).attr(\"opacity\", 1);\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    switch (animation) {\r\n      case \"left\":\r\n        animateLeft();\r\n        break;\r\n      case \"fadeIn\":\r\n        animateFadeIn();\r\n        break;\r\n      case \"none\":\r\n      default:\r\n        noneAnimation();\r\n        break;\r\n    }\r\n  }, [animateLeft, animateFadeIn, noneAnimation, animation]);\r\n\r\n  // Recalculate line length if scale has changed\r\n  React.useEffect(() => {\r\n    if (animation === \"left\") {\r\n      const totalLength = ref.current.getTotalLength\r\n        ? ref.current.getTotalLength()\r\n        : 500;\r\n      d3.select(ref.current).attr(\r\n        \"stroke-dasharray\",\r\n        `${totalLength},${totalLength}`\r\n      );\r\n    }\r\n  }, [xScale, yScale, animation]);\r\n\r\n  const line = d3\r\n    .line()\r\n    .x((d) => xScale(d.date))\r\n    .y((d) => yScale(d.retweets));\r\n\r\n  const d = line(data);\r\n\r\n  return (\r\n    <path\r\n      ref={ref}\r\n      d={d?.match(/NaN|undefined/) ? \"\" : d}\r\n      stroke={color}\r\n      strokeWidth={3}\r\n      fill=\"none\"\r\n      opacity={0}\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n\r\nLine.propTypes = {\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  data: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      date: PropTypes.date,\r\n      change: PropTypes.number\r\n    })\r\n  ),\r\n  color: PropTypes.string,\r\n  isSmooth: PropTypes.bool,\r\n  animation: PropTypes.oneOf([\"left\", \"fadeIn\", \"none\"])\r\n};\r\n\r\nLine.defaultProps = {\r\n  data: [],\r\n  color: \"white\",\r\n  isSmooth: false,\r\n  animation: \"left\"\r\n};\r\n\r\nexport default Line;\r\n","/** Area.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Area = ({ xScale, yScale, color, data, disableAnimation, ...props }) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    if (disableAnimation) {\r\n      d3.select(ref.current).attr(\"opacity\", 1);\r\n      return;\r\n    }\r\n    d3.select(ref.current)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeBackIn)\r\n      .attr(\"opacity\", 1);\r\n  }, [disableAnimation]);\r\n\r\n  const d = React.useMemo(() => {\r\n    const area = d3\r\n      .area()\r\n      .x(({ date }) => xScale(date))\r\n      .y1(({ retweets }) => yScale(retweets))\r\n      .y0(() => yScale(yScale.domain()[0]));\r\n    return area(data);\r\n  }, [xScale, yScale, data]);\r\n\r\n  return (\r\n    <>\r\n      <path\r\n        ref={ref}\r\n        d={d}\r\n        fill={`url(#gradient-${color})`}\r\n        opacity={0}\r\n        {...props}\r\n      />\r\n      <defs>\r\n        <linearGradient\r\n          id={`gradient-${color}`}\r\n          x1=\"0%\"\r\n          x2=\"0%\"\r\n          y1=\"0%\"\r\n          y2=\"100%\"\r\n        >\r\n          <stop offset=\"0%\" stopColor={color} stopOpacity={0.2} />\r\n          <stop offset=\"100%\" stopColor={color} stopOpacity={0} />\r\n        </linearGradient>\r\n      </defs>\r\n    </>\r\n  );\r\n};\r\n\r\nArea.propTypes = {\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  data: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      date: PropTypes.date,\r\n      retweets: PropTypes.number\r\n    })\r\n  ),\r\n  color: PropTypes.string,\r\n  disableAnimation: PropTypes.bool\r\n};\r\n\r\nArea.defaultProps = {\r\n  data: [],\r\n  color: \"white\",\r\n  disableAnimation: false\r\n};\r\n\r\nexport default Area;\r\n","/** AxisX.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Axis = ({\r\n  type,\r\n  scale,\r\n  ticks,\r\n  transform,\r\n  tickFormat,\r\n  disableAnimation,\r\n  anchorEl,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    const axisGenerator = type === \"left\" ? d3.axisRight : d3.axisBottom;\r\n    const axis = axisGenerator(scale).ticks(ticks).tickFormat(tickFormat);\r\n    const axisGroup = d3.select(ref.current);\r\n    if (disableAnimation) {\r\n      axisGroup.call(axis);\r\n    } else {\r\n      axisGroup.transition().duration(750).ease(d3.easeLinear).call(axis);\r\n    }\r\n    axisGroup.select(\".domain\").remove();\r\n    axisGroup.selectAll(\"line\").remove();\r\n    axisGroup\r\n      .selectAll(\"text\")\r\n      .attr(\"opacity\", 0.5)\r\n      .attr(\"color\", \"white\")\r\n      .attr(\"font-size\", \"0.75rem\");\r\n  }, [scale, ticks, tickFormat, disableAnimation]);\r\n\r\n  React.useEffect(() => {\r\n    d3.select(anchorEl)\r\n      .on(\"mouseout.axisX\", () => {\r\n        d3.select(ref.current)\r\n          .selectAll(\"text\")\r\n          .attr(\"opacity\", 0.5)\r\n          .style(\"font-weight\", \"normal\");\r\n      })\r\n      .on(\"mousemove.axisX\", () => {\r\n        const [x] = d3.mouse(anchorEl);\r\n        const xDate = scale.invert(x);\r\n        const textElements = d3.select(ref.current).selectAll(\"text\");\r\n        const data = textElements.data();\r\n        const index = d3.bisector((d) => d).left(data, xDate);\r\n        textElements\r\n          .attr(\"opacity\", (d, i) => (i === index - 1 ? 1 : 0.5))\r\n          .style(\"font-weight\", (d, i) =>\r\n            i === index - 1 ? \"bold\" : \"normal\"\r\n          );\r\n      });\r\n  }, [anchorEl, scale]);\r\n\r\n  return <g ref={ref} transform={transform} {...props} />;\r\n};\r\n\r\nAxis.propTypes = {\r\n  type: PropTypes.oneOf([\"left\", \"bottom\"]).isRequired,\r\n  scale: PropTypes.func.isRequired,\r\n  ticks: PropTypes.oneOfType([PropTypes.number, PropTypes.func]),\r\n  tickFormat: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\r\n  transform: PropTypes.string,\r\n  disableAnimation: PropTypes.bool,\r\n  anchorEl: PropTypes.instanceOf(Element)\r\n};\r\n\r\nAxis.defaultProps = {\r\n  ticks: 0,\r\n  tickFormat: null,\r\n  transform: \"\",\r\n  disableAnimation: false,\r\n  anchorEl: null\r\n};\r\n\r\nexport default Axis;\r\n","/** GridLine.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst GridLine = ({\r\n  type,\r\n  scale,\r\n  ticks,\r\n  size,\r\n  transform,\r\n  disableAnimation,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    const axisGenerator = type === \"vertical\" ? d3.axisBottom : d3.axisLeft;\r\n    const axis = axisGenerator(scale).ticks(ticks).tickSize(-size);\r\n\r\n    const gridGroup = d3.select(ref.current);\r\n    if (disableAnimation) {\r\n      gridGroup.call(axis);\r\n    } else {\r\n      gridGroup.transition().duration(750).ease(d3.easeLinear).call(axis);\r\n    }\r\n    gridGroup.select(\".domain\").remove();\r\n    gridGroup.selectAll(\"text\").remove();\r\n    gridGroup.selectAll(\"line\").attr(\"stroke\", \"rgba(255, 255, 255, 0.1)\");\r\n  }, [scale, ticks, size, disableAnimation]);\r\n\r\n  return <g ref={ref} transform={transform} {...props} />;\r\n};\r\n\r\nGridLine.propTypes = {\r\n  scale: PropTypes.func.isRequired,\r\n  type: PropTypes.oneOf([\"vertical\", \"horizontal\"]).isRequired,\r\n  ticks: PropTypes.oneOfType([PropTypes.number, PropTypes.func]),\r\n  transform: PropTypes.string,\r\n  size: PropTypes.number,\r\n  disableAnimation: PropTypes.bool\r\n};\r\n\r\nGridLine.defaultProps = {\r\n  ticks: 0,\r\n  transform: \"\",\r\n  size: 0,\r\n  disableAnimation: false\r\n};\r\n\r\nexport default GridLine;\r\n","/** Overlay.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\n/**\r\n * Use Overlay as a wrapper for components that need mouse events to be handled.\r\n * For example: Tooltip, AxisX.\r\n */\r\nconst Overlay = React.forwardRef(({ width, height, children }, ref) => (\r\n  <g>\r\n    {children}\r\n    <rect ref={ref} width={width} height={height} opacity={0} />\r\n  </g>\r\n));\r\n\r\nOverlay.propTypes = {\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired,\r\n  children: PropTypes.node.isRequired\r\n};\r\n\r\nexport default Overlay;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\nimport { MultiLineDataPropTypes } from \"../utils/propTypes\";\r\nimport {formatPercent } from \"../utils/commonUtils\"\r\n// import { formatPercent, formatPriceUSD } from \"../utils/commonUtils\";\r\n\r\nconst Tooltip = ({\r\n  xScale,\r\n  yScale,\r\n  width,\r\n  height,\r\n  data,\r\n  margin,\r\n  anchorEl,\r\n  children,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  const drawLine = React.useCallback(\r\n    (x) => {\r\n      d3.select(ref.current)\r\n        .select(\".tooltipLine\")\r\n        .attr(\"x1\", x)\r\n        .attr(\"x2\", x)\r\n        .attr(\"y1\", -margin.top)\r\n        .attr(\"y2\", height);\r\n    },\r\n    [ref, height, margin]\r\n  );\r\n\r\n  const drawContent = React.useCallback(\r\n    (x) => {\r\n      const tooltipContent = d3.select(ref.current).select(\".tooltipContent\");\r\n      tooltipContent.attr(\"transform\", (cur, i, nodes) => {\r\n        const nodeWidth = nodes[i]?.getBoundingClientRect()?.width || 0;\r\n        const translateX = nodeWidth + x > width ? x - nodeWidth - 12 : x + 8;\r\n        return `translate(${translateX}, ${-margin.top})`;\r\n      });\r\n      tooltipContent\r\n        .select(\".contentTitle\")\r\n        .text(d3.timeFormat(\"%b %d, %Y\")(xScale.invert(x)));\r\n    },\r\n    [xScale, margin, width]\r\n  );\r\n\r\n  const drawBackground = React.useCallback(() => {\r\n    // reset background size to defaults\r\n    const contentBackground = d3\r\n      .select(ref.current)\r\n      .select(\".contentBackground\");\r\n    contentBackground.attr(\"width\", 125).attr(\"height\", 40);\r\n\r\n    // calculate new background size\r\n    const tooltipContentElement = d3\r\n      .select(ref.current)\r\n      .select(\".tooltipContent\")\r\n      .node();\r\n    if (!tooltipContentElement) return;\r\n\r\n    const contentSize = tooltipContentElement.getBoundingClientRect();\r\n    contentBackground\r\n      .attr(\"width\", contentSize.width + 8)\r\n      .attr(\"height\", contentSize.height + 4);\r\n  }, []);\r\n\r\n  const onChangePosition = React.useCallback((d, i, isVisible) => {\r\n    d3.selectAll(\".performanceItemChangeThisTDRetweets\")\r\n      .filter((td, tIndex) => tIndex === i)\r\n      .text(isVisible ? formatPercent(d.change) : \"\");\r\n\r\n    d3.selectAll(\".performanceItemThisTDRetweets\")\r\n      .filter((td, tIndex) => tIndex === i)\r\n      .text(\r\n        d.retweets.toLocaleString() && !isVisible ? \"No data\" : d.retweets.toLocaleString()\r\n      );\r\n       // .text(\r\n      //   d.marketvalue && !isVisible ? \"No data\" : formatPriceUSD(d.marketvalue)\r\n      // );\r\n\r\n    const maxNameWidth = d3.max(\r\n      d3.selectAll(\".performanceItemName\").nodes(),\r\n      (node) => node.getBoundingClientRect().width\r\n    );\r\n    d3.selectAll(\".performanceItemChangeThisTDRetweets\").attr(\r\n      \"transform\",\r\n      (datum, index, nodes) =>\r\n        `translate(${\r\n          nodes[index].previousSibling.getBoundingClientRect().width + 14\r\n        },4)`\r\n    );\r\n\r\n    d3.selectAll(\".performanceItemThisTDRetweets\").attr(\r\n      \"transform\",\r\n      `translate(${maxNameWidth + 60},4)`\r\n    );\r\n  }, []);\r\n\r\n  const followPoints = React.useCallback(() => {\r\n    const [x] = d3.mouse(anchorEl);\r\n    const xDate = xScale.invert(x);\r\n    const bisectDate = d3.bisector((d) => d.date).left;\r\n    let baseXPos = 0;\r\n\r\n    // draw circles on line\r\n    d3.select(ref.current)\r\n      .selectAll(\".tooltipLinePoint\")\r\n      .attr(\"transform\", (cur, i) => {\r\n        const index = bisectDate(data[i].items, xDate, 1);\r\n        const d0 = data[i].items[index - 1];\r\n        const d1 = data[i].items[index];\r\n        const d = xDate - d0?.date > d1?.date - xDate ? d1 : d0;\r\n        if (d.date === undefined && d.retweets === undefined) {\r\n          // move point out of container\r\n          return \"translate(-100,-100)\";\r\n        }\r\n        const xPos = xScale(d.date);\r\n        if (i === 0) {\r\n          baseXPos = xPos;\r\n        }\r\n\r\n        let isVisible = true;\r\n        if (xPos !== baseXPos) {\r\n          isVisible = false;\r\n        }\r\n        const yPos = yScale(d.retweets);\r\n\r\n        onChangePosition(d, i, isVisible);\r\n\r\n        return isVisible\r\n          ? `translate(${xPos}, ${yPos})`\r\n          : \"translate(-100,-100)\";\r\n      });\r\n\r\n    drawLine(baseXPos);\r\n    drawContent(baseXPos);\r\n    drawBackground();\r\n  }, [\r\n    anchorEl,\r\n    drawLine,\r\n    drawContent,\r\n    drawBackground,\r\n    xScale,\r\n    yScale,\r\n    data,\r\n    onChangePosition\r\n  ]);\r\n\r\n  React.useEffect(() => {\r\n    d3.select(anchorEl)\r\n      .on(\"mouseout.tooltip\", () => {\r\n        d3.select(ref.current).attr(\"opacity\", 0);\r\n      })\r\n      .on(\"mouseover.tooltip\", () => {\r\n        d3.select(ref.current).attr(\"opacity\", 1);\r\n      })\r\n      .on(\"mousemove.tooltip\", () => {\r\n        d3.select(ref.current)\r\n          .selectAll(\".tooltipLinePoint\")\r\n          .attr(\"opacity\", 1);\r\n        followPoints();\r\n      });\r\n  }, [anchorEl, followPoints]);\r\n\r\n  if (!data.length) return null;\r\n\r\n  return (\r\n    <g ref={ref} opacity={0} {...props}>\r\n      <line className=\"tooltipLine\" />\r\n      <g className=\"tooltipContent\">\r\n        <rect className=\"contentBackground\" rx={4} ry={4} opacity={0.2} />\r\n        <text className=\"contentTitle\" transform=\"translate(4,14)\" />\r\n        <g className=\"content\" transform=\"translate(4,32)\">\r\n          {data.map(({ name, color }, i) => (\r\n            <g key={name} transform={`translate(6,${22 * i})`}>\r\n              <circle r={6} fill={color} />\r\n              <text className=\"performanceItemName\" transform=\"translate(10,4)\">\r\n                {name}\r\n              </text>\r\n              <text\r\n                className=\"performanceItemChangeThisTDRetweets\"\r\n                opacity={0.5}\r\n                fontSize={10}\r\n              />\r\n              <text className=\"performanceItemThisTDRetweets\" />\r\n            </g>\r\n          ))}\r\n        </g>\r\n      </g>\r\n      {data.map(({ name }) => (\r\n        <circle className=\"tooltipLinePoint\" r={6} key={name} opacity={0} />\r\n      ))}\r\n    </g>\r\n  );\r\n};\r\n\r\nTooltip.propTypes = {\r\n  width: PropTypes.number,\r\n  height: PropTypes.number,\r\n  margin: PropTypes.shape({\r\n    top: PropTypes.number,\r\n    bottom: PropTypes.number,\r\n    left: PropTypes.number,\r\n    right: PropTypes.number\r\n  }),\r\n  data: MultiLineDataPropTypes,\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  anchorEl: PropTypes.instanceOf(Element)\r\n};\r\n\r\nTooltip.defaultProps = {\r\n  width: 0,\r\n  height: 0,\r\n  margin: {\r\n    top: 0,\r\n    bottom: 0,\r\n    left: 0,\r\n    right: 0\r\n  },\r\n  data: [],\r\n  anchorEl: null\r\n};\r\n\r\nexport default Tooltip;\r\n","/* eslint-disable no-bitwise */\r\nimport * as d3 from \"d3\";\r\nimport { DateTime, Interval } from \"luxon\";\r\n\r\n// export const formatPriceUSD = (price) =>\r\n//   new Intl.NumberFormat(\"en-US\", { style: \"currency\", currency: \"USD\" }).format(\r\n//     price\r\n//   );\r\n\r\nexport const formatPercent = (percent = 0) => {\r\n  let result = \"0.00%\";\r\n  const isNumber = typeof percent === \"number\";\r\n  const isString = typeof percent === \"string\";\r\n  const isNotNaN = !Number.isNaN(parseFloat(percent));\r\n\r\n  if ((isNumber || isString) && isNotNaN) {\r\n    result = `${parseFloat(percent) > 0 ? \"+\" : \"\"}${d3.format(\".2%\")(\r\n      percent / 100\r\n    )}`;\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const getPeriod = (date) => {\r\n  if (!date) return 6;\r\n  const now = DateTime.utc();\r\n  const before = DateTime.fromJSDate(date);\r\n  const i = Interval.fromDateTimes(before, now);\r\n  return i.length(\"months\");\r\n};\r\n\r\nexport const getXTicks = (months) => {\r\n  if (months <= 2) return d3.timeDay.every(5).filter((d) => d.getDate() !== 31);\r\n  if (months <= 6) return d3.timeMonth.every(1);\r\n  if (months <= 13) return d3.timeMonth.every(2);\r\n  return d3.timeYear.every(1);\r\n};\r\n\r\nexport const getXTickFormat = (months) => {\r\n  if (months <= 2) return d3.timeFormat(\"%d %b\");\r\n  if (months <= 6) return d3.timeFormat(\"%b\");\r\n  if (months <= 13) return d3.timeFormat(\"%b %Y\");\r\n  return d3.timeFormat(\"%Y\");\r\n};\r\n","/** MultilineChart.controller.js */\r\nimport { useMemo } from \"react\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst useController = ({ data, width, height }) => {\r\n  const xMin = useMemo(\r\n    () => d3.min(data, ({ items }) => d3.min(items, ({ date }) => date)),\r\n    [data]\r\n  );\r\n\r\n  const xMax = useMemo(\r\n    () => d3.max(data, ({ items }) => d3.max(items, ({ date }) => date)),\r\n    [data]\r\n  );\r\n\r\n  const xScale = useMemo(\r\n    () => d3.scaleTime().domain([xMin, xMax]).range([0, width]),\r\n    [xMin, xMax, width]\r\n  );\r\n\r\n  const yMin = useMemo(\r\n    () => d3.min(data, ({ items }) => d3.min(items, ({ retweets }) => retweets)),\r\n    [data]\r\n  );\r\n\r\n  const yMax = useMemo(\r\n    () => d3.max(data, ({ items }) => d3.max(items, ({retweets}) => retweets)),\r\n    [data]\r\n  );\r\n\r\n  const yScale = useMemo(() => {\r\n    const indention = (yMax - yMin) * 0.5;\r\n    return d3\r\n      .scaleLinear()\r\n      .domain([yMin - indention, yMax + indention])\r\n      .range([height, 0]);\r\n  }, [height, yMin, yMax]);\r\n\r\n  const yScaleForAxis = useMemo(\r\n    () => d3.scaleBand().domain([yMin, yMax]).range([height, 0]),\r\n    [height, yMin, yMax]\r\n  );\r\n\r\n  const yTickFormat = (d) => {\r\n\r\n    return d\r\n    // `${parseFloat(d) > 0 ? \"+\" : \"\"}${d3.format(\".2%\")(d / 100)}`;\r\n  }\r\n  const xTickFormat = (d) => {\r\n    if (d3.timeFormat(\"%b\")(d) === \"Jan\") {\r\n      return d3.timeFormat(\"%Y\")(d);\r\n    }\r\n    return d3.timeFormat(\"%b\")(d);\r\n  };\r\n  return {\r\n    yTickFormat,\r\n    xScale,\r\n    yScale,\r\n    yScaleForAxis,\r\n    xTickFormat\r\n  };\r\n};\r\n\r\nexport default useController;\r\n","import React from 'react';\r\nimport ResizeObserver from 'resize-observer-polyfill';\r\n\r\n/**\r\n * Use ResizeObserver to listen for the changes to the dimensions of an element\r\n * @params ref - React ref\r\n * @returns {object} - { width, height, top, left }\r\n */\r\nconst useResize = (ref) => {\r\n  const [dimensions, setDimensions] = React.useState(null);\r\n  React.useEffect(() => {\r\n    const element = ref.current;\r\n    const resizeObserver = new ResizeObserver((entries) => {\r\n      entries.forEach((entry) => {\r\n        setDimensions(entry.contentRect);\r\n      });\r\n    });\r\n    resizeObserver.observe(element);\r\n    return () => {\r\n      resizeObserver.unobserve(element);\r\n    };\r\n  }, [ref]);\r\n  return dimensions || {\r\n    width: 0,\r\n    height: 0,\r\n    top: 0,\r\n    left: 0,\r\n  };\r\n};\r\n\r\nexport default useResize;\r\n","import React from \"react\";\r\nimport useResize from \"./useResize\";\r\n\r\nconst useDimensions = ({ maxHeight, margin = {}, scaleCoef = 0.5 }) => {\r\n  const ref = React.useRef(null);\r\n  const { width } = useResize(ref);\r\n\r\n  const height =\r\n    !maxHeight || width * scaleCoef < maxHeight ? width * scaleCoef : maxHeight;\r\n  const innerWidth = width - (margin.left || 0) - (margin.right || 0);\r\n  const innerHeight = height - (margin.top || 0) - (margin.bottom || 0);\r\n\r\n  return [\r\n    ref,\r\n    {\r\n      svgWidth: width,\r\n      svgHeight: height,\r\n      width: innerWidth,\r\n      height: innerHeight\r\n    }\r\n  ];\r\n};\r\n\r\nexport default useDimensions;\r\n","/** MultilineChart.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { MultiLineDataPropTypes } from \"../utils/propTypes\";\r\nimport { Line, Axis, GridLine, Overlay, Tooltip, Area } from \"../components\";\r\nimport useController from \"./MultilineChart.controller\";\r\nimport useDimensions from \"../utils/useDimensions\";\r\n\r\nconst MultilineChart = ({ data = [], margin = {} }) => {\r\n  const overlayRef = React.useRef(null);\r\n  const [containerRef, { svgWidth, svgHeight, width, height }] = useDimensions({\r\n    maxHeight: 400,\r\n    margin\r\n  });\r\n  const controller = useController({ data, width, height });\r\n  const {\r\n    yTickFormat,\r\n    xTickFormat,\r\n    xScale,\r\n    yScale,\r\n    yScaleForAxis\r\n  } = controller;\r\n\r\n  return (\r\n    <div ref={containerRef}>\r\n      <svg width={svgWidth} height={svgHeight}>\r\n        <g transform={`translate(${margin.left},${margin.top})`}>\r\n          <GridLine\r\n            type=\"vertical\"\r\n            scale={xScale}\r\n            ticks={5}\r\n            size={height}\r\n            transform={`translate(0, ${height})`}\r\n          />\r\n          <GridLine\r\n            type=\"horizontal\"\r\n            scale={yScaleForAxis}\r\n            ticks={2}\r\n            size={width}\r\n          />\r\n          <GridLine\r\n            type=\"horizontal\"\r\n            className=\"baseGridLine\"\r\n            scale={yScale}\r\n            ticks={1}\r\n            size={width}\r\n            disableAnimation\r\n          />\r\n          {data.map(({ name, items = [], color }) => (\r\n            <Line\r\n              key={name}\r\n              data={items}\r\n              xScale={xScale}\r\n              yScale={yScale}\r\n              color={color}\r\n            />\r\n          ))}\r\n          {/* <Area data={data[0].items} xScale={xScale} yScale={yScale} /> */}\r\n          <Axis\r\n            type=\"left\"\r\n            scale={yScaleForAxis}\r\n            transform=\"translate(0, -10)\"\r\n            ticks={5}\r\n            tickFormat={yTickFormat}\r\n          />\r\n          <Overlay ref={overlayRef} width={width} height={height}>\r\n            <Axis\r\n              type=\"bottom\"\r\n              className=\"axisX\"\r\n              anchorEl={overlayRef.current}\r\n              scale={xScale}\r\n              transform={`translate(10, ${height - height / 6})`}\r\n              ticks={5}\r\n              tickFormat={xTickFormat}\r\n            />\r\n            <Tooltip\r\n              className=\"tooltip\"\r\n              anchorEl={overlayRef.current}\r\n              width={width}\r\n              height={height}\r\n              margin={margin}\r\n              xScale={xScale}\r\n              yScale={yScale}\r\n              data={data}\r\n            />\r\n          </Overlay>\r\n        </g>\r\n      </svg>\r\n    </div>\r\n  );\r\n};\r\n\r\nMultilineChart.propTypes = {\r\n  data: MultiLineDataPropTypes,\r\n  margin: PropTypes.shape({\r\n    top: PropTypes.number,\r\n    bottom: PropTypes.number,\r\n    left: PropTypes.number,\r\n    right: PropTypes.number\r\n  })\r\n};\r\n\r\nMultilineChart.defaultProps = {\r\n  data: [],\r\n  margin: {\r\n    top: 30,\r\n    right: 15,\r\n    bottom: 15,\r\n    left: 15\r\n  }\r\n};\r\n\r\nexport default MultilineChart;\r\n","import React from \"react\";\r\nimport { FormControlLabel, Checkbox } from \"@material-ui/core\";\r\n\r\nconst Legend = ({ data, selectedItems, onChange }) => (\r\n  <div className=\"legendContainer\">\r\n    {data.map((d) => (\r\n      <div className=\"checkbox\" style={{ color: d.color }} key={d.name}>\r\n\r\n<FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: d.color}}\r\n            value={d.name}\r\n            onChange={() => onChange(d.name)}\r\n          />\r\n        }\r\n        label={d.name}\r\n\r\n        />\r\n      </div>\r\n    ))}\r\n  </div>\r\n);\r\n\r\nexport default Legend;\r\n","/** App.js */\r\nimport React, {useState, useEffect} from \"react\";\r\nimport MultilineChart from \"./views/MultilineChart\";\r\nimport Legend from \"./components/Legend\";\r\nimport vcit from \"./data/VCIT.json\";\r\nimport portfolio from \"./data/portfolio.json\";\r\nimport schc from \"./data/SCHC.json\";\r\nimport \"./styles.css\";\r\nimport fiannafail from \"./data/fiannaFail.json\"\r\nimport finegael from \"./data/finegael.json\"\r\nimport ind from \"./data/ind.json\"\r\nimport sinnfein from \"./data/sinnfein.json\"\r\nimport labour from \"./data/labour.json\"\r\nimport { chamberStats } from '../../../Backend/metaData';\r\nimport axios from \"axios\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport { gridColumnsTotalWidthSelector } from \"@material-ui/data-grid\";\r\n\r\n\r\n\r\n\r\n\r\nexport default function TDLineChartRetweets ({justThisTDData, justThisTDPartyData, allTDData}) {\r\n\r\n  const [selectedItems, setSelectedItems] = useState([]);\r\n  const [thisTDData, setThisTDData] = useState(null)\r\n  const [thisTDPartyData, setThisTDPartyData] = useState(null)\r\n  const [dailData, setDailData] = useState(null)\r\n\r\n\r\n  const partyColors = {\r\n    \"Sinn Féin\": \"#326760\",\r\n    \"Fine Gael\": \"#6699FF\",\r\n    \"Fianna Fáil\": \"#66BB66\",\r\n    \"Labour Party\": \"#CC0000\",\r\n    \"Solidarity - People Before Profit\": \"#8E2420\",\r\n    \"Independent\": \"white\",\r\n    \"Green Party\": \"#99CC33\",\r\n    \"Social Democrats\": \"#752F8B\",\r\n    \"Aontú\": \"#44532A\",\r\n    \"Independents 4 Change\": \"grey\"}\r\n\r\n    const tdPartyColors = {\r\n\r\n      \"Sinn Féin\": \"#4b9b90\",\r\n      \"Fine Gael\": \"#b3ccff\",\r\n      \"Fianna Fáil\": \"#9bd39b\",\r\n      \"Labour Party\": \"#ff1a1a\",\r\n      \"Solidarity - People Before Profit\": \"#b82f29\",\r\n      \"Independent\": \"#d9d9d9\",\r\n      \"Green Party\": \"#b8db70\",\r\n      \"Social Democrats\": \"#a346c0\",\r\n      \"Aontú\": \"#84a152\",\r\n      \"Independents 4 Change\": \"#a6a6a6\"\r\n    }\r\n\r\n\r\n\r\n  useEffect(() => {\r\n\r\n    setThisTDData(justThisTDData)\r\n    setThisTDPartyData(justThisTDPartyData)\r\n    setDailData(allTDData)\r\n\r\n}, []);\r\n\r\nuseEffect(() => {\r\n\r\n  if(!thisTDData) return null;\r\n\r\n  setSelectedItems([thisTDData[0].name, \"Dáil Average\", \"Party Average\"])\r\n\r\n}, [thisTDData])\r\n\r\nconst onChangeSelection = (name) => {\r\n    const newSelectedItems = selectedItems.includes(name)\r\n      ? selectedItems.filter((item) => item !== name)\r\n      : [...selectedItems, name];\r\n    setSelectedItems(newSelectedItems);\r\n  };\r\n\r\n\r\n\r\n  if(!thisTDData || !justThisTDPartyData || !dailData) return null;\r\n\r\n  console.log(thisTDPartyData)\r\n\r\n\r\n  function getTDObj() {\r\n\r\n    let justTDOnTwitter = thisTDData.filter(function(d) {\r\n                \r\n      if(d.retweetData[0] != undefined) {\r\n      return d\r\n    }\r\n  }\r\n  )\r\n  \r\n\r\n  let retweetArr = justTDOnTwitter[0].retweetData.map(d => d.retweets);\r\n  let dateArr = justTDOnTwitter[0].retweetData.map(d => d.date);\r\n  let changeArr = [0, ];\r\n  let tdObjArr = [];\r\n  \r\n  \r\n  for(let i = 1; i < retweetArr.length; i++) {\r\n  \r\n  \r\n    var lastWeek  = retweetArr[i - 1]\r\n    var thisWeek = retweetArr[i]\r\n    var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n    \r\n    //filter NaN at start\r\n  \r\n    if(diff !== diff) {changeArr.push(0) } else {\r\n    changeArr.push(diff) \r\n    }\r\n  }\r\n  \r\n  for(let i = 0; i < justTDOnTwitter[0].retweetData.length; i++) {\r\n  \r\n    function tdObj() {\r\n  \r\n      this.retweets = retweetArr[i]\r\n      this.date = dateArr[i]\r\n      this.change = changeArr[i]\r\n    }\r\n  tdObjArr.push(new tdObj)\r\n  }\r\n  \r\n  return tdObjArr\r\n  \r\n  \r\n}\r\n\r\n\r\nfunction getDailObj() {\r\n\r\n  let justTDsOnTwitter = dailData.filter(function(d) {\r\n              \r\n    if(d.retweetData[0] != undefined) {\r\n    return d\r\n  }\r\n}\r\n)\r\n\r\nlet totalRetweetArr = []\r\nlet averageRetweetArr = []\r\nlet dateArr = []\r\nlet changeArr = [0, ]\r\nlet dailMeanObjArr = []\r\n\r\nfor(let i = 0; i < justTDsOnTwitter[0].retweetData.length; i ++) {\r\n\r\nlet holder = justTDsOnTwitter.map(d => d.retweetData[i].retweets)\r\nlet total = holder.reduce(function(a, b) {\r\n  return a + b\r\n})\r\n\r\nlet averageRetweetCount = total / justTDsOnTwitter.length\r\n\r\naverageRetweetArr.push(Number(averageRetweetCount.toFixed()))\r\n\r\n}\r\n\r\ndateArr = justTDsOnTwitter[0].retweetData.map(d => d.date)\r\n\r\n\r\nfor(let i = 1; i < averageRetweetArr.length; i++) {\r\n\r\n\r\n  var lastWeek  = averageRetweetArr[i - 1]\r\n  var thisWeek = averageRetweetArr[i]\r\n  var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n  \r\n  //filter NaN at start\r\n\r\n  if(diff !== diff) {changeArr.push(0) } else {\r\n  changeArr.push(diff) \r\n  }\r\n}\r\n\r\nfor(let i = 0; i < justTDsOnTwitter[0].retweetData.length; i++) {\r\n\r\n  function dailMeanObj() {\r\n\r\n    this.retweets = averageRetweetArr[i]\r\n    this.date = dateArr[i]\r\n    this.change = changeArr[i]\r\n  }\r\ndailMeanObjArr.push(new dailMeanObj)\r\n}\r\n\r\nreturn dailMeanObjArr\r\n\r\n\r\n}\r\n\r\nfunction getPartyObj() {\r\n\r\n  console.log(thisTDPartyData)\r\n\r\n  let justTDsOnTwitter = thisTDPartyData.filter(function(d) {\r\n              \r\n    if(d.retweetData[0] != undefined) {\r\n    return d\r\n  }\r\n}\r\n)\r\n\r\nlet averageRetweetArr = []\r\nlet dateArr = []\r\nlet changeArr = [0, ]\r\nlet partyMeanObjArr = []\r\n\r\nfor(let i = 0; i < justTDsOnTwitter[0].retweetData.length; i ++) {\r\n\r\nlet holder = justTDsOnTwitter.map(d => d.retweetData[i].retweets)\r\nlet total = holder.reduce(function(a, b) {\r\n  return a + b\r\n})\r\n\r\nlet averageRetweetCount = total / justTDsOnTwitter.length\r\n\r\naverageRetweetArr.push(Number(averageRetweetCount.toFixed()))\r\n\r\n}\r\n\r\ndateArr = justTDsOnTwitter[0].retweetData.map(d => d.date)\r\n\r\n\r\nfor(let i = 1; i < averageRetweetArr.length; i++) {\r\n\r\n\r\n  var lastWeek  = averageRetweetArr[i - 1]\r\n  var thisWeek = averageRetweetArr[i]\r\n  var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n  \r\n  //filter NaN at start\r\n\r\n  if(diff !== diff) {changeArr.push(0) } else {\r\n  changeArr.push(diff) \r\n  }\r\n}\r\n\r\nfor(let i = 0; i < justTDsOnTwitter[0].retweetData.length; i++) {\r\n\r\n  function partyMeanObj() {\r\n\r\n    this.retweets = averageRetweetArr[i]\r\n    this.date = dateArr[i]\r\n    this.change = changeArr[i]\r\n  }\r\npartyMeanObjArr.push(new partyMeanObj)\r\n}\r\n\r\nreturn partyMeanObjArr\r\n\r\n\r\n}\r\n\r\nconsole.log(getPartyObj())\r\n\r\n\r\n\r\n\r\n\r\nconst getDate = (d) => { \r\n    \r\n    let together = []\r\n    let apart = d.date.split('/')\r\n    let day = apart[0]\r\n    let month = apart[1]\r\n    let year = apart[2]\r\n\r\n    together.push(month, day, year)\r\n    together.toString().replace(\",\",\"/\").replace(\",\",\"/\")\r\n    return new Date(together)\r\n  }\r\n\r\nconst thisTDDataMap = {\r\n  name: thisTDData[0].name,\r\n  color: tdPartyColors[thisTDData[0].party],\r\n  items: getTDObj().map((d) => ({ ...d, date: getDate(d)}))\r\n};\r\n\r\nconst dailMeanDataMap = {\r\n  name: \"Dáil Average\",\r\n  color: \"white\",\r\n  items: getDailObj().map((d) => ({ ...d, date: getDate(d)}))\r\n}\r\n\r\nconst partyMeanDataMap = {\r\n  name: \"Party Average\",\r\n  color: partyColors[thisTDData[0].party],\r\n  items: getPartyObj().map((d) => ({ ...d, date: getDate(d)}))\r\n}\r\n\r\nif(!thisTDDataMap) return null;\r\n\r\n  const chartData = [\r\n    ...[thisTDDataMap, dailMeanDataMap, partyMeanDataMap].filter((d) => selectedItems.includes(d.name))\r\n  ];\r\n\r\nconst legendData = [thisTDDataMap, dailMeanDataMap, partyMeanDataMap];\r\n\r\n\r\n  return (\r\n  <div className=\"featuredItem\" style={{textAlign: \"center\"}}>\r\n    <Typography variant=\"h5\">Retweets</Typography>\r\n      <Legend\r\n        data={legendData}\r\n        selectedItems={selectedItems}\r\n        onChange={onChangeSelection}\r\n      />\r\n      <MultilineChart data={chartData} />\r\n      </div>\r\n\r\n  );\r\n}\r\n\r\n","import { arrayOf, shape, string, date as dateProp, number } from \"prop-types\";\r\n\r\nexport const MultiLineDataItemsPropTypes = arrayOf(\r\n  shape({\r\n    date: dateProp,\r\n    change: number,\r\n    original_tweets: number\r\n  })\r\n);\r\n\r\nexport const MultiLineDataPropTypes = arrayOf(\r\n  shape({\r\n    name: string,\r\n    items: MultiLineDataItemsPropTypes,\r\n    color: string\r\n  })\r\n);\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Line = ({\r\n  xScale,\r\n  yScale,\r\n  color,\r\n  data,\r\n  isSmooth,\r\n  animation,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  // Define different types of animation that we can use\r\n  const animateLeft = React.useCallback(() => {\r\n    // NOTE: for some reason getTotalLength() doesn't work in tests\r\n    // in this codesandbox so we added default value just for tests\r\n    const totalLength = ref.current.getTotalLength\r\n      ? ref.current.getTotalLength()\r\n      : 500;\r\n    d3.select(ref.current)\r\n      .attr(\"opacity\", 1)\r\n      .attr(\"stroke-dasharray\", `${totalLength},${totalLength}`)\r\n      .attr(\"stroke-dashoffset\", totalLength)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeLinear)\r\n      .attr(\"stroke-dashoffset\", 0);\r\n  }, []);\r\n  const animateFadeIn = React.useCallback(() => {\r\n    d3.select(ref.current)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeLinear)\r\n      .attr(\"opacity\", 1);\r\n  }, []);\r\n  const noneAnimation = React.useCallback(() => {\r\n    d3.select(ref.current).attr(\"opacity\", 1);\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    switch (animation) {\r\n      case \"left\":\r\n        animateLeft();\r\n        break;\r\n      case \"fadeIn\":\r\n        animateFadeIn();\r\n        break;\r\n      case \"none\":\r\n      default:\r\n        noneAnimation();\r\n        break;\r\n    }\r\n  }, [animateLeft, animateFadeIn, noneAnimation, animation]);\r\n\r\n  // Recalculate line length if scale has changed\r\n  React.useEffect(() => {\r\n    if (animation === \"left\") {\r\n      const totalLength = ref.current.getTotalLength\r\n        ? ref.current.getTotalLength()\r\n        : 500;\r\n      d3.select(ref.current).attr(\r\n        \"stroke-dasharray\",\r\n        `${totalLength},${totalLength}`\r\n      );\r\n    }\r\n  }, [xScale, yScale, animation]);\r\n\r\n  const line = d3\r\n    .line()\r\n    .x((d) => xScale(d.date))\r\n    .y((d) => yScale(d.original_tweets));\r\n\r\n  const d = line(data);\r\n\r\n  return (\r\n    <path\r\n      ref={ref}\r\n      d={d?.match(/NaN|undefined/) ? \"\" : d}\r\n      stroke={color}\r\n      strokeWidth={3}\r\n      fill=\"none\"\r\n      opacity={0}\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n\r\nLine.propTypes = {\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  data: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      date: PropTypes.date,\r\n      change: PropTypes.number\r\n    })\r\n  ),\r\n  color: PropTypes.string,\r\n  isSmooth: PropTypes.bool,\r\n  animation: PropTypes.oneOf([\"left\", \"fadeIn\", \"none\"])\r\n};\r\n\r\nLine.defaultProps = {\r\n  data: [],\r\n  color: \"white\",\r\n  isSmooth: false,\r\n  animation: \"left\"\r\n};\r\n\r\nexport default Line;\r\n","/** Area.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Area = ({ xScale, yScale, color, data, disableAnimation, ...props }) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    if (disableAnimation) {\r\n      d3.select(ref.current).attr(\"opacity\", 1);\r\n      return;\r\n    }\r\n    d3.select(ref.current)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeBackIn)\r\n      .attr(\"opacity\", 1);\r\n  }, [disableAnimation]);\r\n\r\n  const d = React.useMemo(() => {\r\n    const area = d3\r\n      .area()\r\n      .x(({ date }) => xScale(date))\r\n      .y1(({ original_tweets }) => yScale(original_tweets))\r\n      .y0(() => yScale(yScale.domain()[0]));\r\n    return area(data);\r\n  }, [xScale, yScale, data]);\r\n\r\n  return (\r\n    <>\r\n      <path\r\n        ref={ref}\r\n        d={d}\r\n        fill={`url(#gradient-${color})`}\r\n        opacity={0}\r\n        {...props}\r\n      />\r\n      <defs>\r\n        <linearGradient\r\n          id={`gradient-${color}`}\r\n          x1=\"0%\"\r\n          x2=\"0%\"\r\n          y1=\"0%\"\r\n          y2=\"100%\"\r\n        >\r\n          <stop offset=\"0%\" stopColor={color} stopOpacity={0.2} />\r\n          <stop offset=\"100%\" stopColor={color} stopOpacity={0} />\r\n        </linearGradient>\r\n      </defs>\r\n    </>\r\n  );\r\n};\r\n\r\nArea.propTypes = {\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  data: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      date: PropTypes.date,\r\n      original_tweets: PropTypes.number\r\n    })\r\n  ),\r\n  color: PropTypes.string,\r\n  disableAnimation: PropTypes.bool\r\n};\r\n\r\nArea.defaultProps = {\r\n  data: [],\r\n  color: \"white\",\r\n  disableAnimation: false\r\n};\r\n\r\nexport default Area;\r\n","/** AxisX.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Axis = ({\r\n  type,\r\n  scale,\r\n  ticks,\r\n  transform,\r\n  tickFormat,\r\n  disableAnimation,\r\n  anchorEl,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    const axisGenerator = type === \"left\" ? d3.axisRight : d3.axisBottom;\r\n    const axis = axisGenerator(scale).ticks(ticks).tickFormat(tickFormat);\r\n    const axisGroup = d3.select(ref.current);\r\n    if (disableAnimation) {\r\n      axisGroup.call(axis);\r\n    } else {\r\n      axisGroup.transition().duration(750).ease(d3.easeLinear).call(axis);\r\n    }\r\n    axisGroup.select(\".domain\").remove();\r\n    axisGroup.selectAll(\"line\").remove();\r\n    axisGroup\r\n      .selectAll(\"text\")\r\n      .attr(\"opacity\", 0.5)\r\n      .attr(\"color\", \"white\")\r\n      .attr(\"font-size\", \"0.75rem\");\r\n  }, [scale, ticks, tickFormat, disableAnimation]);\r\n\r\n  React.useEffect(() => {\r\n    d3.select(anchorEl)\r\n      .on(\"mouseout.axisX\", () => {\r\n        d3.select(ref.current)\r\n          .selectAll(\"text\")\r\n          .attr(\"opacity\", 0.5)\r\n          .style(\"font-weight\", \"normal\");\r\n      })\r\n      .on(\"mousemove.axisX\", () => {\r\n        const [x] = d3.mouse(anchorEl);\r\n        const xDate = scale.invert(x);\r\n        const textElements = d3.select(ref.current).selectAll(\"text\");\r\n        const data = textElements.data();\r\n        const index = d3.bisector((d) => d).left(data, xDate);\r\n        textElements\r\n          .attr(\"opacity\", (d, i) => (i === index - 1 ? 1 : 0.5))\r\n          .style(\"font-weight\", (d, i) =>\r\n            i === index - 1 ? \"bold\" : \"normal\"\r\n          );\r\n      });\r\n  }, [anchorEl, scale]);\r\n\r\n  return <g ref={ref} transform={transform} {...props} />;\r\n};\r\n\r\nAxis.propTypes = {\r\n  type: PropTypes.oneOf([\"left\", \"bottom\"]).isRequired,\r\n  scale: PropTypes.func.isRequired,\r\n  ticks: PropTypes.oneOfType([PropTypes.number, PropTypes.func]),\r\n  tickFormat: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\r\n  transform: PropTypes.string,\r\n  disableAnimation: PropTypes.bool,\r\n  anchorEl: PropTypes.instanceOf(Element)\r\n};\r\n\r\nAxis.defaultProps = {\r\n  ticks: 0,\r\n  tickFormat: null,\r\n  transform: \"\",\r\n  disableAnimation: false,\r\n  anchorEl: null\r\n};\r\n\r\nexport default Axis;\r\n","/** GridLine.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst GridLine = ({\r\n  type,\r\n  scale,\r\n  ticks,\r\n  size,\r\n  transform,\r\n  disableAnimation,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    const axisGenerator = type === \"vertical\" ? d3.axisBottom : d3.axisLeft;\r\n    const axis = axisGenerator(scale).ticks(ticks).tickSize(-size);\r\n\r\n    const gridGroup = d3.select(ref.current);\r\n    if (disableAnimation) {\r\n      gridGroup.call(axis);\r\n    } else {\r\n      gridGroup.transition().duration(750).ease(d3.easeLinear).call(axis);\r\n    }\r\n    gridGroup.select(\".domain\").remove();\r\n    gridGroup.selectAll(\"text\").remove();\r\n    gridGroup.selectAll(\"line\").attr(\"stroke\", \"rgba(255, 255, 255, 0.1)\");\r\n  }, [scale, ticks, size, disableAnimation]);\r\n\r\n  return <g ref={ref} transform={transform} {...props} />;\r\n};\r\n\r\nGridLine.propTypes = {\r\n  scale: PropTypes.func.isRequired,\r\n  type: PropTypes.oneOf([\"vertical\", \"horizontal\"]).isRequired,\r\n  ticks: PropTypes.oneOfType([PropTypes.number, PropTypes.func]),\r\n  transform: PropTypes.string,\r\n  size: PropTypes.number,\r\n  disableAnimation: PropTypes.bool\r\n};\r\n\r\nGridLine.defaultProps = {\r\n  ticks: 0,\r\n  transform: \"\",\r\n  size: 0,\r\n  disableAnimation: false\r\n};\r\n\r\nexport default GridLine;\r\n","/** Overlay.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\n/**\r\n * Use Overlay as a wrapper for components that need mouse events to be handled.\r\n * For example: Tooltip, AxisX.\r\n */\r\nconst Overlay = React.forwardRef(({ width, height, children }, ref) => (\r\n  <g>\r\n    {children}\r\n    <rect ref={ref} width={width} height={height} opacity={0} />\r\n  </g>\r\n));\r\n\r\nOverlay.propTypes = {\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired,\r\n  children: PropTypes.node.isRequired\r\n};\r\n\r\nexport default Overlay;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\nimport { MultiLineDataPropTypes } from \"../utils/propTypes\";\r\nimport {formatPercent } from \"../utils/commonUtils\"\r\n// import { formatPercent, formatPriceUSD } from \"../utils/commonUtils\";\r\n\r\nconst Tooltip = ({\r\n  xScale,\r\n  yScale,\r\n  width,\r\n  height,\r\n  data,\r\n  margin,\r\n  anchorEl,\r\n  children,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  const drawLine = React.useCallback(\r\n    (x) => {\r\n      d3.select(ref.current)\r\n        .select(\".tooltipLine\")\r\n        .attr(\"x1\", x)\r\n        .attr(\"x2\", x)\r\n        .attr(\"y1\", -margin.top)\r\n        .attr(\"y2\", height);\r\n    },\r\n    [ref, height, margin]\r\n  );\r\n\r\n  const drawContent = React.useCallback(\r\n    (x) => {\r\n      const tooltipContent = d3.select(ref.current).select(\".tooltipContent\");\r\n      tooltipContent.attr(\"transform\", (cur, i, nodes) => {\r\n        const nodeWidth = nodes[i]?.getBoundingClientRect()?.width || 0;\r\n        const translateX = nodeWidth + x > width ? x - nodeWidth - 12 : x + 8;\r\n        return `translate(${translateX}, ${-margin.top})`;\r\n      });\r\n      tooltipContent\r\n        .select(\".contentTitle\")\r\n        .text(d3.timeFormat(\"%b %d, %Y\")(xScale.invert(x)));\r\n    },\r\n    [xScale, margin, width]\r\n  );\r\n\r\n  const drawBackground = React.useCallback(() => {\r\n    // reset background size to defaults\r\n    const contentBackground = d3\r\n      .select(ref.current)\r\n      .select(\".contentBackground\");\r\n    contentBackground.attr(\"width\", 125).attr(\"height\", 40);\r\n\r\n    // calculate new background size\r\n    const tooltipContentElement = d3\r\n      .select(ref.current)\r\n      .select(\".tooltipContent\")\r\n      .node();\r\n    if (!tooltipContentElement) return;\r\n\r\n    const contentSize = tooltipContentElement.getBoundingClientRect();\r\n    contentBackground\r\n      .attr(\"width\", contentSize.width + 8)\r\n      .attr(\"height\", contentSize.height + 4);\r\n  }, []);\r\n\r\n  const onChangePosition = React.useCallback((d, i, isVisible) => {\r\n    d3.selectAll(\".performanceItemThisTDChange\")\r\n      .filter((td, tIndex) => tIndex === i)\r\n      .text(isVisible ? formatPercent(d.change) : \"\");\r\n\r\n    d3.selectAll(\".performanceItemThisTDActivity\")\r\n      .filter((td, tIndex) => tIndex === i)\r\n      .text(\r\n        d.original_tweets.toLocaleString() && !isVisible ? \"No data\" : d.original_tweets.toLocaleString()\r\n      );\r\n       // .text(\r\n      //   d.marketvalue && !isVisible ? \"No data\" : formatPriceUSD(d.marketvalue)\r\n      // );\r\n\r\n    const maxNameWidth = d3.max(\r\n      d3.selectAll(\".performanceItemThisTDName\").nodes(),\r\n      (node) => node.getBoundingClientRect().width\r\n    );\r\n    d3.selectAll(\".performanceItemThisTDChange\").attr(\r\n      \"transform\",\r\n      (datum, index, nodes) =>\r\n        `translate(${\r\n          nodes[index].previousSibling.getBoundingClientRect().width + 14\r\n        },4)`\r\n    );\r\n\r\n    d3.selectAll(\".performanceItemThisTDActivity\").attr(\r\n      \"transform\",\r\n      `translate(${maxNameWidth + 60},4)`\r\n    );\r\n  }, []);\r\n\r\n  const followPoints = React.useCallback(() => {\r\n    const [x] = d3.mouse(anchorEl);\r\n    const xDate = xScale.invert(x);\r\n    const bisectDate = d3.bisector((d) => d.date).left;\r\n    let baseXPos = 0;\r\n\r\n    // draw circles on line\r\n    d3.select(ref.current)\r\n      .selectAll(\".tooltipLinePoint\")\r\n      .attr(\"transform\", (cur, i) => {\r\n        const index = bisectDate(data[i].items, xDate, 1);\r\n        const d0 = data[i].items[index - 1];\r\n        const d1 = data[i].items[index];\r\n        const d = xDate - d0?.date > d1?.date - xDate ? d1 : d0;\r\n        if (d.date === undefined && d.original_tweets === undefined) {\r\n          // move point out of container\r\n          return \"translate(-100,-100)\";\r\n        }\r\n        const xPos = xScale(d.date);\r\n        if (i === 0) {\r\n          baseXPos = xPos;\r\n        }\r\n\r\n        let isVisible = true;\r\n        if (xPos !== baseXPos) {\r\n          isVisible = false;\r\n        }\r\n        const yPos = yScale(d.original_tweets);\r\n\r\n        onChangePosition(d, i, isVisible);\r\n\r\n        return isVisible\r\n          ? `translate(${xPos}, ${yPos})`\r\n          : \"translate(-100,-100)\";\r\n      });\r\n\r\n    drawLine(baseXPos);\r\n    drawContent(baseXPos);\r\n    drawBackground();\r\n  }, [\r\n    anchorEl,\r\n    drawLine,\r\n    drawContent,\r\n    drawBackground,\r\n    xScale,\r\n    yScale,\r\n    data,\r\n    onChangePosition\r\n  ]);\r\n\r\n  React.useEffect(() => {\r\n    d3.select(anchorEl)\r\n      .on(\"mouseout.tooltip\", () => {\r\n        d3.select(ref.current).attr(\"opacity\", 0);\r\n      })\r\n      .on(\"mouseover.tooltip\", () => {\r\n        d3.select(ref.current).attr(\"opacity\", 1);\r\n      })\r\n      .on(\"mousemove.tooltip\", () => {\r\n        d3.select(ref.current)\r\n          .selectAll(\".tooltipLinePoint\")\r\n          .attr(\"opacity\", 1);\r\n        followPoints();\r\n      });\r\n  }, [anchorEl, followPoints]);\r\n\r\n  if (!data.length) return null;\r\n\r\n  return (\r\n    <g ref={ref} opacity={0} {...props}>\r\n      <line className=\"tooltipLine\" />\r\n      <g className=\"tooltipContent\">\r\n        <rect className=\"contentBackground\" rx={4} ry={4} opacity={0.2} />\r\n        <text className=\"contentTitle\" transform=\"translate(4,14)\" />\r\n        <g className=\"content\" transform=\"translate(4,32)\">\r\n          {data.map(({ name, color }, i) => (\r\n            <g key={name} transform={`translate(6,${22 * i})`}>\r\n              <circle r={6} fill={color} />\r\n              <text className=\"performanceItemThisTDName\" transform=\"translate(10,4)\">\r\n                {name}\r\n              </text>\r\n              <text\r\n                className=\"performanceItemThisTDChange\"\r\n                opacity={0.5}\r\n                fontSize={10}\r\n              />\r\n              <text className=\"performanceItemThisTDActivity\" />\r\n            </g>\r\n          ))}\r\n        </g>\r\n      </g>\r\n      {data.map(({ name }) => (\r\n        <circle className=\"tooltipLinePoint\" r={6} key={name} opacity={0} />\r\n      ))}\r\n    </g>\r\n  );\r\n};\r\n\r\nTooltip.propTypes = {\r\n  width: PropTypes.number,\r\n  height: PropTypes.number,\r\n  margin: PropTypes.shape({\r\n    top: PropTypes.number,\r\n    bottom: PropTypes.number,\r\n    left: PropTypes.number,\r\n    right: PropTypes.number\r\n  }),\r\n  data: MultiLineDataPropTypes,\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  anchorEl: PropTypes.instanceOf(Element)\r\n};\r\n\r\nTooltip.defaultProps = {\r\n  width: 0,\r\n  height: 0,\r\n  margin: {\r\n    top: 0,\r\n    bottom: 0,\r\n    left: 0,\r\n    right: 0\r\n  },\r\n  data: [],\r\n  anchorEl: null\r\n};\r\n\r\nexport default Tooltip;\r\n","/* eslint-disable no-bitwise */\r\nimport * as d3 from \"d3\";\r\nimport { DateTime, Interval } from \"luxon\";\r\n\r\n// export const formatPriceUSD = (price) =>\r\n//   new Intl.NumberFormat(\"en-US\", { style: \"currency\", currency: \"USD\" }).format(\r\n//     price\r\n//   );\r\n\r\nexport const formatPercent = (percent = 0) => {\r\n  let result = \"0.00%\";\r\n  const isNumber = typeof percent === \"number\";\r\n  const isString = typeof percent === \"string\";\r\n  const isNotNaN = !Number.isNaN(parseFloat(percent));\r\n\r\n  if ((isNumber || isString) && isNotNaN) {\r\n    result = `${parseFloat(percent) > 0 ? \"+\" : \"\"}${d3.format(\".2%\")(\r\n      percent / 100\r\n    )}`;\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const getPeriod = (date) => {\r\n  if (!date) return 6;\r\n  const now = DateTime.utc();\r\n  const before = DateTime.fromJSDate(date);\r\n  const i = Interval.fromDateTimes(before, now);\r\n  return i.length(\"months\");\r\n};\r\n\r\nexport const getXTicks = (months) => {\r\n  if (months <= 2) return d3.timeDay.every(5).filter((d) => d.getDate() !== 31);\r\n  if (months <= 6) return d3.timeMonth.every(1);\r\n  if (months <= 13) return d3.timeMonth.every(2);\r\n  return d3.timeYear.every(1);\r\n};\r\n\r\nexport const getXTickFormat = (months) => {\r\n  if (months <= 2) return d3.timeFormat(\"%d %b\");\r\n  if (months <= 6) return d3.timeFormat(\"%b\");\r\n  if (months <= 13) return d3.timeFormat(\"%b %Y\");\r\n  return d3.timeFormat(\"%Y\");\r\n};\r\n","/** MultilineChart.controller.js */\r\nimport { useMemo } from \"react\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst useController = ({ data, width, height }) => {\r\n  const xMin = useMemo(\r\n    () => d3.min(data, ({ items }) => d3.min(items, ({ date }) => date)),\r\n    [data]\r\n  );\r\n\r\n  const xMax = useMemo(\r\n    () => d3.max(data, ({ items }) => d3.max(items, ({ date }) => date)),\r\n    [data]\r\n  );\r\n\r\n  const xScale = useMemo(\r\n    () => d3.scaleTime().domain([xMin, xMax]).range([0, width]),\r\n    [xMin, xMax, width]\r\n  );\r\n\r\n  const yMin = useMemo(\r\n    () => d3.min(data, ({ items }) => d3.min(items, ({ original_tweets }) => original_tweets)),\r\n    [data]\r\n  );\r\n\r\n  const yMax = useMemo(\r\n    () => d3.max(data, ({ items }) => d3.max(items, ({original_tweets}) => original_tweets)),\r\n    [data]\r\n  );\r\n\r\n  const yScale = useMemo(() => {\r\n    const indention = (yMax - yMin) * 0.5;\r\n    return d3\r\n      .scaleLinear()\r\n      .domain([yMin - indention, yMax + indention])\r\n      .range([height, 0]);\r\n  }, [height, yMin, yMax]);\r\n\r\n  const yScaleForAxis = useMemo(\r\n    () => d3.scaleBand().domain([yMin, yMax]).range([height, 0]),\r\n    [height, yMin, yMax]\r\n  );\r\n\r\n  const yTickFormat = (d) => {\r\n\r\n    return d\r\n    // `${parseFloat(d) > 0 ? \"+\" : \"\"}${d3.format(\".2%\")(d / 100)}`;\r\n  }\r\n  const xTickFormat = (d) => {\r\n    if (d3.timeFormat(\"%b\")(d) === \"Jan\") {\r\n      return d3.timeFormat(\"%Y\")(d);\r\n    }\r\n    return d3.timeFormat(\"%b\")(d);\r\n  };\r\n  return {\r\n    yTickFormat,\r\n    xScale,\r\n    yScale,\r\n    yScaleForAxis,\r\n    xTickFormat\r\n  };\r\n};\r\n\r\nexport default useController;\r\n","import React from 'react';\r\nimport ResizeObserver from 'resize-observer-polyfill';\r\n\r\n/**\r\n * Use ResizeObserver to listen for the changes to the dimensions of an element\r\n * @params ref - React ref\r\n * @returns {object} - { width, height, top, left }\r\n */\r\nconst useResize = (ref) => {\r\n  const [dimensions, setDimensions] = React.useState(null);\r\n  React.useEffect(() => {\r\n    const element = ref.current;\r\n    const resizeObserver = new ResizeObserver((entries) => {\r\n      entries.forEach((entry) => {\r\n        setDimensions(entry.contentRect);\r\n      });\r\n    });\r\n    resizeObserver.observe(element);\r\n    return () => {\r\n      resizeObserver.unobserve(element);\r\n    };\r\n  }, [ref]);\r\n  return dimensions || {\r\n    width: 0,\r\n    height: 0,\r\n    top: 0,\r\n    left: 0,\r\n  };\r\n};\r\n\r\nexport default useResize;\r\n","import React from \"react\";\r\nimport useResize from \"./useResize\";\r\n\r\nconst useDimensions = ({ maxHeight, margin = {}, scaleCoef = 0.5 }) => {\r\n  const ref = React.useRef(null);\r\n  const { width } = useResize(ref);\r\n\r\n  const height =\r\n    !maxHeight || width * scaleCoef < maxHeight ? width * scaleCoef : maxHeight;\r\n  const innerWidth = width - (margin.left || 0) - (margin.right || 0);\r\n  const innerHeight = height - (margin.top || 0) - (margin.bottom || 0);\r\n\r\n  return [\r\n    ref,\r\n    {\r\n      svgWidth: width,\r\n      svgHeight: height,\r\n      width: innerWidth,\r\n      height: innerHeight\r\n    }\r\n  ];\r\n};\r\n\r\nexport default useDimensions;\r\n","/** MultilineChart.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { MultiLineDataPropTypes } from \"../utils/propTypes\";\r\nimport { Line, Axis, GridLine, Overlay, Tooltip, Area } from \"../components\";\r\nimport useController from \"./MultilineChart.controller\";\r\nimport useDimensions from \"../utils/useDimensions\";\r\n\r\nconst MultilineChart = ({ data = [], margin = {} }) => {\r\n  const overlayRef = React.useRef(null);\r\n  const [containerRef, { svgWidth, svgHeight, width, height }] = useDimensions({\r\n    maxHeight: 400,\r\n    margin\r\n  });\r\n  const controller = useController({ data, width, height });\r\n  const {\r\n    yTickFormat,\r\n    xTickFormat,\r\n    xScale,\r\n    yScale,\r\n    yScaleForAxis\r\n  } = controller;\r\n\r\n  return (\r\n    <div ref={containerRef}>\r\n      <svg width={svgWidth} height={svgHeight}>\r\n        <g transform={`translate(${margin.left},${margin.top})`}>\r\n          <GridLine\r\n            type=\"vertical\"\r\n            scale={xScale}\r\n            ticks={5}\r\n            size={height}\r\n            transform={`translate(0, ${height})`}\r\n          />\r\n          <GridLine\r\n            type=\"horizontal\"\r\n            scale={yScaleForAxis}\r\n            ticks={2}\r\n            size={width}\r\n          />\r\n          <GridLine\r\n            type=\"horizontal\"\r\n            className=\"baseGridLine\"\r\n            scale={yScale}\r\n            ticks={1}\r\n            size={width}\r\n            disableAnimation\r\n          />\r\n          {data.map(({ name, items = [], color }) => (\r\n            <Line\r\n              key={name}\r\n              data={items}\r\n              xScale={xScale}\r\n              yScale={yScale}\r\n              color={color}\r\n            />\r\n          ))}\r\n          {/* <Area data={data[0].items} xScale={xScale} yScale={yScale} /> */}\r\n          <Axis\r\n            type=\"left\"\r\n            scale={yScaleForAxis}\r\n            transform=\"translate(0, -10)\"\r\n            ticks={5}\r\n            tickFormat={yTickFormat}\r\n          />\r\n          <Overlay ref={overlayRef} width={width} height={height}>\r\n            <Axis\r\n              type=\"bottom\"\r\n              className=\"axisX\"\r\n              anchorEl={overlayRef.current}\r\n              scale={xScale}\r\n              transform={`translate(10, ${height - height / 6})`}\r\n              ticks={5}\r\n              tickFormat={xTickFormat}\r\n            />\r\n            <Tooltip\r\n              className=\"tooltip\"\r\n              anchorEl={overlayRef.current}\r\n              width={width}\r\n              height={height}\r\n              margin={margin}\r\n              xScale={xScale}\r\n              yScale={yScale}\r\n              data={data}\r\n            />\r\n          </Overlay>\r\n        </g>\r\n      </svg>\r\n    </div>\r\n  );\r\n};\r\n\r\nMultilineChart.propTypes = {\r\n  data: MultiLineDataPropTypes,\r\n  margin: PropTypes.shape({\r\n    top: PropTypes.number,\r\n    bottom: PropTypes.number,\r\n    left: PropTypes.number,\r\n    right: PropTypes.number\r\n  })\r\n};\r\n\r\nMultilineChart.defaultProps = {\r\n  data: [],\r\n  margin: {\r\n    top: 30,\r\n    right: 15,\r\n    bottom: 15,\r\n    left: 15\r\n  }\r\n};\r\n\r\nexport default MultilineChart;\r\n","import React from \"react\";\r\nimport { FormControlLabel, Checkbox } from \"@material-ui/core\";\r\n\r\nconst Legend = ({ data, selectedItems, onChange }) => (\r\n  <div className=\"legendContainer\">\r\n    {data.map((d) => (\r\n      <div className=\"checkbox\" style={{ color: d.color }} key={d.name}>\r\n\r\n<FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: d.color}}\r\n            value={d.name}\r\n            onChange={() => onChange(d.name)}\r\n          />\r\n        }\r\n        label={d.name}\r\n\r\n        />\r\n      </div>\r\n    ))}\r\n  </div>\r\n);\r\n\r\nexport default Legend;\r\n","/** App.js */\r\nimport React, {useState, useEffect} from \"react\";\r\nimport MultilineChart from \"./views/MultilineChart\";\r\nimport Legend from \"./components/Legend\";\r\nimport vcit from \"./data/VCIT.json\";\r\nimport portfolio from \"./data/portfolio.json\";\r\nimport schc from \"./data/SCHC.json\";\r\nimport \"./styles.css\";\r\nimport fiannafail from \"./data/fiannaFail.json\"\r\nimport finegael from \"./data/finegael.json\"\r\nimport ind from \"./data/ind.json\"\r\nimport sinnfein from \"./data/sinnfein.json\"\r\nimport labour from \"./data/labour.json\"\r\nimport { chamberStats } from '../../../Backend/metaData';\r\nimport axios from \"axios\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport { gridColumnsTotalWidthSelector } from \"@material-ui/data-grid\";\r\n\r\n\r\n\r\n\r\n\r\nexport default function TDLineChartActivity ({justThisTDData, justThisTDPartyData, allTDData}) {\r\n\r\n  const [selectedItems, setSelectedItems] = useState([]);\r\n  const [thisTDData, setThisTDData] = useState(null)\r\n  const [thisTDPartyData, setThisTDPartyData] = useState(null)\r\n  const [dailData, setDailData] = useState(null)\r\n\r\n  const partyColors = {\r\n    \"Sinn Féin\": \"#326760\",\r\n    \"Fine Gael\": \"#6699FF\",\r\n    \"Fianna Fáil\": \"#66BB66\",\r\n    \"Labour Party\": \"#CC0000\",\r\n    \"Solidarity - People Before Profit\": \"#8E2420\",\r\n    \"Independent\": \"white\",\r\n    \"Green Party\": \"#99CC33\",\r\n    \"Social Democrats\": \"#752F8B\",\r\n    \"Aontú\": \"#44532A\",\r\n    \"Independents 4 Change\": \"grey\"}\r\n\r\n    const tdPartyColors = {\r\n\r\n      \"Sinn Féin\": \"#4b9b90\",\r\n      \"Fine Gael\": \"#b3ccff\",\r\n      \"Fianna Fáil\": \"#9bd39b\",\r\n      \"Labour Party\": \"#ff1a1a\",\r\n      \"Solidarity - People Before Profit\": \"#b82f29\",\r\n      \"Independent\": \"#d9d9d9\",\r\n      \"Green Party\": \"#b8db70\",\r\n      \"Social Democrats\": \"#a346c0\",\r\n      \"Aontú\": \"#84a152\",\r\n      \"Independents 4 Change\": \"#a6a6a6\"\r\n    }\r\n\r\n  useEffect(() => {\r\n\r\n    setThisTDData(justThisTDData)\r\n    setThisTDPartyData(justThisTDPartyData)\r\n    setDailData(allTDData)\r\n\r\n}, []);\r\n\r\nuseEffect(() => {\r\n\r\n  if(!thisTDData) return null;\r\n\r\n  setSelectedItems([thisTDData[0].name, \"Dáil Average\", \"Party Average\"])\r\n\r\n}, [thisTDData])\r\n\r\nconst onChangeSelection = (name) => {\r\n    const newSelectedItems = selectedItems.includes(name)\r\n      ? selectedItems.filter((item) => item !== name)\r\n      : [...selectedItems, name];\r\n    setSelectedItems(newSelectedItems);\r\n  };\r\n\r\n  if(!thisTDData || !justThisTDPartyData || !dailData) return null;\r\n\r\n  function getTDObj() {\r\n\r\n    let justTDOnTwitter = thisTDData.filter(function(d) {\r\n                \r\n      if(d.retweetData[0] != undefined) {\r\n      return d\r\n    }\r\n  }\r\n  )\r\n  \r\n\r\n  let activityArr = justTDOnTwitter[0].retweetData.map(d => d.original_tweets);\r\n  let dateArr = justTDOnTwitter[0].retweetData.map(d => d.date);\r\n  let changeArr = [0, ];\r\n  let tdObjArr = [];\r\n  \r\n  \r\n  for(let i = 1; i < activityArr.length; i++) {\r\n  \r\n  \r\n    var lastWeek  = activityArr[i - 1]\r\n    var thisWeek = activityArr[i]\r\n    var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n    \r\n    //filter NaN at start\r\n  \r\n    if(diff !== diff) {changeArr.push(0) } else {\r\n    changeArr.push(diff) \r\n    }\r\n  }\r\n  \r\n  for(let i = 0; i < justTDOnTwitter[0].retweetData.length; i++) {\r\n  \r\n    function tdObj() {\r\n  \r\n      this.original_tweets = activityArr[i]\r\n      this.date = dateArr[i]\r\n      this.change = changeArr[i]\r\n    }\r\n  tdObjArr.push(new tdObj)\r\n  }\r\n  \r\n  return tdObjArr\r\n  \r\n  \r\n}\r\n\r\n\r\nfunction getDailObj() {\r\n\r\n  let justTDsOnTwitter = dailData.filter(function(d) {\r\n              \r\n    if(d.retweetData[0] != undefined) {\r\n    return d\r\n  }\r\n}\r\n)\r\n\r\nlet totalActivityArr = []\r\nlet averageActivityArr = []\r\nlet dateArr = []\r\nlet changeArr = [0, ]\r\nlet dailMeanObjArr = []\r\n\r\nfor(let i = 0; i < justTDsOnTwitter[0].retweetData.length; i ++) {\r\n\r\nlet holder = justTDsOnTwitter.map(d => d.retweetData[i].original_tweets)\r\nlet total = holder.reduce(function(a, b) {\r\n  return a + b\r\n})\r\n\r\nlet averageActivityCount = total / justTDsOnTwitter.length\r\n\r\naverageActivityArr.push(Number(averageActivityCount.toFixed()))\r\n\r\n}\r\n\r\ndateArr = justTDsOnTwitter[0].retweetData.map(d => d.date)\r\n\r\n\r\nfor(let i = 1; i < averageActivityArr.length; i++) {\r\n\r\n\r\n  var lastWeek  = averageActivityArr[i - 1]\r\n  var thisWeek = averageActivityArr[i]\r\n  var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n  \r\n  //filter NaN at start\r\n\r\n  if(diff !== diff) {changeArr.push(0) } else {\r\n  changeArr.push(diff) \r\n  }\r\n}\r\n\r\nfor(let i = 0; i < justTDsOnTwitter[0].retweetData.length; i++) {\r\n\r\n  function dailMeanObj() {\r\n\r\n    this.original_tweets = averageActivityArr[i]\r\n    this.date = dateArr[i]\r\n    this.change = changeArr[i]\r\n  }\r\ndailMeanObjArr.push(new dailMeanObj)\r\n}\r\n\r\nreturn dailMeanObjArr\r\n\r\n\r\n}\r\n\r\nfunction getPartyObj() {\r\n\r\n  console.log(thisTDPartyData)\r\n\r\n  let justTDsOnTwitter = thisTDPartyData.filter(function(d) {\r\n              \r\n    if(d.retweetData[0] != undefined) {\r\n    return d\r\n  }\r\n}\r\n)\r\n\r\nlet averageActivityArr = []\r\nlet dateArr = []\r\nlet changeArr = [0, ]\r\nlet partyMeanObjArr = []\r\n\r\nfor(let i = 0; i < justTDsOnTwitter[0].retweetData.length; i ++) {\r\n\r\nlet holder = justTDsOnTwitter.map(d => d.retweetData[i].original_tweets)\r\nlet total = holder.reduce(function(a, b) {\r\n  return a + b\r\n})\r\n\r\nlet averageActivityCount = total / justTDsOnTwitter.length\r\n\r\naverageActivityArr.push(Number(averageActivityCount.toFixed()))\r\n\r\n}\r\n\r\ndateArr = justTDsOnTwitter[0].retweetData.map(d => d.date)\r\n\r\n\r\nfor(let i = 1; i < averageActivityArr.length; i++) {\r\n\r\n\r\n  var lastWeek  = averageActivityArr[i - 1]\r\n  var thisWeek = averageActivityArr[i]\r\n  var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n  \r\n  //filter NaN at start\r\n\r\n  if(diff !== diff) {changeArr.push(0) } else {\r\n  changeArr.push(diff) \r\n  }\r\n}\r\n\r\nfor(let i = 0; i < justTDsOnTwitter[0].retweetData.length; i++) {\r\n\r\n  function partyMeanObj() {\r\n\r\n    this.original_tweets = averageActivityArr[i]\r\n    this.date = dateArr[i]\r\n    this.change = changeArr[i]\r\n  }\r\npartyMeanObjArr.push(new partyMeanObj)\r\n}\r\n\r\nreturn partyMeanObjArr\r\n\r\n\r\n}\r\n\r\n\r\nconst getDate = (d) => { \r\n    \r\n    let together = []\r\n    let apart = d.date.split('/')\r\n    let day = apart[0]\r\n    let month = apart[1]\r\n    let year = apart[2]\r\n\r\n    together.push(month, day, year)\r\n    together.toString().replace(\",\",\"/\").replace(\",\",\"/\")\r\n    return new Date(together)\r\n  }\r\n\r\nconst thisTDDataMap = {\r\n  name: thisTDData[0].name,\r\n  color: tdPartyColors[thisTDData[0].party],\r\n  items: getTDObj().map((d) => ({ ...d, date: getDate(d)}))\r\n};\r\n\r\nconst dailMeanDataMap = {\r\n  name: \"Dáil Average\",\r\n  color: \"white\",\r\n  items: getDailObj().map((d) => ({ ...d, date: getDate(d)}))\r\n}\r\n\r\nconst partyMeanDataMap = {\r\n  name: \"Party Average\",\r\n  color: partyColors[thisTDData[0].party],\r\n  items: getPartyObj().map((d) => ({ ...d, date: getDate(d)}))\r\n}\r\n\r\nconsole.log(partyMeanDataMap)\r\n\r\nif(!thisTDDataMap) return null;\r\n\r\n  const chartData = [\r\n    ...[thisTDDataMap, dailMeanDataMap, partyMeanDataMap].filter((d) => selectedItems.includes(d.name))\r\n  ];\r\n\r\nconst legendData = [thisTDDataMap, dailMeanDataMap, partyMeanDataMap];\r\n\r\n\r\n  return (\r\n  <div className=\"featuredItem\" style={{textAlign: \"center\"}}>\r\n    <Typography variant=\"h5\">Original Tweets</Typography>\r\n      <Legend\r\n        data={legendData}\r\n        selectedItems={selectedItems}\r\n        onChange={onChangeSelection}\r\n      />\r\n      <MultilineChart data={chartData} />\r\n      </div>\r\n\r\n  );\r\n}\r\n\r\n","import { arrayOf, shape, string, date as dateProp, number } from \"prop-types\";\r\n\r\nexport const MultiLineDataItemsPropTypes = arrayOf(\r\n  shape({\r\n    date: dateProp,\r\n    change: number,\r\n    polarity: number\r\n  })\r\n);\r\n\r\nexport const MultiLineDataPropTypes = arrayOf(\r\n  shape({\r\n    name: string,\r\n    items: MultiLineDataItemsPropTypes,\r\n    color: string\r\n  })\r\n);\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Line = ({\r\n  xScale,\r\n  yScale,\r\n  color,\r\n  data,\r\n  isSmooth,\r\n  animation,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  // Define different types of animation that we can use\r\n  const animateLeft = React.useCallback(() => {\r\n    // NOTE: for some reason getTotalLength() doesn't work in tests\r\n    // in this codesandbox so we added default value just for tests\r\n    const totalLength = ref.current.getTotalLength\r\n      ? ref.current.getTotalLength()\r\n      : 500;\r\n    d3.select(ref.current)\r\n      .attr(\"opacity\", 1)\r\n      .attr(\"stroke-dasharray\", `${totalLength},${totalLength}`)\r\n      .attr(\"stroke-dashoffset\", totalLength)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeLinear)\r\n      .attr(\"stroke-dashoffset\", 0);\r\n  }, []);\r\n  const animateFadeIn = React.useCallback(() => {\r\n    d3.select(ref.current)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeLinear)\r\n      .attr(\"opacity\", 1);\r\n  }, []);\r\n  const noneAnimation = React.useCallback(() => {\r\n    d3.select(ref.current).attr(\"opacity\", 1);\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    switch (animation) {\r\n      case \"left\":\r\n        animateLeft();\r\n        break;\r\n      case \"fadeIn\":\r\n        animateFadeIn();\r\n        break;\r\n      case \"none\":\r\n      default:\r\n        noneAnimation();\r\n        break;\r\n    }\r\n  }, [animateLeft, animateFadeIn, noneAnimation, animation]);\r\n\r\n  // Recalculate line length if scale has changed\r\n  React.useEffect(() => {\r\n    if (animation === \"left\") {\r\n      const totalLength = ref.current.getTotalLength\r\n        ? ref.current.getTotalLength()\r\n        : 500;\r\n      d3.select(ref.current).attr(\r\n        \"stroke-dasharray\",\r\n        `${totalLength},${totalLength}`\r\n      );\r\n    }\r\n  }, [xScale, yScale, animation]);\r\n\r\n  const line = d3\r\n    .line()\r\n    .x((d) => xScale(d.date))\r\n    .y((d) => yScale(d.polarity));\r\n\r\n  const d = line(data);\r\n\r\n  return (\r\n    <path\r\n      ref={ref}\r\n      d={d?.match(/NaN|undefined/) ? \"\" : d}\r\n      stroke={color}\r\n      strokeWidth={3}\r\n      fill=\"none\"\r\n      opacity={0}\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n\r\nLine.propTypes = {\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  data: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      date: PropTypes.date,\r\n      change: PropTypes.number\r\n    })\r\n  ),\r\n  color: PropTypes.string,\r\n  isSmooth: PropTypes.bool,\r\n  animation: PropTypes.oneOf([\"left\", \"fadeIn\", \"none\"])\r\n};\r\n\r\nLine.defaultProps = {\r\n  data: [],\r\n  color: \"white\",\r\n  isSmooth: false,\r\n  animation: \"left\"\r\n};\r\n\r\nexport default Line;\r\n","/** Area.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Area = ({ xScale, yScale, color, data, disableAnimation, ...props }) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    if (disableAnimation) {\r\n      d3.select(ref.current).attr(\"opacity\", 1);\r\n      return;\r\n    }\r\n    d3.select(ref.current)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeBackIn)\r\n      .attr(\"opacity\", 1);\r\n  }, [disableAnimation]);\r\n\r\n  const d = React.useMemo(() => {\r\n    const area = d3\r\n      .area()\r\n      .x(({ date }) => xScale(date))\r\n      .y1(({ polarity }) => yScale(polarity))\r\n      .y0(() => yScale(yScale.domain()[0]));\r\n    return area(data);\r\n  }, [xScale, yScale, data]);\r\n\r\n  return (\r\n    <>\r\n      <path\r\n        ref={ref}\r\n        d={d}\r\n        fill={`url(#gradient-${color})`}\r\n        opacity={0}\r\n        {...props}\r\n      />\r\n      <defs>\r\n        <linearGradient\r\n          id={`gradient-${color}`}\r\n          x1=\"0%\"\r\n          x2=\"0%\"\r\n          y1=\"0%\"\r\n          y2=\"100%\"\r\n        >\r\n          <stop offset=\"0%\" stopColor={color} stopOpacity={0.2} />\r\n          <stop offset=\"100%\" stopColor={color} stopOpacity={0} />\r\n        </linearGradient>\r\n      </defs>\r\n    </>\r\n  );\r\n};\r\n\r\nArea.propTypes = {\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  data: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      date: PropTypes.date,\r\n      polarity: PropTypes.number\r\n    })\r\n  ),\r\n  color: PropTypes.string,\r\n  disableAnimation: PropTypes.bool\r\n};\r\n\r\nArea.defaultProps = {\r\n  data: [],\r\n  color: \"white\",\r\n  disableAnimation: false\r\n};\r\n\r\nexport default Area;\r\n","/** AxisX.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Axis = ({\r\n  type,\r\n  scale,\r\n  ticks,\r\n  transform,\r\n  tickFormat,\r\n  disableAnimation,\r\n  anchorEl,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    const axisGenerator = type === \"left\" ? d3.axisRight : d3.axisBottom;\r\n    const axis = axisGenerator(scale).ticks(ticks).tickFormat(tickFormat);\r\n    const axisGroup = d3.select(ref.current);\r\n    if (disableAnimation) {\r\n      axisGroup.call(axis);\r\n    } else {\r\n      axisGroup.transition().duration(750).ease(d3.easeLinear).call(axis);\r\n    }\r\n    axisGroup.select(\".domain\").remove();\r\n    axisGroup.selectAll(\"line\").remove();\r\n    axisGroup\r\n      .selectAll(\"text\")\r\n      .attr(\"opacity\", 0.5)\r\n      .attr(\"color\", \"white\")\r\n      .attr(\"font-size\", \"0.75rem\");\r\n  }, [scale, ticks, tickFormat, disableAnimation]);\r\n\r\n  React.useEffect(() => {\r\n    d3.select(anchorEl)\r\n      .on(\"mouseout.axisX\", () => {\r\n        d3.select(ref.current)\r\n          .selectAll(\"text\")\r\n          .attr(\"opacity\", 0.5)\r\n          .style(\"font-weight\", \"normal\");\r\n      })\r\n      .on(\"mousemove.axisX\", () => {\r\n        const [x] = d3.mouse(anchorEl);\r\n        const xDate = scale.invert(x);\r\n        const textElements = d3.select(ref.current).selectAll(\"text\");\r\n        const data = textElements.data();\r\n        const index = d3.bisector((d) => d).left(data, xDate);\r\n        textElements\r\n          .attr(\"opacity\", (d, i) => (i === index - 1 ? 1 : 0.5))\r\n          .style(\"font-weight\", (d, i) =>\r\n            i === index - 1 ? \"bold\" : \"normal\"\r\n          );\r\n      });\r\n  }, [anchorEl, scale]);\r\n\r\n  return <g ref={ref} transform={transform} {...props} />;\r\n};\r\n\r\nAxis.propTypes = {\r\n  type: PropTypes.oneOf([\"left\", \"bottom\"]).isRequired,\r\n  scale: PropTypes.func.isRequired,\r\n  ticks: PropTypes.oneOfType([PropTypes.number, PropTypes.func]),\r\n  tickFormat: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\r\n  transform: PropTypes.string,\r\n  disableAnimation: PropTypes.bool,\r\n  anchorEl: PropTypes.instanceOf(Element)\r\n};\r\n\r\nAxis.defaultProps = {\r\n  ticks: 0,\r\n  tickFormat: null,\r\n  transform: \"\",\r\n  disableAnimation: false,\r\n  anchorEl: null\r\n};\r\n\r\nexport default Axis;\r\n","/** GridLine.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst GridLine = ({\r\n  type,\r\n  scale,\r\n  ticks,\r\n  size,\r\n  transform,\r\n  disableAnimation,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    const axisGenerator = type === \"vertical\" ? d3.axisBottom : d3.axisLeft;\r\n    const axis = axisGenerator(scale).ticks(ticks).tickSize(-size);\r\n\r\n    const gridGroup = d3.select(ref.current);\r\n    if (disableAnimation) {\r\n      gridGroup.call(axis);\r\n    } else {\r\n      gridGroup.transition().duration(750).ease(d3.easeLinear).call(axis);\r\n    }\r\n    gridGroup.select(\".domain\").remove();\r\n    gridGroup.selectAll(\"text\").remove();\r\n    gridGroup.selectAll(\"line\").attr(\"stroke\", \"rgba(255, 255, 255, 0.1)\");\r\n  }, [scale, ticks, size, disableAnimation]);\r\n\r\n  return <g ref={ref} transform={transform} {...props} />;\r\n};\r\n\r\nGridLine.propTypes = {\r\n  scale: PropTypes.func.isRequired,\r\n  type: PropTypes.oneOf([\"vertical\", \"horizontal\"]).isRequired,\r\n  ticks: PropTypes.oneOfType([PropTypes.number, PropTypes.func]),\r\n  transform: PropTypes.string,\r\n  size: PropTypes.number,\r\n  disableAnimation: PropTypes.bool\r\n};\r\n\r\nGridLine.defaultProps = {\r\n  ticks: 0,\r\n  transform: \"\",\r\n  size: 0,\r\n  disableAnimation: false\r\n};\r\n\r\nexport default GridLine;\r\n","/** Overlay.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\n/**\r\n * Use Overlay as a wrapper for components that need mouse events to be handled.\r\n * For example: Tooltip, AxisX.\r\n */\r\nconst Overlay = React.forwardRef(({ width, height, children }, ref) => (\r\n  <g>\r\n    {children}\r\n    <rect ref={ref} width={width} height={height} opacity={0} />\r\n  </g>\r\n));\r\n\r\nOverlay.propTypes = {\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired,\r\n  children: PropTypes.node.isRequired\r\n};\r\n\r\nexport default Overlay;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\nimport { MultiLineDataPropTypes } from \"../utils/propTypes\";\r\nimport {formatPercent } from \"../utils/commonUtils\"\r\n// import { formatPercent, formatPriceUSD } from \"../utils/commonUtils\";\r\n\r\nconst Tooltip = ({\r\n  xScale,\r\n  yScale,\r\n  width,\r\n  height,\r\n  data,\r\n  margin,\r\n  anchorEl,\r\n  children,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  const drawLine = React.useCallback(\r\n    (x) => {\r\n      d3.select(ref.current)\r\n        .select(\".tooltipLine\")\r\n        .attr(\"x1\", x)\r\n        .attr(\"x2\", x)\r\n        .attr(\"y1\", -margin.top)\r\n        .attr(\"y2\", height);\r\n    },\r\n    [ref, height, margin]\r\n  );\r\n\r\n  const drawContent = React.useCallback(\r\n    (x) => {\r\n      const tooltipContent = d3.select(ref.current).select(\".tooltipContent\");\r\n      tooltipContent.attr(\"transform\", (cur, i, nodes) => {\r\n        const nodeWidth = nodes[i]?.getBoundingClientRect()?.width || 0;\r\n        const translateX = nodeWidth + x > width ? x - nodeWidth - 12 : x + 8;\r\n        return `translate(${translateX}, ${-margin.top})`;\r\n      });\r\n      tooltipContent\r\n        .select(\".contentTitle\")\r\n        .text(d3.timeFormat(\"%b %d, %Y\")(xScale.invert(x)));\r\n    },\r\n    [xScale, margin, width]\r\n  );\r\n\r\n  const drawBackground = React.useCallback(() => {\r\n    // reset background size to defaults\r\n    const contentBackground = d3\r\n      .select(ref.current)\r\n      .select(\".contentBackground\");\r\n    contentBackground.attr(\"width\", 125).attr(\"height\", 40);\r\n\r\n    // calculate new background size\r\n    const tooltipContentElement = d3\r\n      .select(ref.current)\r\n      .select(\".tooltipContent\")\r\n      .node();\r\n    if (!tooltipContentElement) return;\r\n\r\n    const contentSize = tooltipContentElement.getBoundingClientRect();\r\n    contentBackground\r\n      .attr(\"width\", contentSize.width + 8)\r\n      .attr(\"height\", contentSize.height + 4);\r\n  }, []);\r\n\r\n  const onChangePosition = React.useCallback((d, i, isVisible) => {\r\n    d3.selectAll(\".performanceItemChangeThisTDPolarity\")\r\n      .filter((td, tIndex) => tIndex === i)\r\n      .text(isVisible ? formatPercent(d.change) : \"\");\r\n\r\n    d3.selectAll(\".performanceItemThisTDPolarity\")\r\n      .filter((td, tIndex) => tIndex === i)\r\n      .text(\r\n        d.polarity.toLocaleString() && !isVisible ? \"No data\" : d.polarity.toLocaleString()\r\n      );\r\n       // .text(\r\n      //   d.marketvalue && !isVisible ? \"No data\" : formatPriceUSD(d.marketvalue)\r\n      // );\r\n\r\n    const maxNameWidth = d3.max(\r\n      d3.selectAll(\".performanceItemName\").nodes(),\r\n      (node) => node.getBoundingClientRect().width\r\n    );\r\n    d3.selectAll(\".performanceItemChangeThisTDPolarity\").attr(\r\n      \"transform\",\r\n      (datum, index, nodes) =>\r\n        `translate(${\r\n          nodes[index].previousSibling.getBoundingClientRect().width + 14\r\n        },4)`\r\n    );\r\n\r\n    d3.selectAll(\".performanceItemThisTDPolarity\").attr(\r\n      \"transform\",\r\n      `translate(${maxNameWidth + 60},4)`\r\n    );\r\n  }, []);\r\n\r\n  const followPoints = React.useCallback(() => {\r\n    const [x] = d3.mouse(anchorEl);\r\n    const xDate = xScale.invert(x);\r\n    const bisectDate = d3.bisector((d) => d.date).left;\r\n    let baseXPos = 0;\r\n\r\n    // draw circles on line\r\n    d3.select(ref.current)\r\n      .selectAll(\".tooltipLinePoint\")\r\n      .attr(\"transform\", (cur, i) => {\r\n        const index = bisectDate(data[i].items, xDate, 1);\r\n        const d0 = data[i].items[index - 1];\r\n        const d1 = data[i].items[index];\r\n        const d = xDate - d0?.date > d1?.date - xDate ? d1 : d0;\r\n        if (d.date === undefined && d.polarity === undefined) {\r\n          // move point out of container\r\n          return \"translate(-100,-100)\";\r\n        }\r\n        const xPos = xScale(d.date);\r\n        if (i === 0) {\r\n          baseXPos = xPos;\r\n        }\r\n\r\n        let isVisible = true;\r\n        if (xPos !== baseXPos) {\r\n          isVisible = false;\r\n        }\r\n        const yPos = yScale(d.polarity);\r\n\r\n        onChangePosition(d, i, isVisible);\r\n\r\n        return isVisible\r\n          ? `translate(${xPos}, ${yPos})`\r\n          : \"translate(-100,-100)\";\r\n      });\r\n\r\n    drawLine(baseXPos);\r\n    drawContent(baseXPos);\r\n    drawBackground();\r\n  }, [\r\n    anchorEl,\r\n    drawLine,\r\n    drawContent,\r\n    drawBackground,\r\n    xScale,\r\n    yScale,\r\n    data,\r\n    onChangePosition\r\n  ]);\r\n\r\n  React.useEffect(() => {\r\n    d3.select(anchorEl)\r\n      .on(\"mouseout.tooltip\", () => {\r\n        d3.select(ref.current).attr(\"opacity\", 0);\r\n      })\r\n      .on(\"mouseover.tooltip\", () => {\r\n        d3.select(ref.current).attr(\"opacity\", 1);\r\n      })\r\n      .on(\"mousemove.tooltip\", () => {\r\n        d3.select(ref.current)\r\n          .selectAll(\".tooltipLinePoint\")\r\n          .attr(\"opacity\", 1);\r\n        followPoints();\r\n      });\r\n  }, [anchorEl, followPoints]);\r\n\r\n  if (!data.length) return null;\r\n\r\n  return (\r\n    <g ref={ref} opacity={0} {...props}>\r\n      <line className=\"tooltipLine\" />\r\n      <g className=\"tooltipContent\">\r\n        <rect className=\"contentBackground\" rx={4} ry={4} opacity={0.2} />\r\n        <text className=\"contentTitle\" transform=\"translate(4,14)\" />\r\n        <g className=\"content\" transform=\"translate(4,32)\">\r\n          {data.map(({ name, color }, i) => (\r\n            <g key={name} transform={`translate(6,${22 * i})`}>\r\n              <circle r={6} fill={color} />\r\n              <text className=\"performanceItemName\" transform=\"translate(10,4)\">\r\n                {name}\r\n              </text>\r\n              <text\r\n                className=\"performanceItemChangeThisTDPolarity\"\r\n                opacity={0.5}\r\n                fontSize={10}\r\n              />\r\n              <text className=\"performanceItemThisTDPolarity\" />\r\n            </g>\r\n          ))}\r\n        </g>\r\n      </g>\r\n      {data.map(({ name }) => (\r\n        <circle className=\"tooltipLinePoint\" r={6} key={name} opacity={0} />\r\n      ))}\r\n    </g>\r\n  );\r\n};\r\n\r\nTooltip.propTypes = {\r\n  width: PropTypes.number,\r\n  height: PropTypes.number,\r\n  margin: PropTypes.shape({\r\n    top: PropTypes.number,\r\n    bottom: PropTypes.number,\r\n    left: PropTypes.number,\r\n    right: PropTypes.number\r\n  }),\r\n  data: MultiLineDataPropTypes,\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  anchorEl: PropTypes.instanceOf(Element)\r\n};\r\n\r\nTooltip.defaultProps = {\r\n  width: 0,\r\n  height: 0,\r\n  margin: {\r\n    top: 0,\r\n    bottom: 0,\r\n    left: 0,\r\n    right: 0\r\n  },\r\n  data: [],\r\n  anchorEl: null\r\n};\r\n\r\nexport default Tooltip;\r\n","/* eslint-disable no-bitwise */\r\nimport * as d3 from \"d3\";\r\nimport { DateTime, Interval } from \"luxon\";\r\n\r\n// export const formatPriceUSD = (price) =>\r\n//   new Intl.NumberFormat(\"en-US\", { style: \"currency\", currency: \"USD\" }).format(\r\n//     price\r\n//   );\r\n\r\nexport const formatPercent = (percent = 0) => {\r\n  let result = \"0.00%\";\r\n  const isNumber = typeof percent === \"number\";\r\n  const isString = typeof percent === \"string\";\r\n  const isNotNaN = !Number.isNaN(parseFloat(percent));\r\n\r\n  if ((isNumber || isString) && isNotNaN) {\r\n    result = `${parseFloat(percent) > 0 ? \"+\" : \"\"}${d3.format(\".2%\")(\r\n      percent / 100\r\n    )}`;\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const getPeriod = (date) => {\r\n  if (!date) return 6;\r\n  const now = DateTime.utc();\r\n  const before = DateTime.fromJSDate(date);\r\n  const i = Interval.fromDateTimes(before, now);\r\n  return i.length(\"months\");\r\n};\r\n\r\nexport const getXTicks = (months) => {\r\n  if (months <= 2) return d3.timeDay.every(5).filter((d) => d.getDate() !== 31);\r\n  if (months <= 6) return d3.timeMonth.every(1);\r\n  if (months <= 13) return d3.timeMonth.every(2);\r\n  return d3.timeYear.every(1);\r\n};\r\n\r\nexport const getXTickFormat = (months) => {\r\n  if (months <= 2) return d3.timeFormat(\"%d %b\");\r\n  if (months <= 6) return d3.timeFormat(\"%b\");\r\n  if (months <= 13) return d3.timeFormat(\"%b %Y\");\r\n  return d3.timeFormat(\"%Y\");\r\n};\r\n","/** MultilineChart.controller.js */\r\nimport { useMemo } from \"react\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst useController = ({ data, width, height }) => {\r\n  const xMin = useMemo(\r\n    () => d3.min(data, ({ items }) => d3.min(items, ({ date }) => date)),\r\n    [data]\r\n  );\r\n\r\n  const xMax = useMemo(\r\n    () => d3.max(data, ({ items }) => d3.max(items, ({ date }) => date)),\r\n    [data]\r\n  );\r\n\r\n  const xScale = useMemo(\r\n    () => d3.scaleTime().domain([xMin, xMax]).range([0, width]),\r\n    [xMin, xMax, width]\r\n  );\r\n\r\n  const yMin = useMemo(\r\n    () => d3.min(data, ({ items }) => d3.min(items, ({ polarity }) => polarity)),\r\n    [data]\r\n  );\r\n\r\n  const yMax = useMemo(\r\n    () => d3.max(data, ({ items }) => d3.max(items, ({polarity}) => polarity)),\r\n    [data]\r\n  );\r\n\r\n  const yScale = useMemo(() => {\r\n    const indention = (yMax - yMin) * 0.5;\r\n    return d3\r\n      .scaleLinear()\r\n      .domain([yMin - indention, yMax + indention])\r\n      .range([height, 0]);\r\n  }, [height, yMin, yMax]);\r\n\r\n  const yScaleForAxis = useMemo(\r\n    () => d3.scaleBand().domain([yMin, yMax]).range([height, 0]),\r\n    [height, yMin, yMax]\r\n  );\r\n\r\n  const yTickFormat = (d) => {\r\n\r\n    return d\r\n    // `${parseFloat(d) > 0 ? \"+\" : \"\"}${d3.format(\".2%\")(d / 100)}`;\r\n  }\r\n  const xTickFormat = (d) => {\r\n    if (d3.timeFormat(\"%b\")(d) === \"Jan\") {\r\n      return d3.timeFormat(\"%Y\")(d);\r\n    }\r\n    return d3.timeFormat(\"%b\")(d);\r\n  };\r\n  return {\r\n    yTickFormat,\r\n    xScale,\r\n    yScale,\r\n    yScaleForAxis,\r\n    xTickFormat\r\n  };\r\n};\r\n\r\nexport default useController;\r\n","import React from 'react';\r\nimport ResizeObserver from 'resize-observer-polyfill';\r\n\r\n/**\r\n * Use ResizeObserver to listen for the changes to the dimensions of an element\r\n * @params ref - React ref\r\n * @returns {object} - { width, height, top, left }\r\n */\r\nconst useResize = (ref) => {\r\n  const [dimensions, setDimensions] = React.useState(null);\r\n  React.useEffect(() => {\r\n    const element = ref.current;\r\n    const resizeObserver = new ResizeObserver((entries) => {\r\n      entries.forEach((entry) => {\r\n        setDimensions(entry.contentRect);\r\n      });\r\n    });\r\n    resizeObserver.observe(element);\r\n    return () => {\r\n      resizeObserver.unobserve(element);\r\n    };\r\n  }, [ref]);\r\n  return dimensions || {\r\n    width: 0,\r\n    height: 0,\r\n    top: 0,\r\n    left: 0,\r\n  };\r\n};\r\n\r\nexport default useResize;\r\n","import React from \"react\";\r\nimport useResize from \"./useResize\";\r\n\r\nconst useDimensions = ({ maxHeight, margin = {}, scaleCoef = 0.5 }) => {\r\n  const ref = React.useRef(null);\r\n  const { width } = useResize(ref);\r\n\r\n  const height =\r\n    !maxHeight || width * scaleCoef < maxHeight ? width * scaleCoef : maxHeight;\r\n  const innerWidth = width - (margin.left || 0) - (margin.right || 0);\r\n  const innerHeight = height - (margin.top || 0) - (margin.bottom || 0);\r\n\r\n  return [\r\n    ref,\r\n    {\r\n      svgWidth: width,\r\n      svgHeight: height,\r\n      width: innerWidth,\r\n      height: innerHeight\r\n    }\r\n  ];\r\n};\r\n\r\nexport default useDimensions;\r\n","/** MultilineChart.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { MultiLineDataPropTypes } from \"../utils/propTypes\";\r\nimport { Line, Axis, GridLine, Overlay, Tooltip, Area } from \"../components\";\r\nimport useController from \"./MultilineChart.controller\";\r\nimport useDimensions from \"../utils/useDimensions\";\r\n\r\nconst MultilineChart = ({ data = [], margin = {} }) => {\r\n  const overlayRef = React.useRef(null);\r\n  const [containerRef, { svgWidth, svgHeight, width, height }] = useDimensions({\r\n    maxHeight: 400,\r\n    margin\r\n  });\r\n  const controller = useController({ data, width, height });\r\n  const {\r\n    yTickFormat,\r\n    xTickFormat,\r\n    xScale,\r\n    yScale,\r\n    yScaleForAxis\r\n  } = controller;\r\n\r\n  return (\r\n    <div ref={containerRef}>\r\n      <svg width={svgWidth} height={svgHeight}>\r\n        <g transform={`translate(${margin.left},${margin.top})`}>\r\n          <GridLine\r\n            type=\"vertical\"\r\n            scale={xScale}\r\n            ticks={5}\r\n            size={height}\r\n            transform={`translate(0, ${height})`}\r\n          />\r\n          <GridLine\r\n            type=\"horizontal\"\r\n            scale={yScaleForAxis}\r\n            ticks={2}\r\n            size={width}\r\n          />\r\n          <GridLine\r\n            type=\"horizontal\"\r\n            className=\"baseGridLine\"\r\n            scale={yScale}\r\n            ticks={1}\r\n            size={width}\r\n            disableAnimation\r\n          />\r\n          {data.map(({ name, items = [], color }) => (\r\n            <Line\r\n              key={name}\r\n              data={items}\r\n              xScale={xScale}\r\n              yScale={yScale}\r\n              color={color}\r\n            />\r\n          ))}\r\n          {/* <Area data={data[0].items} xScale={xScale} yScale={yScale} /> */}\r\n          <Axis\r\n            type=\"left\"\r\n            scale={yScaleForAxis}\r\n            transform=\"translate(0, -10)\"\r\n            ticks={5}\r\n            tickFormat={yTickFormat}\r\n          />\r\n          <Overlay ref={overlayRef} width={width} height={height}>\r\n            <Axis\r\n              type=\"bottom\"\r\n              className=\"axisX\"\r\n              anchorEl={overlayRef.current}\r\n              scale={xScale}\r\n              transform={`translate(10, ${height - height / 6})`}\r\n              ticks={5}\r\n              tickFormat={xTickFormat}\r\n            />\r\n            <Tooltip\r\n              className=\"tooltip\"\r\n              anchorEl={overlayRef.current}\r\n              width={width}\r\n              height={height}\r\n              margin={margin}\r\n              xScale={xScale}\r\n              yScale={yScale}\r\n              data={data}\r\n            />\r\n          </Overlay>\r\n        </g>\r\n      </svg>\r\n    </div>\r\n  );\r\n};\r\n\r\nMultilineChart.propTypes = {\r\n  data: MultiLineDataPropTypes,\r\n  margin: PropTypes.shape({\r\n    top: PropTypes.number,\r\n    bottom: PropTypes.number,\r\n    left: PropTypes.number,\r\n    right: PropTypes.number\r\n  })\r\n};\r\n\r\nMultilineChart.defaultProps = {\r\n  data: [],\r\n  margin: {\r\n    top: 30,\r\n    right: 15,\r\n    bottom: 15,\r\n    left: 15\r\n  }\r\n};\r\n\r\nexport default MultilineChart;\r\n","import React from \"react\";\r\nimport { FormControlLabel, Checkbox } from \"@material-ui/core\";\r\n\r\nconst Legend = ({ data, selectedItems, onChange }) => (\r\n  <div className=\"legendContainer\">\r\n    {data.map((d) => (\r\n      <div className=\"checkbox\" style={{ color: d.color }} key={d.name}>\r\n\r\n<FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: d.color}}\r\n            value={d.name}\r\n            onChange={() => onChange(d.name)}\r\n          />\r\n        }\r\n        label={d.name}\r\n\r\n        />\r\n      </div>\r\n    ))}\r\n  </div>\r\n);\r\n\r\nexport default Legend;\r\n","/** App.js */\r\nimport React, {useState, useEffect} from \"react\";\r\nimport MultilineChart from \"./views/MultilineChart\";\r\nimport Legend from \"./components/Legend\";\r\nimport vcit from \"./data/VCIT.json\";\r\nimport portfolio from \"./data/portfolio.json\";\r\nimport schc from \"./data/SCHC.json\";\r\nimport \"./styles.css\";\r\nimport fiannafail from \"./data/fiannaFail.json\"\r\nimport finegael from \"./data/finegael.json\"\r\nimport ind from \"./data/ind.json\"\r\nimport sinnfein from \"./data/sinnfein.json\"\r\nimport labour from \"./data/labour.json\"\r\nimport { chamberStats } from '../../../Backend/metaData';\r\nimport axios from \"axios\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport { gridColumnsTotalWidthSelector } from \"@material-ui/data-grid\";\r\n\r\n\r\n\r\n\r\n\r\nexport default function TDLineChartPolarity ({justThisTDData, justThisTDPartyData, allTDData}) {\r\n\r\n  const [selectedItems, setSelectedItems] = useState([]);\r\n  const [thisTDData, setThisTDData] = useState(null)\r\n  const [thisTDPartyData, setThisTDPartyData] = useState(null)\r\n  const [dailData, setDailData] = useState(null)\r\n\r\n  \r\n  const partyColors = {\r\n    \"Sinn Féin\": \"#326760\",\r\n    \"Fine Gael\": \"#6699FF\",\r\n    \"Fianna Fáil\": \"#66BB66\",\r\n    \"Labour Party\": \"#CC0000\",\r\n    \"Solidarity - People Before Profit\": \"#8E2420\",\r\n    \"Independent\": \"white\",\r\n    \"Green Party\": \"#99CC33\",\r\n    \"Social Democrats\": \"#752F8B\",\r\n    \"Aontú\": \"#44532A\",\r\n    \"Independents 4 Change\": \"grey\"}\r\n\r\n    const tdPartyColors = {\r\n\r\n      \"Sinn Féin\": \"#4b9b90\",\r\n      \"Fine Gael\": \"#b3ccff\",\r\n      \"Fianna Fáil\": \"#9bd39b\",\r\n      \"Labour Party\": \"#ff1a1a\",\r\n      \"Solidarity - People Before Profit\": \"#b82f29\",\r\n      \"Independent\": \"#d9d9d9\",\r\n      \"Green Party\": \"#b8db70\",\r\n      \"Social Democrats\": \"#a346c0\",\r\n      \"Aontú\": \"#84a152\",\r\n      \"Independents 4 Change\": \"#a6a6a6\"\r\n    }\r\n\r\n  useEffect(() => {\r\n\r\n    setThisTDData(justThisTDData)\r\n    setThisTDPartyData(justThisTDPartyData)\r\n    setDailData(allTDData)\r\n\r\n}, []);\r\n\r\nuseEffect(() => {\r\n\r\n  if(!thisTDData) return null;\r\n\r\n  setSelectedItems([thisTDData[0].name, \"Dáil Average\", \"Party Average\"])\r\n\r\n}, [thisTDData])\r\n\r\nconst onChangeSelection = (name) => {\r\n    const newSelectedItems = selectedItems.includes(name)\r\n      ? selectedItems.filter((item) => item !== name)\r\n      : [...selectedItems, name];\r\n    setSelectedItems(newSelectedItems);\r\n  };\r\n\r\n  if(!thisTDData) return null;\r\n\r\n\r\nfunction getTDObj() {\r\n\r\n    let justTDOnTwitter = thisTDData.filter(function(d) {\r\n                \r\n      if(d.sentimentData[0] != undefined) {\r\n      return d\r\n    }\r\n  }\r\n  )\r\n  \r\n\r\n  let polarityArr = justTDOnTwitter[0].sentimentData.map(d => d.polarity);\r\n  let dateArr = justTDOnTwitter[0].sentimentData.map(d => d.date);\r\n  let changeArr = [0, ];\r\n  let tdObjArr = [];\r\n  \r\n  \r\n  for(let i = 1; i < polarityArr.length; i++) {\r\n  \r\n  \r\n    var lastWeek  = polarityArr[i - 1]\r\n    var thisWeek = polarityArr[i]\r\n    var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n    \r\n    //filter NaN at start\r\n  \r\n    if(diff !== diff) {changeArr.push(0) } else {\r\n    changeArr.push(diff) \r\n    }\r\n  }\r\n  \r\n  for(let i = 0; i < justTDOnTwitter[0].sentimentData.length; i++) {\r\n  \r\n    function tdObj() {\r\n  \r\n      this.polarity = polarityArr[i]\r\n      this.date = dateArr[i]\r\n      this.change = changeArr[i]\r\n    }\r\n  tdObjArr.push(new tdObj)\r\n  }\r\n  \r\n  return tdObjArr\r\n  \r\n  \r\n}\r\n\r\nfunction getDailObj() {\r\n\r\n  console.log(dailData)\r\n\r\n  let justTDsOnTwitter = dailData.filter(function(d) {\r\n              \r\n    if(d.sentimentData != undefined) {\r\n    return d\r\n  }\r\n}\r\n)\r\n\r\nlet totalPolarityArr = []\r\nlet averagePolarityArr = []\r\nlet dateArr = []\r\nlet changeArr = [0, ]\r\nlet dailMeanObjArr = []\r\n\r\nfor(let i = 0; i < justTDsOnTwitter[0].sentimentData.length; i ++) {\r\n\r\nlet holder = justTDsOnTwitter.map(d => d.sentimentData[i].polarity)\r\nlet total = holder.reduce(function(a, b) {\r\n  return a + b\r\n})\r\n\r\nlet averagePolarityCount = total / justTDsOnTwitter.length;\r\n\r\n\r\n\r\naveragePolarityArr.push(Number(averagePolarityCount.toFixed(3)))\r\n\r\n}\r\ndateArr = justTDsOnTwitter[0].sentimentData.map(d => d.date)\r\n\r\n\r\nfor(let i = 1; i < averagePolarityArr.length; i++) {\r\n\r\n\r\n  var lastWeek  = averagePolarityArr[i - 1]\r\n  var thisWeek = averagePolarityArr[i]\r\n  var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n  \r\n  //filter NaN at start\r\n\r\n  if(diff !== diff) {changeArr.push(0) } else {\r\n  changeArr.push(diff) \r\n  }\r\n}\r\n\r\nfor(let i = 0; i < justTDsOnTwitter[0].sentimentData.length; i++) {\r\n\r\n  function dailMeanObj() {\r\n\r\n    this.polarity = averagePolarityArr[i]\r\n    this.date = dateArr[i]\r\n    this.change = changeArr[i]\r\n  }\r\ndailMeanObjArr.push(new dailMeanObj)\r\n}\r\n\r\nreturn dailMeanObjArr\r\n\r\n\r\n}\r\n\r\nfunction getPartyObj() {\r\n\r\n  let justTDsOnTwitter = thisTDPartyData.filter(function(d) {\r\n              \r\n    if(d.sentimentData != undefined) {\r\n    return d\r\n  }\r\n}\r\n)\r\n\r\nlet averagePolarityArr = []\r\nlet dateArr = []\r\nlet changeArr = [0, ]\r\nlet partyMeanObjArr = []\r\n\r\nfor(let i = 0; i < justTDsOnTwitter[0].sentimentData.length; i ++) {\r\n\r\nlet holder = justTDsOnTwitter.map(d => d.sentimentData[i].polarity)\r\nlet total = holder.reduce(function(a, b) {\r\n  return a + b\r\n})\r\n\r\nlet averagePolarityCount = total / justTDsOnTwitter.length\r\n\r\naveragePolarityArr.push(Number(averagePolarityCount.toFixed(3)))\r\n\r\n}\r\n\r\ndateArr = justTDsOnTwitter[0].sentimentData.map(d => d.date)\r\n\r\n\r\nfor(let i = 1; i < averagePolarityArr.length; i++) {\r\n\r\n\r\n  var lastWeek  = averagePolarityArr[i - 1]\r\n  var thisWeek = averagePolarityArr[i]\r\n  var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n  \r\n  //filter NaN at start\r\n\r\n  if(diff !== diff) {changeArr.push(0) } else {\r\n  changeArr.push(diff) \r\n  }\r\n}\r\n\r\nfor(let i = 0; i < justTDsOnTwitter[0].sentimentData.length; i++) {\r\n\r\n  function partyMeanObj() {\r\n\r\n    this.polarity = averagePolarityArr[i]\r\n    this.date = dateArr[i]\r\n    this.change = changeArr[i]\r\n  }\r\npartyMeanObjArr.push(new partyMeanObj)\r\n}\r\n\r\nreturn partyMeanObjArr\r\n\r\n\r\n}\r\n\r\nconst getDate = (d) => { \r\n    \r\n    let together = []\r\n    let apart = d.date.split('/')\r\n    let day = apart[0]\r\n    let month = apart[1]\r\n    let year = apart[2]\r\n\r\n    together.push(month, day, year)\r\n    together.toString().replace(\",\",\"/\").replace(\",\",\"/\")\r\n    return new Date(together)\r\n  }\r\n\r\nconst thisTDDataMap = {\r\n  name: thisTDData[0].name,\r\n  color: tdPartyColors[thisTDData[0].party],\r\n  items: getTDObj().map((d) => ({ ...d, date: getDate(d)}))\r\n};\r\n\r\nconst dailMeanDataMap = {\r\n  name: \"Dáil Average\",\r\n  color: \"white\",\r\n  items: getDailObj().map((d) => ({ ...d, date: getDate(d)}))\r\n}\r\n\r\nconst partyMeanDataMap = {\r\n  name: \"Party Average\",\r\n  color: partyColors[thisTDData[0].party],\r\n  items: getPartyObj().map((d) => ({ ...d, date: getDate(d)}))\r\n}\r\n\r\nconsole.log(thisTDData)\r\n\r\nif(!thisTDDataMap) return null;\r\n\r\n  const chartData = [\r\n    ...[thisTDDataMap, dailMeanDataMap, partyMeanDataMap].filter((d) => selectedItems.includes(d.name))\r\n  ];\r\n\r\nconst legendData = [thisTDDataMap, dailMeanDataMap, partyMeanDataMap];\r\n\r\n\r\n  return (\r\n  <div className=\"featuredItem\" style={{textAlign: \"center\"}}>\r\n    <Typography variant=\"h5\">Sentiment</Typography>\r\n      <Legend\r\n        data={legendData}\r\n        selectedItems={selectedItems}\r\n        onChange={onChangeSelection}\r\n      />\r\n      <MultilineChart data={chartData} />\r\n      </div>\r\n\r\n  );\r\n}\r\n\r\n","import { arrayOf, shape, string, date as dateProp, number } from \"prop-types\";\r\n\r\nexport const MultiLineDataItemsPropTypes = arrayOf(\r\n  shape({\r\n    date: dateProp,\r\n    change: number,\r\n    subjectivity: number\r\n  })\r\n);\r\n\r\nexport const MultiLineDataPropTypes = arrayOf(\r\n  shape({\r\n    name: string,\r\n    items: MultiLineDataItemsPropTypes,\r\n    color: string\r\n  })\r\n);\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Line = ({\r\n  xScale,\r\n  yScale,\r\n  color,\r\n  data,\r\n  isSmooth,\r\n  animation,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  // Define different types of animation that we can use\r\n  const animateLeft = React.useCallback(() => {\r\n    // NOTE: for some reason getTotalLength() doesn't work in tests\r\n    // in this codesandbox so we added default value just for tests\r\n    const totalLength = ref.current.getTotalLength\r\n      ? ref.current.getTotalLength()\r\n      : 500;\r\n    d3.select(ref.current)\r\n      .attr(\"opacity\", 1)\r\n      .attr(\"stroke-dasharray\", `${totalLength},${totalLength}`)\r\n      .attr(\"stroke-dashoffset\", totalLength)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeLinear)\r\n      .attr(\"stroke-dashoffset\", 0);\r\n  }, []);\r\n  const animateFadeIn = React.useCallback(() => {\r\n    d3.select(ref.current)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeLinear)\r\n      .attr(\"opacity\", 1);\r\n  }, []);\r\n  const noneAnimation = React.useCallback(() => {\r\n    d3.select(ref.current).attr(\"opacity\", 1);\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    switch (animation) {\r\n      case \"left\":\r\n        animateLeft();\r\n        break;\r\n      case \"fadeIn\":\r\n        animateFadeIn();\r\n        break;\r\n      case \"none\":\r\n      default:\r\n        noneAnimation();\r\n        break;\r\n    }\r\n  }, [animateLeft, animateFadeIn, noneAnimation, animation]);\r\n\r\n  // Recalculate line length if scale has changed\r\n  React.useEffect(() => {\r\n    if (animation === \"left\") {\r\n      const totalLength = ref.current.getTotalLength\r\n        ? ref.current.getTotalLength()\r\n        : 500;\r\n      d3.select(ref.current).attr(\r\n        \"stroke-dasharray\",\r\n        `${totalLength},${totalLength}`\r\n      );\r\n    }\r\n  }, [xScale, yScale, animation]);\r\n\r\n  const line = d3\r\n    .line()\r\n    .x((d) => xScale(d.date))\r\n    .y((d) => yScale(d.subjectivity));\r\n\r\n  const d = line(data);\r\n\r\n  return (\r\n    <path\r\n      ref={ref}\r\n      d={d?.match(/NaN|undefined/) ? \"\" : d}\r\n      stroke={color}\r\n      strokeWidth={3}\r\n      fill=\"none\"\r\n      opacity={0}\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n\r\nLine.propTypes = {\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  data: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      date: PropTypes.date,\r\n      change: PropTypes.number\r\n    })\r\n  ),\r\n  color: PropTypes.string,\r\n  isSmooth: PropTypes.bool,\r\n  animation: PropTypes.oneOf([\"left\", \"fadeIn\", \"none\"])\r\n};\r\n\r\nLine.defaultProps = {\r\n  data: [],\r\n  color: \"white\",\r\n  isSmooth: false,\r\n  animation: \"left\"\r\n};\r\n\r\nexport default Line;\r\n","/** Area.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Area = ({ xScale, yScale, color, data, disableAnimation, ...props }) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    if (disableAnimation) {\r\n      d3.select(ref.current).attr(\"opacity\", 1);\r\n      return;\r\n    }\r\n    d3.select(ref.current)\r\n      .transition()\r\n      .duration(750)\r\n      .ease(d3.easeBackIn)\r\n      .attr(\"opacity\", 1);\r\n  }, [disableAnimation]);\r\n\r\n  const d = React.useMemo(() => {\r\n    const area = d3\r\n      .area()\r\n      .x(({ date }) => xScale(date))\r\n      .y1(({ subjectivity }) => yScale(subjectivity))\r\n      .y0(() => yScale(yScale.domain()[0]));\r\n    return area(data);\r\n  }, [xScale, yScale, data]);\r\n\r\n  return (\r\n    <>\r\n      <path\r\n        ref={ref}\r\n        d={d}\r\n        fill={`url(#gradient-${color})`}\r\n        opacity={0}\r\n        {...props}\r\n      />\r\n      <defs>\r\n        <linearGradient\r\n          id={`gradient-${color}`}\r\n          x1=\"0%\"\r\n          x2=\"0%\"\r\n          y1=\"0%\"\r\n          y2=\"100%\"\r\n        >\r\n          <stop offset=\"0%\" stopColor={color} stopOpacity={0.2} />\r\n          <stop offset=\"100%\" stopColor={color} stopOpacity={0} />\r\n        </linearGradient>\r\n      </defs>\r\n    </>\r\n  );\r\n};\r\n\r\nArea.propTypes = {\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  data: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      date: PropTypes.date,\r\n      subjectivity: PropTypes.number\r\n    })\r\n  ),\r\n  color: PropTypes.string,\r\n  disableAnimation: PropTypes.bool\r\n};\r\n\r\nArea.defaultProps = {\r\n  data: [],\r\n  color: \"white\",\r\n  disableAnimation: false\r\n};\r\n\r\nexport default Area;\r\n","/** AxisX.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Axis = ({\r\n  type,\r\n  scale,\r\n  ticks,\r\n  transform,\r\n  tickFormat,\r\n  disableAnimation,\r\n  anchorEl,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    const axisGenerator = type === \"left\" ? d3.axisRight : d3.axisBottom;\r\n    const axis = axisGenerator(scale).ticks(ticks).tickFormat(tickFormat);\r\n    const axisGroup = d3.select(ref.current);\r\n    if (disableAnimation) {\r\n      axisGroup.call(axis);\r\n    } else {\r\n      axisGroup.transition().duration(750).ease(d3.easeLinear).call(axis);\r\n    }\r\n    axisGroup.select(\".domain\").remove();\r\n    axisGroup.selectAll(\"line\").remove();\r\n    axisGroup\r\n      .selectAll(\"text\")\r\n      .attr(\"opacity\", 0.5)\r\n      .attr(\"color\", \"white\")\r\n      .attr(\"font-size\", \"0.75rem\");\r\n  }, [scale, ticks, tickFormat, disableAnimation]);\r\n\r\n  React.useEffect(() => {\r\n    d3.select(anchorEl)\r\n      .on(\"mouseout.axisX\", () => {\r\n        d3.select(ref.current)\r\n          .selectAll(\"text\")\r\n          .attr(\"opacity\", 0.5)\r\n          .style(\"font-weight\", \"normal\");\r\n      })\r\n      .on(\"mousemove.axisX\", () => {\r\n        const [x] = d3.mouse(anchorEl);\r\n        const xDate = scale.invert(x);\r\n        const textElements = d3.select(ref.current).selectAll(\"text\");\r\n        const data = textElements.data();\r\n        const index = d3.bisector((d) => d).left(data, xDate);\r\n        textElements\r\n          .attr(\"opacity\", (d, i) => (i === index - 1 ? 1 : 0.5))\r\n          .style(\"font-weight\", (d, i) =>\r\n            i === index - 1 ? \"bold\" : \"normal\"\r\n          );\r\n      });\r\n  }, [anchorEl, scale]);\r\n\r\n  return <g ref={ref} transform={transform} {...props} />;\r\n};\r\n\r\nAxis.propTypes = {\r\n  type: PropTypes.oneOf([\"left\", \"bottom\"]).isRequired,\r\n  scale: PropTypes.func.isRequired,\r\n  ticks: PropTypes.oneOfType([PropTypes.number, PropTypes.func]),\r\n  tickFormat: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\r\n  transform: PropTypes.string,\r\n  disableAnimation: PropTypes.bool,\r\n  anchorEl: PropTypes.instanceOf(Element)\r\n};\r\n\r\nAxis.defaultProps = {\r\n  ticks: 0,\r\n  tickFormat: null,\r\n  transform: \"\",\r\n  disableAnimation: false,\r\n  anchorEl: null\r\n};\r\n\r\nexport default Axis;\r\n","/** GridLine.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst GridLine = ({\r\n  type,\r\n  scale,\r\n  ticks,\r\n  size,\r\n  transform,\r\n  disableAnimation,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  React.useEffect(() => {\r\n    const axisGenerator = type === \"vertical\" ? d3.axisBottom : d3.axisLeft;\r\n    const axis = axisGenerator(scale).ticks(ticks).tickSize(-size);\r\n\r\n    const gridGroup = d3.select(ref.current);\r\n    if (disableAnimation) {\r\n      gridGroup.call(axis);\r\n    } else {\r\n      gridGroup.transition().duration(750).ease(d3.easeLinear).call(axis);\r\n    }\r\n    gridGroup.select(\".domain\").remove();\r\n    gridGroup.selectAll(\"text\").remove();\r\n    gridGroup.selectAll(\"line\").attr(\"stroke\", \"rgba(255, 255, 255, 0.1)\");\r\n  }, [scale, ticks, size, disableAnimation]);\r\n\r\n  return <g ref={ref} transform={transform} {...props} />;\r\n};\r\n\r\nGridLine.propTypes = {\r\n  scale: PropTypes.func.isRequired,\r\n  type: PropTypes.oneOf([\"vertical\", \"horizontal\"]).isRequired,\r\n  ticks: PropTypes.oneOfType([PropTypes.number, PropTypes.func]),\r\n  transform: PropTypes.string,\r\n  size: PropTypes.number,\r\n  disableAnimation: PropTypes.bool\r\n};\r\n\r\nGridLine.defaultProps = {\r\n  ticks: 0,\r\n  transform: \"\",\r\n  size: 0,\r\n  disableAnimation: false\r\n};\r\n\r\nexport default GridLine;\r\n","/** Overlay.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\n/**\r\n * Use Overlay as a wrapper for components that need mouse events to be handled.\r\n * For example: Tooltip, AxisX.\r\n */\r\nconst Overlay = React.forwardRef(({ width, height, children }, ref) => (\r\n  <g>\r\n    {children}\r\n    <rect ref={ref} width={width} height={height} opacity={0} />\r\n  </g>\r\n));\r\n\r\nOverlay.propTypes = {\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired,\r\n  children: PropTypes.node.isRequired\r\n};\r\n\r\nexport default Overlay;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\nimport { MultiLineDataPropTypes } from \"../utils/propTypes\";\r\nimport {formatPercent } from \"../utils/commonUtils\"\r\n// import { formatPercent, formatPriceUSD } from \"../utils/commonUtils\";\r\n\r\nconst Tooltip = ({\r\n  xScale,\r\n  yScale,\r\n  width,\r\n  height,\r\n  data,\r\n  margin,\r\n  anchorEl,\r\n  children,\r\n  ...props\r\n}) => {\r\n  const ref = React.useRef(null);\r\n  const drawLine = React.useCallback(\r\n    (x) => {\r\n      d3.select(ref.current)\r\n        .select(\".tooltipLine\")\r\n        .attr(\"x1\", x)\r\n        .attr(\"x2\", x)\r\n        .attr(\"y1\", -margin.top)\r\n        .attr(\"y2\", height);\r\n    },\r\n    [ref, height, margin]\r\n  );\r\n\r\n  const drawContent = React.useCallback(\r\n    (x) => {\r\n      const tooltipContent = d3.select(ref.current).select(\".tooltipContent\");\r\n      tooltipContent.attr(\"transform\", (cur, i, nodes) => {\r\n        const nodeWidth = nodes[i]?.getBoundingClientRect()?.width || 0;\r\n        const translateX = nodeWidth + x > width ? x - nodeWidth - 12 : x + 8;\r\n        return `translate(${translateX}, ${-margin.top})`;\r\n      });\r\n      tooltipContent\r\n        .select(\".contentTitle\")\r\n        .text(d3.timeFormat(\"%b %d, %Y\")(xScale.invert(x)));\r\n    },\r\n    [xScale, margin, width]\r\n  );\r\n\r\n  const drawBackground = React.useCallback(() => {\r\n    // reset background size to defaults\r\n    const contentBackground = d3\r\n      .select(ref.current)\r\n      .select(\".contentBackground\");\r\n    contentBackground.attr(\"width\", 125).attr(\"height\", 40);\r\n\r\n    // calculate new background size\r\n    const tooltipContentElement = d3\r\n      .select(ref.current)\r\n      .select(\".tooltipContent\")\r\n      .node();\r\n    if (!tooltipContentElement) return;\r\n\r\n    const contentSize = tooltipContentElement.getBoundingClientRect();\r\n    contentBackground\r\n      .attr(\"width\", contentSize.width + 8)\r\n      .attr(\"height\", contentSize.height + 4);\r\n  }, []);\r\n\r\n  const onChangePosition = React.useCallback((d, i, isVisible) => {\r\n    d3.selectAll(\".performanceItemChangeThisTDSubjectivity\")\r\n      .filter((td, tIndex) => tIndex === i)\r\n      .text(isVisible ? formatPercent(d.change) : \"\");\r\n\r\n    d3.selectAll(\".performanceItemThisTDSubjectivity\")\r\n      .filter((td, tIndex) => tIndex === i)\r\n      .text(\r\n        d.subjectivity.toLocaleString() && !isVisible ? \"No data\" : d.subjectivity.toLocaleString()\r\n      );\r\n       // .text(\r\n      //   d.marketvalue && !isVisible ? \"No data\" : formatPriceUSD(d.marketvalue)\r\n      // );\r\n\r\n    const maxNameWidth = d3.max(\r\n      d3.selectAll(\".performanceItemName\").nodes(),\r\n      (node) => node.getBoundingClientRect().width\r\n    );\r\n    d3.selectAll(\".performanceItemChangeThisTDSubjectivity\").attr(\r\n      \"transform\",\r\n      (datum, index, nodes) =>\r\n        `translate(${\r\n          nodes[index].previousSibling.getBoundingClientRect().width + 14\r\n        },4)`\r\n    );\r\n\r\n    d3.selectAll(\".performanceItemThisTDSubjectivity\").attr(\r\n      \"transform\",\r\n      `translate(${maxNameWidth + 60},4)`\r\n    );\r\n  }, []);\r\n\r\n  const followPoints = React.useCallback(() => {\r\n    const [x] = d3.mouse(anchorEl);\r\n    const xDate = xScale.invert(x);\r\n    const bisectDate = d3.bisector((d) => d.date).left;\r\n    let baseXPos = 0;\r\n\r\n    // draw circles on line\r\n    d3.select(ref.current)\r\n      .selectAll(\".tooltipLinePoint\")\r\n      .attr(\"transform\", (cur, i) => {\r\n        const index = bisectDate(data[i].items, xDate, 1);\r\n        const d0 = data[i].items[index - 1];\r\n        const d1 = data[i].items[index];\r\n        const d = xDate - d0?.date > d1?.date - xDate ? d1 : d0;\r\n        if (d.date === undefined && d.subjectivity === undefined) {\r\n          // move point out of container\r\n          return \"translate(-100,-100)\";\r\n        }\r\n        const xPos = xScale(d.date);\r\n        if (i === 0) {\r\n          baseXPos = xPos;\r\n        }\r\n\r\n        let isVisible = true;\r\n        if (xPos !== baseXPos) {\r\n          isVisible = false;\r\n        }\r\n        const yPos = yScale(d.subjectivity);\r\n\r\n        onChangePosition(d, i, isVisible);\r\n\r\n        return isVisible\r\n          ? `translate(${xPos}, ${yPos})`\r\n          : \"translate(-100,-100)\";\r\n      });\r\n\r\n    drawLine(baseXPos);\r\n    drawContent(baseXPos);\r\n    drawBackground();\r\n  }, [\r\n    anchorEl,\r\n    drawLine,\r\n    drawContent,\r\n    drawBackground,\r\n    xScale,\r\n    yScale,\r\n    data,\r\n    onChangePosition\r\n  ]);\r\n\r\n  React.useEffect(() => {\r\n    d3.select(anchorEl)\r\n      .on(\"mouseout.tooltip\", () => {\r\n        d3.select(ref.current).attr(\"opacity\", 0);\r\n      })\r\n      .on(\"mouseover.tooltip\", () => {\r\n        d3.select(ref.current).attr(\"opacity\", 1);\r\n      })\r\n      .on(\"mousemove.tooltip\", () => {\r\n        d3.select(ref.current)\r\n          .selectAll(\".tooltipLinePoint\")\r\n          .attr(\"opacity\", 1);\r\n        followPoints();\r\n      });\r\n  }, [anchorEl, followPoints]);\r\n\r\n  if (!data.length) return null;\r\n\r\n  return (\r\n    <g ref={ref} opacity={0} {...props}>\r\n      <line className=\"tooltipLine\" />\r\n      <g className=\"tooltipContent\">\r\n        <rect className=\"contentBackground\" rx={4} ry={4} opacity={0.2} />\r\n        <text className=\"contentTitle\" transform=\"translate(4,14)\" />\r\n        <g className=\"content\" transform=\"translate(4,32)\">\r\n          {data.map(({ name, color }, i) => (\r\n            <g key={name} transform={`translate(6,${22 * i})`}>\r\n              <circle r={6} fill={color} />\r\n              <text className=\"performanceItemName\" transform=\"translate(10,4)\">\r\n                {name}\r\n              </text>\r\n              <text\r\n                className=\"performanceItemChangeThisTDSubjectivity\"\r\n                opacity={0.5}\r\n                fontSize={10}\r\n              />\r\n              <text className=\"performanceItemThisTDSubjectivity\" />\r\n            </g>\r\n          ))}\r\n        </g>\r\n      </g>\r\n      {data.map(({ name }) => (\r\n        <circle className=\"tooltipLinePoint\" r={6} key={name} opacity={0} />\r\n      ))}\r\n    </g>\r\n  );\r\n};\r\n\r\nTooltip.propTypes = {\r\n  width: PropTypes.number,\r\n  height: PropTypes.number,\r\n  margin: PropTypes.shape({\r\n    top: PropTypes.number,\r\n    bottom: PropTypes.number,\r\n    left: PropTypes.number,\r\n    right: PropTypes.number\r\n  }),\r\n  data: MultiLineDataPropTypes,\r\n  xScale: PropTypes.func.isRequired,\r\n  yScale: PropTypes.func.isRequired,\r\n  anchorEl: PropTypes.instanceOf(Element)\r\n};\r\n\r\nTooltip.defaultProps = {\r\n  width: 0,\r\n  height: 0,\r\n  margin: {\r\n    top: 0,\r\n    bottom: 0,\r\n    left: 0,\r\n    right: 0\r\n  },\r\n  data: [],\r\n  anchorEl: null\r\n};\r\n\r\nexport default Tooltip;\r\n","/* eslint-disable no-bitwise */\r\nimport * as d3 from \"d3\";\r\nimport { DateTime, Interval } from \"luxon\";\r\n\r\n// export const formatPriceUSD = (price) =>\r\n//   new Intl.NumberFormat(\"en-US\", { style: \"currency\", currency: \"USD\" }).format(\r\n//     price\r\n//   );\r\n\r\nexport const formatPercent = (percent = 0) => {\r\n  let result = \"0.00%\";\r\n  const isNumber = typeof percent === \"number\";\r\n  const isString = typeof percent === \"string\";\r\n  const isNotNaN = !Number.isNaN(parseFloat(percent));\r\n\r\n  if ((isNumber || isString) && isNotNaN) {\r\n    result = `${parseFloat(percent) > 0 ? \"+\" : \"\"}${d3.format(\".2%\")(\r\n      percent / 100\r\n    )}`;\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const getPeriod = (date) => {\r\n  if (!date) return 6;\r\n  const now = DateTime.utc();\r\n  const before = DateTime.fromJSDate(date);\r\n  const i = Interval.fromDateTimes(before, now);\r\n  return i.length(\"months\");\r\n};\r\n\r\nexport const getXTicks = (months) => {\r\n  if (months <= 2) return d3.timeDay.every(5).filter((d) => d.getDate() !== 31);\r\n  if (months <= 6) return d3.timeMonth.every(1);\r\n  if (months <= 13) return d3.timeMonth.every(2);\r\n  return d3.timeYear.every(1);\r\n};\r\n\r\nexport const getXTickFormat = (months) => {\r\n  if (months <= 2) return d3.timeFormat(\"%d %b\");\r\n  if (months <= 6) return d3.timeFormat(\"%b\");\r\n  if (months <= 13) return d3.timeFormat(\"%b %Y\");\r\n  return d3.timeFormat(\"%Y\");\r\n};\r\n","/** MultilineChart.controller.js */\r\nimport { useMemo } from \"react\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst useController = ({ data, width, height }) => {\r\n  const xMin = useMemo(\r\n    () => d3.min(data, ({ items }) => d3.min(items, ({ date }) => date)),\r\n    [data]\r\n  );\r\n\r\n  const xMax = useMemo(\r\n    () => d3.max(data, ({ items }) => d3.max(items, ({ date }) => date)),\r\n    [data]\r\n  );\r\n\r\n  const xScale = useMemo(\r\n    () => d3.scaleTime().domain([xMin, xMax]).range([0, width]),\r\n    [xMin, xMax, width]\r\n  );\r\n\r\n  const yMin = useMemo(\r\n    () => d3.min(data, ({ items }) => d3.min(items, ({ subjectivity }) => subjectivity)),\r\n    [data]\r\n  );\r\n\r\n  const yMax = useMemo(\r\n    () => d3.max(data, ({ items }) => d3.max(items, ({subjectivity}) => subjectivity)),\r\n    [data]\r\n  );\r\n\r\n  const yScale = useMemo(() => {\r\n    const indention = (yMax - yMin) * 0.5;\r\n    return d3\r\n      .scaleLinear()\r\n      .domain([yMin - indention, yMax + indention])\r\n      .range([height, 0]);\r\n  }, [height, yMin, yMax]);\r\n\r\n  const yScaleForAxis = useMemo(\r\n    () => d3.scaleBand().domain([yMin, yMax]).range([height, 0]),\r\n    [height, yMin, yMax]\r\n  );\r\n\r\n  const yTickFormat = (d) => {\r\n\r\n    return d\r\n    // `${parseFloat(d) > 0 ? \"+\" : \"\"}${d3.format(\".2%\")(d / 100)}`;\r\n  }\r\n  const xTickFormat = (d) => {\r\n    if (d3.timeFormat(\"%b\")(d) === \"Jan\") {\r\n      return d3.timeFormat(\"%Y\")(d);\r\n    }\r\n    return d3.timeFormat(\"%b\")(d);\r\n  };\r\n  return {\r\n    yTickFormat,\r\n    xScale,\r\n    yScale,\r\n    yScaleForAxis,\r\n    xTickFormat\r\n  };\r\n};\r\n\r\nexport default useController;\r\n","import React from 'react';\r\nimport ResizeObserver from 'resize-observer-polyfill';\r\n\r\n/**\r\n * Use ResizeObserver to listen for the changes to the dimensions of an element\r\n * @params ref - React ref\r\n * @returns {object} - { width, height, top, left }\r\n */\r\nconst useResize = (ref) => {\r\n  const [dimensions, setDimensions] = React.useState(null);\r\n  React.useEffect(() => {\r\n    const element = ref.current;\r\n    const resizeObserver = new ResizeObserver((entries) => {\r\n      entries.forEach((entry) => {\r\n        setDimensions(entry.contentRect);\r\n      });\r\n    });\r\n    resizeObserver.observe(element);\r\n    return () => {\r\n      resizeObserver.unobserve(element);\r\n    };\r\n  }, [ref]);\r\n  return dimensions || {\r\n    width: 0,\r\n    height: 0,\r\n    top: 0,\r\n    left: 0,\r\n  };\r\n};\r\n\r\nexport default useResize;\r\n","import React from \"react\";\r\nimport useResize from \"./useResize\";\r\n\r\nconst useDimensions = ({ maxHeight, margin = {}, scaleCoef = 0.5 }) => {\r\n  const ref = React.useRef(null);\r\n  const { width } = useResize(ref);\r\n\r\n  const height =\r\n    !maxHeight || width * scaleCoef < maxHeight ? width * scaleCoef : maxHeight;\r\n  const innerWidth = width - (margin.left || 0) - (margin.right || 0);\r\n  const innerHeight = height - (margin.top || 0) - (margin.bottom || 0);\r\n\r\n  return [\r\n    ref,\r\n    {\r\n      svgWidth: width,\r\n      svgHeight: height,\r\n      width: innerWidth,\r\n      height: innerHeight\r\n    }\r\n  ];\r\n};\r\n\r\nexport default useDimensions;\r\n","/** MultilineChart.js */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { MultiLineDataPropTypes } from \"../utils/propTypes\";\r\nimport { Line, Axis, GridLine, Overlay, Tooltip, Area } from \"../components\";\r\nimport useController from \"./MultilineChart.controller\";\r\nimport useDimensions from \"../utils/useDimensions\";\r\n\r\nconst MultilineChart = ({ data = [], margin = {} }) => {\r\n  const overlayRef = React.useRef(null);\r\n  const [containerRef, { svgWidth, svgHeight, width, height }] = useDimensions({\r\n    maxHeight: 400,\r\n    margin\r\n  });\r\n  const controller = useController({ data, width, height });\r\n  const {\r\n    yTickFormat,\r\n    xTickFormat,\r\n    xScale,\r\n    yScale,\r\n    yScaleForAxis\r\n  } = controller;\r\n\r\n  return (\r\n    <div ref={containerRef}>\r\n      <svg width={svgWidth} height={svgHeight}>\r\n        <g transform={`translate(${margin.left},${margin.top})`}>\r\n          <GridLine\r\n            type=\"vertical\"\r\n            scale={xScale}\r\n            ticks={5}\r\n            size={height}\r\n            transform={`translate(0, ${height})`}\r\n          />\r\n          <GridLine\r\n            type=\"horizontal\"\r\n            scale={yScaleForAxis}\r\n            ticks={2}\r\n            size={width}\r\n          />\r\n          <GridLine\r\n            type=\"horizontal\"\r\n            className=\"baseGridLine\"\r\n            scale={yScale}\r\n            ticks={1}\r\n            size={width}\r\n            disableAnimation\r\n          />\r\n          {data.map(({ name, items = [], color }) => (\r\n            <Line\r\n              key={name}\r\n              data={items}\r\n              xScale={xScale}\r\n              yScale={yScale}\r\n              color={color}\r\n            />\r\n          ))}\r\n          {/* <Area data={data[0].items} xScale={xScale} yScale={yScale} /> */}\r\n          <Axis\r\n            type=\"left\"\r\n            scale={yScaleForAxis}\r\n            transform=\"translate(0, -10)\"\r\n            ticks={5}\r\n            tickFormat={yTickFormat}\r\n          />\r\n          <Overlay ref={overlayRef} width={width} height={height}>\r\n            <Axis\r\n              type=\"bottom\"\r\n              className=\"axisX\"\r\n              anchorEl={overlayRef.current}\r\n              scale={xScale}\r\n              transform={`translate(10, ${height - height / 6})`}\r\n              ticks={5}\r\n              tickFormat={xTickFormat}\r\n            />\r\n            <Tooltip\r\n              className=\"tooltip\"\r\n              anchorEl={overlayRef.current}\r\n              width={width}\r\n              height={height}\r\n              margin={margin}\r\n              xScale={xScale}\r\n              yScale={yScale}\r\n              data={data}\r\n            />\r\n          </Overlay>\r\n        </g>\r\n      </svg>\r\n    </div>\r\n  );\r\n};\r\n\r\nMultilineChart.propTypes = {\r\n  data: MultiLineDataPropTypes,\r\n  margin: PropTypes.shape({\r\n    top: PropTypes.number,\r\n    bottom: PropTypes.number,\r\n    left: PropTypes.number,\r\n    right: PropTypes.number\r\n  })\r\n};\r\n\r\nMultilineChart.defaultProps = {\r\n  data: [],\r\n  margin: {\r\n    top: 30,\r\n    right: 15,\r\n    bottom: 15,\r\n    left: 15\r\n  }\r\n};\r\n\r\nexport default MultilineChart;\r\n","import React from \"react\";\r\nimport { FormControlLabel, Checkbox } from \"@material-ui/core\";\r\n\r\nconst Legend = ({ data, selectedItems, onChange }) => (\r\n  <div className=\"legendContainer\">\r\n    {data.map((d) => (\r\n      <div className=\"checkbox\" style={{ color: d.color }} key={d.name}>\r\n\r\n<FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: d.color}}\r\n            value={d.name}\r\n            onChange={() => onChange(d.name)}\r\n          />\r\n        }\r\n        label={d.name}\r\n\r\n        />\r\n      </div>\r\n    ))}\r\n  </div>\r\n);\r\n\r\nexport default Legend;\r\n","/** App.js */\r\nimport React, {useState, useEffect} from \"react\";\r\nimport MultilineChart from \"./views/MultilineChart\";\r\nimport Legend from \"./components/Legend\";\r\nimport vcit from \"./data/VCIT.json\";\r\nimport portfolio from \"./data/portfolio.json\";\r\nimport schc from \"./data/SCHC.json\";\r\nimport \"./styles.css\";\r\nimport fiannafail from \"./data/fiannaFail.json\"\r\nimport finegael from \"./data/finegael.json\"\r\nimport ind from \"./data/ind.json\"\r\nimport sinnfein from \"./data/sinnfein.json\"\r\nimport labour from \"./data/labour.json\"\r\nimport { chamberStats } from '../../../Backend/metaData';\r\nimport axios from \"axios\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport { gridColumnsTotalWidthSelector } from \"@material-ui/data-grid\";\r\n\r\n\r\n\r\n\r\n\r\nexport default function TDLineChartSubjectivity ({justThisTDData, justThisTDPartyData, allTDData}) {\r\n\r\n  const [selectedItems, setSelectedItems] = useState([]);\r\n  const [thisTDData, setThisTDData] = useState(null)\r\n  const [thisTDPartyData, setThisTDPartyData] = useState(null)\r\n  const [dailData, setDailData] = useState(null)\r\n\r\n  const partyColors = {\r\n    \"Sinn Féin\": \"#326760\",\r\n    \"Fine Gael\": \"#6699FF\",\r\n    \"Fianna Fáil\": \"#66BB66\",\r\n    \"Labour Party\": \"#CC0000\",\r\n    \"Solidarity - People Before Profit\": \"#8E2420\",\r\n    \"Independent\": \"white\",\r\n    \"Green Party\": \"#99CC33\",\r\n    \"Social Democrats\": \"#752F8B\",\r\n    \"Aontú\": \"#44532A\",\r\n    \"Independents 4 Change\": \"grey\"}\r\n\r\n    const tdPartyColors = {\r\n\r\n      \"Sinn Féin\": \"#4b9b90\",\r\n      \"Fine Gael\": \"#b3ccff\",\r\n      \"Fianna Fáil\": \"#9bd39b\",\r\n      \"Labour Party\": \"#ff1a1a\",\r\n      \"Solidarity - People Before Profit\": \"#b82f29\",\r\n      \"Independent\": \"#d9d9d9\",\r\n      \"Green Party\": \"#b8db70\",\r\n      \"Social Democrats\": \"#a346c0\",\r\n      \"Aontú\": \"#84a152\",\r\n      \"Independents 4 Change\": \"#a6a6a6\"\r\n    }\r\n\r\n  useEffect(() => {\r\n\r\n    setThisTDData(justThisTDData)\r\n    setThisTDPartyData(justThisTDPartyData)\r\n    setDailData(allTDData)\r\n\r\n}, []);\r\n\r\nuseEffect(() => {\r\n\r\n  if(!thisTDData) return null;\r\n\r\n  setSelectedItems([thisTDData[0].name, \"Dáil Average\", \"Party Average\"])\r\n\r\n}, [thisTDData])\r\n\r\nconst onChangeSelection = (name) => {\r\n    const newSelectedItems = selectedItems.includes(name)\r\n      ? selectedItems.filter((item) => item !== name)\r\n      : [...selectedItems, name];\r\n    setSelectedItems(newSelectedItems);\r\n  };\r\n\r\n  if(!thisTDData) return null;\r\n\r\n\r\n  function getTDObj() {\r\n\r\n    let justTDOnTwitter = thisTDData.filter(function(d) {\r\n                \r\n      if(d.sentimentData[0] != undefined) {\r\n      return d\r\n    }\r\n  }\r\n  )\r\n  \r\n\r\n  let subjectivityArr = justTDOnTwitter[0].sentimentData.map(d => d.subjectivity);\r\n  let dateArr = justTDOnTwitter[0].sentimentData.map(d => d.date);\r\n  let changeArr = [0, ];\r\n  let tdObjArr = [];\r\n  \r\n  \r\n  for(let i = 1; i < subjectivityArr.length; i++) {\r\n  \r\n  \r\n    var lastWeek  = subjectivityArr[i - 1]\r\n    var thisWeek = subjectivityArr[i]\r\n    var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n    \r\n    //filter NaN at start\r\n  \r\n    if(diff !== diff) {changeArr.push(0) } else {\r\n    changeArr.push(diff) \r\n    }\r\n  }\r\n  \r\n  for(let i = 0; i < justTDOnTwitter[0].sentimentData.length; i++) {\r\n  \r\n    function tdObj() {\r\n  \r\n      this.subjectivity = subjectivityArr[i]\r\n      this.date = dateArr[i]\r\n      this.change = changeArr[i]\r\n    }\r\n  tdObjArr.push(new tdObj)\r\n  }\r\n  \r\n  return tdObjArr\r\n  \r\n  \r\n}\r\n\r\nfunction getDailObj() {\r\n\r\n  console.log(dailData)\r\n\r\n  let justTDsOnTwitter = dailData.filter(function(d) {\r\n              \r\n    if(d.sentimentData != undefined) {\r\n    return d\r\n  }\r\n}\r\n)\r\n\r\nlet totalSubjectivityArr = []\r\nlet averageSubjectivityArr = []\r\nlet dateArr = []\r\nlet changeArr = [0, ]\r\nlet dailMeanObjArr = []\r\n\r\nfor(let i = 0; i < justTDsOnTwitter[0].sentimentData.length; i ++) {\r\n\r\nlet holder = justTDsOnTwitter.map(d => d.sentimentData[i].subjectivity)\r\nlet total = holder.reduce(function(a, b) {\r\n  return a + b\r\n})\r\n\r\nlet averageSubjectivityCount = total / justTDsOnTwitter.length;\r\n\r\n\r\n\r\naverageSubjectivityArr.push(Number(averageSubjectivityCount.toFixed(3)))\r\n\r\n}\r\ndateArr = justTDsOnTwitter[0].sentimentData.map(d => d.date)\r\n\r\n\r\nfor(let i = 1; i < averageSubjectivityArr.length; i++) {\r\n\r\n\r\n  var lastWeek  = averageSubjectivityArr[i - 1]\r\n  var thisWeek = averageSubjectivityArr[i]\r\n  var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n  \r\n  //filter NaN at start\r\n\r\n  if(diff !== diff) {changeArr.push(0) } else {\r\n  changeArr.push(diff) \r\n  }\r\n}\r\n\r\nfor(let i = 0; i < justTDsOnTwitter[0].sentimentData.length; i++) {\r\n\r\n  function dailMeanObj() {\r\n\r\n    this.subjectivity = averageSubjectivityArr[i]\r\n    this.date = dateArr[i]\r\n    this.change = changeArr[i]\r\n  }\r\ndailMeanObjArr.push(new dailMeanObj)\r\n}\r\n\r\nreturn dailMeanObjArr\r\n\r\n\r\n}\r\n\r\nfunction getPartyObj() {\r\n\r\n  let justTDsOnTwitter = thisTDPartyData.filter(function(d) {\r\n              \r\n    if(d.sentimentData != undefined) {\r\n    return d\r\n  }\r\n}\r\n)\r\n\r\nlet averageSubjectivityArr = []\r\nlet dateArr = []\r\nlet changeArr = [0, ]\r\nlet partyMeanObjArr = []\r\n\r\nfor(let i = 0; i < justTDsOnTwitter[0].sentimentData.length; i ++) {\r\n\r\nlet holder = justTDsOnTwitter.map(d => d.sentimentData[i].subjectivity)\r\nlet total = holder.reduce(function(a, b) {\r\n  return a + b\r\n})\r\n\r\nlet averageSubjectivityCount = total / justTDsOnTwitter.length\r\n\r\naverageSubjectivityArr.push(Number(averageSubjectivityCount.toFixed(3)))\r\n\r\n}\r\n\r\ndateArr = justTDsOnTwitter[0].sentimentData.map(d => d.date)\r\n\r\n\r\nfor(let i = 1; i < averageSubjectivityArr.length; i++) {\r\n\r\n\r\n  var lastWeek  = averageSubjectivityArr[i - 1]\r\n  var thisWeek = averageSubjectivityArr[i]\r\n  var diff = ((thisWeek - lastWeek) / lastWeek) * 100;\r\n  \r\n  //filter NaN at start\r\n\r\n  if(diff !== diff) {changeArr.push(0) } else {\r\n  changeArr.push(diff) \r\n  }\r\n}\r\n\r\nfor(let i = 0; i < justTDsOnTwitter[0].sentimentData.length; i++) {\r\n\r\n  function partyMeanObj() {\r\n\r\n    this.subjectivity = averageSubjectivityArr[i]\r\n    this.date = dateArr[i]\r\n    this.change = changeArr[i]\r\n  }\r\npartyMeanObjArr.push(new partyMeanObj)\r\n}\r\n\r\nreturn partyMeanObjArr\r\n\r\n\r\n}\r\n\r\n\r\nconst getDate = (d) => { \r\n    \r\n    let together = []\r\n    let apart = d.date.split('/')\r\n    let day = apart[0]\r\n    let month = apart[1]\r\n    let year = apart[2]\r\n\r\n    together.push(month, day, year)\r\n    together.toString().replace(\",\",\"/\").replace(\",\",\"/\")\r\n    return new Date(together)\r\n  }\r\n\r\nconst thisTDDataMap = {\r\n  name: thisTDData[0].name,\r\n  color: tdPartyColors[thisTDData[0].party],\r\n  items: getTDObj().map((d) => ({ ...d, date: getDate(d)}))\r\n};\r\n\r\nconst dailMeanDataMap = {\r\n  name: \"Dáil Average\",\r\n  color: \"white\",\r\n  items: getDailObj().map((d) => ({ ...d, date: getDate(d)}))\r\n}\r\n\r\nconst partyMeanDataMap = {\r\n  name: \"Party Average\",\r\n  color: partyColors[thisTDData[0].party],\r\n  items: getPartyObj().map((d) => ({ ...d, date: getDate(d)}))\r\n}\r\n\r\nif(!thisTDDataMap) return null;\r\n\r\n  const chartData = [\r\n    ...[thisTDDataMap, dailMeanDataMap, partyMeanDataMap].filter((d) => selectedItems.includes(d.name))\r\n  ];\r\n\r\nconst legendData = [thisTDDataMap, dailMeanDataMap, partyMeanDataMap];\r\n\r\n\r\n  return (\r\n  <div className=\"featuredItem\" style={{textAlign: \"center\"}}>\r\n    <Typography variant=\"h5\">Subjectivity</Typography>\r\n      <Legend\r\n        data={legendData}\r\n        selectedItems={selectedItems}\r\n        onChange={onChangeSelection}\r\n      />\r\n      <MultilineChart data={chartData} />\r\n      </div>\r\n\r\n  );\r\n}\r\n\r\n","import * as d3 from 'd3'\r\nimport React from 'react'\r\nimport { useRef, useEffect, useState } from 'react'\r\nimport { Typography, Checkbox, FormControlLabel, Switch, Select, MenuItem, ListSubheader, FormControl, InputLabel, makeStyles } from '@material-ui/core'\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    icon: {\r\n      color: \"white\"\r\n  },\r\n\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n  }\r\n\r\n}));\r\n\r\nconst partyColors = {\r\n    \"Sinn Féin\": \"#326760\",\r\n    \"Fine Gael\": \"#6699FF\",\r\n    \"Fianna Fáil\": \"#66BB66\",\r\n    \"Labour Party\": \"#CC0000\",\r\n    \"Solidarity - People Before Profit\": \"#8E2420\",\r\n    \"Independent\": \"black\",\r\n    \"Green Party\": \"#99CC33\",\r\n    \"Social Democrats\": \"#752F8B\",\r\n    \"Aontú\": \"#44532A\",\r\n    \"Independents 4 Change\": \"grey\"}\r\n\r\n\r\nexport const TDTopicBarchart = ({justThisTDData, justThisTDPartyData, allTDData}) => {\r\n\r\n\r\n\r\n\r\n    const options = [\r\n\r\n    \"Age\", \r\n    \"Followers\", \r\n    \"Retweets\", \r\n    \"Original Tweets\", \r\n    \"Followers Per Retweet\", \r\n    \"Retweets Per Original Tweet\", \r\n    \"Avg. Polarity\", \r\n    \"Avg. Subjectivity\", \r\n\r\n    \"Written Questions Asked\", \r\n    \"Oral Questions Asked\",\r\n    \"No. of Topics TD had Questions for\",\r\n    \"Avg. Questions TD had towards Topic\",\r\n\r\n\r\n    \"Absences\",\r\n    \"Presences\",\r\n    \"Votes Yes\",\r\n    \"Votes No\",\r\n    \"Times on Winning Side\",\r\n    \"Times on Losing Side\",\r\n    \"Yes and Carried\",\r\n    \"Yes and Lost\",\r\n    \"No and Carried\",\r\n    \"No and Lost\"\r\n\r\n    ]\r\n\r\nconst followers = d => {\r\n\r\n    if(d.followerData.length === 0) {\r\n      return 0\r\n    } else {\r\n      return d.followerData[currentWeekIndex].followers\r\n    }\r\n\r\n  }\r\nconst retweets = d => {\r\n\r\n  if(d.retweetData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.retweetData[currentWeekIndex].retweets\r\n  }\r\n\r\n}\r\n\r\nconst originalTweets = d => {\r\n\r\n  if(d.retweetData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.retweetData[currentWeekIndex].original_tweets\r\n  }\r\n\r\n}\r\n\r\nconst followerEngagementRate = (d) => {\r\n\r\n  if(d.followerData.length === 0) {\r\n    return 0\r\n  } else {\r\n\r\n  \r\n\r\n\r\n  var f = d.followerData[currentWeekIndex].followers\r\n  var r = d.retweetData[currentWeekIndex].retweets \r\n\r\n  var test = ((r / f))\r\n\r\n  if(test === Infinity ) {\r\n\r\n      test = 0\r\n  \r\n}\r\n\r\ntest = test ? test : 0;\r\n\r\nreturn test\r\n}\r\n}\r\nconst retweetsPerOriginalTweet = (d) => {\r\n\r\n\r\n  if(d.followerData.length === 0) {\r\n    return 0\r\n  } else {\r\n\r\n  \r\n\r\n  var r = d.retweetData[currentWeekIndex].retweets \r\n  var o = d.retweetData[currentWeekIndex].original_tweets\r\n\r\n  var test = r / o\r\n\r\n  if(test === Infinity ) {\r\n\r\n      test = 0\r\n  \r\n}\r\n\r\ntest = test ? test : 0;\r\n\r\n\r\nreturn test\r\n}\r\n}\r\nconst polarity = d => {\r\n\r\nif(d.sentimentData == undefined || d.sentimentData.length == 0) {\r\n  return 0\r\n} else {\r\n  return d.sentimentData[currentWeekIndex].polarity\r\n}\r\n\r\n}\r\n\r\nconst subjectivity = d => {\r\n\r\n  if(d.sentimentData == undefined || d.sentimentData.length == 0) {\r\n    return 0\r\n  } else {\r\n    return d.sentimentData[currentWeekIndex].subjectivity\r\n  }\r\n\r\n\r\n\r\n}\r\n\r\nconst writtenQuestions = (d) => {\r\n\r\n\r\n    var holder = d.writtenQuestions[0].writtenQuestions.to\r\n    if(!holder) return 0;\r\n    const sumValues = obj => Object.values(obj).reduce((a,b) => a + b) \r\n\r\n    var sum = sumValues(holder)\r\n\r\n    return sum\r\n    \r\n}\r\nconst oralQuestions = (d) => {\r\n\r\n\r\n    var holder = d.oralQuestions[0].oralQuestions.to\r\n    if(!holder) return 0;\r\n    const sumValues = obj => Object.values(obj).reduce((a,b) => a + b) \r\n\r\n    var sum = sumValues(holder)\r\n\r\n    return sum\r\n\r\n\r\n}\r\nconst absences = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].absences\r\n  }\r\n}\r\nconst presences = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].totalVotes\r\n  }\r\n}\r\nconst totalYes = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].totalYes\r\n  }\r\n}\r\nconst totalNo = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].totalNo\r\n  }\r\n}\r\nconst onWinningSide = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].onWinningSide\r\n  }\r\n}\r\nconst onLosingSide = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].onLosingSide\r\n  }\r\n}\r\nconst yesAndCarried = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].yesAndCarried\r\n  }\r\n}\r\nconst yesAndLost = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].yesAndLost\r\n  }\r\n}\r\nconst noAndCarried = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].noAndCarried\r\n  }\r\n}\r\nconst noAndLost = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].noAndLost\r\n  }\r\n}\r\nconst numberOfTopics = (d) => {\r\n\r\n  if(!d.writtenQuestions[0].writtenQuestions.topic) return 0;\r\n\r\n  return Object.keys(d.writtenQuestions[0].writtenQuestions.topic).length  \r\n\r\n}\r\nconst averageQuestionTowardsTopic = (d) => {\r\n\r\n  if(!d.writtenQuestions[0].writtenQuestions.topic) return 0;\r\n\r\n  var topics = Object.keys(d.writtenQuestions[0].writtenQuestions.topic).length  \r\n\r\n  var totalQuestions = writtenQuestions(d)\r\n\r\n  return totalQuestions / topics\r\n}\r\nconst age = (d) => {\r\n\r\n  const getDate = (d) => { \r\n    \r\n    let together = []\r\n    let apart = d.split('/')\r\n    let day = apart[0]\r\n    let month = apart[1]\r\n    let year = apart[2]\r\n  \r\n    together.push(month, day, year)\r\n    together.toString().replace(\",\",\"/\").replace(\",\",\"/\")\r\n    return new Date(together)\r\n  }\r\n    \r\n  if(!d.DOB) {\r\n\r\n  function calcAge() {\r\n      var birthday = +Date.now();\r\n      return ~~((Date.now() - birthday) / (31557600000));\r\n    }\r\n    return calcAge()\r\n  }\r\n  \r\n\r\n  function calcAge(date) {\r\n    var birthday = +getDate(date);\r\n    return ~~((Date.now() - birthday) / (31557600000));\r\n  }\r\n\r\n  return calcAge(d.DOB)\r\n    \r\n\r\n}\r\n\r\n\r\n\r\n    const optionsFunctions =\r\n\r\n    [ age,\r\n      followers, \r\n      retweets, \r\n      originalTweets, \r\n      followerEngagementRate, \r\n      retweetsPerOriginalTweet, \r\n      polarity, \r\n      subjectivity,\r\n\r\n      writtenQuestions, \r\n      oralQuestions, \r\n      numberOfTopics, \r\n      averageQuestionTowardsTopic,\r\n\r\n      absences, \r\n      presences, \r\n      totalYes, \r\n      totalNo, \r\n      onWinningSide, \r\n      onLosingSide, \r\n      yesAndCarried, \r\n      yesAndLost, \r\n      noAndCarried, \r\n      noAndLost, \r\n \r\n      ]\r\n\r\n\r\n    const classes = useStyles();\r\n\r\n\r\n    const [justConTDs, setJustConTDs] = useState(null)\r\n    const [currentWeekIndex, setCurrentWeekIndex] = useState(null)\r\n    const [highlightOption, setHighlightOption] = useState(0)\r\n    const [baseColorOption, setBaseColorOption] = useState(0)\r\n    const [yOption, setYOption] = useState(0)\r\n    const [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\r\n    const [height, setHeight] = useState(400)\r\n    const [width, setWidth] = useState(600)\r\n    const [colorMode, setColorMode] = useState(\"Light Mode\")\r\n    const [color, setColor] = useState(null)\r\n    const [fillColor, setFillColor] = useState(null)\r\n    const [backgroundColor, setBackgroundColor] = useState(null)\r\n    const [textColor, setTextColor] = useState(null)\r\n\r\n    function getWindowDimensions() {\r\n      const { innerWidth: width, innerHeight: height } = window;\r\n      return {\r\n        width,\r\n        height\r\n      };\r\n    }\r\n\r\n    function useWindowDimensions() {\r\n     \r\n    \r\n      useEffect(() => {\r\n        function handleResize() {\r\n          setWindowDimensions(getWindowDimensions());\r\n        }\r\n    \r\n        window.addEventListener('resize', handleResize);\r\n        return () => window.removeEventListener('resize', handleResize);\r\n      }, []);\r\n    \r\n      return windowDimensions;\r\n    }\r\n\r\n    console.log(useWindowDimensions())\r\n\r\n    const onChangeColorMode = (event, child) => {\r\n\r\n      if(child == true) {\r\n\r\n      setColorMode(\"Dark Mode\")\r\n      } \r\n      if(child == false) {\r\n        setColorMode(\"Light Mode\")\r\n      }\r\n      \r\n      console.log('color mode:' + event.target.value);\r\n      console.log(child);\r\n};\r\n\r\n\r\n    useEffect(() => {\r\n\r\n\r\n      console.log(colorMode)\r\n      \r\n            if(colorMode == \"Dark Mode\") {\r\n              setFillColor({fill: \"white\", color: \"white\"})\r\n              setColor({color: \"white\"})\r\n              setBackgroundColor(\"#191C24\")\r\n              setTextColor(\"white\")\r\n      \r\n            }\r\n      \r\n            if(colorMode == \"Light Mode\") {\r\n              setFillColor({fill: \"black\", color: \"black\"})\r\n              setColor({color: \"black\"})\r\n              setBackgroundColor(\"white\")\r\n              setTextColor(\"black\")\r\n            }\r\n      \r\n            \r\n      \r\n          }, [colorMode])\r\n\r\n    useEffect(() => {\r\n\r\n\r\n\r\n      if(windowDimensions.width < 500) {\r\n        setHeight(320)\r\n        setWidth(340)\r\n      }\r\n      if(windowDimensions.width < 400 && windowDimensions.width > 360) {\r\n        setHeight(320)\r\n        setWidth(340)\r\n      }\r\n      if(windowDimensions.width < 470 && windowDimensions.width > 400) {\r\n        setHeight(320)\r\n        setWidth(380)\r\n      }\r\n      if(windowDimensions.width < 680 && windowDimensions.width > 470) {\r\n        setHeight(360)\r\n        setWidth(480)\r\n      }\r\n      if(windowDimensions.width < 800 && windowDimensions.width > 600) {\r\n        setHeight(400)\r\n        setWidth(600)\r\n      }\r\n      if(windowDimensions.width < 980 && windowDimensions.width > 800) {\r\n        setHeight(450)\r\n        setWidth(650)\r\n      }\r\n      if(windowDimensions.width < 1080 && windowDimensions.width > 980) {\r\n        setHeight(450)\r\n        setWidth(650)\r\n      }\r\n      if(windowDimensions.width < 1200 && windowDimensions.width > 1080) {\r\n        setHeight(450)\r\n        setWidth(650)\r\n      }\r\n      if(windowDimensions.width > 1200) {\r\n        setHeight(450)\r\n        setWidth(650)\r\n      }\r\n    }, [windowDimensions])\r\n\r\n    const margin = {top: 20, right: 20, bottom: 100, left: 50}\r\n    const heightMargin = height - margin.left - margin.right;\r\n    const widthMargin = width - margin.top - margin.bottom;  \r\n\r\n\r\n    const svgRef= useRef()\r\n\r\n\r\nconst onChangeHighlight = (event, child) => {\r\n        setHighlightOption(event.target.value)\r\n        console.log('Highlight:' + event.target.value);\r\n        console.log(child);\r\n};\r\n\r\nconst onChangeBaseColor = (event, child) => {\r\n  setBaseColorOption(event.target.value)\r\n  console.log('Base color:' + event.target.value);\r\n  console.log(child);\r\n};\r\n\r\nconst onChangeY = (event, child) => {\r\n        setYOption(event.target.value)\r\n        console.log('y:' + event.target.value);\r\n        console.log(child);\r\n};\r\n\r\nuseEffect(() => {\r\n\r\n    setJustConTDs(justThisTDData)\r\n\r\n}, [])\r\n\r\nuseEffect(() => {\r\n\r\n    if(!justConTDs) return null;\r\n    setCurrentWeekIndex(justConTDs[0].followerData.length - 1)\r\n\r\n}, [justConTDs])\r\n\r\n    useEffect(() => {\r\n\r\n    if(!justConTDs || !currentWeekIndex) return null;\r\n\r\n\r\n    if(colorMode == \"Dark Mode\") {\r\n      partyColors.Independent = \"white\"\r\n    }\r\n    if(colorMode == \"Light Mode\") {\r\n      partyColors.Independent = \"black\"\r\n    }\r\n\r\n      function testAge() {\r\n\r\n        const getDate = (d) => { \r\n    \r\n          let together = []\r\n          let apart = d.split('/')\r\n          let day = apart[0]\r\n          let month = apart[1]\r\n          let year = apart[2]\r\n        \r\n          together.push(month, day, year)\r\n          together.toString().replace(\",\",\"/\").replace(\",\",\"/\")\r\n          return new Date(together)\r\n        }\r\n\r\n        var DOBs = justConTDs.map(d => d.DOB)\r\n\r\n        var properDate = DOBs.map(function(d) {\r\n          \r\n        if(!d) {\r\n\r\n        function calcAge() {\r\n            var birthday = +Date.now();\r\n            return ~~((Date.now() - birthday) / (31557600000));\r\n          }\r\n          return calcAge()\r\n        }\r\n        \r\n\r\n        function calcAge(d) {\r\n          var birthday = +getDate(d);\r\n          return ~~((Date.now() - birthday) / (31557600000));\r\n        }\r\n\r\n        return calcAge(d)\r\n          \r\n          \r\n        })\r\n\r\n        return properDate\r\n      }\r\n\r\n\r\n      console.log(testAge())\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  console.log(justConTDs.map(d => [d.gender, d.name]))\r\n\r\n        const justConTDsHolderBar = justConTDs;\r\n\r\n        justConTDsHolderBar.sort(function(a, b) {\r\n         return   d3.ascending(a.party, b.party)\r\n        })\r\n\r\n        console.log(justConTDsHolderBar)\r\n\r\n        const xValue = d => d.name\r\n        const yValue = optionsFunctions[yOption]\r\n        const party = d => d.party\r\n        const color = (d) => {\r\n\r\n\r\n        const officeArr = []\r\n        let cabinetColor = \"#FFC000\"\r\n\r\n          if(baseColorOption === 1 && highlightOption != 0) {\r\n            cabinetColor = \"red\"\r\n          }\r\n\r\n\r\n\r\n        let trueArr = [];\r\n\r\n        if(highlightOption === 1) {\r\n\r\n        if(d.member_offices[0].length != 0) {\r\n\r\n          for(let i = 0; i < d.member_offices[0].length; i++) {\r\n  \r\n          var office = d.member_offices[0][i].office.officeName.showAs\r\n  \r\n          if(!d.member_offices[0][i].office.dateRange.end) {\r\n              officeArr.push(office)\r\n          } \r\n      }\r\n    }\r\n\r\n        for(let i = 0; i < officeArr.length; i++) {\r\n\r\n            if(officeArr[i].search(\"Minister for\") != -1 || officeArr[i].search(\"Taoiseach\") != -1) { \r\n              trueArr.push(true)   \r\n            } \r\n          }\r\n          if(trueArr.includes(true)) {\r\n              return cabinetColor\r\n          } else if(baseColorOption === 0) {\r\n              return partyColors[party(d)]\r\n          } else if (baseColorOption === 1) {\r\n            return \"lightblue\"\r\n          }\r\n} \r\n\r\nif(highlightOption == 2) {\r\n\r\n    if(d.member_offices[0].length != 0) {\r\n\r\n      for(let i = 0; i < d.member_offices[0].length; i++) {\r\n\r\n      var office = d.member_offices[0][i].office.officeName.showAs\r\n\r\n      if(!d.member_offices[0][i].office.dateRange.end) {\r\n          officeArr.push(office)\r\n      } \r\n  }\r\n}\r\n\r\n    for(let i = 0; i < officeArr.length; i++) {\r\n\r\n        if(officeArr[i].search(\"Minister of\") != -1) { \r\n          trueArr.push(true)   \r\n        } \r\n      }\r\n\r\n      console.log(trueArr)\r\n      if(trueArr.includes(true)) {\r\n          return cabinetColor\r\n      } else if(baseColorOption === 0) {\r\n          return partyColors[party(d)]\r\n      } else if(baseColorOption === 1) {\r\n        return \"lightblue\"\r\n      }\r\n} \r\n\r\nif(highlightOption == 3) {\r\n\r\n    if(d.member_offices[0].length != 0) {\r\n\r\n      for(let i = 0; i < d.member_offices[0].length; i++) {\r\n\r\n      var office = d.member_offices[0][i].office.officeName.showAs\r\n\r\n      if(!d.member_offices[0][i].office.dateRange.end) {\r\n          officeArr.push(office)\r\n      } \r\n  }\r\n}\r\n\r\n    for(let i = 0; i < officeArr.length; i++) {\r\n\r\n        if(officeArr[i].search(\"Minister of\") != -1 || officeArr[i].search(\"Minister for\") != -1 || officeArr[i].search(\"Taoiseach\") != -1) { \r\n          trueArr.push(true)   \r\n        } \r\n      }\r\n\r\n      console.log(trueArr)\r\n      if(trueArr.includes(true)) {\r\n          return cabinetColor\r\n      } else if(baseColorOption === 0) {\r\n          return partyColors[party(d)]\r\n      } else if(baseColorOption === 1) {\r\n        return \"lightblue\"\r\n      }\r\n}  \r\n\r\nif(highlightOption == 4) {\r\n  if(d.gender == \"Female\") {\r\n    return cabinetColor\r\n  } else if(baseColorOption === 0) {\r\n    return partyColors[party(d)]\r\n} else if(baseColorOption === 1) {\r\n  return \"lightblue\"\r\n}\r\n}\r\n           \r\n           return partyColors[party(d)]\r\n\r\n\r\n        } \r\n\r\n\r\n        const svg = d3.select(svgRef.current);\r\n\r\n\r\n        const xScale = d3.scaleBand()\r\n                            .domain(justConTDsHolderBar.map(xValue))\r\n                            .range([0, widthMargin])\r\n                            .padding(0.2)\r\n\r\n\r\n                           \r\n\r\n\r\n        const yScale = d3.scaleLinear()\r\n                        .domain([0, d3.max(justConTDsHolderBar, yValue)])\r\n                        .range([heightMargin, 0]);\r\n\r\n\r\n\r\n                        console.log(yValue)\r\n\r\n        const xAxis = d3.axisBottom(xScale)\r\n\r\n        svg\r\n            .select(\".x-axis-td-topic-barchart\")\r\n            .attr(\"transform\", \"translate(0,\" + heightMargin + \")\")\r\n            .transition(2000)\r\n            .call(xAxis)\r\n\r\n\r\n        const yAxis = d3.axisLeft(yScale).tickFormat(d3.format(\".2s\"));\r\n\r\n    svg\r\n        .select(\".y-axis-td-topic-barchart\")\r\n        .attr(\"transform\", \"translate(0,0)\")\r\n        .transition(500)\r\n        .call(yAxis)\r\n\r\n\r\n\r\n        const tooltip = d3\r\n                .select('body')\r\n                .append('div')\r\n                .attr('class', 'd3-tooltip')\r\n                .style('position', 'absolute')\r\n                .style('z-index', '10')\r\n                .style('visibility', 'hidden')\r\n                .style('padding', '10px')\r\n                .style('background', 'rgba(0,0,0,0.6)')\r\n                .style('border-radius', '4px')\r\n                .style('color', '#fff')\r\n                .text('a simple tooltip');\r\n\r\n\r\n        var rects = d3.select(\"#container-td-topic-barchart\")\r\n                    .selectAll(\".bar\")\r\n                    .data(justConTDsHolderBar)\r\n                    .join(\"rect\")\r\n                    .attr(\"class\", \"bar\")\r\n                    \r\n\r\n\r\n\r\n                rects.transition()\r\n                    .duration(400)\r\n                    .attr(\"x\", d => xScale(xValue(d)))\r\n                    .attr(\"y\", d => yScale(yValue(d)))\r\n                    .attr(\"width\", xScale.bandwidth())\r\n                    .attr(\"height\", d => heightMargin - yScale(yValue(d)))\r\n                    .attr(\"fill\", color)\r\n\r\n                const hoverColor = \"#eec42d\"\r\n\r\n\r\n                rects\r\n                    .on('mouseover', function (d, i) {\r\n                        tooltip\r\n                        .html(\r\n                            `<div>Name: ${d.name}</div><div>Party: ${d.party}</div><div>${options[yOption]}: ${yValue(d).toLocaleString()}</div></div>`\r\n                        )\r\n                            .style('visibility', 'visible');\r\n                            d3.select(this).transition().attr('fill', hoverColor);\r\n                        })\r\n                        .on('mousemove', function () {\r\n                            tooltip\r\n                            .style('top', d3.event.pageY - 10 + 'px')\r\n                            .style('left', d3.event.pageX + 10 + 'px');\r\n                        })\r\n                        .on('mouseout', function () {\r\n                            tooltip.html(``).style('visibility', 'hidden');\r\n                            d3.select(this).transition().attr('fill', color);\r\n                        });\r\n\r\n\r\n\r\n    }, [justConTDs, colorMode, yOption, highlightOption, baseColorOption, currentWeekIndex, height, width])\r\n\r\n    return (\r\n    <div className={\"featuredItem\"} style={{textAlign: \"center\", padding: \"10px\", margin: \"10px\", background: backgroundColor, textAlign: \"center\"}}>\r\n            \r\n      <Typography style={color} variant=\"h5\">Interactive Barchart</Typography>\r\n          <div><FormControlLabel style={color}\r\n      control={<Switch value={true} onChange={onChangeColorMode}/>}\r\n      label=\"Dark Mode\"\r\n    /></div>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={fillColor} htmlFor=\"grouped-select\">Y-Value</InputLabel>\r\n        <Select onChange={onChangeY} style={color} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n        <ListSubheader value={0}>General</ListSubheader>\r\n        <MenuItem value={0}>Age</MenuItem>\r\n          <ListSubheader value={1}>Twitter Data, last 7 days</ListSubheader>\r\n          <MenuItem value={1}>Followers</MenuItem>\r\n          <MenuItem value={2}>Retweets</MenuItem>\r\n          <MenuItem value={3}>Original Tweets</MenuItem>          \r\n          <MenuItem value={4}>Followers Per Retweet</MenuItem>\r\n          <MenuItem value={5}>Retweets Per Original Tweet</MenuItem>\r\n          <MenuItem value={6}>Avg. Tweet Polarity</MenuItem>\r\n          <MenuItem value={7}>Avg. Tweet Subjectivity</MenuItem>\r\n          <ListSubheader value={8}>Dáil Questions, 01 July - 01 Sept</ListSubheader>          \r\n          <MenuItem value={8}>Written Questions Asked</MenuItem>\r\n          <MenuItem value={9}>Oral Questions Asked</MenuItem>          \r\n          <MenuItem value={10}>No. of Topics TD had Questions for</MenuItem>\r\n          <MenuItem value={11}>Avg. Questions TD had towards Topic</MenuItem>\r\n          <ListSubheader value={12}>Dáil Divisions, 01 Jan - 01 Sept </ListSubheader>  \r\n          <MenuItem value={12}>Divisions Absent</MenuItem>\r\n          <MenuItem value={13}>Divisions Present</MenuItem>\r\n          <MenuItem value={14}>No. of votes Yes</MenuItem>\r\n          <MenuItem value={15}>No. of votes No</MenuItem>\r\n          <MenuItem value={16}>Times on Winning Side of Division</MenuItem>\r\n          <MenuItem value={17}>Times on Losing Side of Division</MenuItem>\r\n          <MenuItem value={18}>Yes and Divison Carried</MenuItem>\r\n          <MenuItem value={19}>Yes and Division Lost</MenuItem>\r\n          <MenuItem value={20}>No and Division Carried</MenuItem>\r\n          <MenuItem value={21}>No and Division Lost</MenuItem>\r\n          <MenuItem disabled>News Mentions</MenuItem>\r\n          <MenuItem disabled>Votes recieved in last election</MenuItem>\r\n          <MenuItem disabled>Avg. Poll</MenuItem>\r\n        </Select>\r\n      </FormControl>\r\n\r\n\r\n        <div className={\"scroll-svg-container\"} style={{marginTop: \"16px\"}}>\r\n            <svg ref={svgRef} height={heightMargin + margin.top + margin.bottom} width={widthMargin + margin.left + margin.right}>\r\n            <g id=\"container-td-topic-barchart\" transform={'translate(' + margin.left + ',' + margin.top + ')'}>\r\n                <g className=\"x-axis-td-topic-barchart\" style={color}></g>\r\n                <g className=\"y-axis-td-topic-barchart\" style={color}></g>\r\n            </g>\r\n            </svg>\r\n        </div>\r\n    </div>\r\n    )\r\n}\r\n","import React, {useState, useEffect} from 'react'\r\nimport TDHeader from './TDHeader'\r\nimport {TDActivityStats, TDConnectivityGauge, TDFollowerStats, TDInterests, TDPolarityStats, TDQuestionsAskedTo, TDQuestionsTowardsTopic, TDRetweetStats, TDSentimentGauge, TDSubjectivityStats, TDTwitterActivity } from './TDStats'\r\nimport { Avatar, Grid, Typography } from '@material-ui/core'\r\nimport './tdpage.css'\r\nimport { useParams } from 'react-router'\r\nimport { TrendingDownRounded } from '@material-ui/icons'\r\nimport TDLineChartFollowers from './TDLineChartFollowers/TDLineChartFollowers'\r\nimport TDLineChartRetweets from './TDLineChartRetweets/TDLineChartRetweets'\r\nimport TDLineChartActivity from './TDLineChartActivity/TDLineChartActivity'\r\nimport TDLineChartPolarity from './TDLineChartPolarity/TDLineChartPolarity'\r\nimport TDLineChartSubjectivity from './TDLineChartSubjectivity/TDLineChartSubjectivity'\r\nimport { TDTopicBarchart } from './TDTopicBarchart'\r\n\r\nconst TDPage = ({data}) => {\r\n\r\n\r\n    const [TDData, setTDData] = useState(null)\r\n    const [thisTDData, setThisTDData] = useState(null)\r\n    const [thisTDPartyData, setThisTDPartyData] = useState(null)\r\n\r\n\r\n    const {TD} = useParams()\r\n\r\n    useEffect(() => {\r\n\r\n        setTDData(data)\r\n\r\n    }, [])\r\n\r\n    console.log(TD)\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        if(!TDData) return null;\r\n\r\n        function getThisTDName() {\r\n\r\n        let tdName = TD\r\n\r\n        return tdName.replace('-', ' ') \r\n        \r\n        }\r\n\r\n        const name = getThisTDName()\r\n\r\n        const thisTDObj = TDData.filter(d => name === d.name)\r\n\r\n        \r\n        setThisTDData(thisTDObj)\r\n\r\n    }, [TDData])\r\n\r\n\r\nuseEffect(() => {\r\n\r\n\r\nif(!thisTDData) return null;\r\n\r\n\r\nlet tdParty = thisTDData[0].party\r\n\r\nlet just = TDData.filter(d => d.party == tdParty)\r\n\r\nsetThisTDPartyData(just)\r\n\r\n}, [TDData, thisTDData])\r\n\r\n\r\n    if(!thisTDData || !thisTDPartyData || !TDData) return null;\r\n\r\n    console.log(thisTDData)\r\n\r\n\r\n    return (\r\n\r\n        <div style={{background: \"white\"}}>\r\n        <Grid container xs={12}>               \r\n        <Grid item xs={12}>\r\n                <TDHeader justThisTDData={thisTDData}/>\r\n            </Grid>    \r\n        \r\n            <Grid item xs={12} sm={6}>\r\n                <TDInterests justThisTDData={thisTDData} justThisTDPartyData={thisTDPartyData}  allTDData={TDData} />\r\n            </Grid>            \r\n            {/* <Grid item xs={12} sm={6}>\r\n                <TDQuestionsTowardsTopic justThisTDData={thisTDData} justThisTDPartyData={thisTDPartyData}  allTDData={TDData} />\r\n            </Grid>    */}\r\n            <Grid item xs={12} sm={6}>\r\n                <TDQuestionsAskedTo justThisTDData={thisTDData} justThisTDPartyData={thisTDPartyData}  allTDData={TDData} />\r\n            </Grid>  \r\n            <Grid item xs={12} >\r\n                <TDTopicBarchart justThisTDData={thisTDData} justThisTDPartyData={thisTDPartyData}  allTDData={TDData} />\r\n            </Grid>  \r\n            \r\n            <Grid item xs={12} sm={6}>\r\n                <TDPolarityStats justThisTDData={thisTDData} justThisTDPartyData={thisTDPartyData}  allTDData={TDData}/>\r\n            </Grid>            \r\n            <Grid item xs={12} sm={6}>\r\n                <TDSubjectivityStats justThisTDData={thisTDData} justThisTDPartyData={thisTDPartyData}  allTDData={TDData}/>\r\n            </Grid>            \r\n            <Grid item xs={12}>\r\n                <TDLineChartPolarity justThisTDData={thisTDData} justThisTDPartyData={thisTDPartyData}  allTDData={TDData}/>\r\n            </Grid>              \r\n            <Grid item xs={12} sm={4}>\r\n                <TDFollowerStats justThisTDData={thisTDData} justThisTDPartyData={thisTDPartyData}  allTDData={TDData}/>\r\n            </Grid>\r\n            <Grid item xs={12} sm={4}>\r\n                <TDRetweetStats justThisTDData={thisTDData} justThisTDPartyData={thisTDPartyData}  allTDData={TDData}/>\r\n            </Grid>\r\n            <Grid item xs={12} sm={4}>\r\n                <TDActivityStats justThisTDData={thisTDData} justThisTDPartyData={thisTDPartyData}  allTDData={TDData} />\r\n            </Grid>    \r\n              \r\n            <Grid item xs={12}>\r\n                <TDLineChartFollowers justThisTDData={thisTDData} justThisTDPartyData={thisTDPartyData}  allTDData={TDData}/>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n                <TDLineChartRetweets justThisTDData={thisTDData} justThisTDPartyData={thisTDPartyData}  allTDData={TDData}/>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n                <TDLineChartActivity justThisTDData={thisTDData} justThisTDPartyData={thisTDPartyData}  allTDData={TDData}/>\r\n            </Grid>\r\n\r\n            <Grid item xs={12}>\r\n                <TDLineChartSubjectivity justThisTDData={thisTDData} justThisTDPartyData={thisTDPartyData}  allTDData={TDData}/>\r\n            </Grid>   \r\n        </Grid>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default TDPage\r\n","import React, {useState, useEffect} from 'react'\r\nimport { Grid, ListItem, ListItemText, ListItemAvatar, List, Avatar, Typography } from '@material-ui/core'\r\nimport { chamber } from '../../Backend/rollCall';\r\nimport { toCssValue } from 'jss';\r\nimport { Switch } from 'react-router-dom';\r\n\r\n\r\nconst TDList = ({data}) => {\r\n\r\n\r\n  const [TDData, setTDData] = useState(null)\r\n\r\n  useEffect(() => {\r\n\r\n\r\n    setTDData(data.sort((a,b) => a.party.localeCompare(b.party)))\r\n\r\n  }, [])\r\n\r\n\r\n  if(!TDData) return null;\r\n\r\n\r\n  console.log(TDData.sort(d => d.party))\r\n\r\n\r\n\r\n\r\n\r\n    function generate(element) {\r\n\r\n\r\n        return TDData.map(function(d) {\r\n\r\n\r\n        const partyDotAbrevArr = [\r\n            \"ff\", \"fg\", \"grn\", \"soc-dem\", \"ind\", \"pbp\", \"I4C\", \"sf\", \"aon\", \"lab\"\r\n        ]\r\n    \r\n        const partDotFullNameArr = [\"Fianna Fáil\", \"Fine Gael\", \"Green Party\", \"Social Democrats\", \"Independent\", \"Solidarity - People Before Profit\", \"Independents 4 Change\", \"Sinn Féin\", \"Aontú\", \"Labour Party\"]\r\n\r\n\r\n        const party = d.party;\r\n\r\n        const index = partDotFullNameArr.indexOf(party)\r\n \r\n        const partyDot = partyDotAbrevArr[index]\r\n\r\n        const officeArr = []\r\n\r\n        if(d.member_offices[0].length != 0) {\r\n\r\n          for(let i = 0; i < d.member_offices[0].length; i++) {\r\n  \r\n          var office = d.member_offices[0][i].office.officeName.showAs\r\n  \r\n          if(!d.member_offices[0][i].office.dateRange.end) {\r\n              officeArr.push(office)\r\n          } \r\n      }\r\n    }\r\n\r\n    let baseColor = \"#191C24\"\r\n    let cabinetColor = \"#223566\"\r\n    let backgroundColor;\r\n    let trueArr = [];\r\n\r\n    let cabinet = \"Cabinet Minister\";\r\n    let nameTitle = d.name;\r\n\r\n\r\n    for(let i = 0; i < officeArr.length; i++) {\r\n\r\n      if(officeArr[i].search(\"Minister for\") != -1) {\r\n\r\n        trueArr.push(true)\r\n\r\n      } \r\n    }\r\n\r\n    if(trueArr.includes(true)) {\r\n      backgroundColor = cabinetColor\r\n      nameTitle = nameTitle.concat(', ' + cabinet)\r\n    } else {\r\n      backgroundColor = baseColor\r\n    }\r\n\r\n    console.log(officeArr)\r\n    console.log(trueArr)\r\n\r\n        return (<div>\r\n        <ListItem style={{background: backgroundColor}} button component=\"a\" href={\"/TDs/\" + d.name.replace(' ', '-')}>\r\n             <span title={d.party} class={\"party-dot-\" + partyDot} style={{marginRight: 10}}/><ListItemAvatar>\r\n            <Avatar src={d.member_uri[0] + \"/image/large\"}/>\r\n            </ListItemAvatar>\r\n            <ListItemText primary={nameTitle}/>\r\n          </ListItem></div>\r\n        )\r\n    }\r\n    )\r\n  }\r\n\r\n\r\n    return (\r\n\r\n<div className=\"featuredItem\">\r\n            <h1>TD List</h1>\r\n    <div>\r\n        <Grid item xs={12} md={6}>\r\n          <Typography variant=\"h6\">\r\n            \r\n          </Typography>\r\n          <div className>\r\n            <List>\r\n              {generate(\r\n\r\n              )}\r\n            </List>\r\n          </div>\r\n        </Grid>\r\n    </div>\r\n\r\n</div>\r\n    )\r\n}\r\n\r\nexport default TDList\r\n","import { Grid, IconButton, Typography } from '@material-ui/core'\r\nimport React from 'react'\r\nimport GitHubIcon from '@material-ui/icons/GitHub';\r\nimport './footer.css'\r\nimport { makeStyles } from '@material-ui/core';\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    myClassName: {\r\n      backgroundColor: \"white\",\r\n      marginBottom: \"5px\",\r\n      position: \"relative\",\r\n      \"&:hover\": {\r\n        backgroundColor: \"#ffdd40\"\r\n      }\r\n    }\r\n  }));\r\n\r\n\r\nconst Footer = () => {\r\n\r\n    const classes = useStyles()\r\n\r\n\r\n    return (\r\n\r\n<div id=\"footer\" style={{textAlign: \"center\", background: \"#004D44\", position: \"absolute\", width: \"100%\", height: \"100px\", alignItems: \"center\", display: \"flex\",\r\n  justifyContent: \"center\",\r\n  alignItems: \"center\",\r\n  paddingTop: \"40px\",\r\n  paddingBottom: \"50px\"}}>\r\n    <Grid container justifyContent=\"center\" alignItems=\"center\" style={{height: \"height\"}}>\r\n        <Grid xs={12}>\r\n            <div style={{textAlign: \"center\"}}>\r\n    <IconButton className={classes.myClassName} style={{color: \"#004D44\"}} aria-label=\"https://github.com/judeluka/eirpol\" onClick={() => window.open('https://github.com/judeluka/eirpol')}>\r\n    <GitHubIcon style={{fontSize: \"50px\"}}></GitHubIcon>  \r\n    </IconButton>\r\n    </div>\r\n    </Grid>\r\n    <Grid >\r\n<div style={{textAlign: \"center\"}}>\r\n<Typography style={{color: \"white\"}}>jude-luka</Typography>\r\n    </div>\r\n    </Grid>\r\n    </Grid>\r\n</div>    \r\n\r\n    )\r\n}\r\n\r\nexport default Footer\r\n","import React, {useRef, useEffect, useState} from 'react'\r\nimport * as d3 from 'd3'\r\nimport con_boundaries from './boundary.geo.json'\r\nimport { geoMercator, geoPath } from 'd3'\r\nimport { Typography, Checkbox, Select, MenuItem, ListSubheader, FormControl, InputLabel, makeStyles } from '@material-ui/core'\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    icon: {\r\n      color: \"white\"\r\n  },\r\n\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n  }\r\n\r\n}));\r\n\r\n\r\nconst PartyConstituencyMap = ({data}) => {\r\n\r\n\r\n    const partyColors = {\r\n        \"Sinn Féin\": \"#326760\",\r\n        \"Fine Gael\": \"#6699FF\",\r\n        \"Fianna Fáil\": \"#66BB66\",\r\n        \"Labour Party\": \"#CC0000\",\r\n        \"Solidarity - People Before Profit\": \"#8E2420\",\r\n        \"Independent\": \"white\",\r\n        \"Green Party\": \"#99CC33\",\r\n        \"Social Democrats\": \"#752F8B\",\r\n        \"Aontú\": \"#44532A\",\r\n        \"Independents 4 Change\": \"grey\"}\r\n\r\n\r\n    const [TDData, setTDData] = useState(null)\r\n    const [justParty, setJustParty] = useState(1)\r\n    const [funcOption, setFuncOption] = useState(0)\r\n    const [colorFunc, setColorFunc] = useState(0)\r\n    const [boundaries, setBoundaries] = useState(null)\r\n\r\n\r\n    const classes = useStyles();\r\n\r\n\r\n    const justPartyArr = [\"Sinn Féin\", \"Fine Gael\", \"Fianna Fáil\", \"Labour Party\", \"Solidarity - People Before Profit\", \"Independent\", \"Green Party\",\"Social Democrats\", \"Aontú\", \"Independents 4 Change\"]\r\n\r\n    const margin = {top: 50, right: 20, bottom: 50, left: 20}\r\n    const height = 700\r\n    const width = 600\r\n    const svgRef = useRef()\r\n\r\n    const onChangeFuncOption = (event, child) => {\r\n        setFuncOption(event.target.value)\r\n        console.log('Func Option:' + event.target.value);\r\n        console.log(child);\r\n      };\r\n\r\n      \r\n    const onChangeColorFunc = (event, child) => {\r\n        setColorFunc(event.target.value)\r\n        console.log('Func Option:' + event.target.value);\r\n        console.log(child);\r\n      };\r\n\r\n      const onChangeJustParty = (event, child) => {\r\n        setJustParty(event.target.value)\r\n        console.log('Just Party:' + event.target.value);\r\n        console.log(child);\r\n      };\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        setTDData(data)\r\n\r\n    }, [])\r\n\r\n\r\nuseEffect(() => {\r\n    \r\nconst clone = JSON.parse(JSON.stringify(con_boundaries))\r\nsetBoundaries(clone)\r\n\r\n\r\n}, [])\r\n\r\n\r\n\r\n\r\nuseEffect(() => {\r\n\r\n    if(!boundaries || !TDData) return null;\r\n    \r\n    \r\n    \r\n    \r\n\r\nfunction getMemberConstituency() {\r\n\r\n\r\n    var tdConstituencyObj = TDData.map(function(d) {\r\n\r\n\r\n        var indexOfLastSlash = d.member_constituency_uri[0].lastIndexOf('/') + 1;      \r\n        var clean = d.member_constituency_uri[0].substr(indexOfLastSlash).replaceAll('-', ' ');\r\n        return {TD: d, constituencyName: clean}\r\n\r\n    })  \r\n    \r\n    return tdConstituencyObj;\r\n\r\n}\r\n\r\nfunction getBoundaryConstituency() {\r\n    \r\n    var constituencyObj = boundaries.features.map(function(d) {\r\n        \r\n        var constituencyNameVar = d.properties.CON_SEAT_.replaceAll(/[^A-Zú]/gi, ' ').replace(/\\s*$/,'');\r\n        var constituencyCodeVar = d.properties.OBJECTID_1;\r\n\r\n        return {constituencyCode: constituencyCodeVar, constituencyName: constituencyNameVar};\r\n\r\n});\r\n\r\n    return constituencyObj;\r\n}\r\n\r\nfunction storeTDsByConstituency() {\r\n\r\n\r\n\r\n    var members = getMemberConstituency()\r\n    var boundaries = getBoundaryConstituency()\r\n\r\n\r\n    var arr = boundaries.map(function(d) {\r\n\r\n\r\n        var tdArr = []\r\n\r\n\r\n        for(let i = 0; i < members.length; i++) {\r\n\r\n            if(d.constituencyName === \"Dun Laoghaire\" && members[i].constituencyName === \"Dún Laoghaire\") {\r\n\r\n                tdArr.push(members[i])\r\n\r\n            }\r\n\r\n            if(d.constituencyName === members[i].constituencyName) {\r\n                tdArr.push(members[i])\r\n            }\r\n        }\r\n\r\n        return [d.constituencyName, tdArr]\r\n    })\r\n\r\nreturn arr\r\n\r\n\r\n}\r\n\r\n//Functions to store as state:\r\n\r\nfunction colorOfPartyWithMajoritySeats(i) {\r\n\r\n    var conTDs = storeTDsByConstituency()\r\n\r\n\r\n    var partiesPresent = conTDs[i][1].map(d => d.TD.party)\r\n\r\n    var map = partiesPresent.reduce((acc, e) => acc.set(e, (acc.get(e) || 0) + 1), new Map());\r\n\r\n    var partyAndValue = [...map.entries()];\r\n\r\n    var sortedByMajority = partyAndValue.sort((a,b) => b[1] - a[1])\r\n\r\n    if(sortedByMajority[0][1] === sortedByMajority[1][1]) {\r\n        return \"lightgrey\"\r\n    }\r\n\r\n    return partyColors[sortedByMajority[0][0]]\r\n}\r\n\r\n// for(let i = 0; i < boundaries.features.length; i++) {\r\n\r\n//     var color = colorOfPartyWithMajoritySeats(i)\r\n\r\n//     boundaries.features[i].properties.color = color\r\n\r\n\r\n// }\r\n\r\nif(justParty < 10) {\r\n\r\nfunction containsParty(i, party) {\r\n\r\n    var conTDs = storeTDsByConstituency()\r\n\r\n    var partiesPresent = conTDs[i][1].map(d => d.TD.party)\r\n\r\n    var map = partiesPresent.reduce((acc, e) => acc.set(e, (acc.get(e) || 0) + 1), new Map());\r\n\r\n    var partyAndValue = [...map.entries()];\r\n\r\n    var justParty = partyAndValue.map(d => d[0])\r\n\r\n    console.log(partyAndValue)\r\n\r\n    if(justParty.includes(party)) {\r\n\r\n        var tds = conTDs[i][1].map(function(d) {\r\n\r\n            if(d.TD.party == party) {\r\n                return d.TD\r\n            }\r\n           \r\n\r\n\r\n\r\n\r\n        }).filter(d => d != undefined)\r\n\r\n\r\n\r\n\r\nconsole.log(tds)\r\n\r\n\r\n        return [\"test\", tds[0].party, partyColors[party], tds.length]\r\n    } else {\r\n        return [\"test\",\"test\",\"lightgrey\", 0]\r\n    }\r\n\r\n}\r\n\r\nfor(let i = 0; i < boundaries.features.length; i++) {\r\n\r\n    var color = containsParty(i, justPartyArr[justParty])\r\n\r\n    boundaries.features[i].properties.color = color\r\n\r\n\r\n}\r\n\r\n} else if (justParty == 10) {\r\n\r\n    function colorOfPartyWithMajoritySeats(i) {\r\n\r\n    var conTDs = storeTDsByConstituency()\r\n\r\n    var partiesPresent = conTDs[i][1].map(d => d.TD.party)\r\n\r\n    var map = partiesPresent.reduce((acc, e) => acc.set(e, (acc.get(e) || 0) + 1), new Map());\r\n\r\n    var partyAndValue = [...map.entries()];\r\n\r\n    var sortedByMajority = partyAndValue.sort((a,b) => b[1] - a[1])\r\n\r\n\r\n    console.log(sortedByMajority[0][1])\r\n\r\n    if(sortedByMajority[0][1] === sortedByMajority[1][1]) {\r\n        return [\"Split\", \"Split\", \"lightgrey\", 0]\r\n    }\r\n\r\n    return [0, sortedByMajority[0][0], partyColors[sortedByMajority[0][0]], sortedByMajority[0][1]]\r\n}\r\n\r\nfor(let i = 0; i < boundaries.features.length; i++) {\r\n\r\n    var color = colorOfPartyWithMajoritySeats(i)\r\n\r\n    boundaries.features[i].properties.color = color\r\n\r\n}\r\n}\r\n\r\n\r\n\r\n\r\n\r\n    const colorValObj = d => d.properties.color\r\n\r\n    const heatColorFunc = d3.scaleSequential()\r\n        .interpolator( d3.interpolateRdYlBu)\r\n        .domain([d3.max(boundaries.features, d=>d.properties.color[3]),d3.min(boundaries.features, d=>d.properties.color[3])])\r\n\r\n\r\n\r\n\r\n\r\n    //colorValObj has party color at [2]. \r\n\r\n\r\n\r\n    const svg = d3.select(svgRef.current);\r\n\r\n    const projection = geoMercator().scale(5300)\r\n    // Center the Map in Colombia\r\n    .center([-7.6, 53.6921])\r\n    .translate([width / 2, height / 2]);\r\n\r\n    const pathGenerator = geoPath().projection(projection)\r\n\r\n    svg.selectAll(\".in-constituency\")\r\n        .data(boundaries.features)\r\n        .join(\"path\")\r\n        .attr(\"class\", \"in-constituency\")\r\n        .transition()\r\n        .duration(400)\r\n        .attr(\"fill\", function(d) {\r\n\r\n            if(colorFunc == 0) {\r\n               return colorValObj(d)[2] \r\n            } else if (colorFunc == 1) {\r\n                return heatColorFunc(d.properties.color[3])\r\n            }\r\n        })\r\n        .style(\"stroke\", \"darkgreen\")\r\n        .style(\"stroke-width\", \"0.5px\")\r\n        .attr(\"d\", feature => pathGenerator(feature))\r\n\r\n // .attr(\"fill\",d => colorTest(d)[2])\r\n\r\n        const tooltip = d3\r\n                .select('body')\r\n                .append('div')\r\n                .attr('class', 'd3-tooltip')\r\n                .style('position', 'absolute')\r\n                .style('z-index', '10')\r\n                .style('visibility', 'hidden')\r\n                .style('padding', '10px')\r\n                .style('background', 'rgba(0,0,0,0.6)')\r\n                .style('border-radius', '4px')\r\n                .style('color', '#fff')\r\n                .text('a simple tooltip');\r\n        \r\n\r\n\r\n        const hoverColor = \"#eec42d\"\r\n\r\n\r\n\r\n        d3.selectAll(\".in-constituency\")\r\n            .on('mouseover', function (d, i) {\r\n\r\n\r\n\r\n                    tooltip\r\n                    .html(\r\n                        `<div>${d.properties.CON_SEAT_} </div>\r\n                        <div>Party: ${colorValObj(d)[1]} </div>\r\n                        <div>Members Present: ${colorValObj(d)[3]} </div>\r\n                        </div>`\r\n                    )\r\n                        .style('visibility', 'visible');\r\n                        d3.select(this).transition().attr('fill', hoverColor);\r\n    \r\n\r\n\r\n\r\n\r\n\r\n                })\r\n\r\n\r\n\r\n                .on('mousemove', function () {\r\n                    tooltip\r\n                    .style('top', d3.event.pageY - 10 + 'px')\r\n                    .style('left', d3.event.pageX + 10 + 'px');\r\n                })\r\n                .on('mouseout', function () {\r\n                    tooltip.html(``).style('visibility', 'hidden');\r\n                    d3.select(this).transition()        .attr(\"fill\", function(d) {\r\n\r\n       \r\n                        if(colorFunc == 0) {\r\n                            return colorValObj(d)[2] \r\n                         } else if (colorFunc == 1) {\r\n                             return heatColorFunc(d.properties.color[3])\r\n                         }\r\n            \r\n                    });\r\n                });\r\n\r\n}, [boundaries, TDData, justParty, funcOption, colorFunc])\r\n\r\nif(!TDData) return null;\r\n\r\n    return (\r\n        <div className=\"featuredItem\" style={{textAlign: \"center\"}}>   \r\n        <Typography variant=\"h5\">Party In...</Typography>         \r\n        <FormControl className={classes.formControl}>\r\n              <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">Party</InputLabel>\r\n              <Select onChange={onChangeJustParty} style={{ color: \"white\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n                <ListSubheader>Party</ListSubheader>\r\n                <MenuItem value={0}>Sinn Féin</MenuItem>\r\n                <MenuItem value={1}>Fine Gael</MenuItem>  \r\n                <MenuItem value={2}>Fianna Fáil</MenuItem>\r\n                <MenuItem value={3}>Labour Party</MenuItem> \r\n                <MenuItem value={4}>Solidarity - People Before Profit</MenuItem>     \r\n                <MenuItem value={5}>Independent</MenuItem>         \r\n                <MenuItem value={6}>Green Party</MenuItem>  \r\n                <MenuItem value={7}>Social Democrats</MenuItem>  \r\n                <MenuItem value={8}>Aontú</MenuItem>  \r\n                <MenuItem value={9}>Independents 4 Change</MenuItem>\r\n                <MenuItem value={10}>Color of Party With Majority Seats</MenuItem>   \r\n              </Select>\r\n        </FormControl>\r\n        <FormControl className={classes.formControl}>\r\n              <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">Color Value</InputLabel>\r\n              <Select onChange={onChangeColorFunc} style={{ color: \"white\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n                <ListSubheader>In Constituency...</ListSubheader>\r\n                <MenuItem value={0}>Color by Party</MenuItem>\r\n                <MenuItem value={1}>Heatmap</MenuItem>  \r\n              </Select>\r\n        </FormControl>\r\n        {/* <FormControl className={classes.formControl}>\r\n              <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">Color Value</InputLabel>\r\n              <Select onChange={onChangeColorFunc} style={{ color: \"white\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n                <ListSubheader>In Constituency...</ListSubheader>\r\n                <MenuItem value={0}>Color by Party</MenuItem>\r\n                <MenuItem value={1}>Heatmap</MenuItem>  \r\n              </Select>\r\n        </FormControl> */}\r\n            <div className={\"scroll-svg-container\"}>\r\n            <svg ref={svgRef} height={height + margin.top + margin.bottom} width={width + margin.left + margin.right}></svg>\r\n        </div>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default PartyConstituencyMap\r\n","import React from 'react';\r\nimport useAutocomplete from '@material-ui/lab/useAutocomplete';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport styled from 'styled-components';\r\nimport { chamber } from '../../../Backend/rollCall';\r\n\r\nconst Label = styled('label')`\r\n  padding: 0 0 4px;\r\n  line-height: 1.5;\r\n  display: block;\r\n`;\r\n\r\nconst InputWrapper = styled('div')`\r\n  width: 300px;\r\n  color: black;\r\n  border: 1px solid #d9d9d9;\r\n  background-color: #fff;\r\n  border-radius: 4px;\r\n  padding: 1px;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n\r\n\r\n  &:hover {\r\n    border-color: #40a9ff;\r\n  }\r\n\r\n  &.focused {\r\n    border-color: #40a9ff;\r\n    box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);\r\n  }\r\n\r\n  & input {\r\n    color: black;\r\n    font-size: 14px;\r\n    height: 30px;\r\n    box-sizing: border-box;\r\n    padding: 4px 6px;\r\n    width: 0;\r\n    min-width: 30px;\r\n    flex-grow: 1;\r\n    border: 0;\r\n    margin: 0;\r\n    outline: 0;\r\n\r\n  }\r\n`;\r\n\r\nconst Tag = styled(({ label, onDelete, ...props }) => (\r\n  <div {...props}>\r\n    <span>{label}</span>\r\n    <CloseIcon onClick={onDelete} />\r\n  </div>\r\n))`\r\n  display: flex;\r\n  align-items: center;\r\n  height: 24px;\r\n  margin: 2px;\r\n  line-height: 22px;\r\n  background-color: #fafafa;\r\n  border: 1px solid #e8e8e8;\r\n  border-radius: 2px;\r\n  box-sizing: content-box;\r\n  padding: 0 4px 0 10px;\r\n  outline: 0;\r\n  overflow: hidden;\r\n\r\n  &:focus {\r\n    border-color: #40a9ff;\r\n    background-color: #e6f7ff;\r\n}\r\n\r\n  & span {\r\n    overflow: hidden;\r\n    white-space: nowrap;\r\n    text-overflow: ellipsis;\r\n  }\r\n\r\n  & svg {\r\n    font-size: 12px;\r\n    cursor: pointer;\r\n    padding: 4px;\r\n  }\r\n`;\r\n\r\nconst Listbox = styled('ul')`\r\n\r\n\r\n  width: 300px;\r\n  margin: 2px 0 0;\r\n  padding: 0;\r\n  position: absolute;\r\n  list-style: none;\r\n  background-color: white;\r\n  overflow: auto;\r\n  max-height: 250px;\r\n  border-radius: 4px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\r\n  z-index: 1;\r\n  color: black;\r\n\r\n  & li {\r\n\r\n    padding: 5px 12px;\r\n    display: flex;\r\n\r\n    & span {\r\n      flex-grow: 1;\r\n    }\r\n\r\n    & svg {\r\n      color: transparent;\r\n    }\r\n  }\r\n\r\n  & li[aria-selected='true'] {\r\n    background-color: #fafafa;\r\n    font-weight: 600;\r\n    color: black;\r\n    \r\n\r\n    & svg {\r\n      color: green;\r\n    }\r\n  }\r\n\r\n  & li[data-focus='true'] {\r\n    background-color: #e6f7ff;\r\n    cursor: pointer;\r\n    color: black;\r\n\r\n    & svg {\r\n        color: black\r\n    }\r\n  }\r\n`;\r\n\r\nexport default function CustomizedHook() {\r\n  const {\r\n    getRootProps,\r\n    getInputLabelProps,\r\n    getInputProps,\r\n    getTagProps,\r\n    getListboxProps,\r\n    getOptionProps,\r\n    groupedOptions,\r\n    value,\r\n    focused,\r\n    setAnchorEl,\r\n  } = useAutocomplete({\r\n    id: 'customized-hook-demo',\r\n    defaultValue: [top100Films[1]],\r\n    multiple: true,\r\n    options: chamber,\r\n    getOptionLabel: (option) => option.name,\r\n  });\r\n\r\n\r\n\r\n\r\n\r\n\r\n  return (\r\n      <div>\r\n        <div {...getRootProps()}>\r\n          <Label {...getInputLabelProps()}>Filter</Label>\r\n          <InputWrapper ref={setAnchorEl} className={focused ? 'focused' : ''}>\r\n\r\n        \r\n            {value.map((option, index) => (\r\n              <Tag label={option.name} {...getTagProps({ index })} />\r\n            ))}\r\n            \r\n            <input {...getInputProps()} />\r\n          </InputWrapper>\r\n        </div>\r\n        {groupedOptions.length > 0 ? (\r\n          <Listbox {...getListboxProps()}>\r\n            {groupedOptions.map((option, index) => (\r\n              <li fill={option.partyColor} {...getOptionProps({ option, index })}>\r\n                <span >{option.name} <span style={{borderRadius: \"50%\", backgroundColor: option.partyColor, height:\"5px\", width:\"5px\", display: \"inline-block\"}}></span></span>\r\n                <CheckIcon fontSize=\"small\" />\r\n              </li>\r\n            ))}\r\n          </Listbox>\r\n        ) : null}\r\n      </div>\r\n\r\n  );\r\n}\r\n\r\n// Top 100 films as rated by IMDb users. http://www.imdb.com/chart/top\r\nconst top100Films = [\r\n  { title: 'The Shawshank Redemption', year: 1994 },\r\n  { title: 'The Godfather', year: 1972 },\r\n  { title: 'The Godfather: Part II', year: 1974 },\r\n  { title: 'The Dark Knight', year: 2008 },\r\n  { title: '12 Angry Men', year: 1957 },\r\n  { title: \"Schindler's List\", year: 1993 },\r\n  { title: 'Pulp Fiction', year: 1994 },\r\n  { title: 'The Lord of the Rings: The Return of the King', year: 2003 },\r\n  { title: 'The Good, the Bad and the Ugly', year: 1966 },\r\n  { title: 'Fight Club', year: 1999 },\r\n  { title: 'The Lord of the Rings: The Fellowship of the Ring', year: 2001 },\r\n  { title: 'Star Wars: Episode V - The Empire Strikes Back', year: 1980 },\r\n  { title: 'Forrest Gump', year: 1994 },\r\n  { title: 'Inception', year: 2010 },\r\n  { title: 'The Lord of the Rings: The Two Towers', year: 2002 },\r\n  { title: \"One Flew Over the Cuckoo's Nest\", year: 1975 },\r\n  { title: 'Goodfellas', year: 1990 },\r\n  { title: 'The Matrix', year: 1999 },\r\n  { title: 'Seven Samurai', year: 1954 },\r\n  { title: 'Star Wars: Episode IV - A New Hope', year: 1977 },\r\n  { title: 'City of God', year: 2002 },\r\n  { title: 'Se7en', year: 1995 },\r\n  { title: 'The Silence of the Lambs', year: 1991 },\r\n  { title: \"It's a Wonderful Life\", year: 1946 },\r\n  { title: 'Life Is Beautiful', year: 1997 },\r\n  { title: 'The Usual Suspects', year: 1995 },\r\n  { title: 'Léon: The Professional', year: 1994 },\r\n  { title: 'Spirited Away', year: 2001 },\r\n  { title: 'Saving Private Ryan', year: 1998 },\r\n  { title: 'Once Upon a Time in the West', year: 1968 },\r\n  { title: 'American History X', year: 1998 },\r\n  { title: 'Interstellar', year: 2014 },\r\n  { title: 'Casablanca', year: 1942 },\r\n  { title: 'City Lights', year: 1931 },\r\n  { title: 'Psycho', year: 1960 },\r\n  { title: 'The Green Mile', year: 1999 },\r\n  { title: 'The Intouchables', year: 2011 },\r\n  { title: 'Modern Times', year: 1936 },\r\n  { title: 'Raiders of the Lost Ark', year: 1981 },\r\n  { title: 'Rear Window', year: 1954 },\r\n  { title: 'The Pianist', year: 2002 },\r\n  { title: 'The Departed', year: 2006 },\r\n  { title: 'Terminator 2: Judgment Day', year: 1991 },\r\n  { title: 'Back to the Future', year: 1985 },\r\n  { title: 'Whiplash', year: 2014 },\r\n  { title: 'Gladiator', year: 2000 },\r\n  { title: 'Memento', year: 2000 },\r\n  { title: 'The Prestige', year: 2006 },\r\n  { title: 'The Lion King', year: 1994 },\r\n  { title: 'Apocalypse Now', year: 1979 },\r\n  { title: 'Alien', year: 1979 },\r\n  { title: 'Sunset Boulevard', year: 1950 },\r\n  { title: 'Dr. Strangelove or: How I Learned to Stop Worrying and Love the Bomb', year: 1964 },\r\n  { title: 'The Great Dictator', year: 1940 },\r\n  { title: 'Cinema Paradiso', year: 1988 },\r\n  { title: 'The Lives of Others', year: 2006 },\r\n  { title: 'Grave of the Fireflies', year: 1988 },\r\n  { title: 'Paths of Glory', year: 1957 },\r\n  { title: 'Django Unchained', year: 2012 },\r\n  { title: 'The Shining', year: 1980 },\r\n  { title: 'WALL·E', year: 2008 },\r\n  { title: 'American Beauty', year: 1999 },\r\n  { title: 'The Dark Knight Rises', year: 2012 },\r\n  { title: 'Princess Mononoke', year: 1997 },\r\n  { title: 'Aliens', year: 1986 },\r\n  { title: 'Oldboy', year: 2003 },\r\n  { title: 'Once Upon a Time in America', year: 1984 },\r\n  { title: 'Witness for the Prosecution', year: 1957 },\r\n  { title: 'Das Boot', year: 1981 },\r\n  { title: 'Citizen Kane', year: 1941 },\r\n  { title: 'North by Northwest', year: 1959 },\r\n  { title: 'Vertigo', year: 1958 },\r\n  { title: 'Star Wars: Episode VI - Return of the Jedi', year: 1983 },\r\n  { title: 'Reservoir Dogs', year: 1992 },\r\n  { title: 'Braveheart', year: 1995 },\r\n  { title: 'M', year: 1931 },\r\n  { title: 'Requiem for a Dream', year: 2000 },\r\n  { title: 'Amélie', year: 2001 },\r\n  { title: 'A Clockwork Orange', year: 1971 },\r\n  { title: 'Like Stars on Earth', year: 2007 },\r\n  { title: 'Taxi Driver', year: 1976 },\r\n  { title: 'Lawrence of Arabia', year: 1962 },\r\n  { title: 'Double Indemnity', year: 1944 },\r\n  { title: 'Eternal Sunshine of the Spotless Mind', year: 2004 },\r\n  { title: 'Amadeus', year: 1984 },\r\n  { title: 'To Kill a Mockingbird', year: 1962 },\r\n  { title: 'Toy Story 3', year: 2010 },\r\n  { title: 'Logan', year: 2017 },\r\n  { title: 'Full Metal Jacket', year: 1987 },\r\n  { title: 'Dangal', year: 2016 },\r\n  { title: 'The Sting', year: 1973 },\r\n  { title: '2001: A Space Odyssey', year: 1968 },\r\n  { title: \"Singin' in the Rain\", year: 1952 },\r\n  { title: 'Toy Story', year: 1995 },\r\n  { title: 'Bicycle Thieves', year: 1948 },\r\n  { title: 'The Kid', year: 1921 },\r\n  { title: 'Inglourious Basterds', year: 2009 },\r\n  { title: 'Snatch', year: 2000 },\r\n  { title: '3 Idiots', year: 2009 },\r\n  { title: 'Monty Python and the Holy Grail', year: 1975 },\r\n];\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport ListSubheader from '@material-ui/core/ListSubheader';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport { options } from './AxisUtils/AxisUtils';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    icon: {\r\n      color: \"white\"\r\n  },\r\n\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n    \r\n  }\r\n\r\n}));\r\n\r\nexport default function GroupedSelect() {\r\n\r\n  \r\n  const classes = useStyles();\r\n\r\n  const onChangeX = (event, child) => {\r\n    console.log('x:' + event.target.value);\r\n    console.log(child);\r\n  };\r\n\r\n  const onChangeY = (event, child) => {\r\n    console.log('y:' + event.target.value);\r\n    console.log(child);\r\n  };\r\n\r\n\r\n\r\n\r\n  return (\r\n    <div>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">X-Value</InputLabel>\r\n        <Select  onChange={onChangeX} style={{ color: \"white\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n          <MenuItem value=\"\">\r\n            <em>None</em>\r\n          </MenuItem>\r\n          <ListSubheader>Twitter Data</ListSubheader>\r\n          <MenuItem value={1}>Total Followers</MenuItem>\r\n          <MenuItem value={2}>Total Retweets</MenuItem>\r\n          <MenuItem value={3}>Avg. Sentimenmt</MenuItem>\r\n          <MenuItem value={4}>Activty</MenuItem>\r\n          <MenuItem value={5}>Connectivity</MenuItem>\r\n          <ListSubheader>Parliamentary Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={6}>Yes Votes</MenuItem>\r\n          <MenuItem value={7}>No Votes</MenuItem>\r\n          <MenuItem value={8}>Motions Tabled</MenuItem>\r\n          <MenuItem value={9}>Questions Asked</MenuItem>\r\n          <ListSubheader>News Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={10}>News Mentions</MenuItem>\r\n          <ListSubheader>Electoral Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={11}>Votes in last election</MenuItem>\r\n          <MenuItem value={12}>Opinion polls</MenuItem>\r\n        </Select>\r\n      </FormControl>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">Y-Value</InputLabel>\r\n        <Select onChange={onChangeY} style={{ color: \"white\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n          <MenuItem value=\"\">\r\n            <em>None</em>\r\n          </MenuItem>\r\n          <ListSubheader>Twitter Data</ListSubheader>\r\n          <MenuItem value={1}>Total Followers</MenuItem>\r\n          <MenuItem value={2}>Total Retweets</MenuItem>\r\n          <MenuItem value={3}>Avg. Sentimenmt</MenuItem>\r\n          <MenuItem value={4}>Activty</MenuItem>\r\n          <MenuItem value={5}>Connectivity</MenuItem>\r\n          <ListSubheader>Parliamentary Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={6}>Yes Votes</MenuItem>\r\n          <MenuItem value={7}>No Votes</MenuItem>\r\n          <MenuItem value={8}>Motions Tabled</MenuItem>\r\n          <MenuItem value={9}>Questions Asked</MenuItem>\r\n          <ListSubheader>News Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={10}>News Mentions</MenuItem>\r\n          <ListSubheader>Electoral Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={11}>Votes in last election</MenuItem>\r\n          <MenuItem value={12}>Opinion polls</MenuItem>\r\n        </Select>\r\n      </FormControl>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">Circle Radius</InputLabel>\r\n        <Select style={{ color: \"white\"}} classes={{icon:classes.icon}}defaultValue=\"\" id=\"grouped-select\">\r\n          <MenuItem value=\"\">\r\n            <em>None</em>\r\n          </MenuItem>\r\n          <ListSubheader>Twitter Data</ListSubheader>\r\n          <MenuItem value={1}>Total Followers</MenuItem>\r\n          <MenuItem value={2}>Total Retweets</MenuItem>\r\n          <MenuItem value={3}>Avg. Sentimenmt</MenuItem>\r\n          <MenuItem value={4}>Activty</MenuItem>\r\n          <MenuItem value={5}>Connectivity</MenuItem>\r\n          <ListSubheader>Parliamentary Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={6}>Yes Votes</MenuItem>\r\n          <MenuItem value={7}>No Votes</MenuItem>\r\n          <MenuItem value={8}>Motions Tabled</MenuItem>\r\n          <MenuItem value={9}>Questions Asked</MenuItem>\r\n          <ListSubheader>News Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={10}>News Mentions</MenuItem>\r\n          <ListSubheader>Electoral Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={11}>Votes in last election</MenuItem>\r\n          <MenuItem value={12}>Opinion polls</MenuItem>\r\n\r\n        </Select>\r\n      </FormControl>\r\n    </div>\r\n  );\r\n}","import React from 'react'\r\nimport { useRef, useEffect, useState} from 'react'\r\nimport * as d3 from 'd3'\r\nimport { chamber } from '../../../Backend/rollCall'\r\nimport { axisBottom, axisLeft, svg } from 'd3'\r\nimport { current } from '../../../Backend/rollCall'\r\nimport { Typography, Checkbox, Select, ListItem, FormControlLabel, FormGroup } from '@material-ui/core'\r\nimport CustomizedHook from './SearchSelectBox'\r\nimport GroupedSelect from './GroupedSelectBox'\r\nimport './scatterplot.css'\r\nimport { MenuItem, ListSubheader, FormControl, InputLabel, makeStyles, List, ListItemText } from '@material-ui/core'\r\nimport axios from 'axios'\r\nimport { FormatAlignCenter, FormatListNumberedRtlOutlined } from '@material-ui/icons'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n        icon: {\r\n          color: \"white\"\r\n      },\r\n    \r\n      formControl: {\r\n        margin: theme.spacing(1),\r\n        minWidth: 120,   \r\n      }\r\n    \r\n}));\r\n\r\n\r\nconst provinceColors = [\"#426ff5\", \"yellow\", \"green\", \"red\", \"lightblue\"]\r\n\r\nconst partyColors = {\r\n\"Sinn Féin\": \"#326760\", \r\n\"Fine Gael\": \"#6699FF\", \r\n\"Fianna Fáil\": \"#66BB66\",\r\n\"Labour Party\": \"#CC0000\",\r\n\"Solidarity - People Before Profit\": \"#8E2420\",\r\n\"Independent\": \"white\",\r\n\"Green Party\": \"#99CC33\",\r\n\"Social Democrats\": \"#752F8B\",\r\n\"Aontú\": \"#44532A\",\r\n\"Independents 4 Change\": \"grey\"}\r\n\r\nconst provinces = [\r\n\r\n  [\r\n\"Meath East\",\r\n\"Meath West\",\r\n\"Longford Westmeath\",\r\n\"Louth\",\r\n\"Kildare North\",\r\n\"Kildare South\",\r\n\"Laois Offaly\",\r\n\"Carlow Kilkenny\",\r\n\"Wicklow\", \r\n\"Waterford\",\r\n\"Wexford\"\r\n], \r\n[\r\n\"Donegal\",\r\n\"Cavan Monaghan\"\r\n], \r\n\r\n[\r\n  \"Sligo Leitrim\",\r\n  \"Galway West\",\r\n  \"Mayo\",\r\n  \"Roscommon Galway\",\r\n  \"Galway East\"\r\n]\r\n, \r\n\r\n[\r\n  \"Kerry\",\r\n  \"Limerick City\",\r\n  \"Limerick County\",\r\n  \"Tipperary\",\r\n  \"Clare\",\r\n  \"Cork South West\",\r\n  \"Cork South Central\",\r\n  \"Cork North West\",\r\n  \"Cork North Central\",\r\n  \"Cork East\"\r\n]\r\n, \r\n[\r\n\"Dublin Bay North\",\r\n\"Dublin Bay South\",\r\n\"Dublin Central\",\r\n\"Dublin Fingal\",\r\n\"Dublin Mid West\",\r\n\"Dublin North West\",\r\n\"Dublin Rathdown\",\r\n\"Dublin South Central\",\r\n\"Dublin South West\",\r\n\"Dublin West\",\r\n\"Dún Laoghaire\"\r\n]\r\n]\r\n\r\n\r\n\r\nconst ScatterplotConstituency = ({data}) => {\r\n\r\n\r\n\r\n    const [TDData, setTDData] = useState(null)\r\n    // const [provinceSelect, setProvinceSelect] = useState([\"Leinster\", \"Munster\", \"Connacht\", \"Ulster\", \"Dublin\"])\r\n    const [filteredTDData, setFilteredTDData] = useState(null)\r\n    const [xOption, setXOption] = useState(0)\r\n    const [yOption, setYOption] = useState(1)\r\n    const [rOption, setROption] = useState(0)\r\n    \r\n\r\n\r\n \r\n    const noOfSeats = (d) => {\r\n\r\n      return d.TDs.length\r\n\r\n    } \r\n    const totalFollowers = (d) => {\r\n\r\n      var justTDsOnTwitter = d.TDs.filter(d => d.followerData != undefined).filter(d => d.followerData.length != 0)\r\n\r\n      var followersOfEach = justTDsOnTwitter.map(d => d.followerData[3].followers)\r\n\r\n      var total = followersOfEach.reduce((a, b) => a+ b)\r\n\r\n      return total\r\n\r\n    } \r\n    const averageFollowers = (d) => {\r\n\r\n      var justTDsOnTwitter = d.TDs.filter(d => d.followerData != undefined).filter(d => d.followerData.length != 0)\r\n\r\n      var followersOfEach = justTDsOnTwitter.map(d => d.followerData[3].followers)\r\n\r\n      var total = followersOfEach.reduce((a, b) => a + b)\r\n\r\n      var average = total / d.TDs.length\r\n\r\n      return average\r\n\r\n    }\r\n    const totalRetweets = (d) => {\r\n\r\n      var justTDsOnTwitter = d.TDs.filter(d => d.retweetData != undefined).filter(d => d.retweetData.length != 0)\r\n\r\n      var retweetsOfEach = justTDsOnTwitter.map(d => d.retweetData[3].retweets)\r\n\r\n      var total = retweetsOfEach.reduce((a, b) => a+ b)\r\n\r\n      return total\r\n\r\n\r\n    }\r\n    const averageRetweets = (d) => {\r\n\r\n    var justTDsOnTwitter = d.TDs.filter(d => d.retweetData != undefined).filter(d => d.retweetData.length != 0)\r\n\r\n    var retweetsOfEach = justTDsOnTwitter.map(d => d.retweetData[3].retweets)\r\n\r\n    var total = retweetsOfEach.reduce((a, b) => a + b)\r\n\r\n    var average = total / d.TDs.length\r\n\r\n\r\n    return average\r\n    }  \r\n    const totalOriginalTweets = (d) => {\r\n\r\n      var justTDsOnTwitter = d.TDs.filter(d => d.retweetData != undefined).filter(d => d.retweetData.length != 0)\r\n  \r\n      var retweetsOfEach = justTDsOnTwitter.map(d => d.retweetData[3].original_tweets)\r\n  \r\n      var total = retweetsOfEach.reduce((a, b) => a + b)\r\n  \r\n      return total\r\n    }\r\n    const averageOriginalTweets = (d) => {\r\n\r\n      var justTDsOnTwitter = d.TDs.filter(d => d.retweetData != undefined).filter(d => d.retweetData.length != 0)\r\n  \r\n      var retweetsOfEach = justTDsOnTwitter.map(d => d.retweetData[3].original_tweets)\r\n  \r\n      var total = retweetsOfEach.reduce((a, b) => a + b)\r\n  \r\n      return total\r\n    }\r\n    const constituencyFollowerRetweetRatio = (d) => {\r\n\r\n      var ratio = totalRetweets(d) / totalFollowers(d)\r\n\r\n      return ratio\r\n    }\r\n    const averageFollowerRetweetRatio = (d) => {\r\n\r\n      var ratio = averageRetweets(d) / averageFollowers(d)\r\n\r\n      return ratio\r\n    }\r\n    const constituencyRetweetOriginalTweetsRatio = (d) => {\r\n\r\n      var ratio = totalRetweets(d) / totalOriginalTweets(d)\r\n\r\n      return ratio\r\n    }\r\n    const averageRetweetOriginalTweetsRatio = (d) => {\r\n\r\n      var ratio = averageRetweets(d) / averageOriginalTweets(d)\r\n\r\n      return ratio\r\n    }\r\n    const averagePolarity = (d) => {\r\n\r\n      var justTDsOnTwitter = d.TDs.filter(d => d.sentimentData != undefined).filter(d => d.sentimentData.length != 0)\r\n\r\n      var polarityOfEach = justTDsOnTwitter.map(d => d.sentimentData[3].polarity)\r\n\r\n      var total = polarityOfEach.reduce((a, b) => a + b)\r\n\r\n      var average = total / d.TDs.length\r\n\r\n      return average\r\n\r\n    }\r\n    const averageSubjectivity = (d) => {\r\n\r\n      var justTDsOnTwitter = d.TDs.filter(d => d.sentimentData != undefined).filter(d => d.sentimentData.length != 0)\r\n\r\n      var subjectivityOfEach = justTDsOnTwitter.map(d => d.sentimentData[3].subjectivity)\r\n\r\n      var total = subjectivityOfEach.reduce((a, b) => a + b)\r\n\r\n      var average = total / d.TDs.length\r\n\r\n      return average\r\n\r\n    }\r\n    const totalAbsences = (d) => {\r\n\r\n      var justTDsOnTwitter = d.TDs.filter(d => d.voteData != undefined).filter(d => d.voteData.length != 0)\r\n\r\n      var absencesOfEach = justTDsOnTwitter.map(d => d.voteData[0].absences)\r\n\r\n      var total = absencesOfEach.reduce((a, b) => a + b)\r\n\r\n      return total\r\n\r\n    }\r\n    const averageAbsences = (d) => {\r\n\r\n      var justTDsOnTwitter = d.TDs.filter(d => d.voteData != undefined).filter(d => d.voteData.length != 0)\r\n\r\n      var absencesOfEach = justTDsOnTwitter.map(d => d.voteData[0].absences)\r\n\r\n      var total = absencesOfEach.reduce((a, b) => a + b)\r\n\r\n      var average = total / d.TDs.length\r\n\r\n      return average\r\n\r\n    }\r\n    const totalPresences = (d) => {\r\n\r\n      var justTDsOnTwitter = d.TDs.filter(d => d.voteData != undefined).filter(d => d.voteData.length != 0)\r\n\r\n      var absencesOfEach = justTDsOnTwitter.map(d => d.voteData[0].totalVotes)\r\n\r\n      var total = absencesOfEach.reduce((a, b) => a + b)\r\n\r\n      return total\r\n\r\n    }\r\n    const averagePresences = (d) => {\r\n\r\n      var justTDsOnTwitter = d.TDs.filter(d => d.voteData != undefined).filter(d => d.voteData.length != 0)\r\n\r\n      var absencesOfEach = justTDsOnTwitter.map(d => d.voteData[0].totalVotes)\r\n\r\n      var total = absencesOfEach.reduce((a, b) => a + b)\r\n\r\n      var average = total / d.TDs.length\r\n\r\n      return average\r\n\r\n    }\r\n    const totalTimesOnWinningSide = (d) => {\r\n\r\n      var justTDsOnTwitter = d.TDs.filter(d => d.voteData != undefined).filter(d => d.voteData.length != 0)\r\n\r\n      var absencesOfEach = justTDsOnTwitter.map(d => d.voteData[0].onWinningSide)\r\n\r\n      var total = absencesOfEach.reduce((a, b) => a + b)\r\n\r\n      return total\r\n\r\n    }\r\n    const totalTimesOnLosingSide = (d) => {\r\n\r\n      var justTDsOnTwitter = d.TDs.filter(d => d.voteData != undefined).filter(d => d.voteData.length != 0)\r\n\r\n      var absencesOfEach = justTDsOnTwitter.map(d => d.voteData[0].onLosingSide)\r\n\r\n      var total = absencesOfEach.reduce((a, b) => a + b)\r\n\r\n      return total\r\n\r\n    }    \r\n    const averageTimesOnWinningSide = (d) => {\r\n\r\n      var justTDsOnTwitter = d.TDs.filter(d => d.voteData != undefined).filter(d => d.voteData.length != 0)\r\n\r\n      var absencesOfEach = justTDsOnTwitter.map(d => d.voteData[0].onWinningSide)\r\n\r\n      var total = absencesOfEach.reduce((a, b) => a + b)\r\n\r\n      var average = total / d.TDs.length\r\n\r\n      return average\r\n\r\n    }\r\n    const averageTimesOnLosingSide = (d) => {\r\n\r\n      var justTDsOnTwitter = d.TDs.filter(d => d.voteData != undefined).filter(d => d.voteData.length != 0)\r\n\r\n      var absencesOfEach = justTDsOnTwitter.map(d => d.voteData[0].onLosingSide)\r\n\r\n      var total = absencesOfEach.reduce((a, b) => a + b)\r\n\r\n      var average = total / d.TDs.length\r\n\r\n      return average\r\n\r\n    }\r\n    const totalQuestionsAsked = (d) => {\r\n\r\n      var justTDsOnTwitter = d.TDs.filter(d => d.writtenQuestions != undefined).filter(d => d.writtenQuestions[0].writtenQuestions.to != undefined)\r\n\r\n      const sumValues = obj => Object.values(obj).reduce((a, b) => a + b)\r\n\r\n      var questionsOfEach = justTDsOnTwitter.map(d => sumValues(d.writtenQuestions[0].writtenQuestions.to))\r\n\r\n      var total = questionsOfEach.reduce((a, b) => a + b)\r\n\r\n      return total\r\n\r\n    }\r\n    const averageQuestionsAsked = (d) => {\r\n\r\n      var justTDsOnTwitter = d.TDs.filter(d => d.writtenQuestions != undefined).filter(d => d.writtenQuestions[0].writtenQuestions.to != undefined)\r\n\r\n      const sumValues = obj => Object.values(obj).reduce((a, b) => a + b)\r\n\r\n      var questionsOfEach = justTDsOnTwitter.map(d => sumValues(d.writtenQuestions[0].writtenQuestions.to))\r\n\r\n      var total = questionsOfEach.reduce((a, b) => a + b)\r\n\r\n      var average = total / d.TDs.length\r\n\r\n      return average\r\n\r\n    }\r\n\r\n\r\n    \r\n\r\n    \r\n    const optionsFunctions = [\r\n      noOfSeats,\r\n      totalFollowers, \r\n      averageFollowers, \r\n      totalRetweets, \r\n      averageRetweets, \r\n      totalOriginalTweets, \r\n      averageOriginalTweets, \r\n      constituencyFollowerRetweetRatio, \r\n      averageFollowerRetweetRatio,\r\n      constituencyRetweetOriginalTweetsRatio,\r\n      averageRetweetOriginalTweetsRatio,\r\n      averagePolarity,\r\n      averageSubjectivity,\r\n      totalAbsences,\r\n      averageAbsences,\r\n      totalPresences,\r\n      averagePresences,\r\n      totalTimesOnWinningSide,\r\n      totalTimesOnLosingSide,\r\n      averageTimesOnWinningSide,\r\n      averageTimesOnLosingSide,\r\n      totalQuestionsAsked,\r\n      averageQuestionsAsked\r\n    ]\r\n\r\n\r\n\r\n    const xValue = optionsFunctions[xOption]\r\n    const yValue = optionsFunctions[yOption]\r\n    const rValue = optionsFunctions[rOption]\r\n\r\n    useEffect(() => {\r\n\r\n        setTDData(data)\r\n\r\n    }, [])\r\n\r\n  const wrapperRef = useRef()\r\n  const svgRef = useRef()\r\n\r\n    const options = [\r\n\r\n        \"Followers\", \"Retweets\", \"Original Tweets\", \"Polarity\", \"Subjectivity\", \"Follower Engagement Rate\", \"Retweets Per Original Tweet\", \"Avg. Original Tweets (Activity)\", \"Avg. Followers\", \"Avg. Retweets\", \"TDs on Twitter\"\r\n        ]\r\n\r\n    const optionsExplanation = [\r\n\r\n      \"Total Followers of party.\",\r\n      \"Total Retweets received by party over last week.\",\r\n      \"Number of original tweets (so excl. retweets) a TD has posted over last week.\",\r\n      \"Average sentiment of a TD's tweets over the past week, value lies between [-1, 1] with 1 being most positive.\",\r\n      \"Average subjectivity of a TD's tweets over the past week, value lies between [0, 1] with 1 being most subjective.\",\r\n      \"Total Followers divided by Total Retweets received over the last week.\",\r\n      \"Total Retweets divided by Total Original Tweets over the last week.\",\r\n      \"How many Original Tweets the average TD posts in a week.\",\r\n      \"How many followers the average TD has.\",\r\n      \"How many retweets the average TD gets in a week.\",\r\n      \"How many TDs a party has on Twitter.\"\r\n\r\n    ]\r\n\r\n\r\n  \r\n    const classes = useStyles();\r\n\r\n//     const handleChange = (event) => {\r\n\r\n//           const holder = partySelect\r\n\r\n//           const tester = event.target.value\r\n\r\n//             if(partySelect.includes(tester)) {\r\n\r\n//               for(let i = 0; i < holder.length; i++) {\r\n//                 if(holder[i] === tester) {\r\n//                   holder.splice(i, 1)\r\n//                   setPartySelect(holder)            \r\n//                 }\r\n//               }\r\n//             } else {\r\n//               holder.push(tester)\r\n//               setPartySelect(holder)\r\n//             }\r\n\r\n//             const selected = TDDataScatter;\r\n//             const inbetween = selected;\r\n\r\n//             const test = inbetween.filter(d => partySelect.includes(d.party))         \r\n          \r\n//             setFilteredTDData(test)\r\n\r\n//             console.log(TDDataScatter)\r\n                \r\n\r\n// //             }\r\n            \r\n//       }\r\n\r\n    const onChangeX = (event, child) => {\r\n            setXOption(event.target.value)\r\n            console.log('x:' + event.target.value);\r\n            console.log(child);\r\n    };\r\n\r\n    const onChangeY = (event, child) => {\r\n            setYOption(event.target.value)\r\n            console.log('y:' + event.target.value);\r\n            console.log(child);\r\n    };\r\n\r\n    const onChangeR = (event, child) => {\r\n        setROption(event.target.value)\r\n        console.log('r:' + event.target.value);\r\n        console.log(child);\r\n};\r\n\r\n    const margin = {top: 20, right: 20, bottom: 20, left: 50}\r\n    \r\n    const height = 620 - margin.left - margin.right;\r\n    const width = 820 - margin.top - margin.bottom;        \r\n\r\n    useEffect(() => {\r\n\r\n      if(!TDData) return null;\r\n\r\n\r\n    function storeTDsByConstituency() {\r\n\r\n\r\n      var TDConstituencyObj = TDData.map(function(d) {\r\n  \r\n  \r\n          var indexOfLastSlash = d.member_constituency_uri[0].lastIndexOf('/') + 1;      \r\n          var clean = d.member_constituency_uri[0].substr(indexOfLastSlash).replaceAll('-', ' ');\r\n          return {TD: d, constituencyName: clean}\r\n  \r\n      })  \r\n\r\n      var constituenciesArr = TDConstituencyObj.map(d => d.constituencyName)\r\n\r\n      let unique = [...new Set(constituenciesArr)]\r\n\r\n\r\n      console.log(unique)\r\n\r\n      var TDSSortedIntoCon = []\r\n\r\n\r\n      for(let i = 0; i < unique.length; i++) {\r\n\r\n        var holder = [];\r\n\r\n        var provinceColor = undefined\r\n\r\n        for(let j = 0; j < TDConstituencyObj.length; j++) {\r\n\r\n          if(TDConstituencyObj[j].constituencyName == unique[i]) {\r\n            for(let k = 0; k < provinces.length; k++) {\r\n              if(provinces[k].includes(TDConstituencyObj[j].constituencyName)) {\r\n                provinceColor = provinceColors[k]\r\n              }\r\n              \r\n\r\n            }\r\n            holder.push(TDConstituencyObj[j].TD)\r\n          }\r\n          \r\n        }\r\n       \r\n      TDSSortedIntoCon.push({constituency: unique[i], TDs: holder, provinceColor: provinceColor})\r\n\r\n\r\n      }\r\n\r\n\r\n      \r\n      return TDSSortedIntoCon\r\n  \r\n  }\r\n\r\n\r\n  console.log(storeTDsByConstituency())\r\n\r\n\r\n  const TDsStoredByConstituency = storeTDsByConstituency()\r\n\r\n      const svg = d3.select(svgRef.current)\r\n\r\n      const xScale = d3.scaleLinear()\r\n                      .range([0, width])\r\n                      .domain(d3.extent(TDsStoredByConstituency, xValue))\r\n\r\n\r\n      const yScale = d3.scaleLinear()\r\n                      .range([height, 0])\r\n                      .domain(d3.extent(TDsStoredByConstituency, yValue))\r\n                      \r\n      const rScale = d3.scaleLinear()\r\n                      .range([5, 20])\r\n                      .domain(d3.extent(TDsStoredByConstituency, rValue))\r\n\r\n      const provinceColor = d => d.provinceColor\r\n      const name = d => d.name\r\n\r\n\r\n      const xAxis = axisBottom(xScale);        \r\n        \r\n        svg.select(\".x-axis\")\r\n            .attr(\"transform\", \"translate(0,\" + height + \")\")\r\n            .transition()\r\n            .duration(500)\r\n            .call(xAxis)\r\n\r\n\r\n        const yAxis = axisLeft(yScale);\r\n\r\n        svg.select(\".y-axis\")\r\n        .attr(\"transform\", \"translate(0, 0)\")\r\n            .transition()\r\n            .duration(500)\r\n            .call(yAxis)\r\n\r\n            const tooltip = d3\r\n            .select('body')\r\n            .append('div')\r\n            .attr('class', 'd3-tooltip')\r\n            .style('position', 'absolute')\r\n            .style('z-index', '10')\r\n            .style('visibility', 'hidden')\r\n            .style('padding', '10px')\r\n            .style('background', 'rgba(0,0,0,0.6)')\r\n            .style('border-radius', '4px')\r\n            .style('color', '#fff')\r\n            .text('a simple tooltip');\r\n\r\n            const hoverColor = \"#eec42d\"\r\n       \r\n        var circles = d3.select(\"#container-scatter-party\")\r\n                        .selectAll(\".node\")\r\n                        .data(TDsStoredByConstituency)\r\n                        .join(\"circle\")\r\n                        .attr(\"class\", \"node\")\r\n                        .attr(\"fill\", provinceColor)\r\n                        .attr('fill-opacity', 0.75)\r\n                        .attr(\"name\", name)\r\n\r\n            circles.transition()\r\n                    .duration(500)\r\n                    .attr(\"cx\", d => xScale(xValue(d)))\r\n                    .attr(\"cy\", d => yScale(yValue(d)))\r\n                    .attr(\"r\", d => rScale(rValue(d)))\r\n\r\n            circles.on('mouseover', function (d, i) {\r\n            tooltip\r\n            .html(\r\n                `<div>Constituency: ${d.constituency}</div><div>x: ${xValue(d).toLocaleString()}: </div><div>y: : ${yValue(d).toLocaleString()}</div><div>r: ${rValue(d)}: </div>`\r\n            )\r\n                .style('visibility', 'visible');\r\n                d3.select(this).transition().attr('fill', hoverColor);\r\n            })\r\n            .on('mousemove', function () {\r\n                tooltip\r\n                .style('top', d3.event.pageY - 10 + 'px')\r\n                .style('left', d3.event.pageX + 10 + 'px');\r\n            })\r\n            .on('mouseout', function () {\r\n                tooltip.html(``).style('visibility', 'hidden');\r\n                d3.select(this).transition().attr('fill', provinceColor);\r\n            }); \r\n\r\n\r\n    }, [TDData, xOption, yOption, rOption])\r\n\r\n    \r\n    if (!TDData) return null;\r\n\r\n    return (\r\n\r\n        <div className={\"featuredItem\"} style={{textAlign: \"center\", margin: \"10px\", padding: \"10px\"}}>\r\n        <Typography style={{marginBottom: 20}} align=\"center\" variant=\"h5\">Interactive Scatter Plot</Typography>\r\n        \r\n            <div>\r\n                {/* <CustomizedHook/> */}\r\n                <div>\r\n\r\n                    \r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">X-Value</InputLabel>\r\n        <Select onChange={onChangeX} style={{ color: \"white\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n        <ListSubheader>Twitter Data</ListSubheader>\r\n          <MenuItem value={0}>No. Of Seats</MenuItem>\r\n          <MenuItem value={1}>Total Followers</MenuItem>\r\n          <MenuItem value={2}>Avg. Followers</MenuItem>\r\n          <MenuItem value={3}>Total Retweets</MenuItem>\r\n          <MenuItem value={4}>Avg. Retweets</MenuItem>\r\n          <MenuItem value={5}>Total Original Tweets</MenuItem>\r\n          <MenuItem value={6}>Avg. Original Tweets</MenuItem>\r\n          <MenuItem value={7}>Constituency Follower to Retweet Ratio</MenuItem>\r\n          <MenuItem value={8}>Avg. Follower to Retweet Ratio</MenuItem>\r\n          <MenuItem value={9}>Constituency Retweet to Original Tweet Ratio</MenuItem>\r\n          <MenuItem value={10}>Avg. Retweet to Original Tweet Ratio</MenuItem>\r\n          <MenuItem value={11}>Avg. Polarity</MenuItem>\r\n          <MenuItem value={12}>Avg. Subjectivity</MenuItem>\r\n          <ListSubheader>Parliamentary Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={13}>Total Absences</MenuItem>\r\n          <MenuItem value={14}>Avg. Absences</MenuItem>\r\n          <MenuItem value={15}>Total Presences</MenuItem>\r\n          <MenuItem value={16}>Avg. Presences</MenuItem>\r\n          <MenuItem value={17}>Total Times On Winning Side</MenuItem>\r\n          <MenuItem value={18}>Total Times On Losing Side</MenuItem>\r\n          <MenuItem value={19}>Avg. Times On Winning Side</MenuItem>\r\n          <MenuItem value={20}>Avg. Times On Winning Side</MenuItem>\r\n          <MenuItem value={21}>Total Questions Asked</MenuItem>\r\n          <MenuItem value={22}>Avg. Questions Asked</MenuItem>\r\n          <ListSubheader>News Data (Coming Soon)</ListSubheader>\r\n          <MenuItem disabled>News Mentions</MenuItem>\r\n          <ListSubheader>Electoral Data (Coming Soon)</ListSubheader>\r\n          <MenuItem disabled>Votes recieved in last election</MenuItem>\r\n          <MenuItem disabled>Avg. Poll Rating</MenuItem>\r\n\r\n        </Select>\r\n      </FormControl>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">Y-Value</InputLabel>\r\n        <Select onChange={onChangeY} style={{ color: \"white\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n          <ListSubheader>Twitter Data</ListSubheader>\r\n          <MenuItem value={0}>No. Of Seats</MenuItem>\r\n          <MenuItem value={1}>Total Followers</MenuItem>\r\n          <MenuItem value={2}>Avg. Followers</MenuItem>\r\n          <MenuItem value={3}>Total Retweets</MenuItem>\r\n          <MenuItem value={4}>Avg. Retweets</MenuItem>\r\n          <MenuItem value={5}>Total Original Tweets</MenuItem>\r\n          <MenuItem value={6}>Avg. Original Tweets</MenuItem>\r\n          <MenuItem value={7}>Constituency Follower to Retweet Ratio</MenuItem>\r\n          <MenuItem value={8}>Avg. Follower to Retweet Ratio</MenuItem>\r\n          <MenuItem value={9}>Constituency Retweet to Original Tweet Ratio</MenuItem>\r\n          <MenuItem value={10}>Avg. Retweet to Original Tweet Ratio</MenuItem>\r\n          <MenuItem value={11}>Avg. Polarity</MenuItem>\r\n          <MenuItem value={12}>Avg. Subjectivity</MenuItem>\r\n          <ListSubheader>Parliamentary Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={13}>Total Absences</MenuItem>\r\n          <MenuItem value={14}>Avg. Absences</MenuItem>\r\n          <MenuItem value={15}>Total Presences</MenuItem>\r\n          <MenuItem value={16}>Avg. Presences</MenuItem>\r\n          <MenuItem value={17}>Total Times On Winning Side</MenuItem>\r\n          <MenuItem value={18}>Total Times On Losing Side</MenuItem>\r\n          <MenuItem value={19}>Avg. Times On Winning Side</MenuItem>\r\n          <MenuItem value={20}>Avg. Times On Winning Side</MenuItem>\r\n          <MenuItem value={21}>Total Questions Asked</MenuItem>\r\n          <MenuItem value={22}>Avg. Questions Asked</MenuItem>\r\n          <ListSubheader>News Data (Coming Soon)</ListSubheader>\r\n          <MenuItem disabled>News Mentions</MenuItem>\r\n          <ListSubheader>Electoral Data (Coming Soon)</ListSubheader>\r\n          <MenuItem disabled>Votes recieved in last election</MenuItem>\r\n          <MenuItem disabled>Avg. Poll Rating</MenuItem>\r\n\r\n        </Select>\r\n      </FormControl>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">Circle Radius</InputLabel>\r\n        <Select onChange={onChangeR}style={{ color: \"white\"}} classes={{icon:classes.icon}}defaultValue=\"\" id=\"grouped-select\">\r\n          <MenuItem value={0}>\r\n            <em>None</em>\r\n          </MenuItem>\r\n          <ListSubheader>Twitter Data</ListSubheader>\r\n          <MenuItem value={0}>No. Of Seats</MenuItem>\r\n          <MenuItem value={1}>Total Followers</MenuItem>\r\n          <MenuItem value={2}>Avg. Followers</MenuItem>\r\n          <MenuItem value={3}>Total Retweets</MenuItem>\r\n          <MenuItem value={4}>Avg. Retweets</MenuItem>\r\n          <MenuItem value={5}>Total Original Tweets</MenuItem>\r\n          <MenuItem value={6}>Avg. Original Tweets</MenuItem>\r\n          <MenuItem value={7}>Constituency Follower to Retweet Ratio</MenuItem>\r\n          <MenuItem value={8}>Avg. Follower to Retweet Ratio</MenuItem>\r\n          <MenuItem value={9}>Constituency Retweet to Original Tweet Ratio</MenuItem>\r\n          <MenuItem value={10}>Avg. Retweet to Original Tweet Ratio</MenuItem>\r\n          <MenuItem value={11}>Avg. Polarity</MenuItem>\r\n          <MenuItem value={12}>Avg. Subjectivity</MenuItem>\r\n          <ListSubheader>Parliamentary Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={13}>Total Absences</MenuItem>\r\n          <MenuItem value={14}>Avg. Absences</MenuItem>\r\n          <MenuItem value={15}>Total Presences</MenuItem>\r\n          <MenuItem value={16}>Avg. Presences</MenuItem>\r\n          <MenuItem value={17}>Total Times On Winning Side</MenuItem>\r\n          <MenuItem value={18}>Total Times On Losing Side</MenuItem>\r\n          <MenuItem value={19}>Avg. Times On Winning Side</MenuItem>\r\n          <MenuItem value={20}>Avg. Times On Winning Side</MenuItem>\r\n          <MenuItem value={21}>Total Questions Asked</MenuItem>\r\n          <MenuItem value={22}>Avg. Questions Asked</MenuItem>\r\n          <ListSubheader>News Data (Coming Soon)</ListSubheader>\r\n          <MenuItem disabled>News Mentions</MenuItem>\r\n          <ListSubheader>Electoral Data (Coming Soon)</ListSubheader>\r\n          <MenuItem disabled>Votes recieved in last election</MenuItem>\r\n          <MenuItem disabled>Avg. Poll Rating</MenuItem>\r\n\r\n        </Select>\r\n      </FormControl>\r\n    </div>\r\n    <List style={{display: \"inline-block\"}}>\r\n      <ListItem >\r\n        <ListItemText primary={\"x: \" + optionsExplanation[xOption] + \" (25/08/21)\"}/>\r\n          </ListItem>\r\n          <ListItem>\r\n            <ListItemText primary={\"y: \" + optionsExplanation[yOption] + \" (25/08/21)\"}/>\r\n             </ListItem>\r\n             <ListItem>\r\n            <ListItemText primary={\"r: \" + optionsExplanation[rOption] + \" (25/08/21)\"}/>\r\n            </ListItem>\r\n            \r\n    </List>\r\n\r\n    <div>    <FormGroup style={{display: \"inline-block\",\r\n    verticalAlign: \"top\"}}>\r\n    <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n          defaultChecked=\"true\"\r\n          name=\"checkedB\"\r\n          style={{color: \"#426ff5\"}}\r\n          value={\"Sinn Féin\"}\r\n          // onChange={handleChange}\r\n          />\r\n        }\r\n        label=\"Leinster\"\r\n        />\r\n            <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: 'lightblue'}}\r\n            value={\"Fine Gael\"}\r\n            // onChange={handleChange}\r\n          />\r\n        }\r\n        label=\"Dublin\"\r\n        />\r\n            <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: \"red\"}}\r\n            value={\"Fianna Fáil\"}\r\n            // onChange={handleChange}\r\n          />\r\n        }\r\n        label=\"Munster\"\r\n        />\r\n            <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: \"green\"}}\r\n            value={\"Labour Party\"}\r\n            // onChange={handleChange}\r\n          />\r\n        }\r\n        label=\"Connacht\"\r\n        />\r\n            <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: \"yellow\"}}\r\n            value={\"Independent\"}\r\n            // onChange={handleChange}\r\n          />\r\n        }\r\n        label=\"Ulster\"\r\n        />\r\n        </FormGroup>\r\n        </div>\r\n\r\n            </div>\r\n        <div className={\"scroll-svg-container\"}>\r\n        <svg id={\"scatterplot-svg\"}ref={svgRef} height={height + margin.top + margin.bottom} width={width + margin.left + margin.right}>\r\n            <g id=\"container-scatter-party\" transform={'translate(' + margin.left + ',' + margin.top + ')'}>\r\n            <g className=\"x-axis\"></g>\r\n            <g className=\"y-axis\"></g>\r\n            </g>\r\n            </svg>\r\n          </div>\r\n        </div>\r\n    )\r\n}\r\nexport default ScatterplotConstituency\r\n","import React, {useRef, useEffect, useState} from 'react'\r\nimport * as d3 from 'd3'\r\nimport con_boundaries from './boundary.geo.json'\r\nimport { geoMercator, geoPath } from 'd3'\r\nimport { Typography, Checkbox, Select, MenuItem, ListSubheader, FormControl, InputLabel, makeStyles } from '@material-ui/core'\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    icon: {\r\n      color: \"white\"\r\n  },\r\n\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n  }\r\n\r\n}));\r\n\r\n\r\nconst TDWithConstituencyMap = ({data}) => {\r\n\r\n\r\n    const partyColors = {\r\n        \"Sinn Féin\": \"#326760\",\r\n        \"Fine Gael\": \"#6699FF\",\r\n        \"Fianna Fáil\": \"#66BB66\",\r\n        \"Labour Party\": \"#CC0000\",\r\n        \"Solidarity - People Before Profit\": \"#8E2420\",\r\n        \"Independent\": \"white\",\r\n        \"Green Party\": \"#99CC33\",\r\n        \"Social Democrats\": \"#752F8B\",\r\n        \"Aontú\": \"#44532A\",\r\n        \"Independents 4 Change\": \"grey\"}\r\n\r\n\r\n    const [TDData, setTDData] = useState(null)\r\n    const [boundaries, setBoundaries] = useState(null)\r\n    const [justParty, setJustParty] = useState(1)\r\n    const [funcOption, setFuncOption] = useState(0)\r\n    const [colorFunc, setColorFunc] = useState(0)\r\n    const [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\r\n    const [height, setHeight] = useState(700)\r\n    const [width, setWidth] = useState(600)\r\n    const [scale, setScale] = useState(5300)\r\n    const [centerLatLong, setCenterLatLong] = useState({lat: -8.4, long: 53.7})\r\n\r\n\r\n        \r\n    function getWindowDimensions() {\r\n        const { innerWidth: width, innerHeight: height } = window;\r\n        return {\r\n          width,\r\n          height\r\n        };\r\n      }\r\n  \r\n      function useWindowDimensions() {\r\n       \r\n      \r\n        useEffect(() => {\r\n          function handleResize() {\r\n            setWindowDimensions(getWindowDimensions());\r\n          }\r\n      \r\n          window.addEventListener('resize', handleResize);\r\n          return () => window.removeEventListener('resize', handleResize);\r\n        }, []);\r\n      \r\n        return windowDimensions;\r\n      }\r\n      console.log(useWindowDimensions())\r\n\r\n\r\n    useEffect(() => {\r\n\r\n\r\n        if(windowDimensions.width < 550) {\r\n            setHeight(400)\r\n            setWidth(300)\r\n            setScale(3000)\r\n          }\r\n\r\n        if(windowDimensions.width < 600 && windowDimensions.width > 550) {\r\n            setHeight(550)\r\n            setWidth(500)\r\n            setScale(5500)\r\n          }\r\n\r\n        if(windowDimensions.width < 750 && windowDimensions.width > 600) {\r\n          setHeight(600)\r\n          setWidth(550)\r\n        }\r\n\r\n      }, [windowDimensions])\r\n\r\n    const classes = useStyles();\r\n\r\n\r\n    const justPartyArr = [\"Sinn Féin\", \"Fine Gael\", \"Fianna Fáil\", \"Labour Party\", \"Solidarity - People Before Profit\", \"Independent\", \"Green Party\",\"Social Democrats\", \"Aontú\", \"Independents 4 Change\"]\r\n\r\n    const margin = {top: 50, right: 20, bottom: 50, left: 20}\r\n    const heightMargin = height - margin.left - margin.right;\r\n    const widthMargin = width - margin.top - margin.bottom;  \r\n    const svgRef = useRef()\r\n\r\n    const onChangeFuncOption = (event, child) => {\r\n        setFuncOption(event.target.value)\r\n        console.log('Func Option:' + event.target.value);\r\n        console.log(child);\r\n      };\r\n\r\n      \r\n    const onChangeColorFunc = (event, child) => {\r\n        setColorFunc(event.target.value)\r\n        console.log('Func Option:' + event.target.value);\r\n        console.log(child);\r\n      };\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        setTDData(data)\r\n\r\n        const clone = JSON.parse(JSON.stringify(con_boundaries))\r\n        setBoundaries(clone)\r\n\r\n    }, [])\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nuseEffect(() => {\r\n\r\n    if(!boundaries || !TDData) return null;\r\n\r\n    const boundariesClone = boundaries;\r\n    \r\n    \r\n    \r\n    \r\n\r\nfunction getMemberConstituency() {\r\n\r\n\r\n    var tdConstituencyObj = TDData.map(function(d) {\r\n\r\n\r\n        var indexOfLastSlash = d.member_constituency_uri[0].lastIndexOf('/') + 1;      \r\n        var clean = d.member_constituency_uri[0].substr(indexOfLastSlash).replaceAll('-', ' ');\r\n        return {TD: d, constituencyName: clean}\r\n\r\n    })  \r\n    \r\n    return tdConstituencyObj;\r\n\r\n}\r\n\r\nfunction getBoundaryConstituency() {\r\n    \r\n    var constituencyObj = boundariesClone.features.map(function(d) {\r\n        \r\n        var constituencyNameVar = d.properties.CON_SEAT_.replaceAll(/[^A-Zú]/gi, ' ').replace(/\\s*$/,'');\r\n        var constituencyCodeVar = d.properties.OBJECTID_1;\r\n\r\n        return {constituencyCode: constituencyCodeVar, constituencyName: constituencyNameVar};\r\n\r\n});\r\n\r\n    return constituencyObj;\r\n}\r\n\r\nfunction storeTDsByConstituency() {\r\n\r\n\r\n\r\n    var members = getMemberConstituency()\r\n    var boundaries = getBoundaryConstituency()\r\n\r\n\r\n    var arr = boundaries.map(function(d) {\r\n\r\n\r\n        var tdArr = []\r\n\r\n\r\n        for(let i = 0; i < members.length; i++) {\r\n\r\n            if(d.constituencyName === \"Dun Laoghaire\" && members[i].constituencyName === \"Dún Laoghaire\") {\r\n\r\n                tdArr.push(members[i])\r\n\r\n            }\r\n\r\n            if(d.constituencyName === members[i].constituencyName) {\r\n                tdArr.push(members[i])\r\n            }\r\n        }\r\n\r\n        return [d.constituencyName, tdArr]\r\n    })\r\n\r\nreturn arr\r\n\r\n\r\n}\r\n\r\n//Functions to store as state:\r\n\r\n\r\n\r\n// for(let i = 0; i < boundaries.features.length; i++) {\r\n\r\n//     var color = colorOfPartyWithMajoritySeats(i)\r\n\r\n//     boundaries.features[i].properties.color = color\r\n\r\n\r\n// }\r\n\r\n\r\nif(funcOption == 0) {\r\n\r\nfunction colorOfPartyOfTDWithMostFollowers(i) {\r\n\r\n    var conTDs = storeTDsByConstituency()\r\n\r\n    var tds = conTDs[i][1].map(d => d.TD)\r\n\r\n    var tdsFiltered = tds.filter(d => d.followerData != undefined).filter(d => d.followerData.length != 0)\r\n\r\n    console.log(tdsFiltered)\r\n\r\n    var mostFollowedSorted = tdsFiltered.sort((a, b) => b.followerData[3].followers - a.followerData[3].followers)\r\n\r\n    var mostFollowedTDParty = mostFollowedSorted[0].party\r\n\r\n    return [mostFollowedSorted[0].name, mostFollowedSorted[0].party, partyColors[mostFollowedTDParty], mostFollowedSorted[0].followerData[3].followers]\r\n\r\n}\r\n\r\nfor(let i = 0; i < boundariesClone.features.length; i++) {\r\n\r\n    var color = colorOfPartyOfTDWithMostFollowers(i)\r\n\r\n    boundariesClone.features[i].properties.color = color\r\n\r\n\r\n}\r\n\r\n} else if(funcOption == 1) {\r\n   function colorOfPartyOfTDWithMostRetweets(i) {\r\n\r\n    var conTDs = storeTDsByConstituency()\r\n\r\n    var tds = conTDs[i][1].map(d => d.TD)\r\n\r\n    var tdsFiltered = tds.filter(d => d.retweetData != undefined).filter(d => d.retweetData.length != 0)\r\n\r\n    console.log(tdsFiltered)\r\n\r\n    var mostRetweetedSorted = tdsFiltered.sort((a, b) => b.retweetData[3].retweets - a.retweetData[3].retweets)\r\n\r\n    var mostRetweetedTDParty = mostRetweetedSorted[0].party\r\n\r\n    return [mostRetweetedSorted[0].name, mostRetweetedSorted[0].party, partyColors[mostRetweetedTDParty], mostRetweetedSorted[0].retweetData[3].retweets]\r\n\r\n} \r\n\r\nfor(let i = 0; i < boundariesClone.features.length; i++) {\r\n\r\n    var color = colorOfPartyOfTDWithMostRetweets(i)\r\n\r\n    boundariesClone.features[i].properties.color = color\r\n\r\n\r\n}\r\n\r\n} else if(funcOption == 2) {\r\n\r\n    function colorOfPartyOfTDWithMostOriginalTweets(i) {\r\n\r\n    var conTDs = storeTDsByConstituency()\r\n\r\n    var tds = conTDs[i][1].map(d => d.TD)\r\n\r\n    var tdsFiltered = tds.filter(d => d.retweetData != undefined).filter(d => d.retweetData.length != 0)\r\n\r\n    console.log(tdsFiltered)\r\n\r\n    var mostTweetedSorted = tdsFiltered.sort((a, b) => b.retweetData[3].original_tweets - a.retweetData[3].original_tweets)\r\n\r\n    var mostTweetedTDParty = mostTweetedSorted[0].party\r\n\r\n    return [mostTweetedSorted[0].name, mostTweetedTDParty, partyColors[mostTweetedTDParty], mostTweetedSorted[0].retweetData[3].original_tweets]\r\n\r\n}\r\nfor(let i = 0; i < boundariesClone.features.length; i++) {\r\n\r\n    var color = colorOfPartyOfTDWithMostOriginalTweets(i)\r\n\r\n    boundariesClone.features[i].properties.color = color\r\n\r\n\r\n}\r\n\r\n\r\n} else if(funcOption == 3) {\r\n    function colorOfPartyOfTDWithMostQuestions(i) {\r\n\r\n    const sumValues = obj => Object.values(obj).reduce((a, b) => a + b);\r\n\r\n    var conTDs = storeTDsByConstituency()\r\n\r\n    var tds = conTDs[i][1].map(d => d.TD).filter(d => d.writtenQuestions != undefined).filter(d => d.writtenQuestions[0].writtenQuestions.to != undefined)\r\n\r\n    var mostAskedSorted = tds.sort(function(a,b) {\r\n\r\n\r\n      var aVal = sumValues(a.writtenQuestions[0].writtenQuestions.to)\r\n      var bVal = sumValues(b.writtenQuestions[0].writtenQuestions.to)\r\n\r\n        return bVal - aVal\r\n    })\r\n\r\n    var mostCuriousTDParty = mostAskedSorted[0].party\r\n\r\n    console.log(tds)\r\n\r\n    return [mostAskedSorted[0].name, mostAskedSorted[0].party, partyColors[mostCuriousTDParty], sumValues(mostAskedSorted[0].writtenQuestions[0].writtenQuestions.to)]\r\n\r\n}\r\nfor(let i = 0; i < boundariesClone.features.length; i++) {\r\n\r\n    var color = colorOfPartyOfTDWithMostQuestions(i)\r\n\r\n    boundariesClone.features[i].properties.color = color\r\n\r\n\r\n}\r\n} else if(funcOption == 4) {\r\n    function colorOfPartyOfTDWithMostNegativeSentiment(i) {\r\n\r\n        var conTDs = storeTDsByConstituency()\r\n    \r\n        var tds = conTDs[i][1].map(d => d.TD)\r\n    \r\n        var tdsFiltered = tds.filter(d => d.sentimentData != undefined).filter(d => d.sentimentData.length != 0)\r\n    \r\n        console.log(tdsFiltered)\r\n    \r\n        var mostNegativeSorted = tdsFiltered.sort((a, b) =>  a.sentimentData[3].polarity - b.sentimentData[3].polarity)\r\n    \r\n        var mostNegativeTDParty = mostNegativeSorted[0].party\r\n    \r\n        return [mostNegativeSorted[0].name, mostNegativeTDParty, partyColors[mostNegativeTDParty], mostNegativeSorted[0].sentimentData[3].polarity * -1]\r\n    }\r\n    for(let i = 0; i < boundariesClone.features.length; i++) {\r\n    \r\n        var color = colorOfPartyOfTDWithMostNegativeSentiment(i)\r\n    \r\n        boundariesClone.features[i].properties.color = color\r\n    \r\n    \r\n    }\r\n} else if(funcOption == 5) {\r\n    function colorOfPartyOfTDWithMostPositiveSentiment(i) {\r\n\r\n        var conTDs = storeTDsByConstituency()\r\n    \r\n        var tds = conTDs[i][1].map(d => d.TD)\r\n    \r\n        var tdsFiltered = tds.filter(d => d.sentimentData != undefined).filter(d => d.sentimentData.length != 0)\r\n    \r\n        console.log(tdsFiltered)\r\n    \r\n        var mostPositiveSorted = tdsFiltered.sort((a, b) => b.sentimentData[3].polarity - a.sentimentData[3].polarity)\r\n    \r\n        var mostPositiveTDParty = mostPositiveSorted[0].party\r\n    \r\n        return [mostPositiveSorted[0].name, mostPositiveTDParty, partyColors[mostPositiveTDParty], mostPositiveSorted[0].sentimentData[3].polarity]\r\n    }\r\n    for(let i = 0; i < boundariesClone.features.length; i++) {\r\n    \r\n        var color = colorOfPartyOfTDWithMostPositiveSentiment(i)\r\n    \r\n        boundariesClone.features[i].properties.color = color\r\n    \r\n    \r\n    }\r\n} \r\nelse if(funcOption == 6) {\r\n\r\n    function colorOfPartyOfTDWithMostAbsences(i) {\r\n\r\n    var conTDs = storeTDsByConstituency()\r\n\r\n    var tds = conTDs[i][1].map(d => d.TD)\r\n\r\n    var tdsFiltered = tds.filter(d => d.voteData != undefined).filter(d => d.voteData.length != 0)\r\n\r\n    console.log(tdsFiltered)\r\n\r\n    var mostAbsentSorted = tdsFiltered.sort((a, b) => b.voteData[0].absences - a.voteData[0].absences)\r\n\r\n    var mostAbsentTDParty = mostAbsentSorted[0].party\r\n\r\n    return [mostAbsentSorted[0].name, mostAbsentTDParty, partyColors[mostAbsentTDParty], mostAbsentSorted[0].voteData[0].absences]\r\n    }\r\n    for(let i = 0; i < boundariesClone.features.length; i++) {\r\n\r\n    var color = colorOfPartyOfTDWithMostAbsences(i)\r\n\r\n    boundariesClone.features[i].properties.color = color\r\n}\r\n\r\n} else if(funcOption == 7) {\r\n\r\n    function colorOfPartyOfTDWithMostPresences(i) {\r\n\r\n    var conTDs = storeTDsByConstituency()\r\n\r\n    var tds = conTDs[i][1].map(d => d.TD)\r\n\r\n    var tdsFiltered = tds.filter(d => d.voteData != undefined).filter(d => d.voteData.length != 0)\r\n\r\n    console.log(tdsFiltered)\r\n\r\n    var mostPresentSorted = tdsFiltered.sort((a, b) => b.voteData[0].totalVotes - a.voteData[0].totalVotes)\r\n\r\n    var mostPresentTDParty = mostPresentSorted[0].party\r\n\r\n    return [mostPresentSorted[0].name, mostPresentTDParty, partyColors[mostPresentTDParty], mostPresentSorted[0].voteData[0].totalVotes]\r\n    }\r\n    for(let i = 0; i < boundariesClone.features.length; i++) {\r\n\r\n    var color = colorOfPartyOfTDWithMostPresences(i)\r\n\r\n    boundariesClone.features[i].properties.color = color\r\n}\r\n\r\n} else if(funcOption == 8) {\r\n\r\n    function colorOfPartyOfTDWithMostWins(i) {\r\n\r\n    var conTDs = storeTDsByConstituency()\r\n\r\n    var tds = conTDs[i][1].map(d => d.TD)\r\n\r\n    var tdsFiltered = tds.filter(d => d.voteData != undefined).filter(d => d.voteData.length != 0)\r\n\r\n    console.log(tdsFiltered)\r\n\r\n    var mostWinsSorted = tdsFiltered.sort((a, b) => b.voteData[0].onWinningSide - a.voteData[0].onWinningSide)\r\n\r\n    var mostWinsTDParty = mostWinsSorted[0].party\r\n\r\n    return [mostWinsSorted[0].name, mostWinsTDParty, partyColors[mostWinsTDParty], mostWinsSorted[0].voteData[0].onWinningSide]\r\n    }\r\n    for(let i = 0; i < boundariesClone.features.length; i++) {\r\n\r\n    var color = colorOfPartyOfTDWithMostWins(i)\r\n\r\n    boundariesClone.features[i].properties.color = color\r\n}\r\n\r\n} else if(funcOption == 9) {\r\n\r\n    function colorOfPartyOfTDWithMostLosses(i) {\r\n\r\n    var conTDs = storeTDsByConstituency()\r\n\r\n    var tds = conTDs[i][1].map(d => d.TD)\r\n\r\n    var tdsFiltered = tds.filter(d => d.voteData != undefined).filter(d => d.voteData.length != 0)\r\n\r\n    console.log(tdsFiltered)\r\n\r\n    var mostLossesSorted = tdsFiltered.sort((a, b) => b.voteData[0].onLosingSide - a.voteData[0].onLosingSide)\r\n\r\n    var mostLossesTDParty = mostLossesSorted[0].party\r\n\r\n    return [mostLossesSorted[0].name, mostLossesTDParty, partyColors[mostLossesTDParty], mostLossesSorted[0].voteData[0].onLosingSide]\r\n    }\r\n    for(let i = 0; i < boundariesClone.features.length; i++) {\r\n\r\n    var color = colorOfPartyOfTDWithMostLosses(i)\r\n\r\n    boundariesClone.features[i].properties.color = color\r\n}\r\n\r\n} else if(funcOption == 10) {\r\n\r\n    function colorOfPartyOfTDWithMostAbstentions(i) {\r\n\r\n    var conTDs = storeTDsByConstituency()\r\n\r\n    var tds = conTDs[i][1].map(d => d.TD)\r\n\r\n    var tdsFiltered = tds.filter(d => d.voteData != undefined).filter(d => d.voteData.length != 0)\r\n\r\n    console.log(tdsFiltered)\r\n\r\n    var mostAbstentionsSorted = tdsFiltered.sort((a, b) => b.voteData[0].totalAbstentions - a.voteData[0].totalAbstentions)\r\n\r\n    var mostAbstentionsTDParty = mostAbstentionsSorted[0].party\r\n\r\n    if(mostAbstentionsSorted[0].voteData[0].totalAbstentions == 0) {\r\n        return [\"\", \"\", \"lightgrey\", 0]\r\n    }\r\n\r\n    return [mostAbstentionsSorted[0].name, mostAbstentionsTDParty, partyColors[mostAbstentionsTDParty], mostAbstentionsSorted[0].voteData[0].totalAbstentions]\r\n    }\r\n    for(let i = 0; i < boundariesClone.features.length; i++) {\r\n\r\n    var color = colorOfPartyOfTDWithMostAbstentions(i)\r\n\r\n    boundariesClone.features[i].properties.color = color\r\n}\r\n\r\n}\r\n\r\n\r\n// function containsParty(i, party) {\r\n\r\n//     var conTDs = storeTDsByConstituency()\r\n\r\n//     var partiesPresent = conTDs[i][1].map(d => d.TD.party)\r\n\r\n//     var map = partiesPresent.reduce((acc, e) => acc.set(e, (acc.get(e) || 0) + 1), new Map());\r\n\r\n//     var partyAndValue = [...map.entries()];\r\n\r\n//     var justParty = partyAndValue.map(d => d[0])\r\n\r\n//     if(justParty.includes(party)) {\r\n//         return partyColors[party]\r\n//     } else {\r\n//         return \"lightgrey\"\r\n//     }\r\n\r\n// }\r\n\r\n// for(let i = 0; i < boundaries.features.length; i++) {\r\n\r\n//     var color = containsParty(i, justPartyArr[justParty])\r\n\r\n//     boundaries.features[i].properties.color = color\r\n\r\n\r\n// }\r\n\r\n\r\n\r\n\r\n\r\n    const colorValObj = d => d.properties.color\r\n\r\n    const heatColorFunc = d3.scaleSequential()\r\n        .interpolator( d3.interpolateRdYlBu)\r\n        .domain([d3.max(boundariesClone.features, d=>d.properties.color[3]),d3.min(boundariesClone.features, d=>d.properties.color[3])])\r\n\r\n\r\n\r\n\r\n\r\n    //colorValObj has party color at [2]. \r\n\r\n\r\nconsole.log(con_boundaries)\r\n\r\n\r\n\r\n    const svg = d3.select(svgRef.current);\r\n\r\n    const projection = geoMercator().scale(scale)\r\n    // Center the Map on Ireland\r\n    .center([centerLatLong.lat, centerLatLong.long])\r\n    .translate([widthMargin / 2, heightMargin / 2]);\r\n\r\n    const pathGenerator = geoPath().projection(projection)\r\n\r\n    svg.selectAll(\".constituency\")\r\n        .data(boundariesClone.features)\r\n        .join(\"path\")\r\n        .attr(\"class\", \"constituency\")\r\n        .transition()\r\n        .duration(400)\r\n        .attr(\"fill\", function(d) {\r\n\r\n            if(colorFunc == 0) {\r\n               return colorValObj(d)[2] \r\n            } else if (colorFunc == 1) {\r\n                return heatColorFunc(d.properties.color[3])\r\n            }\r\n        })\r\n        .style(\"stroke\", \"darkgreen\")\r\n        .style(\"stroke-width\", \"0.5px\")\r\n        .attr(\"d\", feature => pathGenerator(feature))\r\n\r\n // .attr(\"fill\",d => colorTest(d)[2])\r\n\r\n        const tooltip = d3\r\n                .select('body')\r\n                .append('div')\r\n                .attr('class', 'd3-tooltip')\r\n                .style('position', 'absolute')\r\n                .style('z-index', '10')\r\n                .style('visibility', 'hidden')\r\n                .style('padding', '10px')\r\n                .style('background', 'rgba(0,0,0,0.6)')\r\n                .style('border-radius', '4px')\r\n                .style('color', '#fff')\r\n                .text('a simple tooltip');\r\n        \r\n\r\n\r\n        const hoverColor = \"#eec42d\"\r\n\r\n        d3.selectAll(\".constituency\")\r\n            .on('mouseover', function (d, i) {\r\n\r\n\r\n                if(funcOption == 0) {\r\n\r\n                    tooltip\r\n                    .html(\r\n                        `<div>${d.properties.CON_SEAT_} </div>\r\n                        <div>TD: ${colorValObj(d)[0]} </div>\r\n                        <div>Party: ${colorValObj(d)[1]} </div>\r\n                        <div>Followers: ${colorValObj(d)[3].toLocaleString()} </div></div>`\r\n                    )\r\n                        .style('visibility', 'visible');\r\n                        d3.select(this).transition().attr('fill', hoverColor);\r\n    \r\n\r\n                } else if(funcOption == 1) {\r\n\r\n                    tooltip\r\n                    .html(\r\n                        `<div>${d.properties.CON_SEAT_} </div>\r\n                        <div>TD: ${colorValObj(d)[0]} </div>\r\n                        <div>Party: ${colorValObj(d)[1]} </div>\r\n                        <div>Retweets: ${colorValObj(d)[3].toLocaleString()} </div></div>`\r\n                    )\r\n                        .style('visibility', 'visible');\r\n                        d3.select(this).transition().attr('fill', hoverColor);\r\n\r\n                } else if(funcOption == 2) {\r\n\r\n                    tooltip\r\n                    .html(\r\n                        `<div>${d.properties.CON_SEAT_} </div>\r\n                        <div>TD: ${colorValObj(d)[0]} </div>\r\n                        <div>Party: ${colorValObj(d)[1]} </div>\r\n                        <div>Original Tweets: ${colorValObj(d)[3].toLocaleString()} </div></div>`\r\n                    )\r\n                        .style('visibility', 'visible');\r\n                        d3.select(this).transition().attr('fill', hoverColor);\r\n\r\n\r\n                } else if(funcOption == 3) {\r\n\r\n                    tooltip\r\n                    .html(\r\n                        `<div>${d.properties.CON_SEAT_} </div>\r\n                        <div>TD: ${colorValObj(d)[0]} </div>\r\n                        <div>Party: ${colorValObj(d)[1]} </div>\r\n                        <div>Questions Asked: ${colorValObj(d)[3].toLocaleString()} </div></div>`\r\n                    )\r\n                        .style('visibility', 'visible');\r\n                        d3.select(this).transition().attr('fill', hoverColor);\r\n\r\n\r\n                } else if (funcOption == 4) {\r\n                    \r\n                    tooltip\r\n                    .html(\r\n                        `<div>${d.properties.CON_SEAT_} </div>\r\n                        <div>TD: ${colorValObj(d)[0]} </div>\r\n                        <div>Party: ${colorValObj(d)[1]} </div>\r\n                        <div>Polarity: ${(colorValObj(d)[3] * -1).toLocaleString()} </div></div>`\r\n                    )\r\n                        .style('visibility', 'visible');\r\n                        d3.select(this).transition().attr('fill', hoverColor);\r\n\r\n                } else if (funcOption == 5) {\r\n                    \r\n                    tooltip\r\n                    .html(\r\n                        `<div>${d.properties.CON_SEAT_} </div>\r\n                        <div>TD: ${colorValObj(d)[0]} </div>\r\n                        <div>Party: ${colorValObj(d)[1]} </div>\r\n                        <div>Polarity: ${(colorValObj(d)[3]).toLocaleString()} </div></div>`\r\n                    )\r\n                        .style('visibility', 'visible');\r\n                        d3.select(this).transition().attr('fill', hoverColor);\r\n\r\n                } else if (funcOption == 7) {\r\n                    \r\n                    tooltip\r\n                    .html(\r\n                        `<div>${d.properties.CON_SEAT_} </div>\r\n                        <div>TD: ${colorValObj(d)[0]} </div>\r\n                        <div>Party: ${colorValObj(d)[1]} </div>\r\n                        <div>Polarity: ${(colorValObj(d)[3]).toLocaleString()} </div></div>`\r\n                    )\r\n                        .style('visibility', 'visible');\r\n                        d3.select(this).transition().attr('fill', hoverColor);\r\n\r\n                }\r\n                else if (funcOption == 8) {\r\n                    \r\n                    tooltip\r\n                    .html(\r\n                        `<div>${d.properties.CON_SEAT_} </div>\r\n                        <div>TD: ${colorValObj(d)[0]} </div>\r\n                        <div>Party: ${colorValObj(d)[1]} </div>\r\n                        <div>Polarity: ${(colorValObj(d)[3]).toLocaleString()} </div></div>`\r\n                    )\r\n                        .style('visibility', 'visible');\r\n                        d3.select(this).transition().attr('fill', hoverColor);\r\n\r\n                }\r\n                else if (funcOption == 9) {\r\n                    \r\n                    tooltip\r\n                    .html(\r\n                        `<div>${d.properties.CON_SEAT_} </div>\r\n                        <div>TD: ${colorValObj(d)[0]} </div>\r\n                        <div>Party: ${colorValObj(d)[1]} </div>\r\n                        <div>Polarity: ${(colorValObj(d)[3]).toLocaleString()} </div></div>`\r\n                    )\r\n                        .style('visibility', 'visible');\r\n                        d3.select(this).transition().attr('fill', hoverColor);\r\n\r\n                } else if (funcOption == 10) {\r\n                    \r\n                    tooltip\r\n                    .html(\r\n                        `<div>${d.properties.CON_SEAT_} </div>\r\n                        <div>TD: ${colorValObj(d)[0]} </div>\r\n                        <div>Party: ${colorValObj(d)[1]} </div>\r\n                        <div>Polarity: ${(colorValObj(d)[3]).toLocaleString()} </div></div>`\r\n                    )\r\n                        .style('visibility', 'visible');\r\n                        d3.select(this).transition().attr('fill', hoverColor);\r\n\r\n                }\r\n                else if (funcOption == 11) {\r\n                    \r\n                    tooltip\r\n                    .html(\r\n                        `<div>${d.properties.CON_SEAT_} </div>\r\n                        <div>TD: ${colorValObj(d)[0]} </div>\r\n                        <div>Party: ${colorValObj(d)[1]} </div>\r\n                        <div>Polarity: ${(colorValObj(d)[3]).toLocaleString()} </div></div>`\r\n                    )\r\n                        .style('visibility', 'visible');\r\n                        d3.select(this).transition().attr('fill', hoverColor);\r\n\r\n                }\r\n\r\n\r\n\r\n\r\n                })\r\n\r\n\r\n\r\n                .on('mousemove', function () {\r\n                    tooltip\r\n                    .style('top', d3.event.pageY - 10 + 'px')\r\n                    .style('left', d3.event.pageX + 10 + 'px');\r\n                })\r\n                .on('mouseout', function () {\r\n                    tooltip.html(``).style('visibility', 'hidden');\r\n                    d3.select(this).transition()        .attr(\"fill\", function(d) {\r\n\r\n       \r\n                        if(colorFunc == 0) {\r\n                            return colorValObj(d)[2] \r\n                         } else if (colorFunc == 1) {\r\n                             return heatColorFunc(d.properties.color[3])\r\n                         }\r\n            \r\n                    });\r\n                });\r\n\r\n}, [boundaries, TDData, justParty, funcOption, colorFunc, width, height, scale, centerLatLong])\r\n\r\nif(!TDData) return null;\r\n\r\n    return (\r\n\r\n        <div className=\"featuredItem\" style={{textAlign: \"center\", background: \"white\"}}>   \r\n        <Typography style={{color: \"black\"}} variant=\"h5\">TD With Most... </Typography>         \r\n        <FormControl className={classes.formControl}>\r\n              <InputLabel style={{fill: \"black\", color: \"black\"}} htmlFor=\"grouped-select\">Data Value</InputLabel>\r\n              <Select onChange={onChangeFuncOption} style={{ color: \"black\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n                <MenuItem value={0}>TD With Most Followers</MenuItem>\r\n                <MenuItem value={1}>TD With Most Retweets</MenuItem>  \r\n                <MenuItem value={2}>TD Most Active On Twitter</MenuItem>\r\n                <MenuItem value={3}>TD With Most Questions</MenuItem> \r\n                <MenuItem value={4}>TD With Most Negative Sentiment</MenuItem>     \r\n                <MenuItem value={5}>TD With Most Positive Sentiment</MenuItem>         \r\n                <MenuItem value={6}>TD with Most Absences</MenuItem> \r\n                <MenuItem value={7}>TD with Most Presences</MenuItem>\r\n                <MenuItem value={8}>TD with Most Wins</MenuItem>    \r\n                <MenuItem value={9}>TD with Most Losses</MenuItem>\r\n                <MenuItem value={10}>TD with Abstentions</MenuItem>    \r\n\r\n                {/* <MenuItem value={4}>Solidarity - People Before Profit</MenuItem>\r\n                <MenuItem value={5}>Independent</MenuItem>       \r\n                <MenuItem value={6}>Green Party</MenuItem>\r\n                <MenuItem value={7}>Social Democrats</MenuItem>\r\n                <MenuItem value={8}>Aontú</MenuItem>\r\n                <MenuItem value={9}>Independents 4 Change</MenuItem>               */}\r\n              </Select>\r\n        </FormControl>\r\n        <FormControl className={classes.formControl}>\r\n              <InputLabel style={{fill: \"black\", color: \"black\"}} htmlFor=\"grouped-select\">Color Value</InputLabel>\r\n              <Select onChange={onChangeColorFunc} style={{ color: \"black\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n                <ListSubheader>In Constituency...</ListSubheader>\r\n                <MenuItem value={0}>Color by Party</MenuItem>\r\n                <MenuItem value={1}>Heatmap</MenuItem>  \r\n              </Select>\r\n        </FormControl>\r\n            <div className={\"scroll-svg-container\"} style={{marginTop: \"16px\"}}>\r\n            <svg ref={svgRef} height={heightMargin + margin.top + margin.bottom} width={widthMargin + margin.left + margin.right}></svg>\r\n        </div>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default TDWithConstituencyMap\r\n","import React, {useRef, useEffect, useState} from 'react'\r\nimport * as d3 from 'd3'\r\nimport con_boundaries from './boundary.geo.json'\r\nimport { geoMercator, geoPath } from 'd3'\r\nimport { Typography, Checkbox, Select, MenuItem, ListSubheader, FormControl, InputLabel, makeStyles } from '@material-ui/core'\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    icon: {\r\n      color: \"white\"\r\n  },\r\n\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n  }\r\n\r\n}));\r\n\r\n\r\nconst TotalAndAverageConstituencyMap = ({data}) => {\r\n\r\n\r\n    const partyColors = {\r\n        \"Sinn Féin\": \"#326760\",\r\n        \"Fine Gael\": \"#6699FF\",\r\n        \"Fianna Fáil\": \"#66BB66\",\r\n        \"Labour Party\": \"#CC0000\",\r\n        \"Solidarity - People Before Profit\": \"#8E2420\",\r\n        \"Independent\": \"white\",\r\n        \"Green Party\": \"#99CC33\",\r\n        \"Social Democrats\": \"#752F8B\",\r\n        \"Aontú\": \"#44532A\",\r\n        \"Independents 4 Change\": \"grey\"}\r\n\r\n\r\n    const [TDData, setTDData] = useState(null)\r\n    const [justParty, setJustParty] = useState(0)\r\n    const [funcOption, setFuncOption] = useState(0)\r\n    const [colorFunc, setColorFunc] = useState(1)\r\n    const [boundaries, setBoundaries] = useState(null)\r\n\r\n\r\n    const classes = useStyles();\r\n\r\n\r\n    const justPartyArr = [\"Sinn Féin\", \"Fine Gael\", \"Fianna Fáil\", \"Labour Party\", \"Solidarity - People Before Profit\", \"Independent\", \"Green Party\",\"Social Democrats\", \"Aontú\", \"Independents 4 Change\"]\r\n\r\n    const margin = {top: 50, right: 20, bottom: 50, left: 20}\r\n    const height = 700\r\n    const width = 600\r\n    const svgRef = useRef()\r\n\r\n    const onChangeFuncOption = (event, child) => {\r\n        setFuncOption(event.target.value)\r\n        console.log('Func Option:' + event.target.value);\r\n        console.log(child);\r\n      };\r\n\r\n      \r\n    const onChangeColorFunc = (event, child) => {\r\n        setColorFunc(event.target.value)\r\n        console.log('Func Option:' + event.target.value);\r\n        console.log(child);\r\n      };\r\n\r\n      const onChangeJustParty = (event, child) => {\r\n        setJustParty(event.target.value)\r\n        console.log('Just Party:' + event.target.value);\r\n        console.log(child);\r\n      };\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        setTDData(data)\r\n\r\n    }, [])\r\n\r\n\r\nuseEffect(() => {\r\n    \r\nconst clone = JSON.parse(JSON.stringify(con_boundaries))\r\nsetBoundaries(clone)\r\n\r\n\r\n}, [])\r\n\r\n\r\n\r\n\r\nuseEffect(() => {\r\n\r\n    if(!boundaries || !TDData) return null;\r\n    \r\n    \r\n    \r\n    \r\n\r\nfunction getMemberConstituency() {\r\n\r\n\r\n    var tdConstituencyObj = TDData.map(function(d) {\r\n\r\n\r\n        var indexOfLastSlash = d.member_constituency_uri[0].lastIndexOf('/') + 1;      \r\n        var clean = d.member_constituency_uri[0].substr(indexOfLastSlash).replaceAll('-', ' ');\r\n        return {TD: d, constituencyName: clean}\r\n\r\n    })  \r\n    \r\n    return tdConstituencyObj;\r\n\r\n}\r\n\r\nfunction getBoundaryConstituency() {\r\n    \r\n    var constituencyObj = boundaries.features.map(function(d) {\r\n        \r\n        var constituencyNameVar = d.properties.CON_SEAT_.replaceAll(/[^A-Zú]/gi, ' ').replace(/\\s*$/,'');\r\n        var constituencyCodeVar = d.properties.OBJECTID_1;\r\n\r\n        return {constituencyCode: constituencyCodeVar, constituencyName: constituencyNameVar};\r\n\r\n});\r\n\r\n    return constituencyObj;\r\n}\r\n\r\nfunction storeTDsByConstituency() {\r\n\r\n\r\n\r\n    var members = getMemberConstituency()\r\n    var boundaries = getBoundaryConstituency()\r\n\r\n\r\n    var arr = boundaries.map(function(d) {\r\n\r\n\r\n        var tdArr = []\r\n\r\n\r\n        for(let i = 0; i < members.length; i++) {\r\n\r\n            if(d.constituencyName === \"Dun Laoghaire\" && members[i].constituencyName === \"Dún Laoghaire\") {\r\n\r\n                tdArr.push(members[i])\r\n\r\n            }\r\n\r\n            if(d.constituencyName === members[i].constituencyName) {\r\n                tdArr.push(members[i])\r\n            }\r\n        }\r\n\r\n        return [d.constituencyName, tdArr]\r\n    })\r\n\r\nreturn arr\r\n\r\n\r\n}\r\n\r\n//Functions to store as state:\r\n// function colorOfPartyWithMajoritySeats(i) {\r\n\r\n//     var conTDs = storeTDsByConstituency()\r\n\r\n//     var partiesPresent = conTDs[i][1].map(d => d.TD.party)\r\n\r\n//     var map = partiesPresent.reduce((acc, e) => acc.set(e, (acc.get(e) || 0) + 1), new Map());\r\n\r\n//     var partyAndValue = [...map.entries()];\r\n\r\n//     var sortedByMajority = partyAndValue.sort((a,b) => b[1] - a[1])\r\n\r\n\r\n//     console.log(sortedByMajority[0][1])\r\n\r\n//     if(sortedByMajority[0][1] === sortedByMajority[1][1]) {\r\n//         return [\"Split\", \"Split\", \"lightgrey\", 0]\r\n//     }\r\n\r\n//     return [0, sortedByMajority[0][0], partyColors[sortedByMajority[0][0]], sortedByMajority[0][1]]\r\n// }\r\n\r\n// for(let i = 0; i < boundaries.features.length; i++) {\r\n\r\n//     var color = colorOfPartyWithMajoritySeats(i)\r\n\r\n//     boundaries.features[i].properties.color = color\r\n\r\n\r\n// }\r\n\r\n\r\nif(funcOption == 0) {\r\nfunction mostSeats(i) {\r\n\r\n    var conTDs = storeTDsByConstituency()\r\n\r\n    var partiesPresent = conTDs[i][1].map(d => d.TD.party)\r\n\r\n\r\n    return [0, \"grey\", \"grey\", conTDs[i][1].length]\r\n}\r\n\r\nfor(let i = 0; i < boundaries.features.length; i++) {\r\n\r\n    var color = mostSeats(i)\r\n\r\n    boundaries.features[i].properties.color = color\r\n\r\n\r\n}\r\n\r\n\r\n} else if (funcOption == 1) {\r\n    function womenPresent(i) {\r\n\r\n        var conTDs = storeTDsByConstituency()\r\n\r\n        var justWomen = conTDs[i][1].map(function(d) {\r\n\r\n\r\n        if(d.TD.gender == \"Female\") {\r\n            return d.TD\r\n        }\r\n\r\n        }).filter(d => d != undefined)\r\n\r\n        console.log(justWomen)\r\n\r\n        return [0, \"grey\", \"grey\", justWomen.length]\r\n\r\n\r\n    }\r\n\r\n    for(let i = 0; i < boundaries.features.length; i++) {\r\n\r\n        var color = womenPresent(i)\r\n    \r\n        boundaries.features[i].properties.color = color\r\n      \r\n    }\r\n\r\n\r\n} else if (funcOption == 2) {\r\n   function averagePolarity(i) {\r\n\r\n        var conTDs = storeTDsByConstituency()\r\n\r\n        var justTDs = conTDs[i][1].map(d => d.TD)\r\n\r\n        var justTDsOnTwitter = justTDs.filter(d => d.sentimentData != undefined) \r\n\r\n        var averagePolarity = justTDsOnTwitter.map(d => d.sentimentData[3].polarity).reduce((a, b) => a + b) / justTDsOnTwitter.length\r\n\r\n\r\n\r\n        return [0, \"grey\", \"grey\", averagePolarity * -1]\r\n    \r\n}\r\n\r\nfor(let i = 0; i < boundaries.features.length; i++) {\r\n\r\n    var color = averagePolarity(i)\r\n\r\n    boundaries.features[i].properties.color = color\r\n  \r\n}\r\n\r\n} else if (funcOption == 3) {\r\n    function averageSubjectivity (i) {\r\n \r\n         var conTDs = storeTDsByConstituency()\r\n \r\n         var justTDs = conTDs[i][1].map(d => d.TD)\r\n \r\n         var justTDsOnTwitter = justTDs.filter(d => d.sentimentData != undefined) \r\n \r\n         var averageSubjectivity = justTDsOnTwitter.map(d => d.sentimentData[3].subjectivity).reduce((a, b) => a + b) / justTDsOnTwitter.length\r\n \r\n \r\n         return [0, \"grey\", \"grey\", averageSubjectivity * -1]\r\n     \r\n }\r\n \r\n for(let i = 0; i < boundaries.features.length; i++) {\r\n \r\n     var color = averageSubjectivity(i)\r\n \r\n     boundaries.features[i].properties.color = color\r\n   \r\n }\r\n \r\n} else if (funcOption == 4) {\r\n    function averageFollowers (i) {\r\n \r\n         var conTDs = storeTDsByConstituency()\r\n \r\n         var justTDs = conTDs[i][1].map(d => d.TD)\r\n \r\n         var justTDsOnTwitter = justTDs.filter(d => d.followerData != undefined).filter(d => d.followerData.length != 0)\r\n\r\n \r\n         var averageFollowers = justTDsOnTwitter.map(d => d.followerData[3].followers).reduce((a, b) => a + b) / justTDsOnTwitter.length\r\n\r\n         console.log(averageFollowers)\r\n \r\n \r\n         return [0, \"grey\", \"grey\", averageFollowers]\r\n     \r\n }\r\n \r\n for(let i = 0; i < boundaries.features.length; i++) {\r\n \r\n     var color = averageFollowers(i)\r\n \r\n     boundaries.features[i].properties.color = color\r\n   \r\n }\r\n \r\n} else if (funcOption == 5) {\r\n    function averageRetweets (i) {\r\n \r\n         var conTDs = storeTDsByConstituency()\r\n \r\n         var justTDs = conTDs[i][1].map(d => d.TD)\r\n \r\n         var justTDsOnTwitter = justTDs.filter(d => d.retweetData != undefined).filter(d => d.retweetData.length != 0)\r\n\r\n         var averageRetweets = justTDsOnTwitter.map(d => d.retweetData[3].retweets).reduce((a, b) => a + b) / justTDsOnTwitter.length\r\n \r\n \r\n         return [0, \"grey\", \"grey\", averageRetweets]\r\n     \r\n }\r\n \r\n for(let i = 0; i < boundaries.features.length; i++) {\r\n \r\n     var color = averageRetweets(i)\r\n \r\n     boundaries.features[i].properties.color = color\r\n   \r\n }\r\n \r\n} else if (funcOption == 6) {\r\n    function averageOriginalTweets (i) {\r\n \r\n         var conTDs = storeTDsByConstituency()\r\n \r\n         var justTDs = conTDs[i][1].map(d => d.TD)\r\n \r\n         var justTDsOnTwitter = justTDs.filter(d => d.retweetData != undefined).filter(d => d.retweetData.length != 0)\r\n\r\n         var averageOriginalTweets = justTDsOnTwitter.map(d => d.retweetData[3].original_tweets).reduce((a, b) => a + b) / justTDsOnTwitter.length\r\n \r\n \r\n         return [0, \"grey\", \"grey\", averageOriginalTweets]\r\n     \r\n }\r\n \r\n for(let i = 0; i < boundaries.features.length; i++) {\r\n \r\n     var color = averageOriginalTweets(i)\r\n \r\n     boundaries.features[i].properties.color = color\r\n   \r\n }\r\n \r\n} else if (funcOption == 7) {\r\n    function totalRetweetsPerOriginalTweet (i) {\r\n \r\n         var conTDs = storeTDsByConstituency()\r\n \r\n         var justTDs = conTDs[i][1].map(d => d.TD)\r\n \r\n         var justTDsOnTwitter = justTDs.filter(d => d.retweetData != undefined).filter(d => d.retweetData.length != 0)\r\n\r\n         var totalTweets = justTDsOnTwitter.map(d => d.retweetData[3].original_tweets).reduce((a, b) => a + b)\r\n\r\n         var totalRetweets = justTDsOnTwitter.map(d => d.retweetData[3].retweets).reduce((a, b) => a + b)\r\n\r\n         var totalRetweetsPerOriginalTweet = totalRetweets / totalTweets\r\n \r\n \r\n         return [0, \"grey\", \"grey\", totalRetweetsPerOriginalTweet]\r\n     \r\n }\r\n \r\n for(let i = 0; i < boundaries.features.length; i++) {\r\n \r\n     var color = totalRetweetsPerOriginalTweet(i)\r\n \r\n     boundaries.features[i].properties.color = color\r\n   \r\n }\r\n \r\n} else if (funcOption == 8) {\r\n\r\n    function totalRetweetsPerFollower (i) {\r\n \r\n         var conTDs = storeTDsByConstituency()\r\n \r\n         var justTDs = conTDs[i][1].map(d => d.TD)\r\n \r\n         var justTDsOnTwitter = justTDs.filter(d => d.retweetData != undefined).filter(d => d.retweetData.length != 0).filter(d => d.followerData != undefined).filter(d => d.followerData.length != 0)\r\n\r\n         var totalFollowers = justTDsOnTwitter.map(d => d.followerData[3].followers).reduce((a, b) => a + b)\r\n\r\n         var totalRetweets = justTDsOnTwitter.map(d => d.retweetData[3].retweets).reduce((a, b) => a + b)\r\n\r\n         var totalRetweetsPerFollower = totalRetweets / totalFollowers\r\n \r\n \r\n         return [0, \"grey\", \"grey\", totalRetweetsPerFollower]\r\n     \r\n }\r\n \r\n for(let i = 0; i < boundaries.features.length; i++) {\r\n \r\n     var color = totalRetweetsPerFollower(i)\r\n \r\n     boundaries.features[i].properties.color = color\r\n   \r\n }\r\n \r\n} else if (funcOption == 9) {\r\n    function totalWrittenQuestionsAsked (i) {\r\n \r\n         var conTDs = storeTDsByConstituency()\r\n \r\n         var justTDs = conTDs[i][1].map(d => d.TD)\r\n\r\n        const sumValues = obj => Object.values(obj).reduce((a,b) => a + b) \r\n\r\n        var totalWrittenQuestions = justTDs.map(function(d) {\r\n\r\n\r\n            if(d.writtenQuestions[0].writtenQuestions.to != undefined) {\r\n                return sumValues(d.writtenQuestions[0].writtenQuestions.to)\r\n            }\r\n\r\n            return 0\r\n\r\n        }).reduce((a,b) => a + b)\r\n\r\n\r\n        console.log(totalWrittenQuestions)\r\n\r\n \r\n \r\n         return [0, \"grey\", \"grey\", totalWrittenQuestions]\r\n     \r\n }\r\n \r\n for(let i = 0; i < boundaries.features.length; i++) {\r\n \r\n     var color = totalWrittenQuestionsAsked(i)\r\n \r\n     boundaries.features[i].properties.color = color\r\n   \r\n }\r\n} else if (funcOption == 10) {\r\n\r\n    function totalOralQuestionsAsked (i) {\r\n \r\n         var conTDs = storeTDsByConstituency()\r\n \r\n         var justTDs = conTDs[i][1].map(d => d.TD)\r\n\r\n        const sumValues = obj => Object.values(obj).reduce((a,b) => a + b) \r\n\r\n        var totalOralQuestions = justTDs.map(function(d) {\r\n\r\n\r\n            if(d.oralQuestions[0].oralQuestions.to != undefined) {\r\n                return sumValues(d.oralQuestions[0].oralQuestions.to)\r\n            }\r\n\r\n            return 0\r\n\r\n        }).reduce((a,b) => a + b)\r\n\r\n        //  var justTDsOnTwitter = justTDs.filter(d => d.oralQuestions != undefined).filter(d => d.oralQuestions[0].oralQuestions.to != undefined)\r\n\r\n        //  var totalOralQuestions = sumValues(justTDsOnTwitter.map(d => sumValues(d.oralQuestions[0].oralQuestions.to)))\r\n\r\n        console.log(totalOralQuestions)\r\n\r\n \r\n \r\n         return [0, \"grey\", \"grey\", totalOralQuestions]\r\n     \r\n }\r\n \r\n for(let i = 0; i < boundaries.features.length; i++) {\r\n \r\n     var color = totalOralQuestionsAsked(i)\r\n \r\n     boundaries.features[i].properties.color = color\r\n   \r\n }\r\n \r\n} else if (funcOption == 11) {\r\n\r\n    function totalQuestionsAsked (i) {\r\n \r\n         var conTDs = storeTDsByConstituency()\r\n \r\n         var justTDs = conTDs[i][1].map(d => d.TD)\r\n\r\n        const sumValues = obj => Object.values(obj).reduce((a,b) => a + b) \r\n\r\n        var totalOralQuestions = justTDs.map(function(d) {\r\n\r\n            if(d.oralQuestions[0].oralQuestions.to != undefined) {\r\n                return sumValues(d.oralQuestions[0].oralQuestions.to)\r\n            }\r\n\r\n            return 0\r\n\r\n        }).reduce((a,b) => a + b)\r\n\r\n\r\n        var totalWrittenQuestions = justTDs.map(function(d) {\r\n\r\n\r\n            if(d.writtenQuestions[0].writtenQuestions.to != undefined) {\r\n                return sumValues(d.writtenQuestions[0].writtenQuestions.to)\r\n            }\r\n\r\n            return 0\r\n\r\n        }).reduce((a,b) => a + b)\r\n\r\n\r\n        var totalQuestions = totalOralQuestions + totalWrittenQuestions\r\n\r\n        //  var justTDsOnTwitter = justTDs.filter(d => d.oralQuestions != undefined).filter(d => d.oralQuestions[0].oralQuestions.to != undefined)\r\n\r\n        //  var totalOralQuestions = sumValues(justTDsOnTwitter.map(d => sumValues(d.oralQuestions[0].oralQuestions.to)))\r\n\r\n \r\n \r\n         return [0, \"grey\", \"grey\", totalQuestions]\r\n     \r\n }\r\n \r\n for(let i = 0; i < boundaries.features.length; i++) {\r\n \r\n     var color = totalQuestionsAsked(i)\r\n \r\n     boundaries.features[i].properties.color = color\r\n   \r\n }\r\n \r\n} else if (funcOption == 12) {\r\n\r\n    function totalTimesOnWinningSide (i) {\r\n \r\n         var conTDs = storeTDsByConstituency()\r\n \r\n         var justTDs = conTDs[i][1].map(d => d.TD)\r\n\r\n        var totalTimesOnWinningSide = justTDs.map(function(d) {\r\n\r\n            return d.voteData[0].onWinningSide\r\n\r\n        }).reduce((a,b) => a + b)\r\n\r\n         return [0, \"grey\", \"grey\", totalTimesOnWinningSide]\r\n     \r\n }\r\n \r\n for(let i = 0; i < boundaries.features.length; i++) {\r\n \r\n     var color = totalTimesOnWinningSide(i)\r\n \r\n     boundaries.features[i].properties.color = color\r\n   \r\n }\r\n \r\n} else if (funcOption == 13) {\r\n\r\n    function totalTimesOnLosingSide (i) {\r\n \r\n         var conTDs = storeTDsByConstituency()\r\n \r\n         var justTDs = conTDs[i][1].map(d => d.TD)\r\n\r\n        var totalTimesOnLosingSide = justTDs.map(function(d) {\r\n\r\n            return d.voteData[0].onLosingSide\r\n\r\n        }).reduce((a,b) => a + b)\r\n\r\n         return [0, \"grey\", \"grey\", totalTimesOnLosingSide]\r\n     \r\n }\r\n \r\n for(let i = 0; i < boundaries.features.length; i++) {\r\n \r\n     var color = totalTimesOnLosingSide(i)\r\n \r\n     boundaries.features[i].properties.color = color\r\n   \r\n }\r\n \r\n} else if (funcOption == 14) {\r\n\r\n    function averageTimesOnWinningSide (i) {\r\n \r\n         var conTDs = storeTDsByConstituency()\r\n \r\n         var justTDs = conTDs[i][1].map(d => d.TD)\r\n\r\n        var averageTimesOnWinningSide = justTDs.map(function(d) {\r\n\r\n            return d.voteData[0].onWinningSide\r\n\r\n        }).reduce((a,b) => a + b) / justTDs.length\r\n\r\n\r\n\r\n\r\n         return [0, \"grey\", \"grey\", averageTimesOnWinningSide]\r\n     \r\n }\r\n \r\n for(let i = 0; i < boundaries.features.length; i++) {\r\n \r\n     var color = averageTimesOnWinningSide(i)\r\n \r\n     boundaries.features[i].properties.color = color\r\n   \r\n }\r\n \r\n} else if (funcOption == 15) {\r\n\r\n    function averageTimesOnLosingSide (i) {\r\n \r\n         var conTDs = storeTDsByConstituency()\r\n \r\n         var justTDs = conTDs[i][1].map(d => d.TD)\r\n\r\n        var averageTimesOnLosingSide = justTDs.map(function(d) {\r\n\r\n            return d.voteData[0].onLosingSide\r\n\r\n        }).reduce((a,b) => a + b) / justTDs.length\r\n\r\n\r\n\r\n\r\n         return [0, \"grey\", \"grey\", averageTimesOnLosingSide]\r\n     \r\n }\r\n \r\n for(let i = 0; i < boundaries.features.length; i++) {\r\n \r\n     var color = averageTimesOnLosingSide(i)\r\n \r\n     boundaries.features[i].properties.color = color\r\n   \r\n }\r\n \r\n}\r\n\r\n\r\n\r\n\r\n\r\n    const colorValObj = d => d.properties.color\r\n\r\n    const heatColorFunc = d3.scaleSequential()\r\n        .interpolator( d3.interpolateRdYlBu)\r\n        .domain([d3.max(boundaries.features, d=>d.properties.color[3]),d3.min(boundaries.features, d=>d.properties.color[3])])\r\n\r\nconsole.log(boundaries)\r\n\r\n    //colorValObj has party color at [2]. \r\n\r\n\r\n    const svg = d3.select(svgRef.current);\r\n\r\n    const projection = geoMercator().scale(5300)\r\n    // Center the Map in Colombia\r\n    .center([-7.6, 53.6921])\r\n    .translate([width / 2, height / 2]);\r\n\r\n    const pathGenerator = geoPath().projection(projection)\r\n\r\n    svg.selectAll(\".total-avg-constituency\")\r\n        .data(boundaries.features)\r\n        .join(\"path\")\r\n        .attr(\"class\", \"total-avg-constituency\")\r\n        .transition()\r\n        .duration(400)\r\n        .attr(\"fill\", function(d) {\r\n\r\n            if(colorFunc == 0) {\r\n               return colorValObj(d)[2] \r\n            } else if (colorFunc == 1) {\r\n                return heatColorFunc(d.properties.color[3])\r\n            }\r\n        })\r\n        .style(\"stroke\", \"darkgreen\")\r\n        .style(\"stroke-width\", \"0.5px\")\r\n        .attr(\"d\", feature => pathGenerator(feature))\r\n\r\n\r\n        const tooltip = d3\r\n                .select('body')\r\n                .append('div')\r\n                .attr('class', 'd3-tooltip')\r\n                .style('position', 'absolute')\r\n                .style('z-index', '10')\r\n                .style('visibility', 'hidden')\r\n                .style('padding', '10px')\r\n                .style('background', 'rgba(0,0,0,0.6)')\r\n                .style('border-radius', '4px')\r\n                .style('color', '#fff')\r\n                .text('a simple tooltip');\r\n\r\n        const hoverColor = \"#eec42d\"\r\n\r\n\r\n        d3.selectAll(\".total-avg-constituency\")\r\n            .on('mouseover', function (d, i) {\r\n\r\n            if(funcOption == 0) {\r\n\r\n\r\n            tooltip\r\n                .html(\r\n                    `<div>${d.properties.CON_SEAT_} </div>\r\n                    <div>Party with Majority: ${colorValObj(d)[1]} </div>\r\n                    <div>Seats They Hold: ${colorValObj(d)[3]}</div>`\r\n                )\r\n                    .style('visibility', 'visible');\r\n                    d3.select(this).transition().attr('fill', hoverColor);\r\n            }\r\n\r\n            if(funcOption == 1) {\r\n\r\n\r\n                tooltip\r\n                    .html(\r\n                        `<div>${d.properties.CON_SEAT_} </div>\r\n                        <div>Party with Majority: ${colorValObj(d)[1]} </div>\r\n                        <div>Seats They Hold: ${colorValObj(d)[3]}</div>`\r\n                    )\r\n                        .style('visibility', 'visible');\r\n                        d3.select(this).transition().attr('fill', hoverColor);\r\n            }\r\n            if(funcOption == 2) {\r\n\r\n                tooltip\r\n                    .html(\r\n                        `<div>${d.properties.CON_SEAT_} </div>\r\n                        <div>Party with Majority: ${colorValObj(d)[1]} </div>\r\n                        <div>Average Polarity: ${(colorValObj(d)[3] * -1).toLocaleString()}</div>`\r\n                    )\r\n                        .style('visibility', 'visible');\r\n                        d3.select(this).transition().attr('fill', hoverColor);\r\n            }\r\n\r\n            if(funcOption == 3) {\r\n\r\n                tooltip\r\n                    .html(\r\n                        `<div>${d.properties.CON_SEAT_} </div>\r\n                        <div>Party with Majority: ${colorValObj(d)[1]} </div>\r\n                        <div>Average Subjectivity: ${(colorValObj(d)[3] * -1).toLocaleString()}</div>`\r\n                    )\r\n                        .style('visibility', 'visible');\r\n                        d3.select(this).transition().attr('fill', hoverColor);\r\n            } \r\n            if(funcOption == 4) {\r\n\r\n                tooltip\r\n                    .html(\r\n                        `<div>${d.properties.CON_SEAT_} </div>\r\n                        <div>Party with Majority: ${colorValObj(d)[1]} </div>\r\n                        <div>Average Subjectivity: ${(colorValObj(d)[3]).toLocaleString()}</div>`\r\n                    )\r\n                        .style('visibility', 'visible');\r\n                        d3.select(this).transition().attr('fill', hoverColor);\r\n            }\r\n            if(funcOption == 5) {\r\n\r\n                tooltip\r\n                    .html(\r\n                        `<div>${d.properties.CON_SEAT_} </div>\r\n                        <div>Party with Majority: ${colorValObj(d)[1]} </div>\r\n                        <div>Average Subjectivity: ${(colorValObj(d)[3]).toLocaleString()}</div>`\r\n                    )\r\n                        .style('visibility', 'visible');\r\n                        d3.select(this).transition().attr('fill', hoverColor);\r\n            }\r\n            if(funcOption == 6) {\r\n\r\n                tooltip\r\n                    .html(\r\n                        `<div>${d.properties.CON_SEAT_} </div>\r\n                        <div>Party with Majority: ${colorValObj(d)[1]} </div>\r\n                        <div>Average Subjectivity: ${(colorValObj(d)[3]).toLocaleString()}</div>`\r\n                    )\r\n                        .style('visibility', 'visible');\r\n                        d3.select(this).transition().attr('fill', hoverColor);\r\n                }\r\n                if(funcOption == 7) {\r\n\r\n                    tooltip\r\n                        .html(\r\n                            `<div>${d.properties.CON_SEAT_} </div>\r\n                            <div>Party with Majority: ${colorValObj(d)[1]} </div>\r\n                            <div>Average Subjectivity: ${(colorValObj(d)[3]).toLocaleString()}</div>`\r\n                        )\r\n                            .style('visibility', 'visible');\r\n                            d3.select(this).transition().attr('fill', hoverColor);\r\n                }\r\n                if(funcOption == 8) {\r\n\r\n                    tooltip\r\n                        .html(\r\n                            `<div>${d.properties.CON_SEAT_} </div>\r\n                            <div>Party with Majority: ${colorValObj(d)[1]} </div>\r\n                            <div>Average Subjectivity: ${(colorValObj(d)[3]).toLocaleString()}</div>`\r\n                        )\r\n                            .style('visibility', 'visible');\r\n                            d3.select(this).transition().attr('fill', hoverColor);\r\n                }\r\n                if(funcOption == 9) {\r\n\r\n                    tooltip\r\n                        .html(\r\n                            `<div>${d.properties.CON_SEAT_} </div>\r\n                            <div>Party with Majority: ${colorValObj(d)[1]} </div>\r\n                            <div>Average Subjectivity: ${(colorValObj(d)[3]).toLocaleString()}</div>`\r\n                        )\r\n                            .style('visibility', 'visible');\r\n                            d3.select(this).transition().attr('fill', hoverColor);\r\n                }\r\n                if(funcOption == 10) {\r\n\r\n                    tooltip\r\n                        .html(\r\n                            `<div>${d.properties.CON_SEAT_} </div>\r\n                            <div>Party with Majority: ${colorValObj(d)[1]} </div>\r\n                            <div>Average Subjectivity: ${(colorValObj(d)[3]).toLocaleString()}</div>`\r\n                        )\r\n                            .style('visibility', 'visible');\r\n                            d3.select(this).transition().attr('fill', hoverColor);\r\n                }\r\n                if(funcOption == 12) {\r\n\r\n                    tooltip\r\n                        .html(\r\n                            `<div>${d.properties.CON_SEAT_} </div>\r\n                            <div>Party with Majority: ${colorValObj(d)[1]} </div>\r\n                            <div>Average Subjectivity: ${(colorValObj(d)[3]).toLocaleString()}</div>`\r\n                        )\r\n                            .style('visibility', 'visible');\r\n                            d3.select(this).transition().attr('fill', hoverColor);\r\n                }\r\n                if(funcOption == 13) {\r\n\r\n                    tooltip\r\n                        .html(\r\n                            `<div>${d.properties.CON_SEAT_} </div>\r\n                            <div>Party with Majority: ${colorValObj(d)[1]} </div>\r\n                            <div>Average Subjectivity: ${(colorValObj(d)[3]).toLocaleString()}</div>`\r\n                        )\r\n                            .style('visibility', 'visible');\r\n                            d3.select(this).transition().attr('fill', hoverColor);\r\n                }\r\n                if(funcOption == 14) {\r\n\r\n                    tooltip\r\n                        .html(\r\n                            `<div>${d.properties.CON_SEAT_} </div>\r\n                            <div>Party with Majority: ${colorValObj(d)[1]} </div>\r\n                            <div>Average Subjectivity: ${(colorValObj(d)[3]).toLocaleString()}</div>`\r\n                        )\r\n                            .style('visibility', 'visible');\r\n                            d3.select(this).transition().attr('fill', hoverColor);\r\n                }\r\n                if(funcOption == 15) {\r\n\r\n                    tooltip\r\n                        .html(\r\n                            `<div>${d.properties.CON_SEAT_} </div>\r\n                            <div>Party with Majority: ${colorValObj(d)[1]} </div>\r\n                            <div>Average Subjectivity: ${(colorValObj(d)[3]).toLocaleString()}</div>`\r\n                        )\r\n                            .style('visibility', 'visible');\r\n                            d3.select(this).transition().attr('fill', hoverColor);\r\n                }\r\n                if(funcOption == 16) {\r\n\r\n                    tooltip\r\n                        .html(\r\n                            `<div>${d.properties.CON_SEAT_} </div>\r\n                            <div>Party with Majority: ${colorValObj(d)[1]} </div>\r\n                            <div>Average Subjectivity: ${(colorValObj(d)[3]).toLocaleString()}</div>`\r\n                        )\r\n                            .style('visibility', 'visible');\r\n                            d3.select(this).transition().attr('fill', hoverColor);\r\n                }\r\n                if(funcOption == 17) {\r\n\r\n                    tooltip\r\n                        .html(\r\n                            `<div>${d.properties.CON_SEAT_} </div>\r\n                            <div>Party with Majority: ${colorValObj(d)[1]} </div>\r\n                            <div>Average Subjectivity: ${(colorValObj(d)[3]).toLocaleString()}</div>`\r\n                        )\r\n                            .style('visibility', 'visible');\r\n                            d3.select(this).transition().attr('fill', hoverColor);\r\n                }\r\n                if(funcOption == 18) {\r\n\r\n                    tooltip\r\n                        .html(\r\n                            `<div>${d.properties.CON_SEAT_} </div>\r\n                            <div>Party with Majority: ${colorValObj(d)[1]} </div>\r\n                            <div>Average Subjectivity: ${(colorValObj(d)[3]).toLocaleString()}</div>`\r\n                        )\r\n                            .style('visibility', 'visible');\r\n                            d3.select(this).transition().attr('fill', hoverColor);\r\n                }\r\n                })\r\n\r\n                .on('mousemove', function () {\r\n                    tooltip\r\n                    .style('top', d3.event.pageY - 10 + 'px')\r\n                    .style('left', d3.event.pageX + 10 + 'px');\r\n                })\r\n                .on('mouseout', function () {\r\n                    tooltip.html(``).style('visibility', 'hidden');\r\n                    d3.select(this).transition()        .attr(\"fill\", function(d) {\r\n       \r\n                        if(colorFunc == 0) {\r\n                            return colorValObj(d)[2] \r\n                         } else if (colorFunc == 1) {\r\n                             return heatColorFunc(d.properties.color[3])\r\n                         }\r\n            \r\n                    });\r\n                });\r\n\r\n}, [boundaries, TDData, justParty, funcOption, colorFunc])\r\n\r\nif(!TDData) return null;\r\n\r\n    return (\r\n        <div className=\"featuredItem\" style={{textAlign: \"center\"}}>   \r\n        <Typography variant=\"h5\">Meta Data</Typography>         \r\n        <FormControl className={classes.formControl}>\r\n              <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">Party</InputLabel>\r\n              <Select onChange={onChangeFuncOption} style={{ color: \"white\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n                <ListSubheader>Data</ListSubheader>\r\n                <MenuItem value={0}>Number of Seats</MenuItem>\r\n                <MenuItem value={1}>Women in Constituency</MenuItem>  \r\n                <MenuItem value={2}>Average Polarity</MenuItem>\r\n                <MenuItem value={3}>Average Subjectivity</MenuItem> \r\n                <MenuItem value={4}>Average Followers</MenuItem> \r\n                <MenuItem value={5}>Average Retweets</MenuItem>     \r\n                <MenuItem value={6}>Average Original Tweets</MenuItem>         \r\n                <MenuItem value={7}>Total Retweet to Original Tweet Ratio</MenuItem>  \r\n                <MenuItem value={8}>Total Follower to Retweet Ratio</MenuItem>  \r\n                <MenuItem value={9}>Total Written Questions Asked</MenuItem>  \r\n                <MenuItem value={10}>Total Oral Questions Asked</MenuItem>  \r\n                <MenuItem value={11}>Total Questions Asked</MenuItem> \r\n                <MenuItem value={12}>Total Times On Winning Side</MenuItem> \r\n                <MenuItem value={13}>Total Times On Losing Side</MenuItem> \r\n                <MenuItem value={14}>Average Times On Winning Side</MenuItem> \r\n                <MenuItem value={15}>Average Times On Losing Side</MenuItem> \r\n                {/* <MenuItem value={4}>Solidarity - People Before Profit</MenuItem>\r\n                <MenuItem value={5}>Independent</MenuItem>       \r\n                <MenuItem value={6}>Green Party</MenuItem>\r\n                <MenuItem value={7}>Social Democrats</MenuItem>\r\n                <MenuItem value={8}>Aontú</MenuItem>\r\n                <MenuItem value={9}>Independents 4 Change</MenuItem>               */}\r\n              </Select>\r\n        </FormControl>\r\n        <FormControl className={classes.formControl}>\r\n              <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">Color Value</InputLabel>\r\n              <Select onChange={onChangeColorFunc} style={{ color: \"white\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n                <ListSubheader>In Constituency...</ListSubheader>\r\n                <MenuItem value={1}>Heatmap</MenuItem>  \r\n              </Select>\r\n        </FormControl>\r\n        {/* <FormControl className={classes.formControl}>\r\n              <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">Color Value</InputLabel>\r\n              <Select onChange={onChangeColorFunc} style={{ color: \"white\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n                <ListSubheader>In Constituency...</ListSubheader>\r\n                <MenuItem value={0}>Color by Party</MenuItem>\r\n                <MenuItem value={1}>Heatmap</MenuItem>  \r\n              </Select>\r\n        </FormControl> */}\r\n            <div className={\"scroll-svg-container\"}>\r\n            <svg ref={svgRef} height={height + margin.top + margin.bottom} width={width + margin.left + margin.right}></svg>\r\n        </div>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default TotalAndAverageConstituencyMap\r\n","import React, {useEffect, useState} from 'react'\r\nimport PartyConstituencyMap from './PartyConstituencyMap'\r\nimport ScatterplotConstituency from './ScatterplotConstituency/ScatterplotConstituency'\r\nimport TDWithConstituencyMap from './TDWithConstituencyMap'\r\nimport TotalAndAverageConstituencyMap from './TotalAndAverageConstituencyMap'\r\n\r\n\r\n\r\n\r\nconst ConstituencyDashboard = ({data}) => {\r\n\r\n    const [TDData, setTDData] = useState(null)\r\n\r\n    useEffect(() => {\r\n\r\n\r\n        setTDData(data)\r\n\r\n    }, [])\r\n\r\n\r\n    if(!TDData) return null;\r\n\r\n    return (\r\n        <div>\r\n            <TDWithConstituencyMap data={TDData}/>\r\n            <PartyConstituencyMap data={TDData}/>\r\n            <TotalAndAverageConstituencyMap data={TDData}/>\r\n            <ScatterplotConstituency data={TDData} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ConstituencyDashboard\r\n","import * as d3 from 'd3'\r\nimport React from 'react'\r\nimport { useRef, useEffect, useState } from 'react'\r\nimport { Typography, Checkbox, FormControlLabel, Switch, Select, MenuItem, ListSubheader, FormControl, InputLabel, makeStyles } from '@material-ui/core'\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    icon: {\r\n      color: \"white\"\r\n  },\r\n\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n  }\r\n\r\n}));\r\n\r\nconst partyColors = {\r\n    \"Sinn Féin\": \"#326760\",\r\n    \"Fine Gael\": \"#6699FF\",\r\n    \"Fianna Fáil\": \"#66BB66\",\r\n    \"Labour Party\": \"#CC0000\",\r\n    \"Solidarity - People Before Profit\": \"#8E2420\",\r\n    \"Independent\": \"black\",\r\n    \"Green Party\": \"#99CC33\",\r\n    \"Social Democrats\": \"#752F8B\",\r\n    \"Aontú\": \"#44532A\",\r\n    \"Independents 4 Change\": \"grey\"}\r\n\r\n\r\nexport const ConstituencyBarchart = ({conTDsData}) => {\r\n\r\n\r\n\r\n\r\n    const options = [\r\n\r\n    \"Age\", \r\n    \"Followers\", \r\n    \"Retweets\", \r\n    \"Original Tweets\", \r\n    \"Followers Per Retweet\", \r\n    \"Retweets Per Original Tweet\", \r\n    \"Avg. Polarity\", \r\n    \"Avg. Subjectivity\", \r\n\r\n    \"Written Questions Asked\", \r\n    \"Oral Questions Asked\",\r\n    \"No. of Topics TD had Questions for\",\r\n    \"Avg. Questions TD had towards Topic\",\r\n\r\n\r\n    \"Absences\",\r\n    \"Presences\",\r\n    \"Votes Yes\",\r\n    \"Votes No\",\r\n    \"Times on Winning Side\",\r\n    \"Times on Losing Side\",\r\n    \"Yes and Carried\",\r\n    \"Yes and Lost\",\r\n    \"No and Carried\",\r\n    \"No and Lost\"\r\n\r\n    ]\r\n\r\nconst followers = d => {\r\n\r\n    if(d.followerData.length === 0) {\r\n      return 0\r\n    } else {\r\n      return d.followerData[currentWeekIndex].followers\r\n    }\r\n\r\n  }\r\nconst retweets = d => {\r\n\r\n  if(d.retweetData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.retweetData[currentWeekIndex].retweets\r\n  }\r\n\r\n}\r\n\r\nconst originalTweets = d => {\r\n\r\n  if(d.retweetData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.retweetData[currentWeekIndex].original_tweets\r\n  }\r\n\r\n}\r\n\r\nconst followerEngagementRate = (d) => {\r\n\r\n  if(d.followerData.length === 0) {\r\n    return 0\r\n  } else {\r\n\r\n  \r\n\r\n\r\n  var f = d.followerData[currentWeekIndex].followers\r\n  var r = d.retweetData[currentWeekIndex].retweets \r\n\r\n  var test = ((r / f))\r\n\r\n  if(test === Infinity ) {\r\n\r\n      test = 0\r\n  \r\n}\r\n\r\ntest = test ? test : 0;\r\n\r\nreturn test\r\n}\r\n}\r\nconst retweetsPerOriginalTweet = (d) => {\r\n\r\n\r\n  if(d.followerData.length === 0) {\r\n    return 0\r\n  } else {\r\n\r\n  \r\n\r\n  var r = d.retweetData[currentWeekIndex].retweets \r\n  var o = d.retweetData[currentWeekIndex].original_tweets\r\n\r\n  var test = r / o\r\n\r\n  if(test === Infinity ) {\r\n\r\n      test = 0\r\n  \r\n}\r\n\r\ntest = test ? test : 0;\r\n\r\n\r\nreturn test\r\n}\r\n}\r\nconst polarity = d => {\r\n\r\nif(d.sentimentData == undefined || d.sentimentData.length == 0) {\r\n  return 0\r\n} else {\r\n  return d.sentimentData[currentWeekIndex].polarity\r\n}\r\n\r\n}\r\n\r\nconst subjectivity = d => {\r\n\r\n  if(d.sentimentData == undefined || d.sentimentData.length == 0) {\r\n    return 0\r\n  } else {\r\n    return d.sentimentData[currentWeekIndex].subjectivity\r\n  }\r\n\r\n\r\n\r\n}\r\n\r\nconst writtenQuestions = (d) => {\r\n\r\n\r\n    var holder = d.writtenQuestions[0].writtenQuestions.to\r\n    if(!holder) return 0;\r\n    const sumValues = obj => Object.values(obj).reduce((a,b) => a + b) \r\n\r\n    var sum = sumValues(holder)\r\n\r\n    return sum\r\n    \r\n}\r\nconst oralQuestions = (d) => {\r\n\r\n\r\n    var holder = d.oralQuestions[0].oralQuestions.to\r\n    if(!holder) return 0;\r\n    const sumValues = obj => Object.values(obj).reduce((a,b) => a + b) \r\n\r\n    var sum = sumValues(holder)\r\n\r\n    return sum\r\n\r\n\r\n}\r\nconst absences = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].absences\r\n  }\r\n}\r\nconst presences = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].totalVotes\r\n  }\r\n}\r\nconst totalYes = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].totalYes\r\n  }\r\n}\r\nconst totalNo = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].totalNo\r\n  }\r\n}\r\nconst onWinningSide = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].onWinningSide\r\n  }\r\n}\r\nconst onLosingSide = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].onLosingSide\r\n  }\r\n}\r\nconst yesAndCarried = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].yesAndCarried\r\n  }\r\n}\r\nconst yesAndLost = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].yesAndLost\r\n  }\r\n}\r\nconst noAndCarried = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].noAndCarried\r\n  }\r\n}\r\nconst noAndLost = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].noAndLost\r\n  }\r\n}\r\nconst numberOfTopics = (d) => {\r\n\r\n  if(!d.writtenQuestions[0].writtenQuestions.topic) return 0;\r\n\r\n  return Object.keys(d.writtenQuestions[0].writtenQuestions.topic).length  \r\n\r\n}\r\nconst averageQuestionTowardsTopic = (d) => {\r\n\r\n  if(!d.writtenQuestions[0].writtenQuestions.topic) return 0;\r\n\r\n  var topics = Object.keys(d.writtenQuestions[0].writtenQuestions.topic).length  \r\n\r\n  var totalQuestions = writtenQuestions(d)\r\n\r\n  return totalQuestions / topics\r\n}\r\nconst age = (d) => {\r\n\r\n  const getDate = (d) => { \r\n    \r\n    let together = []\r\n    let apart = d.split('/')\r\n    let day = apart[0]\r\n    let month = apart[1]\r\n    let year = apart[2]\r\n  \r\n    together.push(month, day, year)\r\n    together.toString().replace(\",\",\"/\").replace(\",\",\"/\")\r\n    return new Date(together)\r\n  }\r\n    \r\n  if(!d.DOB) {\r\n\r\n  function calcAge() {\r\n      var birthday = +Date.now();\r\n      return ~~((Date.now() - birthday) / (31557600000));\r\n    }\r\n    return calcAge()\r\n  }\r\n  \r\n\r\n  function calcAge(date) {\r\n    var birthday = +getDate(date);\r\n    return ~~((Date.now() - birthday) / (31557600000));\r\n  }\r\n\r\n  return calcAge(d.DOB)\r\n    \r\n\r\n}\r\n\r\n\r\n\r\n    const optionsFunctions =\r\n\r\n    [ age,\r\n      followers, \r\n      retweets, \r\n      originalTweets, \r\n      followerEngagementRate, \r\n      retweetsPerOriginalTweet, \r\n      polarity, \r\n      subjectivity,\r\n\r\n      writtenQuestions, \r\n      oralQuestions, \r\n      numberOfTopics, \r\n      averageQuestionTowardsTopic,\r\n\r\n      absences, \r\n      presences, \r\n      totalYes, \r\n      totalNo, \r\n      onWinningSide, \r\n      onLosingSide, \r\n      yesAndCarried, \r\n      yesAndLost, \r\n      noAndCarried, \r\n      noAndLost, \r\n \r\n      ]\r\n\r\n\r\n    const classes = useStyles();\r\n\r\n\r\n    const [justConTDs, setJustConTDs] = useState(null)\r\n    const [currentWeekIndex, setCurrentWeekIndex] = useState(null)\r\n    const [highlightOption, setHighlightOption] = useState(0)\r\n    const [baseColorOption, setBaseColorOption] = useState(0)\r\n    const [yOption, setYOption] = useState(0)\r\n    const [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\r\n    const [height, setHeight] = useState(400)\r\n    const [width, setWidth] = useState(600)\r\n    const [colorMode, setColorMode] = useState(\"Light Mode\")\r\n    const [color, setColor] = useState(null)\r\n    const [fillColor, setFillColor] = useState(null)\r\n    const [backgroundColor, setBackgroundColor] = useState(null)\r\n    const [textColor, setTextColor] = useState(null)\r\n\r\n    function getWindowDimensions() {\r\n      const { innerWidth: width, innerHeight: height } = window;\r\n      return {\r\n        width,\r\n        height\r\n      };\r\n    }\r\n\r\n    function useWindowDimensions() {\r\n     \r\n    \r\n      useEffect(() => {\r\n        function handleResize() {\r\n          setWindowDimensions(getWindowDimensions());\r\n        }\r\n    \r\n        window.addEventListener('resize', handleResize);\r\n        return () => window.removeEventListener('resize', handleResize);\r\n      }, []);\r\n    \r\n      return windowDimensions;\r\n    }\r\n\r\n    console.log(useWindowDimensions())\r\n\r\n    const onChangeColorMode = (event, child) => {\r\n\r\n      if(child == true) {\r\n\r\n      setColorMode(\"Dark Mode\")\r\n      } \r\n      if(child == false) {\r\n        setColorMode(\"Light Mode\")\r\n      }\r\n      \r\n      console.log('color mode:' + event.target.value);\r\n      console.log(child);\r\n};\r\n\r\n\r\n    useEffect(() => {\r\n\r\n\r\n      console.log(colorMode)\r\n      \r\n            if(colorMode == \"Dark Mode\") {\r\n              setFillColor({fill: \"white\", color: \"white\"})\r\n              setColor({color: \"white\"})\r\n              setBackgroundColor(\"#191C24\")\r\n              setTextColor(\"white\")\r\n      \r\n            }\r\n      \r\n            if(colorMode == \"Light Mode\") {\r\n              setFillColor({fill: \"black\", color: \"black\"})\r\n              setColor({color: \"black\"})\r\n              setBackgroundColor(\"white\")\r\n              setTextColor(\"black\")\r\n            }\r\n      \r\n            \r\n      \r\n          }, [colorMode])\r\n\r\n    useEffect(() => {\r\n\r\n\r\n\r\n      if(windowDimensions.width < 500) {\r\n        setHeight(320)\r\n        setWidth(340)\r\n      }\r\n      if(windowDimensions.width < 400 && windowDimensions.width > 360) {\r\n        setHeight(320)\r\n        setWidth(340)\r\n      }\r\n      if(windowDimensions.width < 470 && windowDimensions.width > 400) {\r\n        setHeight(320)\r\n        setWidth(380)\r\n      }\r\n      if(windowDimensions.width < 680 && windowDimensions.width > 470) {\r\n        setHeight(360)\r\n        setWidth(480)\r\n      }\r\n      if(windowDimensions.width < 800 && windowDimensions.width > 600) {\r\n        setHeight(400)\r\n        setWidth(600)\r\n      }\r\n      if(windowDimensions.width < 980 && windowDimensions.width > 800) {\r\n        setHeight(450)\r\n        setWidth(650)\r\n      }\r\n      if(windowDimensions.width < 1080 && windowDimensions.width > 980) {\r\n        setHeight(450)\r\n        setWidth(650)\r\n      }\r\n      if(windowDimensions.width < 1200 && windowDimensions.width > 1080) {\r\n        setHeight(450)\r\n        setWidth(650)\r\n      }\r\n      if(windowDimensions.width > 1200) {\r\n        setHeight(450)\r\n        setWidth(650)\r\n      }\r\n    }, [windowDimensions])\r\n\r\n    const margin = {top: 20, right: 20, bottom: 100, left: 50}\r\n    const heightMargin = height - margin.left - margin.right;\r\n    const widthMargin = width - margin.top - margin.bottom;  \r\n\r\n\r\n    const svgRef= useRef()\r\n\r\n\r\nconst onChangeHighlight = (event, child) => {\r\n        setHighlightOption(event.target.value)\r\n        console.log('Highlight:' + event.target.value);\r\n        console.log(child);\r\n};\r\n\r\nconst onChangeBaseColor = (event, child) => {\r\n  setBaseColorOption(event.target.value)\r\n  console.log('Base color:' + event.target.value);\r\n  console.log(child);\r\n};\r\n\r\nconst onChangeY = (event, child) => {\r\n        setYOption(event.target.value)\r\n        console.log('y:' + event.target.value);\r\n        console.log(child);\r\n};\r\n\r\nuseEffect(() => {\r\n\r\n    setJustConTDs(conTDsData)\r\n\r\n}, [])\r\n\r\nuseEffect(() => {\r\n\r\n    if(!justConTDs) return null;\r\n    setCurrentWeekIndex(justConTDs[0].followerData.length - 1)\r\n\r\n}, [justConTDs])\r\n\r\n    useEffect(() => {\r\n\r\n    if(!justConTDs || !currentWeekIndex) return null;\r\n\r\n\r\n    if(colorMode == \"Dark Mode\") {\r\n      partyColors.Independent = \"white\"\r\n    }\r\n    if(colorMode == \"Light Mode\") {\r\n      partyColors.Independent = \"black\"\r\n    }\r\n\r\n      function testAge() {\r\n\r\n        const getDate = (d) => { \r\n    \r\n          let together = []\r\n          let apart = d.split('/')\r\n          let day = apart[0]\r\n          let month = apart[1]\r\n          let year = apart[2]\r\n        \r\n          together.push(month, day, year)\r\n          together.toString().replace(\",\",\"/\").replace(\",\",\"/\")\r\n          return new Date(together)\r\n        }\r\n\r\n        var DOBs = justConTDs.map(d => d.DOB)\r\n\r\n        var properDate = DOBs.map(function(d) {\r\n          \r\n        if(!d) {\r\n\r\n        function calcAge() {\r\n            var birthday = +Date.now();\r\n            return ~~((Date.now() - birthday) / (31557600000));\r\n          }\r\n          return calcAge()\r\n        }\r\n        \r\n\r\n        function calcAge(d) {\r\n          var birthday = +getDate(d);\r\n          return ~~((Date.now() - birthday) / (31557600000));\r\n        }\r\n\r\n        return calcAge(d)\r\n          \r\n          \r\n        })\r\n\r\n        return properDate\r\n      }\r\n\r\n\r\n      console.log(testAge())\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  console.log(justConTDs.map(d => [d.gender, d.name]))\r\n\r\n        const justConTDsHolderBar = justConTDs;\r\n\r\n        justConTDsHolderBar.sort(function(a, b) {\r\n         return   d3.ascending(a.party, b.party)\r\n        })\r\n\r\n        console.log(justConTDsHolderBar)\r\n\r\n        const xValue = d => d.name\r\n        const yValue = optionsFunctions[yOption]\r\n        const party = d => d.party\r\n        const color = (d) => {\r\n\r\n\r\n        const officeArr = []\r\n        let cabinetColor = \"#FFC000\"\r\n\r\n          if(baseColorOption === 1 && highlightOption != 0) {\r\n            cabinetColor = \"red\"\r\n          }\r\n\r\n\r\n\r\n        let trueArr = [];\r\n\r\n        if(highlightOption === 1) {\r\n\r\n        if(d.member_offices[0].length != 0) {\r\n\r\n          for(let i = 0; i < d.member_offices[0].length; i++) {\r\n  \r\n          var office = d.member_offices[0][i].office.officeName.showAs\r\n  \r\n          if(!d.member_offices[0][i].office.dateRange.end) {\r\n              officeArr.push(office)\r\n          } \r\n      }\r\n    }\r\n\r\n        for(let i = 0; i < officeArr.length; i++) {\r\n\r\n            if(officeArr[i].search(\"Minister for\") != -1 || officeArr[i].search(\"Taoiseach\") != -1) { \r\n              trueArr.push(true)   \r\n            } \r\n          }\r\n          if(trueArr.includes(true)) {\r\n              return cabinetColor\r\n          } else if(baseColorOption === 0) {\r\n              return partyColors[party(d)]\r\n          } else if (baseColorOption === 1) {\r\n            return \"lightblue\"\r\n          }\r\n} \r\n\r\nif(highlightOption == 2) {\r\n\r\n    if(d.member_offices[0].length != 0) {\r\n\r\n      for(let i = 0; i < d.member_offices[0].length; i++) {\r\n\r\n      var office = d.member_offices[0][i].office.officeName.showAs\r\n\r\n      if(!d.member_offices[0][i].office.dateRange.end) {\r\n          officeArr.push(office)\r\n      } \r\n  }\r\n}\r\n\r\n    for(let i = 0; i < officeArr.length; i++) {\r\n\r\n        if(officeArr[i].search(\"Minister of\") != -1) { \r\n          trueArr.push(true)   \r\n        } \r\n      }\r\n\r\n      console.log(trueArr)\r\n      if(trueArr.includes(true)) {\r\n          return cabinetColor\r\n      } else if(baseColorOption === 0) {\r\n          return partyColors[party(d)]\r\n      } else if(baseColorOption === 1) {\r\n        return \"lightblue\"\r\n      }\r\n} \r\n\r\nif(highlightOption == 3) {\r\n\r\n    if(d.member_offices[0].length != 0) {\r\n\r\n      for(let i = 0; i < d.member_offices[0].length; i++) {\r\n\r\n      var office = d.member_offices[0][i].office.officeName.showAs\r\n\r\n      if(!d.member_offices[0][i].office.dateRange.end) {\r\n          officeArr.push(office)\r\n      } \r\n  }\r\n}\r\n\r\n    for(let i = 0; i < officeArr.length; i++) {\r\n\r\n        if(officeArr[i].search(\"Minister of\") != -1 || officeArr[i].search(\"Minister for\") != -1 || officeArr[i].search(\"Taoiseach\") != -1) { \r\n          trueArr.push(true)   \r\n        } \r\n      }\r\n\r\n      console.log(trueArr)\r\n      if(trueArr.includes(true)) {\r\n          return cabinetColor\r\n      } else if(baseColorOption === 0) {\r\n          return partyColors[party(d)]\r\n      } else if(baseColorOption === 1) {\r\n        return \"lightblue\"\r\n      }\r\n}  \r\n\r\nif(highlightOption == 4) {\r\n  if(d.gender == \"Female\") {\r\n    return cabinetColor\r\n  } else if(baseColorOption === 0) {\r\n    return partyColors[party(d)]\r\n} else if(baseColorOption === 1) {\r\n  return \"lightblue\"\r\n}\r\n}\r\n           \r\n           return partyColors[party(d)]\r\n\r\n\r\n        } \r\n\r\n\r\n        const svg = d3.select(svgRef.current);\r\n\r\n\r\n        const xScale = d3.scaleBand()\r\n                            .domain(justConTDsHolderBar.map(xValue))\r\n                            .range([0, widthMargin])\r\n                            .padding(0.2)\r\n\r\n\r\n                           \r\n\r\n\r\n        const yScale = d3.scaleLinear()\r\n                        .domain([0, d3.max(justConTDsHolderBar, yValue)])\r\n                        .range([heightMargin, 0]);\r\n\r\n\r\n\r\n                        console.log(yValue)\r\n\r\n        const xAxis = d3.axisBottom(xScale)\r\n\r\n        svg\r\n            .select(\".x-axis-con-barchart\")\r\n            .attr(\"transform\", \"translate(0,\" + heightMargin + \")\")\r\n            .transition(2000)\r\n            .call(xAxis)\r\n\r\n\r\n        const yAxis = d3.axisLeft(yScale).tickFormat(d3.format(\".2s\"));\r\n\r\n    svg\r\n        .select(\".y-axis-con-barchart\")\r\n        .attr(\"transform\", \"translate(0,0)\")\r\n        .transition(500)\r\n        .call(yAxis)\r\n\r\n\r\n\r\n        const tooltip = d3\r\n                .select('body')\r\n                .append('div')\r\n                .attr('class', 'd3-tooltip')\r\n                .style('position', 'absolute')\r\n                .style('z-index', '10')\r\n                .style('visibility', 'hidden')\r\n                .style('padding', '10px')\r\n                .style('background', 'rgba(0,0,0,0.6)')\r\n                .style('border-radius', '4px')\r\n                .style('color', '#fff')\r\n                .text('a simple tooltip');\r\n\r\n\r\n        var rects = d3.select(\"#container-con-barchart\")\r\n                    .selectAll(\".bar\")\r\n                    .data(justConTDsHolderBar)\r\n                    .join(\"rect\")\r\n                    .attr(\"class\", \"bar\")\r\n                    \r\n\r\n\r\n\r\n                rects.transition()\r\n                    .duration(400)\r\n                    .attr(\"x\", d => xScale(xValue(d)))\r\n                    .attr(\"y\", d => yScale(yValue(d)))\r\n                    .attr(\"width\", xScale.bandwidth())\r\n                    .attr(\"height\", d => heightMargin - yScale(yValue(d)))\r\n                    .attr(\"fill\", color)\r\n\r\n                const hoverColor = \"#eec42d\"\r\n\r\n\r\n                rects\r\n                    .on('mouseover', function (d, i) {\r\n                        tooltip\r\n                        .html(\r\n                            `<div>Name: ${d.name}</div><div>Party: ${d.party}</div><div>${options[yOption]}: ${yValue(d).toLocaleString()}</div></div>`\r\n                        )\r\n                            .style('visibility', 'visible');\r\n                            d3.select(this).transition().attr('fill', hoverColor);\r\n                        })\r\n                        .on('mousemove', function () {\r\n                            tooltip\r\n                            .style('top', d3.event.pageY - 10 + 'px')\r\n                            .style('left', d3.event.pageX + 10 + 'px');\r\n                        })\r\n                        .on('mouseout', function () {\r\n                            tooltip.html(``).style('visibility', 'hidden');\r\n                            d3.select(this).transition().attr('fill', color);\r\n                        });\r\n\r\n\r\n\r\n        console.log(yScale(yValue(justConTDs[2])))\r\n    }, [justConTDs, colorMode, yOption, highlightOption, baseColorOption, currentWeekIndex, height, width])\r\n\r\n    return (\r\n    <div className={\"featuredItem\"} style={{textAlign: \"center\", padding: \"10px\", margin: \"10px\", background: backgroundColor, textAlign: \"center\"}}>\r\n            \r\n      <Typography style={color} variant=\"h5\">Interactive Barchart</Typography>\r\n          <div><FormControlLabel style={color}\r\n      control={<Switch value={true} onChange={onChangeColorMode}/>}\r\n      label=\"Dark Mode\"\r\n    /></div>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={fillColor} htmlFor=\"grouped-select\">Y-Value</InputLabel>\r\n        <Select onChange={onChangeY} style={color} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n        <ListSubheader value={0}>General</ListSubheader>\r\n        <MenuItem value={0}>Age</MenuItem>\r\n          <ListSubheader value={1}>Twitter Data, last 7 days</ListSubheader>\r\n          <MenuItem value={1}>Followers</MenuItem>\r\n          <MenuItem value={2}>Retweets</MenuItem>\r\n          <MenuItem value={3}>Original Tweets</MenuItem>          \r\n          <MenuItem value={4}>Followers Per Retweet</MenuItem>\r\n          <MenuItem value={5}>Retweets Per Original Tweet</MenuItem>\r\n          <MenuItem value={6}>Avg. Tweet Polarity</MenuItem>\r\n          <MenuItem value={7}>Avg. Tweet Subjectivity</MenuItem>\r\n          <ListSubheader value={8}>Dáil Questions, 01 July - 01 Sept</ListSubheader>          \r\n          <MenuItem value={8}>Written Questions Asked</MenuItem>\r\n          <MenuItem value={9}>Oral Questions Asked</MenuItem>          \r\n          <MenuItem value={10}>No. of Topics TD had Questions for</MenuItem>\r\n          <MenuItem value={11}>Avg. Questions TD had towards Topic</MenuItem>\r\n          <ListSubheader value={12}>Dáil Divisions, 01 Jan - 01 Sept </ListSubheader>  \r\n          <MenuItem value={12}>Divisions Absent</MenuItem>\r\n          <MenuItem value={13}>Divisions Present</MenuItem>\r\n          <MenuItem value={14}>No. of votes Yes</MenuItem>\r\n          <MenuItem value={15}>No. of votes No</MenuItem>\r\n          <MenuItem value={16}>Times on Winning Side of Division</MenuItem>\r\n          <MenuItem value={17}>Times on Losing Side of Division</MenuItem>\r\n          <MenuItem value={18}>Yes and Divison Carried</MenuItem>\r\n          <MenuItem value={19}>Yes and Division Lost</MenuItem>\r\n          <MenuItem value={20}>No and Division Carried</MenuItem>\r\n          <MenuItem value={21}>No and Division Lost</MenuItem>\r\n          <MenuItem disabled>News Mentions</MenuItem>\r\n          <MenuItem disabled>Votes recieved in last election</MenuItem>\r\n          <MenuItem disabled>Avg. Poll</MenuItem>\r\n        </Select>\r\n      </FormControl>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={fillColor} htmlFor=\"grouped-select\">Highlight</InputLabel>\r\n        <Select onChange={onChangeHighlight} style={color} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n          <MenuItem value={0}>Highlight None</MenuItem>\r\n          <MenuItem value={1}>Highlight Cabinet Ministers</MenuItem>\r\n          <MenuItem value={2}>Highlight Junior Ministers</MenuItem>\r\n          <MenuItem value={3}>Highlight Both</MenuItem>     \r\n          <MenuItem value={4}>Highlight Women</MenuItem>       \r\n        </Select>\r\n      </FormControl>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={fillColor} htmlFor=\"grouped-select\">Base Color</InputLabel>\r\n        <Select onChange={onChangeBaseColor} style={color} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n          <MenuItem value={0}>Party Color</MenuItem>\r\n          <MenuItem value={1}>Lightblue</MenuItem>       \r\n        </Select>\r\n      </FormControl>\r\n        <div className={\"scroll-svg-container\"} style={{marginTop: \"16px\"}}>\r\n            <svg ref={svgRef} height={heightMargin + margin.top + margin.bottom} width={widthMargin + margin.left + margin.right}>\r\n            <g id=\"container-con-barchart\" transform={'translate(' + margin.left + ',' + margin.top + ')'}>\r\n                <g className=\"x-axis-con-barchart\" style={color}></g>\r\n                <g className=\"y-axis-con-barchart\" style={color}></g>\r\n            </g>\r\n            </svg>\r\n        </div>\r\n    </div>\r\n    )\r\n}\r\n","import React, {useState, useEffect} from 'react'\r\n\r\nconst ConstituencyHeader = ({tds, data, name}) => {\r\n\r\n\r\n    const [TDData, setTDData] = useState(null)\r\n    const [TDsInConstituency, setTDsInConstituency] = useState(null)\r\n    const [constituencyName, setConstituencyName] = useState(null)\r\n    const [thisConstituencyData, setThisConstituencyData] = useState(null)\r\n\r\n\r\nuseEffect(() => {\r\n\r\nsetTDData(data)\r\nsetConstituencyName(name)\r\nsetTDsInConstituency(tds)\r\n\r\n}, [data, tds])\r\n\r\n\r\nif(!TDData || !TDsInConstituency || !constituencyName) return null\r\n\r\n    return (\r\n\r\n        <div className=\"td-header\" style={{background: \"white\",color: \"black\"}}>\r\n            <h1>{constituencyName}</h1>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ConstituencyHeader\r\n","import { Typography } from '@material-ui/core'\r\nimport React, {useState, useEffect, useRef} from 'react'\r\nimport * as d3 from 'd3'\r\nimport { FormControl, InputLabel, Select, ListSubheader, MenuItem, makeStyles } from '@material-ui/core'\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    icon: {\r\n      color: \"white\"\r\n  },\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n  }\r\n}));\r\n\r\n\r\nconst ConstituencyMinisterQuestionsBarchart = ({conTDsData}) => {\r\n\r\n\r\n    const [justConstituencyTDs, setJustConstituencyTDs] = useState(null);\r\n    const [totalQuestions, setTotalQuestions] = useState(null);\r\n    const [writtenQuestions, setWrittenQuestions] = useState(null);\r\n    const [oralQuestions, setOralQuestions] = useState(null);\r\n    const [mostAskedToByTD, setMostAskedToByTD] = useState(null);\r\n    const [mostAskedToTotal, setMostAskedToTotal] = useState(null);\r\n    const [dataOption, setDataOption] = useState(0);\r\n    const [colorOption, setColorOption] = useState(4)\r\n\r\n\r\n\r\n    // const [dataLength, setDataLength] = useState(0)\r\n\r\n\r\n    const partyColors = {\r\n        \"Sinn Féin\": \"#326760\",\r\n        \"Fine Gael\": \"#6699FF\",\r\n        \"Fianna Fáil\": \"#66BB66\",\r\n        \"Labour Party\": \"#CC0000\",\r\n        \"Solidarity - People Before Profit\": \"#8E2420\",\r\n        \"Independent\": \"white\",\r\n        \"Green Party\": \"#99CC33\",\r\n        \"Social Democrats\": \"#752F8B\",\r\n        \"Aontú\": \"#44532A\",\r\n        \"Independents 4 Change\": \"grey\"}\r\n\r\n\r\n    const tooltipData = [\"TD's Who Asked\", \"Total Questions Asked\"]\r\n    const tooltipData1 = [\"To\", \"To\"]\r\n\r\nconst onChangeDataOption = (event, child) => {\r\n    setDataOption(event.target.value)\r\n    console.log('Data Option:' + event.target.value);\r\n    console.log(child);\r\n  };\r\n\r\n  const onChangeColorOption = (event, child) => {\r\n    setColorOption(event.target.value)\r\n    console.log('Color Option:' + event.target.value);\r\n    console.log(child);\r\n  };\r\n\r\n//   const onChangeDataLength = (event, child) => {\r\n//     setDataLength(event.target.value)\r\n//     console.log('Data Length:' + event.target.value);\r\n//     console.log(child);\r\n//   };\r\n\r\n\r\n\r\n\r\n    useEffect(() => {\r\n\r\n\r\n        setJustConstituencyTDs(conTDsData)\r\n\r\n    }, [])\r\n\r\n\r\nuseEffect(() => {\r\n\r\n    if(!justConstituencyTDs) return null;\r\n\r\n\r\n    var tdsNoQuestion = justConstituencyTDs.map(function(d) {\r\n\r\n        if(!d.writtenQuestions[1].writtenQuestions.topic && !d.oralQuestions[1].oralQuestions.topic) {\r\n            return true\r\n        } else {\r\n            return false\r\n        }\r\n    })\r\n    \r\n    console.log(tdsNoQuestion)\r\n\r\n    const sumValues = obj => Object.values(obj).reduce((a, b) => a + b);\r\n\r\n    var toOral = justConstituencyTDs.map(d => d.oralQuestions[0].oralQuestions.topic)\r\n    var filteredOral = toOral.filter(d => d != undefined)\r\n    var summedOral = filteredOral.map(d => sumValues(d)).reduce((a, b) => a + b);\r\n    var toWritten = justConstituencyTDs.map(d => d.writtenQuestions[0].writtenQuestions.to)\r\n\r\n    //Who didn't ask any questions in period, minus ministers, minus cc and eoghan murphy\r\n    var whoDidnt = justConstituencyTDs.map(function(d){\r\n\r\n        if(!d.writtenQuestions[1].writtenQuestions.to && !d.oralQuestions[1].oralQuestions.to && d.member_offices[0].length === 0) {\r\n            return d.name\r\n        }\r\n    }).filter(d => d != undefined && d != \"Seán Ó Fearghaíl\" && d != \"Eoghan Murphy\")\r\n\r\n    var filteredWrittenTo = toWritten.filter(d => d != undefined) \r\n    var summedWritten = filteredWrittenTo.map(d => sumValues(d)).reduce((a, b) => a + b);\r\n    var uniqueKeysTo = Object.keys(filteredWrittenTo.reduce(function(result, obj) {\r\n        return Object.assign(result, obj);\r\n      }, {}))\r\n\r\nfunction toWrittenByTD() {\r\n\r\n\r\n\r\n    var topicWritten = justConstituencyTDs.map(d => d.writtenQuestions[0].writtenQuestions.to)\r\n    var filteredWrittenTopic = topicWritten.filter(d => d != undefined) \r\n    var summedWritten = filteredWrittenTopic.map(d => sumValues(d)).reduce((a, b) => a + b);\r\n\r\n    //Topics asked by TDs\r\n    var workingWithAsked = filteredWrittenTopic.map(d => Object.entries(d)).flat()\r\n    var askedByTopicsTDs = workingWithAsked.map(function(d) {\r\n        return d[0]\r\n    })\r\n\r\n    const mapAskedTopicsTD= askedByTopicsTDs.reduce((acc, e) => acc.set(e, (acc.get(e) || 0) + 1), new Map())\r\n\r\n    var toSortAskedTopicsTD = [...mapAskedTopicsTD.entries()]\r\n\r\n    toSortAskedTopicsTD.sort(function(a, b) {\r\n        return  b[1]-a[1]\r\n     })\r\n     if(toSortAskedTopicsTD.length > 25) {\r\n         toSortAskedTopicsTD.length = 25\r\n       }\r\n\r\n       return toSortAskedTopicsTD\r\n\r\n}\r\n\r\nfunction toWrittenTotal() {\r\n\r\n\r\n\r\n    var topicWritten = justConstituencyTDs.map(d => d.writtenQuestions[0].writtenQuestions.to)\r\n    var filteredWrittenTopic = topicWritten.filter(d => d != undefined) \r\n\r\n    //Topics asked by TDs\r\n    var workingWithAsked = filteredWrittenTopic.map(d => Object.entries(d)).flat()\r\n    var askedByTopicsTDs = workingWithAsked.map(function(d) {\r\n        return d\r\n    })\r\n    \r\n    const mapTotal = askedByTopicsTDs.reduce((acc, e) => acc.set(e[0], (acc.get(e[0]) || 0) + e[1]), new Map())\r\n\r\n    var toSortAskedTopicsTD = [...mapTotal.entries()]\r\n\r\n    toSortAskedTopicsTD.sort(function(a, b) {\r\n        return  b[1]-a[1]\r\n     })\r\n     if(toSortAskedTopicsTD.length > 25) {\r\n         toSortAskedTopicsTD.length = 25\r\n       }\r\n\r\n       return toSortAskedTopicsTD\r\n\r\n\r\n\r\n}\r\n\r\n\r\n    //Horribly named. Fix\r\n    \r\n    setTotalQuestions(summedOral + summedWritten)\r\n    setOralQuestions(summedOral)\r\n    setWrittenQuestions(summedWritten)\r\n\r\n    setMostAskedToByTD(toWrittenByTD())\r\n    setMostAskedToTotal(toWrittenTotal())\r\n\r\n\r\n}, [justConstituencyTDs])\r\n\r\n\r\nconst margin = {top: 20, right: 20, bottom: 120, left: 70}\r\n\r\nconst height = 600\r\nconst width = 900\r\n\r\nconst svgRef= useRef()\r\n\r\nconst classes = useStyles();\r\n\r\nuseEffect(() => {\r\n\r\n    if(!mostAskedToByTD || !mostAskedToTotal) return null;\r\n\r\n\r\n\r\n\r\nfunction coloredByPartyWithMostUniqueTDContributionsToMinister(minister) {\r\n\r\n        function getUniqueTDTopicContributionOfParty(party) {\r\n        \r\n        \r\n            // var listToCheck = topicWrittenByTD()\r\n        \r\n            var justPartyJustQuestion = justConstituencyTDs.filter(d => d.party == party).filter(d => d.writtenQuestions[0].writtenQuestions.to != undefined)\r\n        \r\n            var testMostByParty = justPartyJustQuestion.map(d => d.writtenQuestions[0].writtenQuestions.to)\r\n        \r\n            var sumTestParty = testMostByParty.map(d => Object.entries(d)).flat()\r\n        \r\n            var sumTestPartyFlat = sumTestParty.map(function(d) {\r\n                return d[0]\r\n            })\r\n        \r\n            const mapAskedTopicsTD = sumTestPartyFlat.reduce((acc, e) => acc.set(e, (acc.get(e) || 0) + 1), new Map())\r\n        \r\n            var toSortAskedTopicsTD = [...mapAskedTopicsTD.entries()]\r\n        \r\n            toSortAskedTopicsTD.sort(function(a, b) {\r\n                return  b[1]-a[1]\r\n             })\r\n\r\n             console.log(toSortAskedTopicsTD)\r\n        \r\n            return toSortAskedTopicsTD\r\n        \r\n        }\r\n\r\n        \r\n        function whichPartyHasMostUniqueContributionsToTopicByTD() {\r\n        \r\n            const parties = [\"Aontú\", \"Independent\", \"Green Party\", \"Labour Party\", \"Fianna Fáil\", \"Fine Gael\", \"Social Democrats\", \"People Before Profit\", \"Independents 4 Change\", \"Sinn Féin\"];\r\n        \r\n            var holderArr = []\r\n        \r\n            for(let i = 0; i < parties.length; i++) {\r\n        \r\n            var holder = getUniqueTDTopicContributionOfParty(parties[i])\r\n        \r\n            holderArr.push({party: parties[i], holder})\r\n        \r\n            }\r\n        \r\n            return holderArr\r\n        \r\n        }\r\n        \r\n        function partyWithMostUniqueTDContributionsToTopic(minister) {\r\n        \r\n            var partySortedContributions = whichPartyHasMostUniqueContributionsToTopicByTD() \r\n        \r\n            var holder = []\r\n        \r\n            const party = d => d.party\r\n        \r\n            for(let i = 0; i < partySortedContributions.length; i++) {\r\n        \r\n                var test = partySortedContributions[i].holder.map(function(d) {\r\n                    if(d[0] === minister) {\r\n                        return d\r\n                    }\r\n                }).filter(d => d != undefined)\r\n        \r\n        \r\n                holder.push({party: partySortedContributions[i].party, test})\r\n        \r\n        \r\n            }\r\n        \r\n            var filterEmpty = holder.filter(d => d.test.length != 0)\r\n        \r\n            var sorted = filterEmpty.sort((a, b) => b.test[0][1] - a.test[0][1])\r\n        \r\n            var most = sorted[0]\r\n        \r\n\r\n\r\n\r\n            var arr = [partyColors[party(most)], most.party, most.test[0][1]]\r\n        \r\n        \r\n            return arr\r\n        \r\n        }\r\n        \r\n        return partyWithMostUniqueTDContributionsToTopic(minister)\r\n        \r\n        }    \r\n\r\nfunction coloredByPartyWithMostContributionsToMinister(minister) { \r\n        \r\n        function getTotalContributionOfPartyToTopic(party) {\r\n        \r\n        \r\n            // var listToCheck = topicWrittenByTD()\r\n        \r\n            var justPartyJustQuestion = justConstituencyTDs.filter(d => d.party == party).filter(d => d.writtenQuestions[0].writtenQuestions.to != undefined)\r\n        \r\n            var testMostByParty = justPartyJustQuestion.map(d => d.writtenQuestions[0].writtenQuestions.to)\r\n        \r\n            var sumTestParty = testMostByParty.map(d => Object.entries(d)).flat()\r\n        \r\n            var sumTestPartyFlat = sumTestParty.map(function(d) {\r\n                return d\r\n            })\r\n        \r\n            const mapAskedTopicsTD = sumTestPartyFlat.reduce((acc, e) => acc.set(e[0], (acc.get(e[0]) || 0) + e[1]), new Map())\r\n        \r\n            var toSortAskedTopicsTD = [...mapAskedTopicsTD.entries()]\r\n        \r\n            toSortAskedTopicsTD.sort(function(a, b) {\r\n                return  b[1]-a[1]\r\n             })\r\n        \r\n            return toSortAskedTopicsTD\r\n        \r\n        }\r\n        \r\n        function whichPartyHasMostTotalContributionsToTopic() {\r\n        \r\n            const parties = [\"Aontú\", \"Independents\", \"Green Party\", \"Labour\", \"Fianna Fáil\", \"Fine Gael\", \"Social Democrats\", \"People Before Profit\", \"Independents 4 Change\", \"Sinn Féin\"];\r\n        \r\n            var holderArr = []\r\n        \r\n            for(let i = 0; i < parties.length; i++) {\r\n        \r\n            var holder = getTotalContributionOfPartyToTopic(parties[i])\r\n        \r\n            holderArr.push({party: parties[i], holder})\r\n        \r\n            }\r\n        \r\n            return holderArr\r\n        \r\n        }\r\n        \r\n        \r\n        function partyWithMostTotalContributionsToTopic(minister) {\r\n        \r\n            var partySortedContributions = whichPartyHasMostTotalContributionsToTopic() \r\n        \r\n            var holder = []\r\n        \r\n            const party = d => d.party\r\n        \r\n        \r\n            for(let i = 0; i < partySortedContributions.length; i++) {\r\n        \r\n                var test = partySortedContributions[i].holder.map(function(d) {\r\n                    if(d[0] == minister) {\r\n                        return d\r\n                    }\r\n                }).filter(d => d != undefined)\r\n        \r\n        \r\n                holder.push({party: partySortedContributions[i].party, test})\r\n        \r\n        \r\n            }\r\n        \r\n            var filterEmpty = holder.filter(d => d.test.length != 0)\r\n        \r\n            var sorted = filterEmpty.sort((a, b) => b.test[0][1] - a.test[0][1])\r\n        \r\n            var most = sorted[0]\r\n        \r\n            if(colorOption < 2) {\r\n                most = sorted[0]\r\n            } else {\r\n                most = sorted[1]\r\n            }\r\n        \r\n            var arr = [partyColors[party(most)], most.party, most.test[0][1]]\r\n        \r\n        \r\n            return arr\r\n        \r\n        }\r\n        \r\n        return partyWithMostTotalContributionsToTopic(minister)\r\n        \r\n        }\r\n\r\n        \r\nfunction coloredByPartyWithTDWhoHasContributedMostToMinister(minister) { \r\n        \r\n            function getTDWhoHasContributedMostToTopic(minister) {\r\n        \r\n                const parties = [\"Aontú\", \"Independents\", \"Green Party\", \"Labour\", \"Fianna Fáil\", \"Fine Gael\", \"Social Democrats\", \"People Before Profit\", \"Independents 4 Change\", \"Sinn Féin\"];\r\n        \r\n                const party = d => d[0]\r\n            \r\n                var justQuestionJustTopic = justConstituencyTDs.filter(d => d.writtenQuestions[0].writtenQuestions.to != undefined).filter(d => d.writtenQuestions[0].writtenQuestions.to[minister] != undefined)\r\n        \r\n                var arrToSort = justQuestionJustTopic.map(function(d) {\r\n            \r\n                var amount = d.writtenQuestions[0].writtenQuestions.to[minister];\r\n                var party = d.party\r\n                var name = d.name\r\n            \r\n                  return  [party, amount, name]\r\n            \r\n            \r\n                })\r\n            \r\n                var arrSorted = arrToSort.sort((a,b) => b[1] - a[1])\r\n\r\n        \r\n\r\n                    var most = arrSorted[0]\r\n\r\n \r\n        \r\n                \r\n        \r\n                most.unshift(partyColors[party(most)])\r\n        \r\n                return most\r\n        \r\n            }\r\n        \r\n            return getTDWhoHasContributedMostToTopic(minister)\r\n            \r\n        }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    const dataOptionArr = [mostAskedToByTD, mostAskedToTotal]\r\n\r\n    const colorOptionArr = [coloredByPartyWithMostUniqueTDContributionsToMinister, coloredByPartyWithMostContributionsToMinister, coloredByPartyWithMostUniqueTDContributionsToMinister, coloredByPartyWithMostContributionsToMinister, coloredByPartyWithTDWhoHasContributedMostToMinister]\r\n\r\n    console.log(dataOptionArr[dataOption])\r\n\r\n    const xValue = d => d[0]\r\n    const yValue = d => d[1]\r\n    const color = d => colorOptionArr[colorOption](d[0])\r\n\r\n\r\n    const xScale = d3.scaleBand()\r\n    .domain(dataOptionArr[dataOption].map(xValue))\r\n    .range([0, width])\r\n    .padding(0.2)\r\n\r\n    const svg = d3.select(svgRef.current);\r\n\r\nconst yScale = d3.scaleLinear()\r\n.domain([0, d3.max(dataOptionArr[dataOption], yValue)])\r\n.range([height, 0]);\r\n\r\n\r\n\r\nconsole.log(yValue)\r\n\r\nconst xAxis = d3.axisBottom(xScale).ticks(dataOptionArr[dataOption].length)\r\n\r\nsvg\r\n.select(\".x-axis-minister-questions-bar\")\r\n.attr(\"transform\", \"translate(0,\" + 600 + \")\")\r\n.transition(2000)\r\n.call(xAxis)\r\n.selectAll(\"text\")  \r\n.style(\"text-anchor\", \"end\")\r\n.attr(\"dx\", \"-.8em\")\r\n.attr(\"dy\", \".15em\")\r\n.attr(\"transform\", \"rotate(-25)\");\r\n\r\n\r\nconst yAxis = d3.axisLeft(yScale);\r\n\r\nsvg\r\n.select(\".y-axis-minister-questions-bar\")\r\n.attr(\"transform\", \"translate(0,0)\")\r\n.style(\"color\", \"white\")\r\n.transition(500)\r\n.call(yAxis)\r\n\r\n\r\n\r\nconst tooltip = d3\r\n.select('body')\r\n.append('div')\r\n.attr('class', 'd3-tooltip')\r\n.style('position', 'absolute')\r\n.style('z-index', '10')\r\n.style('visibility', 'hidden')\r\n.style('padding', '10px')\r\n.style('background', 'rgba(0,0,0,0.6)')\r\n.style('border-radius', '4px')\r\n.style('color', '#fff')\r\n.text('a simple tooltip');\r\n\r\n\r\nvar rects = d3.select(\"#container-minister-questions\")\r\n.selectAll(\".bar\")\r\n.data(dataOptionArr[dataOption])\r\n.join(\"rect\")\r\n.attr(\"class\", \"bar\")\r\n\r\nrects.transition()\r\n.duration(400)\r\n.attr(\"x\", d => xScale(xValue(d)))\r\n.attr(\"y\", d => yScale(yValue(d)))\r\n.attr(\"width\", xScale.bandwidth())\r\n.attr(\"height\", d => 600 - yScale(yValue(d)))\r\n.attr(\"fill\", d=> color(d)[0])\r\n\r\n\r\nconst hoverColor = \"#eec42d\"\r\n\r\n\r\n\r\nrects.on('mouseover', function (d, i) {\r\nif(color(d).length == 4) {\r\n\r\n\r\n    tooltip\r\n    .html(\r\n        `<div>${tooltipData1[dataOption]}: ${d[0]}</div> \r\n        <div>${tooltipData[dataOption]}: ${d[1].toLocaleString()}</div>\r\n        <div>${color(d)[3]} had ${color(d)[2]} questions</div>\r\n        `\r\n    )\r\n        .style('visibility', 'visible');\r\n        d3.select(this).transition().attr('fill', hoverColor);\r\n    \r\n    \r\n    } else if(colorOption === 0) {\r\n    \r\n        tooltip\r\n        .html(\r\n            `<div>${tooltipData1[dataOption]}: ${d[0]}</div> \r\n            <div>${tooltipData[dataOption]}: ${d[1].toLocaleString()}</div>\r\n            <div>${color(d)[2]} ${color(d)[1]} TD's contributed to this topic</div>\r\n            `\r\n        )\r\n            .style('visibility', 'visible');\r\n            d3.select(this).transition().attr('fill', hoverColor);\r\n    \r\n    \r\n    }\r\n    \r\n    \r\n    else {\r\n    \r\n    \r\n        tooltip\r\n        .html(\r\n            `<div>${tooltipData1[dataOption]}: ${d[0]}</div> \r\n            <div>${tooltipData[dataOption]}: ${d[1].toLocaleString()}</div>\r\n            <div>${color(d)[1]} had ${color(d)[2]} questions</div>\r\n            `\r\n        )\r\n            .style('visibility', 'visible');\r\n            d3.select(this).transition().attr('fill', hoverColor);\r\n    \r\n    \r\n    }\r\n\r\n})\r\n.on('mousemove', function () {\r\n    tooltip\r\n    .style('top', d3.event.pageY - 10 + 'px')\r\n    .style('left', d3.event.pageX + 10 + 'px');\r\n})\r\n.on('mouseout', function () {\r\n    tooltip.html(``).style('visibility', 'hidden');\r\n    d3.select(this).transition().attr('fill', d=> color(d)[0]);\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\n}, [justConstituencyTDs, mostAskedToByTD, mostAskedToTotal, dataOption, colorOption])\r\n\r\nif(!justConstituencyTDs || !totalQuestions ||!oralQuestions || !writtenQuestions ||!mostAskedToByTD ||!mostAskedToTotal) return null;\r\n\r\nreturn (\r\n    <div className=\"featuredItem\" style={{textAlign: \"center\"}}>\r\n        <Typography variant=\"h5\">Minister's Questions</Typography>\r\n            <FormControl className={classes.formControl}>\r\n    <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">Data-Value</InputLabel>\r\n    <Select onChange={onChangeDataOption} style={{ color: \"white\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n      <ListSubheader>Twitter Data</ListSubheader>\r\n      <MenuItem value={0}>Ministers Asked By Most Unique TDs</MenuItem>\r\n      <MenuItem value={1}>Minister Asked Most Total Questions</MenuItem>\r\n    </Select>\r\n  </FormControl>\r\n  <FormControl className={classes.formControl}>\r\n    <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">Data Amount</InputLabel>\r\n    <Select onChange={onChangeColorOption} style={{ color: \"white\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n        <MenuItem value={4}>TD with most questions</MenuItem>\r\n    </Select>\r\n  </FormControl>\r\n        <div className={\"scroll-svg-container\"}>\r\n        <svg ref={svgRef} height={height + margin.top + margin.bottom} width={width + margin.left + margin.right}>\r\n        <g id=\"container-minister-questions\" transform={'translate(' + margin.left + ',' + margin.top + ')'}>\r\n            <g className=\"x-axis-minister-questions-bar\"></g>\r\n            <g className=\"y-axis-minister-questions-bar\"></g>\r\n        </g>\r\n        </svg>\r\n    </div>   \r\n</div>\r\n)\r\n}\r\n\r\nexport default ConstituencyMinisterQuestionsBarchart","import React from 'react';\r\nimport useAutocomplete from '@material-ui/lab/useAutocomplete';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport styled from 'styled-components';\r\nimport { chamber } from '../../../Backend/rollCall';\r\n\r\nconst Label = styled('label')`\r\n  padding: 0 0 4px;\r\n  line-height: 1.5;\r\n  display: block;\r\n`;\r\n\r\nconst InputWrapper = styled('div')`\r\n  width: 300px;\r\n  color: black;\r\n  border: 1px solid #d9d9d9;\r\n  background-color: #fff;\r\n  border-radius: 4px;\r\n  padding: 1px;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n\r\n\r\n  &:hover {\r\n    border-color: #40a9ff;\r\n  }\r\n\r\n  &.focused {\r\n    border-color: #40a9ff;\r\n    box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);\r\n  }\r\n\r\n  & input {\r\n    color: black;\r\n    font-size: 14px;\r\n    height: 30px;\r\n    box-sizing: border-box;\r\n    padding: 4px 6px;\r\n    width: 0;\r\n    min-width: 30px;\r\n    flex-grow: 1;\r\n    border: 0;\r\n    margin: 0;\r\n    outline: 0;\r\n\r\n  }\r\n`;\r\n\r\nconst Tag = styled(({ label, onDelete, ...props }) => (\r\n  <div {...props}>\r\n    <span>{label}</span>\r\n    <CloseIcon onClick={onDelete} />\r\n  </div>\r\n))`\r\n  display: flex;\r\n  align-items: center;\r\n  height: 24px;\r\n  margin: 2px;\r\n  line-height: 22px;\r\n  background-color: #fafafa;\r\n  border: 1px solid #e8e8e8;\r\n  border-radius: 2px;\r\n  box-sizing: content-box;\r\n  padding: 0 4px 0 10px;\r\n  outline: 0;\r\n  overflow: hidden;\r\n\r\n  &:focus {\r\n    border-color: #40a9ff;\r\n    background-color: #e6f7ff;\r\n}\r\n\r\n  & span {\r\n    overflow: hidden;\r\n    white-space: nowrap;\r\n    text-overflow: ellipsis;\r\n  }\r\n\r\n  & svg {\r\n    font-size: 12px;\r\n    cursor: pointer;\r\n    padding: 4px;\r\n  }\r\n`;\r\n\r\nconst Listbox = styled('ul')`\r\n\r\n\r\n  width: 300px;\r\n  margin: 2px 0 0;\r\n  padding: 0;\r\n  position: absolute;\r\n  list-style: none;\r\n  background-color: white;\r\n  overflow: auto;\r\n  max-height: 250px;\r\n  border-radius: 4px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\r\n  z-index: 1;\r\n  color: black;\r\n\r\n  & li {\r\n\r\n    padding: 5px 12px;\r\n    display: flex;\r\n\r\n    & span {\r\n      flex-grow: 1;\r\n    }\r\n\r\n    & svg {\r\n      color: transparent;\r\n    }\r\n  }\r\n\r\n  & li[aria-selected='true'] {\r\n    background-color: #fafafa;\r\n    font-weight: 600;\r\n    color: black;\r\n    \r\n\r\n    & svg {\r\n      color: green;\r\n    }\r\n  }\r\n\r\n  & li[data-focus='true'] {\r\n    background-color: #e6f7ff;\r\n    cursor: pointer;\r\n    color: black;\r\n\r\n    & svg {\r\n        color: black\r\n    }\r\n  }\r\n`;\r\n\r\nexport default function CustomizedHook() {\r\n  const {\r\n    getRootProps,\r\n    getInputLabelProps,\r\n    getInputProps,\r\n    getTagProps,\r\n    getListboxProps,\r\n    getOptionProps,\r\n    groupedOptions,\r\n    value,\r\n    focused,\r\n    setAnchorEl,\r\n  } = useAutocomplete({\r\n    id: 'customized-hook-demo',\r\n    defaultValue: [top100Films[1]],\r\n    multiple: true,\r\n    options: chamber,\r\n    getOptionLabel: (option) => option.name,\r\n  });\r\n\r\n\r\n\r\n\r\n\r\n\r\n  return (\r\n      <div>\r\n        <div {...getRootProps()}>\r\n          <Label {...getInputLabelProps()}>Filter</Label>\r\n          <InputWrapper ref={setAnchorEl} className={focused ? 'focused' : ''}>\r\n\r\n        \r\n            {value.map((option, index) => (\r\n              <Tag label={option.name} {...getTagProps({ index })} />\r\n            ))}\r\n            \r\n            <input {...getInputProps()} />\r\n          </InputWrapper>\r\n        </div>\r\n        {groupedOptions.length > 0 ? (\r\n          <Listbox {...getListboxProps()}>\r\n            {groupedOptions.map((option, index) => (\r\n              <li fill={option.partyColor} {...getOptionProps({ option, index })}>\r\n                <span >{option.name} <span style={{borderRadius: \"50%\", backgroundColor: option.partyColor, height:\"5px\", width:\"5px\", display: \"inline-block\"}}></span></span>\r\n                <CheckIcon fontSize=\"small\" />\r\n              </li>\r\n            ))}\r\n          </Listbox>\r\n        ) : null}\r\n      </div>\r\n\r\n  );\r\n}\r\n\r\n// Top 100 films as rated by IMDb users. http://www.imdb.com/chart/top\r\nconst top100Films = [\r\n  { title: 'The Shawshank Redemption', year: 1994 },\r\n  { title: 'The Godfather', year: 1972 },\r\n  { title: 'The Godfather: Part II', year: 1974 },\r\n  { title: 'The Dark Knight', year: 2008 },\r\n  { title: '12 Angry Men', year: 1957 },\r\n  { title: \"Schindler's List\", year: 1993 },\r\n  { title: 'Pulp Fiction', year: 1994 },\r\n  { title: 'The Lord of the Rings: The Return of the King', year: 2003 },\r\n  { title: 'The Good, the Bad and the Ugly', year: 1966 },\r\n  { title: 'Fight Club', year: 1999 },\r\n  { title: 'The Lord of the Rings: The Fellowship of the Ring', year: 2001 },\r\n  { title: 'Star Wars: Episode V - The Empire Strikes Back', year: 1980 },\r\n  { title: 'Forrest Gump', year: 1994 },\r\n  { title: 'Inception', year: 2010 },\r\n  { title: 'The Lord of the Rings: The Two Towers', year: 2002 },\r\n  { title: \"One Flew Over the Cuckoo's Nest\", year: 1975 },\r\n  { title: 'Goodfellas', year: 1990 },\r\n  { title: 'The Matrix', year: 1999 },\r\n  { title: 'Seven Samurai', year: 1954 },\r\n  { title: 'Star Wars: Episode IV - A New Hope', year: 1977 },\r\n  { title: 'City of God', year: 2002 },\r\n  { title: 'Se7en', year: 1995 },\r\n  { title: 'The Silence of the Lambs', year: 1991 },\r\n  { title: \"It's a Wonderful Life\", year: 1946 },\r\n  { title: 'Life Is Beautiful', year: 1997 },\r\n  { title: 'The Usual Suspects', year: 1995 },\r\n  { title: 'Léon: The Professional', year: 1994 },\r\n  { title: 'Spirited Away', year: 2001 },\r\n  { title: 'Saving Private Ryan', year: 1998 },\r\n  { title: 'Once Upon a Time in the West', year: 1968 },\r\n  { title: 'American History X', year: 1998 },\r\n  { title: 'Interstellar', year: 2014 },\r\n  { title: 'Casablanca', year: 1942 },\r\n  { title: 'City Lights', year: 1931 },\r\n  { title: 'Psycho', year: 1960 },\r\n  { title: 'The Green Mile', year: 1999 },\r\n  { title: 'The Intouchables', year: 2011 },\r\n  { title: 'Modern Times', year: 1936 },\r\n  { title: 'Raiders of the Lost Ark', year: 1981 },\r\n  { title: 'Rear Window', year: 1954 },\r\n  { title: 'The Pianist', year: 2002 },\r\n  { title: 'The Departed', year: 2006 },\r\n  { title: 'Terminator 2: Judgment Day', year: 1991 },\r\n  { title: 'Back to the Future', year: 1985 },\r\n  { title: 'Whiplash', year: 2014 },\r\n  { title: 'Gladiator', year: 2000 },\r\n  { title: 'Memento', year: 2000 },\r\n  { title: 'The Prestige', year: 2006 },\r\n  { title: 'The Lion King', year: 1994 },\r\n  { title: 'Apocalypse Now', year: 1979 },\r\n  { title: 'Alien', year: 1979 },\r\n  { title: 'Sunset Boulevard', year: 1950 },\r\n  { title: 'Dr. Strangelove or: How I Learned to Stop Worrying and Love the Bomb', year: 1964 },\r\n  { title: 'The Great Dictator', year: 1940 },\r\n  { title: 'Cinema Paradiso', year: 1988 },\r\n  { title: 'The Lives of Others', year: 2006 },\r\n  { title: 'Grave of the Fireflies', year: 1988 },\r\n  { title: 'Paths of Glory', year: 1957 },\r\n  { title: 'Django Unchained', year: 2012 },\r\n  { title: 'The Shining', year: 1980 },\r\n  { title: 'WALL·E', year: 2008 },\r\n  { title: 'American Beauty', year: 1999 },\r\n  { title: 'The Dark Knight Rises', year: 2012 },\r\n  { title: 'Princess Mononoke', year: 1997 },\r\n  { title: 'Aliens', year: 1986 },\r\n  { title: 'Oldboy', year: 2003 },\r\n  { title: 'Once Upon a Time in America', year: 1984 },\r\n  { title: 'Witness for the Prosecution', year: 1957 },\r\n  { title: 'Das Boot', year: 1981 },\r\n  { title: 'Citizen Kane', year: 1941 },\r\n  { title: 'North by Northwest', year: 1959 },\r\n  { title: 'Vertigo', year: 1958 },\r\n  { title: 'Star Wars: Episode VI - Return of the Jedi', year: 1983 },\r\n  { title: 'Reservoir Dogs', year: 1992 },\r\n  { title: 'Braveheart', year: 1995 },\r\n  { title: 'M', year: 1931 },\r\n  { title: 'Requiem for a Dream', year: 2000 },\r\n  { title: 'Amélie', year: 2001 },\r\n  { title: 'A Clockwork Orange', year: 1971 },\r\n  { title: 'Like Stars on Earth', year: 2007 },\r\n  { title: 'Taxi Driver', year: 1976 },\r\n  { title: 'Lawrence of Arabia', year: 1962 },\r\n  { title: 'Double Indemnity', year: 1944 },\r\n  { title: 'Eternal Sunshine of the Spotless Mind', year: 2004 },\r\n  { title: 'Amadeus', year: 1984 },\r\n  { title: 'To Kill a Mockingbird', year: 1962 },\r\n  { title: 'Toy Story 3', year: 2010 },\r\n  { title: 'Logan', year: 2017 },\r\n  { title: 'Full Metal Jacket', year: 1987 },\r\n  { title: 'Dangal', year: 2016 },\r\n  { title: 'The Sting', year: 1973 },\r\n  { title: '2001: A Space Odyssey', year: 1968 },\r\n  { title: \"Singin' in the Rain\", year: 1952 },\r\n  { title: 'Toy Story', year: 1995 },\r\n  { title: 'Bicycle Thieves', year: 1948 },\r\n  { title: 'The Kid', year: 1921 },\r\n  { title: 'Inglourious Basterds', year: 2009 },\r\n  { title: 'Snatch', year: 2000 },\r\n  { title: '3 Idiots', year: 2009 },\r\n  { title: 'Monty Python and the Holy Grail', year: 1975 },\r\n];\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport ListSubheader from '@material-ui/core/ListSubheader';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport { options } from './AxisUtils/AxisUtils';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    icon: {\r\n      color: \"white\"\r\n  },\r\n\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n    \r\n  }\r\n\r\n}));\r\n\r\nexport default function GroupedSelect() {\r\n\r\n  \r\n  const classes = useStyles();\r\n\r\n  const onChangeX = (event, child) => {\r\n    console.log('x:' + event.target.value);\r\n    console.log(child);\r\n  };\r\n\r\n  const onChangeY = (event, child) => {\r\n    console.log('y:' + event.target.value);\r\n    console.log(child);\r\n  };\r\n\r\n\r\n\r\n\r\n  return (\r\n    <div>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">X-Value</InputLabel>\r\n        <Select  onChange={onChangeX} style={{ color: \"white\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n          <MenuItem value=\"\">\r\n            <em>None</em>\r\n          </MenuItem>\r\n          <ListSubheader>Twitter Data</ListSubheader>\r\n          <MenuItem value={1}>Total Followers</MenuItem>\r\n          <MenuItem value={2}>Total Retweets</MenuItem>\r\n          <MenuItem value={3}>Avg. Sentimenmt</MenuItem>\r\n          <MenuItem value={4}>Activty</MenuItem>\r\n          <MenuItem value={5}>Connectivity</MenuItem>\r\n          <ListSubheader>Parliamentary Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={6}>Yes Votes</MenuItem>\r\n          <MenuItem value={7}>No Votes</MenuItem>\r\n          <MenuItem value={8}>Motions Tabled</MenuItem>\r\n          <MenuItem value={9}>Questions Asked</MenuItem>\r\n          <ListSubheader>News Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={10}>News Mentions</MenuItem>\r\n          <ListSubheader>Electoral Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={11}>Votes in last election</MenuItem>\r\n          <MenuItem value={12}>Opinion polls</MenuItem>\r\n        </Select>\r\n      </FormControl>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">Y-Value</InputLabel>\r\n        <Select onChange={onChangeY} style={{ color: \"white\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n          <MenuItem value=\"\">\r\n            <em>None</em>\r\n          </MenuItem>\r\n          <ListSubheader>Twitter Data</ListSubheader>\r\n          <MenuItem value={1}>Total Followers</MenuItem>\r\n          <MenuItem value={2}>Total Retweets</MenuItem>\r\n          <MenuItem value={3}>Avg. Sentimenmt</MenuItem>\r\n          <MenuItem value={4}>Activty</MenuItem>\r\n          <MenuItem value={5}>Connectivity</MenuItem>\r\n          <ListSubheader>Parliamentary Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={6}>Yes Votes</MenuItem>\r\n          <MenuItem value={7}>No Votes</MenuItem>\r\n          <MenuItem value={8}>Motions Tabled</MenuItem>\r\n          <MenuItem value={9}>Questions Asked</MenuItem>\r\n          <ListSubheader>News Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={10}>News Mentions</MenuItem>\r\n          <ListSubheader>Electoral Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={11}>Votes in last election</MenuItem>\r\n          <MenuItem value={12}>Opinion polls</MenuItem>\r\n        </Select>\r\n      </FormControl>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">Circle Radius</InputLabel>\r\n        <Select style={{ color: \"white\"}} classes={{icon:classes.icon}}defaultValue=\"\" id=\"grouped-select\">\r\n          <MenuItem value=\"\">\r\n            <em>None</em>\r\n          </MenuItem>\r\n          <ListSubheader>Twitter Data</ListSubheader>\r\n          <MenuItem value={1}>Total Followers</MenuItem>\r\n          <MenuItem value={2}>Total Retweets</MenuItem>\r\n          <MenuItem value={3}>Avg. Sentimenmt</MenuItem>\r\n          <MenuItem value={4}>Activty</MenuItem>\r\n          <MenuItem value={5}>Connectivity</MenuItem>\r\n          <ListSubheader>Parliamentary Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={6}>Yes Votes</MenuItem>\r\n          <MenuItem value={7}>No Votes</MenuItem>\r\n          <MenuItem value={8}>Motions Tabled</MenuItem>\r\n          <MenuItem value={9}>Questions Asked</MenuItem>\r\n          <ListSubheader>News Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={10}>News Mentions</MenuItem>\r\n          <ListSubheader>Electoral Data (Coming Soon)</ListSubheader>\r\n          <MenuItem value={11}>Votes in last election</MenuItem>\r\n          <MenuItem value={12}>Opinion polls</MenuItem>\r\n\r\n        </Select>\r\n      </FormControl>\r\n    </div>\r\n  );\r\n}","import React from 'react'\r\nimport { useRef, useEffect, useState} from 'react'\r\nimport * as d3 from 'd3'\r\nimport { chamber } from '../../../Backend/rollCall'\r\nimport { axisBottom, axisLeft, svg } from 'd3'\r\nimport { current } from '../../../Backend/rollCall'\r\nimport { Typography, Checkbox, Select, ListItem, FormControlLabel, FormGroup, Switch } from '@material-ui/core'\r\nimport CustomizedHook from './SearchSelectBox'\r\nimport GroupedSelect from './GroupedSelectBox'\r\nimport './scatterplot.css'\r\nimport { MenuItem, ListSubheader, FormControl, InputLabel, makeStyles, List, ListItemText } from '@material-ui/core'\r\nimport axios from 'axios'\r\nimport { CollectionsBookmarkRounded, FormatAlignCenter, FormatListNumberedRtlOutlined } from '@material-ui/icons'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n        icon: {\r\n          color: \"#6553b8\"\r\n      },\r\n    \r\n      formControl: {\r\n        margin: theme.spacing(1),\r\n        minWidth: 120,  \r\n      }\r\n    \r\n}));\r\n\r\nconst partyColors = {\r\n\"Sinn Féin\": \"#326760\", \r\n\"Fine Gael\": \"#6699FF\", \r\n\"Fianna Fáil\": \"#66BB66\",\r\n\"Labour Party\": \"#CC0000\",\r\n\"Solidarity - People Before Profit\": \"#8E2420\",\r\n\"Independent\": \"black\",\r\n\"Green Party\": \"#99CC33\",\r\n\"Social Democrats\": \"#752F8B\",\r\n\"Aontú\": \"#44532A\",\r\n\"Independents 4 Change\": \"grey\"}\r\n\r\nconst ConstituencyScatterplot = ({conTDsData}) => {\r\n\r\n\r\n\r\n    const [TDDataScatter, setTDDataScatter] = useState(conTDsData)\r\n    const [partySelect, setPartySelect] = useState([\"Sinn Féin\", \"Fine Gael\", \"Fianna Fáil\", \"Labour Party\", \"Green Party\", \"Solidarity - People Before Profit\", \"Aontú\", \"Social Democrats\", \"Independent\", \"Independents 4 Change\"])\r\n    const [colorMode, setColorMode] = useState(\"Light Mode\")\r\n    const [color, setColor] = useState(null)\r\n    const [fillColor, setFillColor] = useState(null)\r\n    const [backgroundColor, setBackgroundColor] = useState(null)\r\n    const [textColor, setTextColor] = useState(null)\r\n    const [xOption, setXOption] = useState(0)\r\n    const [yOption, setYOption] = useState(1)\r\n    const [rOption, setROption] = useState(0)\r\n    const [highlightOption, setHighlightOption] = useState(0)\r\n    const [baseColorOption, setBaseColorOption] = useState(0)\r\n    const [filteredTDData, setFilteredTDData] = useState(null)\r\n    const [currentWeekIndex, setCurrentWeekIndex] = useState(null)\r\n    const [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\r\n    const [height, setHeight] = useState(620)\r\n    const [width, setWidth] = useState(920)\r\n    const [nodeSize, setNodeSize] = useState({min: 6, max: 20})\r\n\r\n\r\n    function getWindowDimensions() {\r\n      const { innerWidth: width, innerHeight: height } = window;\r\n      return {\r\n        width,\r\n        height\r\n      };\r\n    }\r\n\r\n    function useWindowDimensions() {\r\n     \r\n    \r\n      useEffect(() => {\r\n        function handleResize() {\r\n          setWindowDimensions(getWindowDimensions());\r\n        }\r\n    \r\n        window.addEventListener('resize', handleResize);\r\n        return () => window.removeEventListener('resize', handleResize);\r\n      }, []);\r\n    \r\n      return windowDimensions;\r\n    }\r\n\r\n    console.log(useWindowDimensions())\r\n\r\n\r\n    // const followers = d => d.followerData[currentWeekIndex].followers\r\n\r\n    const followers = d => {\r\n\r\n      if(d.followerData.length == 0) {\r\n        return 0\r\n      } else {\r\n        return d.followerData[currentWeekIndex].followers\r\n      }\r\n\r\n    }\r\n\r\n    // const retweets = d => d.retweetData[currentWeekIndex].retweets\r\n\r\n    const retweets = d => {\r\n\r\n      if(d.retweetData.length == 0) {\r\n        return 0\r\n      } else {\r\n        return d.retweetData[currentWeekIndex].retweets\r\n      }\r\n\r\n    }\r\n\r\n\r\n    // const original_tweets = d => d.retweetData[currentWeekIndex].original_tweets\r\n\r\n    const original_tweets = d => {\r\n\r\n      if(d.retweetData.length == 0) {\r\n        return 0\r\n      } else {\r\n        return d.retweetData[currentWeekIndex].original_tweets\r\n      }\r\n\r\n    }\r\n\r\n    // const polarity = d => d.sentimentData[currentWeekIndex].polarity\r\n\r\n    const polarity = d => {\r\n\r\n      if(d.sentimentData == undefined || d.sentimentData.length == 0) {\r\n        return 0\r\n      } else {\r\n        return d.sentimentData[currentWeekIndex].polarity\r\n      }\r\n\r\n    }\r\n    // const subjectivity = d => d.sentimentData[currentWeekIndex].subjectivity\r\n\r\n    const subjectivity = d => {\r\n\r\n      if(d.sentimentData == undefined || d.sentimentData.length == 0) {\r\n        return 0\r\n      } else {\r\n        return d.sentimentData[currentWeekIndex].subjectivity\r\n      }\r\n    }\r\n\r\n    const followerEngagementRate = (d) => {\r\n\r\n      if(d.followerData.length == 0) {\r\n        return 0\r\n      } else {\r\n\r\n      \r\n\r\n\r\n      var f = d.followerData[currentWeekIndex].followers\r\n      var r = d.retweetData[currentWeekIndex].retweets \r\n \r\n      var test = ((r / f))\r\n\r\n      if(test === Infinity ) {\r\n\r\n          test = 0\r\n      \r\n  }\r\n\r\n  test = test ? test : 0;\r\n\r\n  return test\r\n}\r\n    }\r\n    const retweetsPerOriginalTweet = (d) => {\r\n\r\n\r\n      if(d.followerData.length == 0) {\r\n        return 0\r\n      } else {\r\n\r\n      \r\n\r\n      var r = d.retweetData[currentWeekIndex].retweets \r\n      var o = d.retweetData[currentWeekIndex].original_tweets\r\n\r\n      var test = r / o\r\n\r\n      if(test === Infinity ) {\r\n\r\n          test = 0\r\n      \r\n  }\r\n\r\n  test = test ? test : 0;\r\n\r\n\r\n  return test\r\n}\r\n}\r\n\r\nconst writtenQuestionsAsked = d => {\r\n\r\n  var holder = d.writtenQuestions[0].writtenQuestions.to\r\n  if(!holder) return 0;\r\n  const sumValues = obj => Object.values(obj).reduce((a,b) => a + b) \r\n\r\n  var sum = sumValues(holder)\r\n\r\n  return sum\r\n\r\n}\r\n\r\nconst oralQuestionsAsked = d => {\r\n\r\n  var holder = d.oralQuestions[0].oralQuestions.to\r\n  if(!holder) return 0;\r\n  const sumValues = obj => Object.values(obj).reduce((a,b) => a + b) \r\n\r\n  var sum = sumValues(holder)\r\n\r\n  return sum\r\n\r\n\r\n\r\n}\r\n\r\nconst numberOfTopics = (d) => {\r\n\r\n  if(!d.writtenQuestions[0].writtenQuestions.topic) return 0;\r\n\r\n  return Object.keys(d.writtenQuestions[0].writtenQuestions.topic).length  \r\n\r\n}\r\n\r\nconst averageQuestionTowardsTopic = (d) => {\r\n\r\n  if(!d.writtenQuestions[0].writtenQuestions.topic) return 0;\r\n\r\n  var topics = Object.keys(d.writtenQuestions[0].writtenQuestions.topic).length  \r\n\r\n  var totalQuestions = writtenQuestionsAsked(d)\r\n\r\n  return totalQuestions / topics\r\n}\r\n\r\n\r\n\r\nconst absences = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].absences\r\n  }\r\n}\r\nconst presences = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].totalVotes\r\n  }\r\n}\r\nconst totalYes = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].totalYes\r\n  }\r\n}\r\nconst totalNo = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].totalNo\r\n  }\r\n}\r\nconst onWinningSide = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].onWinningSide\r\n  }\r\n}\r\nconst onLosingSide = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].onLosingSide\r\n  }\r\n}\r\nconst yesAndCarried = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].yesAndCarried\r\n  }\r\n}\r\nconst yesAndLost = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].yesAndLost\r\n  }\r\n}\r\nconst noAndCarried = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].noAndCarried\r\n  }\r\n}\r\nconst noAndLost = (d) => {\r\n  if(d.voteData.length === 0) {\r\n    return 0\r\n  } else {\r\n    return d.voteData[0].noAndLost\r\n  }\r\n}\r\nconst age = (d) => {\r\n\r\n  const getDate = (d) => { \r\n    \r\n    let together = []\r\n    let apart = d.split('/')\r\n    let day = apart[0]\r\n    let month = apart[1]\r\n    let year = apart[2]\r\n  \r\n    together.push(month, day, year)\r\n    together.toString().replace(\",\",\"/\").replace(\",\",\"/\")\r\n    return new Date(together)\r\n  }\r\n    \r\n  if(!d.DOB) {\r\n\r\n  function calcAge() {\r\n      var birthday = +Date.now();\r\n      return ~~((Date.now() - birthday) / (31557600000));\r\n    }\r\n    return calcAge()\r\n  }\r\n  \r\n\r\n  function calcAge(date) {\r\n    var birthday = +getDate(date);\r\n    return ~~((Date.now() - birthday) / (31557600000));\r\n  }\r\n\r\n  return calcAge(d.DOB)\r\n    \r\n\r\n}\r\n    \r\n    const optionsFunctions = [\r\n      age,\r\n      followers, \r\n      retweets, \r\n      original_tweets,      \r\n      followerEngagementRate, \r\n      retweetsPerOriginalTweet,  \r\n      polarity, \r\n      subjectivity,  \r\n\r\n      writtenQuestionsAsked, \r\n      oralQuestionsAsked, \r\n      numberOfTopics,\r\n      averageQuestionTowardsTopic,\r\n\r\n\r\n      absences, \r\n      presences, \r\n      totalYes, \r\n      totalNo, \r\n      onWinningSide, \r\n      onLosingSide, \r\n      yesAndCarried, \r\n      yesAndLost, \r\n      noAndCarried, \r\n      noAndLost, \r\n      \r\n    ]\r\n\r\n    const xValue = optionsFunctions[xOption]\r\n    const yValue = optionsFunctions[yOption]\r\n    const rValue = optionsFunctions[rOption]\r\n\r\n    useEffect(() => {\r\n\r\n        setTDDataScatter(conTDsData)\r\n        setFilteredTDData(TDDataScatter\r\n            \r\n      //     .filter(function(d) {\r\n          \r\n      //     if(d.followerData[0] != undefined) {\r\n      //     return d\r\n      //   }\r\n      // }\r\n      // )\r\n      \r\n      )\r\n\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n\r\n\r\nconsole.log(colorMode)\r\n\r\n      if(colorMode == \"Dark Mode\") {\r\n        setFillColor({fill: \"white\", color: \"white\"})\r\n        setColor({color: \"white\"})\r\n        setBackgroundColor(\"#191C24\")\r\n        setTextColor(\"white\")\r\n\r\n      }\r\n\r\n      if(colorMode == \"Light Mode\") {\r\n        setFillColor({fill: \"black\", color: \"black\"})\r\n        setColor({color: \"black\"})\r\n        setBackgroundColor(\"white\")\r\n        setTextColor(\"black\")\r\n      }\r\n\r\n      \r\n\r\n    }, [colorMode])\r\n\r\n\r\n\r\n\r\n\r\nuseEffect(() => {\r\n\r\n  if(!TDDataScatter) return null;\r\n\r\n  setCurrentWeekIndex(TDDataScatter[0].followerData.length - 1)\r\n\r\n}, [TDDataScatter])\r\n\r\n\r\n  const svgRef = useRef()\r\n\r\n    const options = [\r\n\r\n      \"Age\", \r\n      \"Followers\", \r\n      \"Retweets\", \r\n      \"Original Tweets\", \r\n      \"Followers Per Retweet\", \r\n      \"Retweets Per Original Tweet\", \r\n      \"Avg. Polarity\", \r\n      \"Avg. Subjectivity\", \r\n  \r\n      \"Written Questions Asked\", \r\n      \"Oral Questions Asked\",\r\n      \"No. of Topics TD had Questions for\",\r\n      \"Avg. Questions TD had towards Topic\",\r\n  \r\n  \r\n      \"Absences\",\r\n      \"Presences\",\r\n      \"Votes Yes\",\r\n      \"Votes No\",\r\n      \"Times on Winning Side\",\r\n      \"Times on Losing Side\",\r\n      \"Yes and Carried\",\r\n      \"Yes and Lost\",\r\n      \"No and Carried\",\r\n      \"No and Lost\"\r\n  \r\n        ]\r\n\r\n    const optionsExplanation = [\r\n\r\n      \"Number of Twitter followers on last check.\",\r\n      \"Number of retweets received over last week.\",\r\n      \"Number of original tweets (so excl. retweets) a TD has posted over last week.\",\r\n      \"Average sentiment of a TD's tweets over the past week, value lies between [-1, 1] with 1 being most positive.\",\r\n      \"Average subjectivity of a TD's tweets over the past week, value lies between [0, 1] with 1 being most subjective.\",\r\n      \"Followers divided by Retweets received over the last week.\",\r\n      \"Retweets divided by Original Tweets over the last week.\",\r\n      \"Written Questions asked between 01/08/21 - 30/08/21.\",\r\n      \"Oral Questions asked between 01/08/21 - 30/08/21.\"\r\n\r\n    ]   \r\n    \r\n\r\n    const classes = useStyles();\r\n\r\n    const handleChange = (event) => {\r\n\r\n          const holder = partySelect\r\n\r\n          const tester = event.target.value\r\n\r\n            if(partySelect.includes(tester)) {\r\n\r\n              for(let i = 0; i < holder.length; i++) {\r\n                if(holder[i] === tester) {\r\n                  holder.splice(i, 1)\r\n                  setPartySelect(holder)            \r\n                }\r\n              }\r\n            } else {\r\n              holder.push(tester)\r\n              setPartySelect(holder)\r\n            }\r\n\r\n\r\n              const selected = TDDataScatter;\r\n              const inbetween = selected;\r\n\r\n\r\n            const test = inbetween.filter(d => partySelect.includes(d.party))\r\n                     \r\n          \r\n            setFilteredTDData(test)\r\n\r\n            console.log(TDDataScatter)\r\n            \r\n      }\r\n\r\n\r\n    const onChangeColorMode = (event, child) => {\r\n\r\n      if(child == true) {\r\n\r\n      setColorMode(\"Dark Mode\")\r\n      } \r\n      if(child == false) {\r\n        setColorMode(\"Light Mode\")\r\n      }\r\n      \r\n      console.log('color mode:' + event.target.value);\r\n      console.log(child);\r\n};\r\n\r\n    const onChangeX = (event, child) => {\r\n            setXOption(event.target.value)\r\n            console.log('x:' + event.target.value);\r\n            console.log(child);\r\n    };\r\n\r\n    const onChangeY = (event, child) => {\r\n            setYOption(event.target.value)\r\n            console.log('y:' + event.target.value);\r\n            console.log(child);\r\n    };\r\n\r\n    const onChangeR = (event, child) => {\r\n        setROption(event.target.value)\r\n        console.log('r:' + event.target.value);\r\n        console.log(child);\r\n};\r\n\r\nconst onChangeHighlight = (event, child) => {\r\n  setHighlightOption(event.target.value)\r\n  console.log('highlight:' + event.target.value);\r\n  console.log(child);\r\n};\r\n\r\nconst onChangeBaseColor = (event, child) => {\r\n  setBaseColorOption(event.target.value)\r\n  console.log('base color:' + event.target.value);\r\n  console.log(child);\r\n};\r\n\r\n    const margin = {top: 20, right: 20, bottom: 100, left: 50}  \r\n    const heightMargin = height - margin.left - margin.right;\r\n    const widthMargin = width - margin.top - margin.bottom;        \r\n    \r\nuseEffect(() => {\r\n\r\n  if(windowDimensions.width < 500) {\r\n    setHeight(360)\r\n    setWidth(380)\r\n    setNodeSize({min: 4, max: 12})\r\n  }\r\n\r\n  if(windowDimensions.width < 600 && windowDimensions.width > 500) {\r\n    setHeight(400)\r\n    setWidth(500)\r\n    setNodeSize({min: 6, max: 20})\r\n  }\r\n\r\n  if(windowDimensions.width < 820 && windowDimensions.width > 600) {\r\n    setHeight(500)\r\n    setWidth(600)\r\n  }\r\n  if(windowDimensions.width > 820) {\r\n    setHeight(620)\r\n    setWidth(820)\r\n  }\r\n\r\n\r\n\r\n}, [windowDimensions])\r\n\r\n    useEffect(() => {\r\n\r\n      if(!TDDataScatter || !filteredTDData) return null;\r\n\r\n      if(colorMode == \"Dark Mode\") {\r\n        partyColors.Independent = \"white\"\r\n      }\r\n      if(colorMode == \"Light Mode\") {\r\n        partyColors.Independent = \"black\"\r\n      }\r\n\r\n      console.log(TDDataScatter)\r\n      console.log(filteredTDData)\r\n\r\n      \r\n\r\n\r\n\r\n    // const selectedFiltered = () => {\r\n\r\n    //   const selected = filteredTDData;\r\n\r\n    //     for(let i = 0; i < selected.length; i++) {\r\n\r\n    //       if(partySelect.includes(selected[i].party) === false) {\r\n    //         selected.splice([i], 1)\r\n    //       }\r\n    //     }\r\n\r\n    //     return selected\r\n\r\n    // }\r\n\r\n    // console.log(selectedFiltered())\r\n\r\n    const selectedFilteredTDData = filteredTDData;\r\n\r\n    console.log(selectedFilteredTDData)\r\n    \r\n\r\nconsole.log(selectedFilteredTDData.map(function(d) {\r\n\r\n  if(d.followerData.length == 0) {\r\n    return 0\r\n  } else {\r\n    return d.followerData[0].followers\r\n  }\r\n  \r\n}))\r\n\r\n  // var k = height / width,\r\n  // x0 = [-4.5, 4.5],\r\n  // y0 = [-4.5 * k, 4.5 * k],\r\n  // x = d3.scaleLinear().domain(x0).range([0, width]),\r\n  // y = d3.scaleLinear().domain(y0).range([height, 0]),\r\n  // z = d3.scaleOrdinal(d3.schemeCategory10);\r\n\r\n \r\n\r\n\r\n      const svg = d3.select(svgRef.current)\r\n\r\n\r\n        const xScale = d3.scaleLinear()\r\n                        .range([0, widthMargin])\r\n                        .domain(d3.extent(selectedFilteredTDData, xValue))\r\n\r\n\r\n\r\n        const yScale = d3.scaleLinear()\r\n                        .range([heightMargin, 0])\r\n                        .domain(d3.extent(selectedFilteredTDData, yValue))\r\n                        \r\n        const rScale = d3.scaleLinear()\r\n                        .range([nodeSize.min, nodeSize.max])\r\n                        .domain(d3.extent(selectedFilteredTDData, rValue))\r\n\r\n        const party = d => d.party\r\n        const name = d => d.name\r\n        const color = (d) => {\r\n\r\n\r\n          const officeArr = []\r\n          let cabinetColor = \"#FFC000\"\r\n  \r\n            if(baseColorOption === 1 && highlightOption != 0) {\r\n              cabinetColor = \"red\"\r\n            }\r\n  \r\n  \r\n  \r\n          let trueArr = [];\r\n  \r\n          if(highlightOption === 1) {\r\n  \r\n          if(d.member_offices[0].length != 0) {\r\n  \r\n            for(let i = 0; i < d.member_offices[0].length; i++) {\r\n    \r\n            var office = d.member_offices[0][i].office.officeName.showAs\r\n    \r\n            if(!d.member_offices[0][i].office.dateRange.end) {\r\n                officeArr.push(office)\r\n            } \r\n        }\r\n      }\r\n  \r\n          for(let i = 0; i < officeArr.length; i++) {\r\n  \r\n              if(officeArr[i].search(\"Minister for\") != -1 || officeArr[i].search(\"Taoiseach\") != -1) { \r\n                trueArr.push(true)   \r\n              } \r\n            }\r\n            if(trueArr.includes(true)) {\r\n                return cabinetColor\r\n            } else if(baseColorOption === 0) {\r\n                return partyColors[party(d)]\r\n            } else if (baseColorOption === 1) {\r\n              return \"lightblue\"\r\n            }\r\n  } \r\n  \r\n  if(highlightOption == 2) {\r\n  \r\n      if(d.member_offices[0].length != 0) {\r\n  \r\n        for(let i = 0; i < d.member_offices[0].length; i++) {\r\n  \r\n        var office = d.member_offices[0][i].office.officeName.showAs\r\n  \r\n        if(!d.member_offices[0][i].office.dateRange.end) {\r\n            officeArr.push(office)\r\n        } \r\n    }\r\n  }\r\n  \r\n      for(let i = 0; i < officeArr.length; i++) {\r\n  \r\n          if(officeArr[i].search(\"Minister of\") != -1) { \r\n            trueArr.push(true)   \r\n          } \r\n        }\r\n  \r\n        console.log(trueArr)\r\n        if(trueArr.includes(true)) {\r\n            return cabinetColor\r\n        } else if(baseColorOption === 0) {\r\n            return partyColors[party(d)]\r\n        } else if(baseColorOption === 1) {\r\n          return \"lightblue\"\r\n        }\r\n  } \r\n  \r\n  if(highlightOption == 3) {\r\n  \r\n      if(d.member_offices[0].length != 0) {\r\n  \r\n        for(let i = 0; i < d.member_offices[0].length; i++) {\r\n  \r\n        var office = d.member_offices[0][i].office.officeName.showAs\r\n  \r\n        if(!d.member_offices[0][i].office.dateRange.end) {\r\n            officeArr.push(office)\r\n        } \r\n    }\r\n  }\r\n  \r\n      for(let i = 0; i < officeArr.length; i++) {\r\n  \r\n          if(officeArr[i].search(\"Minister of\") != -1 || officeArr[i].search(\"Minister for\") != -1 || officeArr[i].search(\"Taoiseach\") != -1) { \r\n            trueArr.push(true)   \r\n          } \r\n        }\r\n  \r\n        console.log(trueArr)\r\n        if(trueArr.includes(true)) {\r\n            return cabinetColor\r\n        } else if(baseColorOption === 0) {\r\n            return partyColors[party(d)]\r\n        } else if(baseColorOption === 1) {\r\n          return \"lightblue\"\r\n        }\r\n  } \r\n\r\n  if(highlightOption == 4) {\r\n    if(d.gender == \"Female\") {\r\n      return cabinetColor\r\n    } else if(baseColorOption === 0) {\r\n      return partyColors[party(d)]\r\n  } else if(baseColorOption === 1) {\r\n    return \"lightblue\"\r\n  }\r\n  }\r\n             \r\n             return partyColors[party(d)]\r\n  \r\n  \r\n          } \r\n\r\n        const xAxis = axisBottom(xScale).tickFormat(d3.format(\".2s\"));        \r\n        \r\n        svg.select(\".x-axis\")\r\n            .attr(\"transform\", \"translate(0,\" + heightMargin + \")\")\r\n            .transition()\r\n            .duration(500)\r\n            .call(xAxis)\r\n            \r\n        const yAxis = axisLeft(yScale).tickFormat(d3.format(\".2s\"));\r\n\r\n        svg.select(\".y-axis\")\r\n        .attr(\"transform\", \"translate(0, 0)\")\r\n            .transition()\r\n            .duration(500)\r\n            .call(yAxis)\r\n\r\n            const tooltip = d3\r\n            .select('body')\r\n            .append('div')\r\n            .attr('class', 'd3-tooltip')\r\n            .style('position', 'absolute')\r\n            .style('z-index', '10')\r\n            .style('visibility', 'hidden')\r\n            .style('padding', '10px')\r\n            .style('background', 'rgba(0,0,0,0.6)')\r\n            .style('border-radius', '4px')\r\n            .style('color', '#fff')\r\n            .text('a simple tooltip');\r\n\r\n            const hoverColor = \"#eec42d\"\r\n       \r\n        var circles = d3.select(\"#container\")\r\n                        .selectAll(\".node\")\r\n                        .data(selectedFilteredTDData)\r\n                        .join(\"circle\")\r\n                        .attr(\"class\", \"node\")\r\n                        \r\n                        .attr('fill-opacity', 0.75)\r\n                        .attr(\"name\", name)\r\n\r\n            circles.transition()\r\n                    .duration(500)\r\n                    .attr(\"cx\", d => xScale(xValue(d)))\r\n                    .attr(\"cy\", d => yScale(yValue(d)))\r\n                    .attr(\"r\", d => rScale(rValue(d)))\r\n                    .attr(\"fill\", color)\r\n\r\n                    \r\n            circles.on('mouseover', function (d, i) {\r\n            tooltip\r\n            .html(\r\n                `<div>TD: ${d.name}</div><div>Party: ${d.party}</div><div>x: ${options[xOption]}: ${xValue(d).toLocaleString()}</div><div>y: ${options[yOption]}: ${yValue(d).toLocaleString()}</div><div>r: ${options[rOption]}: ${rValue(d).toLocaleString()}</div>`\r\n            )\r\n                .style('visibility', 'visible');\r\n                d3.select(this).transition().attr('fill', hoverColor);\r\n            })\r\n            .on('mousemove', function () {\r\n                tooltip\r\n                .style('top', d3.event.pageY - 10 + 'px')\r\n                .style('left', d3.event.pageX + 10 + 'px');\r\n            })\r\n            .on('mouseout', function () {\r\n                tooltip.html(``).style('visibility', 'hidden');\r\n                d3.select(this).transition().attr('fill', color);\r\n            }); \r\n\r\n          console.log(selectedFilteredTDData)\r\n\r\n    }, [TDDataScatter, partySelect, filteredTDData, xOption, yOption, rOption, highlightOption, baseColorOption, colorMode, height, width, nodeSize])\r\n\r\n    \r\n    if (!TDDataScatter) return null;\r\n\r\n    return (\r\n\r\n        <div className={\"featuredItem\"} style={{textAlign: \"center\", margin: \"10px\", padding: \"10px\", background: backgroundColor, color: textColor}}>\r\n        <Typography style={{marginBottom: 20}} align=\"center\" variant=\"h5\">Interactive Scatter Plot</Typography>\r\n        <FormControlLabel\r\n        control={<Switch value={true} onChange={onChangeColorMode}/>}\r\n        label=\"Dark Mode\"\r\n      />\r\n        \r\n        \r\n            <div>\r\n\r\n                <div>\r\n                <div>\r\n<FormGroup style={{display: \"inline-block\",\r\n    verticalAlign: \"top\"}}>\r\n    <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n          defaultChecked=\"true\"\r\n          name=\"checkedB\"\r\n          style={{color: '#326760', transform: \"scale(0.85)\"}}\r\n          value={\"Sinn Féin\"}\r\n          onChange={handleChange}\r\n          />\r\n        }\r\n        label={<span style={{ fontSize: '16px'}}>SF</span>}\r\n        />\r\n            <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: '#6699FF', transform: \"scale(0.85)\"}}\r\n            value={\"Fine Gael\"}\r\n            onChange={handleChange}\r\n          />\r\n        }\r\n        label={<span style={{ fontSize: '16px'}}>FG</span>}\r\n        />\r\n            <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: \"#66BB66\", transform: \"scale(0.85)\"}}\r\n            value={\"Fianna Fáil\"}\r\n            onChange={handleChange}\r\n          />\r\n        }\r\n        label={<span style={{ fontSize: '16px'}}>FF</span>}\r\n        />\r\n            <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: \"#CC0000\", transform: \"scale(0.85)\"}}\r\n            value={\"Labour Party\"}\r\n            onChange={handleChange}\r\n          />\r\n        }\r\n        label={<span style={{ fontSize: '16px'}}>LAB</span>}\r\n        />\r\n            <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={color}\r\n            style={{transform: \"scale(0.85)\"}}\r\n            value={\"Independent\"}\r\n            onChange={handleChange}\r\n          />\r\n        }\r\n        label={<span style={{ fontSize: '16px'}}>IND</span>}\r\n        />\r\n            <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: \"#8E2420\", transform: \"scale(0.85)\"}}\r\n            value={\"Solidarity - People Before Profit\"}\r\n            onChange={handleChange}\r\n          />\r\n        }\r\n        label={<span style={{ fontSize: '16px'}}>PBP</span>}\r\n        />\r\n            <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: \"#752F8B\", transform: \"scale(0.85)\"}}\r\n            value={\"Social Democrats\"}\r\n            onChange={handleChange}\r\n          />\r\n        }\r\n        label={<span style={{ fontSize: '16px'}}>SocDems</span>}\r\n        />\r\n            <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: \"#99CC33\", transform: \"scale(0.85)\"}}\r\n            value={\"Green Party\"}\r\n            onChange={handleChange}\r\n          />\r\n        }\r\n        label={<span style={{ fontSize: '16px'}}>GRN</span>}\r\n        />\r\n            <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: \"#44532A\", transform: \"scale(0.85)\"}}\r\n            value={\"Aontú\"}\r\n            onChange={handleChange}\r\n          />\r\n        }\r\n        label={<span style={{ fontSize: '16px'}}>AON</span>}\r\n        />\r\n            <FormControlLabel\r\n        control={\r\n    <Checkbox\r\n            defaultChecked=\"true\"\r\n            name=\"checkedB\"\r\n            style={{color: \"grey\", transform: \"scale(0.85)\"}}\r\n            value={\"Independents 4 Change\"}\r\n            onChange={handleChange}\r\n          />\r\n        }\r\n        label={<span style={{ fontSize: '16px'}}>IND 4 Change</span>}\r\n        />\r\n             \r\n        </FormGroup>\r\n        </div>\r\n                    \r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={fillColor} htmlFor=\"grouped-select\">X-Value</InputLabel>\r\n        <Select onChange={onChangeX} style={color} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n        <ListSubheader value={0}>General</ListSubheader>\r\n          <MenuItem value={0}>Age</MenuItem>\r\n        <ListSubheader value={1}>Twitter Data, last 7 days</ListSubheader>\r\n          <MenuItem value={1}>Followers</MenuItem>\r\n          <MenuItem value={2}>Retweets</MenuItem>\r\n          <MenuItem value={3}>Original Tweets</MenuItem>\r\n          <MenuItem value={4}>Follower Per Retweet</MenuItem>\r\n          <MenuItem value={5}>Retweets Per Original Tweet</MenuItem>\r\n          <MenuItem value={6}>Avg. Polarity</MenuItem>\r\n          <MenuItem value={7}>Avg. Subjectivity</MenuItem>\r\n          <ListSubheader value={8}>Dáil Questions, 01 July - 01 Sept</ListSubheader>\r\n          <MenuItem value={8}>Written Questions Asked</MenuItem>\r\n          <MenuItem value={9}>Oral Questions Asked</MenuItem>\r\n          <MenuItem value={10}>No. of Topics TD had Questions for</MenuItem>\r\n          <MenuItem value={11}>Avg. Questions TD had towards Topic</MenuItem>\r\n          <ListSubheader value={12}>Dáil Divisions, 01 Jan - 01 Sept</ListSubheader>  \r\n          <MenuItem value={12}>Divisions Absent</MenuItem>\r\n          <MenuItem value={13}>Divisions Present</MenuItem>\r\n          <MenuItem value={14}>No. of votes Yes</MenuItem>\r\n          <MenuItem value={15}>No. of votes No</MenuItem>\r\n          <MenuItem value={16}>Times on Winning Side of Division</MenuItem>\r\n          <MenuItem value={17}>Times on Losing Side of Division</MenuItem>\r\n          <MenuItem value={18}>Yes and Divison Carried</MenuItem>\r\n          <MenuItem value={19}>Yes and Division Lost</MenuItem>\r\n          <MenuItem value={20}>No and Division Carried</MenuItem>\r\n          <MenuItem value={21}>No and Division Lost</MenuItem>\r\n          <MenuItem disabled >News Mentions</MenuItem>\r\n          <MenuItem disabled >Votes recieved in last election</MenuItem>\r\n          <MenuItem disabled >Avg. Poll Rating</MenuItem>\r\n\r\n\r\n        </Select>\r\n      </FormControl>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={fillColor} htmlFor=\"grouped-select\">Y-Value</InputLabel>\r\n        <Select onChange={onChangeY} style={color} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n        <ListSubheader value={0}>General</ListSubheader>\r\n          <MenuItem value={0}>Age</MenuItem>\r\n        <ListSubheader value={1}>Twitter Data, last 7 days</ListSubheader>\r\n          <MenuItem value={1}>Followers</MenuItem>\r\n          <MenuItem value={2}>Retweets</MenuItem>\r\n          <MenuItem value={3}>Original Tweets</MenuItem>\r\n          <MenuItem value={4}>Follower Per Retweet</MenuItem>\r\n          <MenuItem value={5}>Retweets Per Original Tweet</MenuItem>\r\n          <MenuItem value={6}>Avg. Polarity</MenuItem>\r\n          <MenuItem value={7}>Avg. Subjectivity</MenuItem>\r\n          <ListSubheader value={8}>Dáil Questions, 01 July - 01 Sept</ListSubheader>\r\n          <MenuItem value={8}>Written Questions Asked</MenuItem>\r\n          <MenuItem value={9}>Oral Questions Asked</MenuItem>\r\n          <MenuItem value={10}>No. of Topics TD had Questions for</MenuItem>\r\n          <MenuItem value={11}>Avg. Questions TD had towards Topic</MenuItem>\r\n          <ListSubheader value={12}>Dáil Divisions, 01 Jan - 01 Sept</ListSubheader>  \r\n          <MenuItem value={12}>Divisions Absent</MenuItem>\r\n          <MenuItem value={13}>Divisions Present</MenuItem>\r\n          <MenuItem value={14}>No. of votes Yes</MenuItem>\r\n          <MenuItem value={15}>No. of votes No</MenuItem>\r\n          <MenuItem value={16}>Times on Winning Side of Division</MenuItem>\r\n          <MenuItem value={17}>Times on Losing Side of Division</MenuItem>\r\n          <MenuItem value={18}>Yes and Divison Carried</MenuItem>\r\n          <MenuItem value={19}>Yes and Division Lost</MenuItem>\r\n          <MenuItem value={20}>No and Division Carried</MenuItem>\r\n          <MenuItem value={21}>No and Division Lost</MenuItem>\r\n          <MenuItem disabled >News Mentions</MenuItem>\r\n          <MenuItem disabled >Votes recieved in last election</MenuItem>\r\n          <MenuItem disabled >Avg. Poll Rating</MenuItem>\r\n\r\n\r\n        </Select>\r\n      </FormControl>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={fillColor} htmlFor=\"grouped-select\">Circle Radius</InputLabel>\r\n        <Select onChange={onChangeR}style={color} classes={{icon:classes.icon}}defaultValue=\"\" id=\"grouped-select\">\r\n        <ListSubheader value={0}>General</ListSubheader>\r\n          <MenuItem value={0}>Age</MenuItem>\r\n        <ListSubheader value={1}>Twitter Data, last 7 days</ListSubheader>\r\n          <MenuItem value={1}>Followers</MenuItem>\r\n          <MenuItem value={2}>Retweets</MenuItem>\r\n          <MenuItem value={3}>Original Tweets</MenuItem>\r\n          <MenuItem value={4}>Follower Per Retweet</MenuItem>\r\n          <MenuItem value={5}>Retweets Per Original Tweet</MenuItem>\r\n          <MenuItem value={6}>Avg. Polarity</MenuItem>\r\n          <MenuItem value={7}>Avg. Subjectivity</MenuItem>\r\n          <ListSubheader value={8}>Dáil Questions, 01 July - 01 Sept</ListSubheader>\r\n          <MenuItem value={8}>Written Questions Asked</MenuItem>\r\n          <MenuItem value={9}>Oral Questions Asked</MenuItem>\r\n          <MenuItem value={10}>No. of Topics TD had Questions for</MenuItem>\r\n          <MenuItem value={11}>Avg. Questions TD had towards Topic</MenuItem>\r\n          <ListSubheader value={12}>Dáil Divisions, 01 Jan - 01 Sept</ListSubheader>  \r\n          <MenuItem value={12}>Divisions Absent</MenuItem>\r\n          <MenuItem value={13}>Divisions Present</MenuItem>\r\n          <MenuItem value={14}>No. of votes Yes</MenuItem>\r\n          <MenuItem value={15}>No. of votes No</MenuItem>\r\n          <MenuItem value={16}>Times on Winning Side of Division</MenuItem>\r\n          <MenuItem value={17}>Times on Losing Side of Division</MenuItem>\r\n          <MenuItem value={18}>Yes and Divison Carried</MenuItem>\r\n          <MenuItem value={19}>Yes and Division Lost</MenuItem>\r\n          <MenuItem value={20}>No and Division Carried</MenuItem>\r\n          <MenuItem value={21}>No and Division Lost</MenuItem>\r\n          <MenuItem disabled >News Mentions</MenuItem>\r\n          <MenuItem disabled >Votes recieved in last election</MenuItem>\r\n          <MenuItem disabled >Avg. Poll Rating</MenuItem>\r\n\r\n\r\n\r\n        </Select>\r\n      </FormControl>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={fillColor} htmlFor=\"grouped-select\">Highlight Option</InputLabel>\r\n        <Select onChange={onChangeHighlight} style={color} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n          <MenuItem value={0}>Highlight None</MenuItem>\r\n          <MenuItem value={1}>Highlight Cabinet Ministers</MenuItem>\r\n          <MenuItem value={2}>Highlight Junior Ministers</MenuItem>\r\n          <MenuItem value={3}>Highlight Both</MenuItem> \r\n          <MenuItem value={4}>Highlight Women</MenuItem>          \r\n        </Select>\r\n      </FormControl>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={fillColor} htmlFor=\"grouped-select\">Base Color</InputLabel>\r\n        <Select onChange={onChangeBaseColor} style={color} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n          <MenuItem value={0}>Party Color</MenuItem>\r\n          <MenuItem value={1}>White</MenuItem>     \r\n        </Select>\r\n      </FormControl>\r\n    </div>\r\n    {/* <List style={{display: \"inline-block\"}}>\r\n      <ListItem >\r\n        <ListItemText primary={\"x: \" + optionsExplanation[xOption] + \" (25/08/21)\"}/>\r\n          </ListItem>\r\n          <ListItem>\r\n            <ListItemText primary={\"y: \" + optionsExplanation[yOption] + \" (25/08/21)\"}/>\r\n             </ListItem>\r\n             <ListItem>\r\n            <ListItemText primary={\"r: \" + optionsExplanation[rOption] + \" (25/08/21)\"}/>\r\n            </ListItem>\r\n            \r\n    </List> */}\r\n            </div>\r\n        <div className={\"scroll-svg-container\"}>\r\n        <svg id={\"scatterplot-svg\"}ref={svgRef} height={heightMargin + margin.top + margin.bottom} width={widthMargin + margin.left + margin.right}>\r\n            <g id=\"container\" transform={'translate(' + margin.left + ',' + margin.top + ')'}>\r\n            <g className=\"x-axis\" style={color}></g>\r\n            <g className=\"y-axis\" style={color}></g>\r\n            </g>\r\n            </svg>\r\n          </div>\r\n        </div>\r\n    )\r\n}\r\nexport default ConstituencyScatterplot\r\n","import { Typography } from '@material-ui/core'\r\nimport React, {useState, useEffect, useRef} from 'react'\r\nimport * as d3 from 'd3'\r\nimport { FormControl, InputLabel, Select, ListSubheader, MenuItem, makeStyles } from '@material-ui/core'\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    icon: {\r\n      color: \"white\"\r\n  },\r\n\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n  }\r\n\r\n}));\r\n\r\n\r\n\r\nconst ConstituencyTopicsBarchart = ({conTDsData}) => {\r\n\r\n\r\n    const [justConstituencyTDs, setJustConstituencyTDs] = useState(null);\r\n    const [totalQuestions, setTotalQuestions] = useState(null);\r\n    const [writtenQuestions, setWrittenQuestions] = useState(null);\r\n    const [oralQuestions, setOralQuestions] = useState(null);\r\n    const [mostAskedTopicsByTD, setMostAskedTopicsByTD] = useState(null);\r\n    const [mostAskedTopicsTotal, setMostAskedTopicsTotal] = useState(null);\r\n    const [dataOption, setDataOption] = useState(0);\r\n    const [colorOption, setColorOption] = useState(2)\r\n\r\n    // const [dataLength, setDataLength] = useState(0)\r\n\r\n\r\n    const partyColors = {\r\n        \"Sinn Féin\": \"#326760\",\r\n        \"Fine Gael\": \"#6699FF\",\r\n        \"Fianna Fáil\": \"#66BB66\",\r\n        \"Labour Party\": \"#CC0000\",\r\n        \"Solidarity - People Before Profit\": \"#8E2420\",\r\n        \"Independent\": \"white\",\r\n        \"Green Party\": \"#99CC33\",\r\n        \"Social Democrats\": \"#752F8B\",\r\n        \"Aontú\": \"#44532A\",\r\n        \"Independents 4 Change\": \"grey\"}\r\n\r\n\r\n    const tooltipData = [\"TD's Who Asked\", \"Total Questions Asked\",]\r\n    const tooltipData1 = [\"Topic\", \"Topic\"]\r\n\r\nconst onChangeDataOption = (event, child) => {\r\n    setDataOption(event.target.value)\r\n    console.log('Data Option:' + event.target.value);\r\n    console.log(child);\r\n  };\r\n\r\n  const onChangeColorOption = (event, child) => {\r\n    setColorOption(event.target.value)\r\n    console.log('Color Option:' + event.target.value);\r\n    console.log(child);\r\n  };\r\n\r\n    useEffect(() => {\r\n\r\n\r\n        setJustConstituencyTDs(conTDsData)\r\n\r\n    }, [])\r\n\r\n\r\nuseEffect(() => {\r\n\r\n    if(!justConstituencyTDs) return null;\r\n\r\n    const sumValues = obj => Object.values(obj).reduce((a, b) => a + b);\r\n\r\n    var toOral = justConstituencyTDs.map(d => d.oralQuestions[0].oralQuestions.topic)\r\n    var filteredOral = toOral.filter(d => d != undefined)\r\n    var summedOral = filteredOral.map(d => sumValues(d)).reduce((a, b) => a + b);\r\n    var toWritten = justConstituencyTDs.map(d => d.writtenQuestions[0].writtenQuestions.to)\r\n\r\n    //Who didn't ask any questions in period, minus ministers, minus cc and eoghan murphy\r\n    var whoDidnt = justConstituencyTDs.map(function(d){\r\n\r\n    if(!d.writtenQuestions[1].writtenQuestions.to && !d.oralQuestions[1].oralQuestions.to && d.member_offices[0].length === 0) {\r\n            return d.name\r\n        }\r\n    }).filter(d => d != undefined && d != \"Seán Ó Fearghaíl\" && d != \"Eoghan Murphy\") \r\n\r\n    var filteredWrittenTo = toWritten.filter(d => d != undefined) \r\n    var summedWritten = filteredWrittenTo.map(d => sumValues(d)).reduce((a, b) => a + b);\r\n    var uniqueKeysTo = Object.keys(filteredWrittenTo.reduce(function(result, obj) {\r\n        return Object.assign(result, obj);\r\n      }, {}))\r\n\r\nfunction topicWrittenByTD() {\r\n\r\n\r\n    var topicWritten = justConstituencyTDs.map(d => d.writtenQuestions[0].writtenQuestions.topic)\r\n    var filteredWrittenTopic = topicWritten.filter(d => d != undefined) \r\n    var summedWritten = filteredWrittenTopic.map(d => sumValues(d)).reduce((a, b) => a + b);\r\n\r\n    //Topics asked by TDs\r\n    var workingWithAsked = filteredWrittenTopic.map(d => Object.entries(d)).flat()\r\n    var askedByTopicsTDs = workingWithAsked.map(function(d) {\r\n        return d[0]\r\n    })\r\n\r\n    const mapAskedTopicsTD= askedByTopicsTDs.reduce((acc, e) => acc.set(e, (acc.get(e) || 0) + 1), new Map())\r\n\r\n    var toSortAskedTopicsTD = [...mapAskedTopicsTD.entries()]\r\n\r\n    toSortAskedTopicsTD.sort(function(a, b) {\r\n        return  b[1]-a[1]\r\n     })\r\n     if(toSortAskedTopicsTD.length > 25) {\r\n         toSortAskedTopicsTD.length = 25\r\n       }\r\n\r\n       return toSortAskedTopicsTD\r\n\r\n\r\n}\r\n\r\nfunction topicWrittenTotal() {\r\n\r\n    var topicWritten = justConstituencyTDs.map(d => d.writtenQuestions[0].writtenQuestions.topic)\r\n    var filteredWrittenTopic = topicWritten.filter(d => d != undefined) \r\n\r\n    //Topics asked by TDs\r\n    var workingWithAsked = filteredWrittenTopic.map(d => Object.entries(d)).flat()\r\n    var askedByTopicsTDs = workingWithAsked.map(function(d) {\r\n        return d\r\n    })\r\n\r\n    const mapTotal = askedByTopicsTDs.reduce((acc, e) => acc.set(e[0], (acc.get(e[0]) || 0) + e[1]), new Map())\r\n\r\n    var toSortAskedTopicsTD = [...mapTotal.entries()]\r\n\r\n    toSortAskedTopicsTD.sort(function(a, b) {\r\n        return  b[1]-a[1]\r\n     })\r\n     if(toSortAskedTopicsTD.length > 25) {\r\n         toSortAskedTopicsTD.length = 25\r\n       }\r\n\r\n    return toSortAskedTopicsTD\r\n\r\n}\r\n\r\n    //Horribly named. Fix\r\n    \r\n    setTotalQuestions(summedOral + summedWritten)\r\n    setOralQuestions(summedOral)\r\n    setWrittenQuestions(summedWritten)\r\n\r\n    setMostAskedTopicsByTD(topicWrittenByTD())\r\n    setMostAskedTopicsTotal(topicWrittenTotal())\r\n\r\n\r\n}, [justConstituencyTDs])\r\n\r\n\r\nconst margin = {top: 20, right: 20, bottom: 120, left: 70}\r\n\r\nconst height = 600\r\nconst width = 900\r\n\r\nconst svgRef= useRef()\r\n\r\nconst classes = useStyles();\r\n\r\nuseEffect(() => {\r\n\r\n    if(!mostAskedTopicsByTD || !mostAskedTopicsTotal) return null;\r\n\r\n\r\nfunction coloredByPartyWithMostUniqueTDContributionsToTopic(topic) {\r\n\r\nfunction getUniqueTDTopicContributionOfParty(party) {\r\n\r\n\r\n    // var listToCheck = topicWrittenByTD()\r\n\r\n    var justPartyJustQuestion = justConstituencyTDs.filter(d => d.party == party).filter(d => d.writtenQuestions[0].writtenQuestions.topic != undefined)\r\n\r\n    var testMostByParty = justPartyJustQuestion.map(d => d.writtenQuestions[0].writtenQuestions.topic)\r\n\r\n    var sumTestParty = testMostByParty.map(d => Object.entries(d)).flat()\r\n\r\n    var sumTestPartyFlat = sumTestParty.map(function(d) {\r\n        return d[0]\r\n    })\r\n\r\n    const mapAskedTopicsTD = sumTestPartyFlat.reduce((acc, e) => acc.set(e, (acc.get(e) || 0) + 1), new Map())\r\n\r\n    var toSortAskedTopicsTD = [...mapAskedTopicsTD.entries()]\r\n\r\n    toSortAskedTopicsTD.sort(function(a, b) {\r\n        return  b[1]-a[1]\r\n     })\r\n\r\n    return toSortAskedTopicsTD\r\n\r\n}\r\n\r\nfunction whichPartyHasMostUniqueContributionsToTopicByTD() {\r\n\r\n    const parties = [\"Aontú\", \"Independents\", \"Green Party\", \"Labour\", \"Fianna Fáil\", \"Fine Gael\", \"Social Democrats\", \"People Before Profit\", \"Independents 4 Change\", \"Sinn Féin\"];\r\n\r\n    var holderArr = []\r\n\r\n    for(let i = 0; i < parties.length; i++) {\r\n\r\n    var holder = getUniqueTDTopicContributionOfParty(parties[i])\r\n\r\n    holderArr.push({party: parties[i], holder})\r\n\r\n    }\r\n\r\n    return holderArr\r\n\r\n}\r\n\r\nfunction partyWithMostUniqueTDContributionsToTopic(topic) {\r\n\r\n    var partySortedContributions = whichPartyHasMostUniqueContributionsToTopicByTD() \r\n\r\n    var holder = []\r\n\r\n    const party = d => d.party\r\n\r\n    for(let i = 0; i < partySortedContributions.length; i++) {\r\n\r\n        var test = partySortedContributions[i].holder.map(function(d) {\r\n            if(d[0] === topic) {\r\n                return d\r\n            }\r\n        }).filter(d => d != undefined)\r\n\r\n\r\n        holder.push({party: partySortedContributions[i].party, test})\r\n\r\n\r\n    }\r\n\r\n    var filterEmpty = holder.filter(d => d.test.length != 0)\r\n\r\n    var sorted = filterEmpty.sort((a, b) => b.test[0][1] - a.test[0][1])\r\n\r\n    var most = sorted[0]\r\n\r\n    if(sorted.length > 1) {\r\n        most = sorted[0]\r\n    }\r\n\r\n    var arr = [partyColors[party(most)], most.party, most.test[0][1]]\r\n\r\n\r\n    return arr\r\n\r\n}\r\n\r\nreturn partyWithMostUniqueTDContributionsToTopic(topic)\r\n\r\n}\r\n\r\nfunction coloredByPartyWithMostContributionsToTopic(topic) { \r\n\r\nfunction getTotalContributionOfPartyToTopic(party) {\r\n\r\n\r\n    // var listToCheck = topicWrittenByTD()\r\n\r\n    var justPartyJustQuestion = justConstituencyTDs.filter(d => d.party == party).filter(d => d.writtenQuestions[0].writtenQuestions.topic != undefined)\r\n\r\n    var testMostByParty = justPartyJustQuestion.map(d => d.writtenQuestions[0].writtenQuestions.topic)\r\n\r\n    var sumTestParty = testMostByParty.map(d => Object.entries(d)).flat()\r\n\r\n    var sumTestPartyFlat = sumTestParty.map(function(d) {\r\n        return d\r\n    })\r\n\r\n    const mapAskedTopicsTD = sumTestPartyFlat.reduce((acc, e) => acc.set(e[0], (acc.get(e[0]) || 0) + e[1]), new Map())\r\n\r\n    var toSortAskedTopicsTD = [...mapAskedTopicsTD.entries()]\r\n\r\n    toSortAskedTopicsTD.sort(function(a, b) {\r\n        return  b[1]-a[1]\r\n     })\r\n\r\n    return toSortAskedTopicsTD\r\n\r\n}\r\n\r\nfunction whichPartyHasMostTotalContributionsToTopic() {\r\n\r\n    const parties = [\"Aontú\", \"Independent\", \"Green Party\", \"Labour Party\", \"Fianna Fáil\", \"Fine Gael\", \"Social Democrats\", \"People Before Profit\", \"Independents 4 Change\", \"Sinn Féin\"];\r\n\r\n    var holderArr = []\r\n\r\n    for(let i = 0; i < parties.length; i++) {\r\n\r\n    var holder = getTotalContributionOfPartyToTopic(parties[i])\r\n\r\n    holderArr.push({party: parties[i], holder})\r\n\r\n    }\r\n\r\n    return holderArr\r\n\r\n}\r\n\r\nfunction partyWithMostTotalContributionsToTopic(topic) {\r\n\r\n    var partySortedContributions = whichPartyHasMostTotalContributionsToTopic() \r\n\r\n    var holder = []\r\n\r\n    const party = d => d.party\r\n\r\n\r\n    for(let i = 0; i < partySortedContributions.length; i++) {\r\n\r\n        var test = partySortedContributions[i].holder.map(function(d) {\r\n            if(d[0] == topic) {\r\n                return d\r\n            }\r\n        }).filter(d => d != undefined)\r\n\r\n\r\n        holder.push({party: partySortedContributions[i].party, test})\r\n\r\n\r\n    }\r\n\r\n    var filterEmpty = holder.filter(d => d.test.length != 0)\r\n\r\n    var sorted = filterEmpty.sort((a, b) => b.test[0][1] - a.test[0][1])\r\n\r\n    var most = sorted[0]\r\n\r\n    if(sorted.length > 1) {\r\n        most = sorted[0]\r\n    }\r\n\r\n    var arr = [partyColors[party(most)], most.party, most.test[0][1]]\r\n\r\n\r\n    return arr\r\n\r\n}\r\n\r\nreturn partyWithMostTotalContributionsToTopic(topic)\r\n\r\n}\r\n\r\nfunction coloredByPartyWithTDWhoHasContributedMostToTopic(topic) { \r\n\r\n    function getTDWhoHasContributedMostToTopic(topic) {\r\n\r\n        const parties = [\"Aontú\", \"Independents\", \"Green Party\", \"Labour\", \"Fianna Fáil\", \"Fine Gael\", \"Social Democrats\", \"People Before Profit\", \"Independents 4 Change\", \"Sinn Féin\"];\r\n\r\n        const party = d => d[0]\r\n    \r\n        var justQuestionJustTopic = justConstituencyTDs.filter(d => d.writtenQuestions[0].writtenQuestions.topic != undefined).filter(d => d.writtenQuestions[0].writtenQuestions.topic[topic] != undefined)\r\n\r\n        var arrToSort = justQuestionJustTopic.map(function(d) {\r\n    \r\n        var amount = d.writtenQuestions[0].writtenQuestions.topic[topic];\r\n        var party = d.party\r\n        var name = d.name\r\n    \r\n          return  [party, amount, name]\r\n    \r\n    \r\n        })\r\n    \r\n        var arrSorted = arrToSort.sort((a,b) => b[1] - a[1])\r\n\r\n        var most = arrSorted[0]\r\n\r\n        most.unshift(partyColors[party(most)])\r\n\r\n        return most\r\n\r\n    }\r\n\r\n    return getTDWhoHasContributedMostToTopic(topic)\r\n    \r\n    }\r\n\r\nconsole.log(coloredByPartyWithTDWhoHasContributedMostToTopic(\"Covid-19 Pandemic\"))\r\n\r\n    const dataOptionArr = [mostAskedTopicsByTD, mostAskedTopicsTotal]\r\n\r\n    const colorOptionArr = [coloredByPartyWithMostUniqueTDContributionsToTopic, coloredByPartyWithMostContributionsToTopic, coloredByPartyWithTDWhoHasContributedMostToTopic]\r\n\r\n    const xValue = d => d[0]\r\n    const yValue = d => d[1]\r\n    const color = d => colorOptionArr[colorOption](d[0])\r\n\r\n\r\n    const xScale = d3.scaleBand()\r\n    .domain(dataOptionArr[dataOption].map(xValue))\r\n    .range([0, width])\r\n    .padding(0.2)\r\n\r\n    const svg = d3.select(svgRef.current);\r\n\r\nconst yScale = d3.scaleLinear()\r\n.domain([0, d3.max(dataOptionArr[dataOption], yValue)])\r\n.range([height, 0]);\r\n\r\n\r\n\r\nconsole.log(yValue)\r\n\r\nconst xAxis = d3.axisBottom(xScale).ticks(dataOptionArr[dataOption].length)\r\n\r\nsvg\r\n.select(\".x-axis-topics-bar\")\r\n.attr(\"transform\", \"translate(0,\" + 600 + \")\")\r\n.transition(2000)\r\n.call(xAxis)\r\n.selectAll(\"text\")  \r\n.style(\"text-anchor\", \"end\")\r\n.attr(\"dx\", \"-.8em\")\r\n.attr(\"dy\", \".15em\")\r\n.attr(\"transform\", \"rotate(-25)\");\r\n\r\n\r\nconst yAxis = d3.axisLeft(yScale);\r\n\r\nsvg\r\n.select(\".y-axis-topics-bar\")\r\n.attr(\"transform\", \"translate(0,0)\")\r\n.style(\"color\", \"white\")\r\n.transition(500)\r\n.call(yAxis)\r\n\r\n\r\n\r\nconst tooltip = d3\r\n.select('body')\r\n.append('div')\r\n.attr('class', 'd3-tooltip')\r\n.style('position', 'absolute')\r\n.style('z-index', '10')\r\n.style('visibility', 'hidden')\r\n.style('padding', '10px')\r\n.style('background', 'rgba(0,0,0,0.6)')\r\n.style('border-radius', '4px')\r\n.style('color', '#fff')\r\n.text('a simple tooltip');\r\n\r\n\r\nvar rects = d3.select(\"#container-topics\")\r\n.selectAll(\".bar\")\r\n.data(dataOptionArr[dataOption])\r\n.join(\"rect\")\r\n.attr(\"class\", \"bar\")\r\n\r\nrects.transition()\r\n.duration(400)\r\n.attr(\"x\", d => xScale(xValue(d)))\r\n.attr(\"y\", d => yScale(yValue(d)))\r\n.attr(\"width\", xScale.bandwidth())\r\n.attr(\"height\", d => 600 - yScale(yValue(d)))\r\n.attr(\"fill\", d=> color(d)[0])\r\n\r\n\r\nconst hoverColor = \"#eec42d\"\r\n\r\n\r\n\r\n\r\n\r\n\r\nrects\r\n.on('mouseover', function (d, i) {\r\n    \r\nif(color(d).length == 4) {\r\n\r\n\r\ntooltip\r\n.html(\r\n    `<div>${tooltipData1[dataOption]}: ${d[0]}</div> \r\n    <div>${tooltipData[dataOption]}: ${d[1].toLocaleString()}</div>\r\n    <div>${color(d)[3]} had ${color(d)[2]} questions</div>\r\n    `\r\n)\r\n    .style('visibility', 'visible');\r\n    d3.select(this).transition().attr('fill', hoverColor);\r\n\r\n\r\n} else if(colorOption === 0) {\r\n\r\n    tooltip\r\n    .html(\r\n        `<div>${tooltipData1[dataOption]}: ${d[0]}</div> \r\n        <div>${tooltipData[dataOption]}: ${d[1].toLocaleString()}</div>\r\n        <div>${color(d)[2]} ${color(d)[1]} TD's contributed to this topic</div>\r\n        `\r\n    )\r\n        .style('visibility', 'visible');\r\n        d3.select(this).transition().attr('fill', hoverColor);\r\n\r\n\r\n}\r\n\r\n\r\nelse {\r\n\r\n\r\n    tooltip\r\n    .html(\r\n        `<div>${tooltipData1[dataOption]}: ${d[0]}</div> \r\n        <div>${tooltipData[dataOption]}: ${d[1].toLocaleString()}</div>\r\n        <div>${color(d)[1]} had ${color(d)[2]} questions</div>\r\n        `\r\n    )\r\n        .style('visibility', 'visible');\r\n        d3.select(this).transition().attr('fill', hoverColor);\r\n}\r\n\r\n\r\n\r\n})\r\n.on('mousemove', function () {\r\n    tooltip\r\n    .style('top', d3.event.pageY - 10 + 'px')\r\n    .style('left', d3.event.pageX + 10 + 'px');\r\n})\r\n.on('mouseout', function () {\r\n    tooltip.html(``).style('visibility', 'hidden');\r\n    d3.select(this).transition().attr('fill', d => color(d)[0]);\r\n}); \r\n\r\n}, [mostAskedTopicsByTD, mostAskedTopicsTotal, dataOption, colorOption])\r\n\r\nif(!justConstituencyTDs || !totalQuestions ||!oralQuestions || !writtenQuestions || !mostAskedTopicsByTD || !mostAskedTopicsTotal) return null;\r\n\r\n    return (\r\n        <div className=\"featuredItem\" style={{textAlign: \"center\"}}>\r\n                        <Typography variant=\"h5\">Topics</Typography>\r\n                        <p style={{marginTop: 10, marginBottom: 10}}>Showing top 25 out of 590.</p>\r\n\r\n        <FormControl className={classes.formControl}>\r\n        <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">Data-Value</InputLabel>\r\n        <Select onChange={onChangeDataOption} style={{ color: \"white\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n          <ListSubheader>Data Value</ListSubheader>\r\n          <MenuItem value={0}>Topics Asked By Most Unique TDs</MenuItem>\r\n          <MenuItem value={1}>Topics Asked Most Overall</MenuItem>\r\n        </Select>\r\n      </FormControl>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">Color-Value</InputLabel>\r\n        <Select onChange={onChangeColorOption} style={{ color: \"white\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n          <ListSubheader>Color Data</ListSubheader>\r\n          <MenuItem value={2}>TD with most questions</MenuItem>\r\n        </Select>\r\n      </FormControl>\r\n      {/* <FormControl className={classes.formControl}>\r\n        <InputLabel style={{fill: \"white\", color: \"white\"}} htmlFor=\"grouped-select\">Data Amount</InputLabel>\r\n        <Select onChange={onChangeDataLength} style={{ color: \"white\"}} classes={{icon:classes.icon}} defaultValue=\"\" id=\"grouped-select\">\r\n          <ListSubheader>Twitter Data</ListSubheader>\r\n          <MenuItem value={0}>Top 20</MenuItem>\r\n          <MenuItem value={1}>Show All</MenuItem>\r\n        </Select>\r\n      </FormControl> */}\r\n            <div className={\"scroll-svg-container\"}>\r\n            <svg ref={svgRef} height={height + margin.top + margin.bottom} width={width + margin.left + margin.right}>\r\n            <g id=\"container-topics\" transform={'translate(' + margin.left + ',' + margin.top + ')'}>\r\n                <g className=\"x-axis-topics-bar\"></g>\r\n                <g className=\"y-axis-topics-bar\"></g>\r\n            </g>\r\n            </svg>\r\n        </div> \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ConstituencyTopicsBarchart","import { Grid, Avatar, ListItem, ListItemAvatar, ListItemText } from '@material-ui/core'\r\nimport React, { useEffect, useState } from 'react'\r\n\r\nconst TDLinks = ({conTDsData}) => {\r\n\r\n\r\n    const [conTDs, setConTDs] = useState(null)\r\n\r\n\r\n    useEffect(() => {\r\n\r\n\r\n        setConTDs(conTDsData)\r\n\r\n    }, [])\r\n\r\n\r\n    if(!conTDs) return null;\r\n\r\n    console.log(conTDs)\r\n\r\n        function generate(element) {\r\n\r\n            return conTDs.map(function(d) {\r\n\r\n                const partyDotAbrevArr = [\r\n                    \"ff\", \"fg\", \"grn\", \"soc-dem\", \"ind\", \"pbp\", \"I4C\", \"sf\", \"aon\", \"lab\"\r\n                ]\r\n            \r\n                const partDotFullNameArr = [\"Fianna Fáil\", \"Fine Gael\", \"Green Party\", \"Social Democrats\", \"Independent\", \"Solidarity - People Before Profit\", \"Independents 4 Change\", \"Sinn Féin\", \"Aontú\", \"Labour Party\"]\r\n                \r\n                const party = d.party;\r\n\r\n                const index = partDotFullNameArr.indexOf(party)\r\n         \r\n                const partyDot = partyDotAbrevArr[index]\r\n\r\nreturn (\r\n    <Grid item>\r\n\r\n\r\n   \r\n    <ListItem button component=\"a\" href={\"/TDs/\" + d.name.replace(' ', '-')}>\r\n    <span title={d.party} class={\"party-dot-\" + partyDot} style={{marginRight: 10}}/>\r\n    <ListItemAvatar>\r\n   <Avatar src={d.member_uri[0] + \"/image/large\"} style={{height: 100, width: 100, marginRight: 20}}/>\r\n   </ListItemAvatar>\r\n   <ListItemText primary={d.name} />\r\n </ListItem>\r\n</Grid>\r\n) \r\n\r\n})\r\n}\r\n\r\n        return (\r\n\r\n            <div className=\"featuredItem\" style={{background: \"white\", color: \"black\"}} >\r\n            <Grid container xs={12} style={{justifyContent: \"center\"}} >\r\n            {generate(\r\n\r\n            )}\r\n            </Grid>\r\n</div>\r\n\r\n        )\r\n\r\n}\r\n\r\nexport default TDLinks\r\n","import React, {useEffect, useState} from 'react'\r\nimport { useParams } from 'react-router'\r\nimport { ConstituencyBarchart } from './ConstituencyBarchart'\r\nimport ConstituencyHeader from './ConstituencyHeader'\r\nimport ConstituencyMinisterQuestionsBarchart from './ConstituencyMinisterQuestionsBarchart'\r\nimport ConstituencyScatterplot from './ConstituencyScatterplot/ConstituencyScatterplot'\r\nimport ConstituencyTopicsBarchart from './ConstituencyTopicsBarchart'\r\nimport TDLinks from './TDLinks'\r\n\r\nconst ConstituencyPage = ({data}) => {\r\n\r\n\r\nconst {Constituency} = useParams()\r\n\r\nconst constituencies = [\r\n    \"Dublin-South-West\",\r\n    \"Galway-East\",\r\n    \"Mayo\",\r\n    \"Kerry\",\r\n    \"Limerick-City\",\r\n    \"Cork-South-Central\",\r\n    \"Dublin-North-West\",\r\n    \"Dublin-Bay-North\",\r\n    \"Dublin-Fingal\",\r\n    \"Waterford\",\r\n    \"Kildare-South\",\r\n    \"Cork-East\",\r\n    \"Cork-South-West\",\r\n    \"Dublin-South-Central\",\r\n    \"Kildare-North\",\r\n    \"Wexford\",\r\n    \"Dublin-Central\",\r\n    \"Meath-East\",\r\n    \"Donegal\",\r\n    \"Dublin-Bay-South\",\r\n    \"Louth\",\r\n    \"Laois-Offaly\",\r\n    \"Dublin-Rathdown\",\r\n    \"Clare\",\r\n    \"Cork-North-West\",\r\n    \"Meath-West\",\r\n    \"Sligo-Leitrim\",\r\n    \"Galway-West\",\r\n    \"Longford-Westmeath\",\r\n    \"Cavan-Monaghan\",\r\n    \"Roscommon-Galway\",\r\n    \"Tipperary\",\r\n    \"Limerick-County\",\r\n    \"Wicklow\",\r\n    \"Dublin-Mid-West\",\r\n    \"Cork-North-Central\",\r\n    \"Dublin-West\",\r\n    \"Dún-Laoghaire\",\r\n    \"Carlow-Kilkenny\"\r\n]\r\n\r\n\r\nconst [TDData, setTDData] = useState(null)\r\nconst [constituencyName, setConstituencyName] = useState(null)\r\nconst [justConstituencyTDs, setJustConstituencyTDs] = useState(null)\r\n\r\nuseEffect(() => {\r\n\r\n\r\n    setTDData(data)\r\n    setConstituencyName(Constituency)\r\n\r\n\r\n    }, [])\r\n\r\nuseEffect(() => {\r\n\r\nif (!TDData) return null;\r\n\r\n\r\nfunction justConstituencyTDs() {\r\n\r\n\r\n var toBeFiltered = TDData.map(function(d) {\r\n\r\n        var name = d.name\r\n\r\n        var constituency_uri = d.member_constituency_uri[0]\r\n\r\n        \r\n        var indexOfLastSlash = constituency_uri.lastIndexOf('/') + 1\r\n        var conName = constituency_uri.substr(indexOfLastSlash)\r\n\r\n\r\n\r\n        return [name, conName]\r\n\r\n\r\n    })\r\n\r\n\r\n    var filtered = toBeFiltered.filter(d => d[1] == Constituency)\r\n\r\n    var justTDsNames = filtered.map(d => d[0])\r\n\r\n\r\n    var justTDsData = TDData.map(function(d) {\r\n\r\n\r\n    if(justTDsNames.includes(d.name)) {\r\n        return d\r\n    }}).filter(d => d != undefined)\r\n\r\n\r\nreturn justTDsData\r\n\r\n\r\n\r\n}\r\n\r\nconsole.log(justConstituencyTDs())\r\n\r\n\r\n\r\nsetJustConstituencyTDs(justConstituencyTDs())\r\n\r\n\r\n}, [TDData])\r\n\r\n\r\n\r\nif(!justConstituencyTDs || !constituencyName || !TDData) return null;\r\n\r\nconsole.log(justConstituencyTDs)\r\n\r\n    return (\r\n        <div style={{background: \"white\", margin: \"0px\"}}>\r\n        <ConstituencyHeader tds={justConstituencyTDs} data={TDData} name={constituencyName}/>\r\n        <TDLinks conTDsData={justConstituencyTDs}/>\r\n        <ConstituencyBarchart conTDsData={justConstituencyTDs}/>\r\n        <ConstituencyTopicsBarchart conTDsData={justConstituencyTDs}/>\r\n        <ConstituencyMinisterQuestionsBarchart conTDsData={justConstituencyTDs} />\r\n        <ConstituencyScatterplot conTDsData={justConstituencyTDs}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ConstituencyPage\r\n","import React, {useEffect, useState} from 'react'\r\nimport HowToVoteIcon from '@material-ui/icons/HowToVote'\r\nimport HowToVoteTwoToneIcon from '@material-ui/icons/HowToVoteTwoTone';\r\nimport PersonOutlineTwoToneIcon from '@material-ui/icons/PersonOutlineTwoTone';\r\nimport QuestionAnswerTwoToneIcon from '@material-ui/icons/QuestionAnswerTwoTone';\r\nimport TwitterIcon from '@material-ui/icons/Twitter';\r\nimport QuestionAnswerTwoTone from '@material-ui/icons/QuestionAnswerTwoTone';\r\nimport { Typography, Grid, Accordion, TextField, ListItem, ListItemText } from '@material-ui/core';\r\nimport Carousel from 'react-material-ui-carousel';\r\nimport './homepage.css'\r\nimport { BarChart } from '../Dashboard/BarChart';\r\nimport Scatterplot from '../Dashboard/Scatterplot/Scatterplot';\r\nimport TDWithConstituencyMap from '../ConstituencyDashboard/TDWithConstituencyMap';\r\nimport StreamGraphPolarity from '../Dashboard/StreamGraphPolarity/StreamGraphPolarity';\r\nimport TopicsBarChart from '../Dashboard/Issues/TopicsBarChart';\r\nimport { Autocomplete } from '@material-ui/lab';\r\nimport { useHistory } from 'react-router';\r\nimport MinisterQuestionsBarChart from '../Dashboard/Issues/MinisterQuestionsBarChart';\r\n\r\n\r\nconst Homepage = ({data}) => {\r\n\r\n\r\n\r\n\r\n\r\n\r\n  \r\n\r\n\r\n   const constituencies = [\r\n        \"Dublin-South-West\",\r\n        \"Galway-East\",\r\n        \"Mayo\",\r\n        \"Kerry\",\r\n        \"Limerick-City\",\r\n        \"Cork-South-Central\",\r\n        \"Dublin-North-West\",\r\n        \"Dublin-Bay-North\",\r\n        \"Dublin-Fingal\",\r\n        \"Waterford\",\r\n        \"Kildare-South\",\r\n        \"Cork-East\",\r\n        \"Cork-South-West\",\r\n        \"Dublin-South-Central\",\r\n        \"Kildare-North\",\r\n        \"Wexford\",\r\n        \"Dublin-Central\",\r\n        \"Meath-East\",\r\n        \"Donegal\",\r\n        \"Dublin-Bay-South\",\r\n        \"Louth\",\r\n        \"Laois-Offaly\",\r\n        \"Dublin-Rathdown\",\r\n        \"Clare\",\r\n        \"Cork-North-West\",\r\n        \"Meath-West\",\r\n        \"Sligo-Leitrim\",\r\n        \"Galway-West\",\r\n        \"Longford-Westmeath\",\r\n        \"Cavan-Monaghan\",\r\n        \"Roscommon-Galway\",\r\n        \"Tipperary\",\r\n        \"Limerick-County\",\r\n        \"Wicklow\",\r\n        \"Dublin-Mid-West\",\r\n        \"Cork-North-Central\",\r\n        \"Dublin-West\",\r\n        \"Dún-Laoghaire\",\r\n        \"Carlow-Kilkenny\"\r\n    ]\r\n\r\n    const TDs = [\r\n        \r\n            \"Peadar Tóibín\",\r\n            \"Micheál Martin\",\r\n            \"Paul McAuliffe\",\r\n            \"Darragh O'Brien\",\r\n            \"Seán Ó Fearghaíl\",\r\n            \"Norma Foley\",\r\n            \"John Lahart\",\r\n            \"James Browne\",\r\n            \"Mary Butler\",\r\n            \"Michael McGrath\",\r\n            \"Anne Rabbitte\",\r\n            \"Marc MacSharry\",\r\n            \"Robert Troy\",\r\n            \"Cathal Crowe\",\r\n            \"Joe Flaherty\",\r\n            \"James Lawless\",\r\n            \"Charlie McConalogue\",\r\n            \"Jack Chambers\",\r\n            \"Brendan Smith\",\r\n            \"Seán Haughey\",\r\n            \"Willie O'Dea\",\r\n            \"Christopher O'Sullivan\",\r\n            \"Jackie Cahill\",\r\n            \"Dara Calleary\",\r\n            \"Niall Collins\",\r\n            \"Barry Cowen\",\r\n            \"Sean Fleming\",\r\n            \"Cormac Devlin\",\r\n            \"Stephen Donnelly\",\r\n            \"Aindrias Moynihan\",\r\n            \"Pádraig O'Sullivan\",\r\n            \"Éamon Ó Cuív\",\r\n            \"Thomas Byrne\",\r\n            \"Michael Moynihan\",\r\n            \"Jim O'Callaghan\",\r\n            \"James O'Connor\",\r\n            \"Niamh Smyth\",\r\n            \"John McGuinness\",\r\n            \"Jennifer Murnane O'Connor\",\r\n            \"Colm Brophy\",\r\n            \"Ciarán Cannon\",\r\n            \"Richard Bruton\",\r\n            \"Paul Kehoe\",\r\n            \"Neale Richmond\",\r\n            \"Michael Creed\",\r\n            \"Simon Coveney\",\r\n            \"Joe McHugh\",\r\n            \"Kieran O'Donnell\",\r\n            \"Fergus O'Dowd\",\r\n            \"Damien English\",\r\n            \"Frankie Feighan\",\r\n            \"Eoghan Murphy\",\r\n            \"Alan Dillon\",\r\n            \"Helen McEntee\",\r\n            \"Joe Carey\",\r\n            \"Simon Harris\",\r\n            \"Paschal Donohoe\",\r\n            \"Leo Varadkar\",\r\n            \"Jennifer Carroll MacNeill\",\r\n            \"Brendan Griffin\",\r\n            \"Heather Humphreys\",\r\n            \"Josepha Madigan\",\r\n            \"Hildegarde Naughton\",\r\n            \"Patrick O'Donovan\",\r\n            \"Peter Burke\",\r\n            \"Alan Farrell\",\r\n            \"Martin Heydon\",\r\n            \"Emer Higgins\",\r\n            \"David Stanton\",\r\n            \"Michael Ring\",\r\n            \"Colm Burke\",\r\n            \"Bernard Durkan\",\r\n            \"Charles Flanagan\",\r\n            \"John Paul Phelan\",\r\n            \"Brian Leddin\",\r\n            \"Patrick Costello\",\r\n            \"Eamon Ryan\",\r\n            \"Neasa Hourigan\",\r\n            \"Marc Ó Cathasaigh\",\r\n            \"Joe O'Brien\",\r\n            \"Catherine Martin\",\r\n            \"Steven  Matthews\",\r\n            \"Roderic O'Gorman\",\r\n            \"Francis Noel Duffy\",\r\n            \"Malcolm Noonan\",\r\n            \"Ossian Smyth\",\r\n            \"Michael Healy-Rae\",\r\n            \"Matt Shanahan\",\r\n            \"Thomas Pringle\",\r\n            \"Michael Collins\",\r\n            \"Carol Nolan\",\r\n            \"Noel Grealish\",\r\n            \"Marian Harkin\",\r\n            \"Michael McNamara\",\r\n            \"Cathal Berry\",\r\n            \"Michael Fitzmaurice\",\r\n            \"Michael Lowry\",\r\n            \"Richard O'Donoghue\",\r\n            \"Catherine Connolly\",\r\n            \"Peter Fitzpatrick\",\r\n            \"Danny Healy-Rae\",\r\n            \"Seán Canney\",\r\n            \"Denis Naughten\",\r\n            \"Verona Murphy\",\r\n            \"Mattie McGrath\",\r\n            \"Joan Collins\",\r\n            \"Aodhán Ó Ríordáin\",\r\n            \"Seán Sherlock\",\r\n            \"Brendan Howlin\",\r\n            \"Alan Kelly\",\r\n            \"Ged Nash\",\r\n            \"Ivana Bacik\",\r\n            \"Duncan Smith\",\r\n            \"Rose Conway-Walsh\",\r\n            \"Denise Mitchell\",\r\n            \"Pat Buckley\",\r\n            \"Réada Cronin\",\r\n            \"Mary Lou McDonald\",\r\n            \"Darren O'Rourke\",\r\n            \"Imelda Munster\",\r\n            \"Violet-Anne Wynne\",\r\n            \"Chris Andrews\",\r\n            \"David Cullinane\",\r\n            \"Johnny Guirke\",\r\n            \"Patricia  Ryan\",\r\n            \"Matt Carthy\",\r\n            \"Mairéad Farrell\",\r\n            \"Brian Stanley\",\r\n            \"Ruairí Ó Murchú\",\r\n            \"John Brady\",\r\n            \"Sorca Clarke\",\r\n            \"Pádraig Mac Lochlainn\",\r\n            \"Mark Ward\",\r\n            \"Donnchadh Ó Laoghaire\",\r\n            \"Martin Browne\",\r\n            \"Thomas Gould\",\r\n            \"Maurice Quinlivan\",\r\n            \"Claire Kerrane\",\r\n            \"Paul Donnelly\",\r\n            \"Louise O'Reilly\",\r\n            \"Pearse Doherty\",\r\n            \"Pa Daly\",\r\n            \"Martin Kenny\",\r\n            \"Eoin Ó Broin\",\r\n            \"Aengus Ó Snodaigh\",\r\n            \"Kathleen Funchion\",\r\n            \"Pauline  Tully\",\r\n            \"Seán Crowe\",\r\n            \"Johnny Mythen\",\r\n            \"Dessie Ellis\",\r\n            \"Holly Cairns\",\r\n            \"Cian O'Callaghan\",\r\n            \"Catherine Murphy\",\r\n            \"Jennifer  Whitmore\",\r\n            \"Gary Gannon\",\r\n            \"Róisín Shortall\",\r\n            \"Paul Murphy\",\r\n            \"Mick Barry\",\r\n            \"Richard Boyd Barrett\",\r\n            \"Bríd Smith\",\r\n            \"Gino Kenny\"\r\n        \r\n    ]\r\n\r\n\r\n\r\n    const [TDData, setTDData] = useState(null)\r\n    const [tweetsAnalysed, setTweetsAnalysed] = useState(null)\r\n    const [questionsAnalysed, setQuestionsAnalysed] = useState(null)\r\n    const [topicsAnalysed, setTopicsAnalysed] = useState(null)\r\n    const [divisionsAnalysed, setDivisionsAnalysed] = useState(null)\r\n\r\n\r\n\r\n\r\n    useEffect(() => {\r\n\r\n\r\n    setTDData(data)\r\n\r\n\r\n    }, [])\r\n\r\n\r\n    useEffect(() => {\r\n\r\nif(!TDData) return null;\r\n\r\n    function getAllTweetsAnalysed() {\r\n\r\n\r\n        var justTDsOnTwitter = TDData.filter(d => d.retweetData[0] != undefined)\r\n\r\n        var sumOfAllTweets = justTDsOnTwitter.map(function(d) {\r\n\r\n            var countArr = [];\r\n\r\n            for(let i = 0; i < d.retweetData.length; i++) {\r\n\r\n               var count =  d.retweetData[i].original_tweets\r\n\r\n               countArr.push(count)\r\n\r\n            }\r\n\r\n\r\n            return countArr.reduce((a, b) => a + b)\r\n\r\n        }).reduce((a, b) => a + b)\r\n\r\n\r\n        return sumOfAllTweets\r\n\r\n        }\r\n\r\n        setTweetsAnalysed(getAllTweetsAnalysed)\r\n\r\n    function getAllQuestionsAnalysed() {\r\n\r\n        var justTDsWhoAsked = TDData.filter(d => d.writtenQuestions != undefined)\r\n        \r\n        const sumValues = obj => Object.values(obj).reduce((a,b) => a + b)\r\n\r\n        var sumOfWrittenQuestions = justTDsWhoAsked.map(function(d) {\r\n\r\n            var countArr = [];\r\n\r\n            for(let i = 0; i < d.writtenQuestions.length; i++) {\r\n\r\n\r\n                if(d.writtenQuestions[i].writtenQuestions.to != undefined) {\r\n                   var count = sumValues(d.writtenQuestions[i].writtenQuestions.to)\r\n                \r\n                countArr.push(count)\r\n                }\r\n            }\r\n            return countArr\r\n\r\n        }).flat().reduce((a, b) => a + b)\r\n\r\n        var sumOfOralQuestions = justTDsWhoAsked.map(function(d) {\r\n\r\n            var countArr = [];\r\n\r\n            for(let i = 0; i < d.oralQuestions.length; i++) {\r\n\r\n                if(d.oralQuestions[i].oralQuestions.to != undefined) {\r\n                   var count = sumValues(d.oralQuestions[i].oralQuestions.to)\r\n                \r\n                countArr.push(count)\r\n                }\r\n            }\r\n            return countArr\r\n\r\n        }).flat().reduce((a, b) => a + b)\r\n\r\n\r\n        var totalQuestions = sumOfOralQuestions + sumOfWrittenQuestions\r\n\r\n        return totalQuestions\r\n\r\n        }\r\n\r\n        setQuestionsAnalysed(getAllQuestionsAnalysed())\r\n\r\n        function getAllTopicsAnalysed() {\r\n\r\n\r\n        var justTDsWhoAsked = TDData.filter(d => d.writtenQuestions != undefined)\r\n\r\n        var allWrittenTopics = justTDsWhoAsked.map(function(d) {\r\n\r\n            var topicArr = []\r\n\r\n            for(let i = 0; i < d.writtenQuestions.length; i++) {\r\n\r\n            if(d.writtenQuestions[i].writtenQuestions.topic != undefined) {\r\n                var topics = Object.keys(d.writtenQuestions[i].writtenQuestions.topic) \r\n                topicArr.push(topics)\r\n            }\r\n\r\n\r\n            }\r\n\r\n            return topicArr\r\n\r\n        }).flat().flat()\r\n\r\n        var allOralTopics = justTDsWhoAsked.map(function(d) {\r\n\r\n            var topicArr = []\r\n\r\n            for(let i = 0; i < d.oralQuestions.length; i++) {\r\n\r\n            if(d.oralQuestions[i].oralQuestions.topic != undefined) {\r\n                var topics = Object.keys(d.oralQuestions[i].oralQuestions.topic) \r\n                topicArr.push(topics)\r\n            }\r\n\r\n\r\n            }\r\n\r\n            return topicArr\r\n\r\n        }).flat().flat()\r\n\r\n        var allTopics = allOralTopics.concat(allWrittenTopics)\r\n\r\n        var uniqueTopics = [...new Set(allTopics)];\r\n\r\n        return uniqueTopics.length\r\n\r\n        }\r\n\r\n        setTopicsAnalysed(getAllTopicsAnalysed())\r\n\r\n        function getDivisionsAnalysed() {\r\n\r\n          return TDData[0].voteData[0].totalDivisions\r\n\r\n        }\r\n\r\n        setDivisionsAnalysed(getDivisionsAnalysed())\r\n\r\n\r\n\r\n    }, [TDData])\r\n\r\n\r\n    console.log(TDData)\r\n\r\n\r\n\r\n\r\n\r\nif(!TDData || !tweetsAnalysed || !questionsAnalysed || !topicsAnalysed || !divisionsAnalysed) return null;\r\n\r\n\r\n\r\n    return (\r\n\r\n\r\n    <div style={{background: \"white\", margin: 0}}>        \r\n\r\n    <div className=\"hero-container\">                 \r\n             <p className=\"hero-text\">\r\n                     <PersonOutlineTwoToneIcon/> 161 TD's\r\n                     <br>\r\n                 </br>\r\n                 <TwitterIcon style={{fill: \"#1DA1F2\" }}/> {tweetsAnalysed.toLocaleString()} tweets\r\n                 <br>\r\n                 </br>\r\n                 <QuestionAnswerTwoTone/>   {questionsAnalysed.toLocaleString()} Dáil questions, across {topicsAnalysed.toLocaleString()} topics   \r\n                <br>\r\n                 </br>\r\n                <HowToVoteTwoToneIcon/>{divisionsAnalysed} Dáil divisions\r\n                 </p>\r\n                 </div>          \r\n        <div className=\"area\" >\r\n            <ul className=\"circles\">\r\n                    <li></li>\r\n                    <li></li>\r\n                    <li></li>\r\n                    <li></li>\r\n                    <li></li>\r\n                    <li></li>\r\n                    <li></li>\r\n                    <li></li>\r\n                    <li></li>\r\n                    <li></li>\r\n                    <li>@LeoVaradkar</li>\r\n                    <li>@MichealMartinTD</li>\r\n                    <li>@MaryLouMcDonald</li>\r\n                    <li>@EamonRyan</li>\r\n                    <li>@HollyCairnsTD</li>\r\n                    <li>@catherinegalway</li>\r\n                    <li>@SimonHarrisTD</li>\r\n                    <li>@alankellylabour</li>\r\n                    <li>@PearseDoherty</li>\r\n                    <li>@EOBroin</li>\r\n            </ul>   \r\n        </div>\r\n        <div className=\"about-container\">\r\n            <h2>About...</h2>\r\n            <p style={{marginTop: \"15px\"}}>\r\n            A few months ago I came across <a href=\"https://www.nipoligraph.co.uk/\">NI Poligraph</a>. \r\n            <br></br> \r\n            It collects and visualises Twitter, Parliamentary, News, and Polling  data on NI Politicians.\r\n            <br></br> \r\n            Or as they put it: <b style={{fontWeight: 600, color: \"lightblue\"}}>what politicians say</b>, <b style={{fontWeight: 600, color: \"darkgreen\"}}>what they do</b>, <b style={{fontWeight: 600, color: \"lightpink\"}}>what we think</b>, and <b style={{fontWeight: 600}}>how we vote.</b>\r\n            <br></br> \r\n            Eirpol is an attempt at applying that same idea to the Dáil.\r\n            <br></br> \r\n            I've also tried to make this site as interactive as possible.\r\n            <br></br> \r\n            Some graphs have many different ways they can be viewed. Some are boring. Some are interesting. That's the fun.\r\n            <br></br> \r\n            Finally, this is very much a work in progress. You can see a roadmap here.\r\n            </p> \r\n        </div>\r\n        <div className=\"about-container\">\r\n            <h2>A few more things...</h2>\r\n            <p style={{marginTop: \"15px\"}}>\r\n            Some TD's are 0 years old. Yes. There are some TD's who's DOB is not easily available.\r\n            <br></br> \r\n            All Twitter Data you see on Barcharts, Scatterplots, or Maps, refers to just the last 7 days since collection. \r\n            <br></br> \r\n            All Question Data was collected between 01/07/2021 - 30/07/21.  \r\n            <br></br> \r\n            Division Data, or voting data, was collected between 01/01/21 - 01/09/21. It also just refers to House divisions.\r\n            <br></br> \r\n            Comparing data from different periods isn't ideal, but the Dáil is currently in recess.\r\n            <br></br> \r\n            When they pick back up I'll be able to standardize everything.\r\n            <br></br> \r\n            Oh, and for the best viewing experience, use a device with a large screen. The bigger the better.\r\n            </p> \r\n        </div>\r\n        <Scatterplot data={TDData}/>\r\n        <BarChart data={TDData}/>\r\n        <StreamGraphPolarity data={TDData}/>\r\n        <TDWithConstituencyMap data={TDData}/>\r\n        <MinisterQuestionsBarChart data={TDData}/>\r\n\r\n        <div className=\"about-container\">\r\n\r\n            <Typography variant=\"h5\">Search for a Constituency or TD...</Typography>\r\n\r\n            <Grid container justifyContent=\"center\" spacing={2} style={{ paddingLeft: \"80px\", paddingRight: \"80px\"}}>\r\n\r\n                <Grid item>\r\n\r\n        <Autocomplete freeSolo\r\n        id=\"combo-box-demo\"\r\n        onChange={function(event, value) {\r\n\r\n            var path = \"/Constituencies\"\r\n\r\n            window.location.href = path + '/' + value\r\n\r\n        } }\r\n        options={constituencies}\r\n        getOptionLabel={(option) => option}\r\n        style={{ width: 300, marginTop: \"24px\" }}\r\n        renderInput={(params) => <TextField {...params} label=\"Constituency\" variant=\"outlined\" />}\r\n        \r\n        />\r\n        </Grid>\r\n\r\n        <Grid item >\r\n        <Autocomplete freeSolo\r\n        onChange={function(event, value) {\r\n\r\n            var path = \"/TDs\"\r\n\r\n            window.location.href = path + '/' + value\r\n\r\n        } }\r\n        id=\"combo-box-demo\"\r\n        options={TDs}\r\n        getOptionLabel={(option) => option}\r\n        style={{ width: 300, marginTop: \"24px\"  }}\r\n        renderInput={(params) => <TextField {...params} label=\"TD\" variant=\"outlined\" />}\r\n        />\r\n        </Grid>\r\n        </Grid>\r\n        </div>\r\n        <div style={{textAlign: \"center\"}}>\r\n            <Typography variant=\"h5\">Other charts...</Typography>\r\n            <Grid container >\r\n                <Grid item xs={6} sm={3} >\r\n                       <Typography variant=\"h6\" style={{marginTop: \"32px\"}}>Scatterplots</Typography>\r\n                    <ListItem button component=\"a\" href=\"Scatterplots/Constituencies\">\r\n                    <ListItemText style={{textAlign: \"center\"}} primary={\"Constituency Scatterplot\"} />\r\n                    </ListItem>\r\n                </Grid>\r\n                <Grid item xs={6} sm={3}>\r\n                <Typography variant=\"h6\" style={{marginTop: \"32px\"}}>Barcharts</Typography>\r\n                    <ListItem style={{textAlign: \"center\"}} button component=\"a\" href=\"Barcharts/Topics\">\r\n                    <ListItemText primary={\"Topic Barchart\"}/>\r\n                    </ListItem>\r\n                    <ListItem button component=\"a\" href=\"\">\r\n                    <ListItemText style={{textAlign: \"center\"}} primary={\"Topics Barchart\"}/>\r\n                    </ListItem>\r\n                </Grid>\r\n                <Grid item xs={6} sm={3}>\r\n                <Typography variant=\"h6\" style={{marginTop: \"32px\"}}>Maps</Typography>\r\n                    <ListItem button component=\"a\" href=\"\">\r\n                    <ListItemText style={{textAlign: \"center\"}} primary={\"Party Map\"}/>\r\n                    </ListItem>\r\n                    <ListItem button component=\"a\" href=\"Maps/Total-Average\">\r\n                    <ListItemText style={{textAlign: \"center\"}} primary={\"Total and Average Map\"}/>\r\n                    </ListItem>\r\n                </Grid>\r\n                <Grid item xs={6} sm={3}>\r\n                <Typography variant=\"h6\" style={{marginTop: \"32px\"}}>Linecharts</Typography>\r\n                    <ListItem button component=\"a\" href=\"Linecharts\">\r\n                    <ListItemText style={{textAlign: \"center\"}} primary={\"Party Linecharts\"}/>\r\n                    </ListItem>\r\n                </Grid>\r\n            </Grid>\r\n\r\n        </div>\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default Homepage\r\n","import React from 'react'\r\nimport { useEffect, useState } from \"react\"\r\nimport MultilineAppV3PartyFollowers from '../Dashboard/MultilineChartV3PartyFollowers/MultilineAppV3PartyFollowers'\r\nimport MultilineAppV3PartyPolarity from '../Dashboard/MultilineChartV3PartyPolarity/MultilineAppV3PartyPolarity'\r\nimport MultilineAppV3PartyRetweets from '../Dashboard/MultilineChartV3PartyRetweets/MultilineAppV3PartyRetweets'\r\n\r\n\r\nconst LinechartPage = ({data}) => {\r\n\r\n\r\n    const [TDData, setTDData] = useState(null)\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        setTDData(data)\r\n\r\n    }, [data])\r\n\r\n\r\n    if(!TDData) return null;\r\n\r\n\r\n\r\n    return (\r\n        <div>\r\n            <MultilineAppV3PartyFollowers data={TDData}/>\r\n            <MultilineAppV3PartyRetweets data={TDData}/>\r\n            <MultilineAppV3PartyPolarity data={TDData}/>    \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default LinechartPage\r\n","import \"./App.css\";\nimport SideMenu, { menuItems } from \"./components/SideMenu/SideMenu\";\nimport Dashboard from \"./components/Dashboard/Dashboard\";\nimport Navbar from \"./components/Navbar/Navbar\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\nimport MultilineAppV3 from \"./components/MultilineChartV3/MultilineAppV3\";\nimport TDPage from \"./components/TDPage/TDPage\";\nimport TDList from \"./components/TDList/TDList\";\nimport { axisBottom } from \"d3\";\nimport axios from 'axios'\nimport { Component } from \"react\";\nimport Footer from \"./components/Footer/Footer\";\nimport ConstituencyDashboard from \"./components/ConstituencyDashboard/ConstituencyDashboard\";\nimport ConstituencyPage from \"./components/ConstituencyPage/ConstituencyPage\";\nimport Homepage from \"./components/Homepage/Homepage\";\nimport ConstituencyScatterplot from \"./components/ConstituencyPage/ConstituencyScatterplot/ConstituencyScatterplot\";\nimport ScatterplotConstituency from \"./components/ConstituencyDashboard/ScatterplotConstituency/ScatterplotConstituency\";\nimport TopicsBarChart from \"./components/Dashboard/Issues/TopicsBarChart\";\nimport TotalAndAverageConstituencyMap from \"./components/ConstituencyDashboard/TotalAndAverageConstituencyMap\";\nimport LinechartPage from \"./components/LinechartPage/LinechartPage\";\n\n\nconst Content = () => <h1>Content</h1>;\nconst Courses = () => <h1>Content/Courses</h1>;\nconst Videos = () => <h1>Content/Videos</h1>;\nconst Design = () => <h1>Design</h1>;\nconst Content2 = () => <h1>Content2</h1>;\nconst Courses2 = () => <h1>Content/Courses 2</h1>;\nconst Videos2 = () => <h1>Content/Videos 2</h1>;\nconst Design2 = () => <h1>Design 2</h1>;\n\nfunction App() {\n\n\n  const [inactive, setInactive] = useState(false);\n  const [TDData, setTDData] = useState(null)\n\n\n    useEffect(() => {\n    axios.get('https://eirpol.herokuapp.com/api').then((response) => {\n      setTDData(response.data);\n    });\n  }, [])\n\n\n    if(!TDData) return null;\n\n  return (\n    <div className=\"App\">\n      <Router>\n        <Navbar/>\n          {/* improvememt, not recorded in video, its just looping through menuItems\n          instead of hard coding all the routes */}\n          {/* {menuItems.map((menu, index) => (\n            <>\n              <Route key={menu.name} exact={menu.exact} path={menu.to}>\n                <h1>{menu.name}</h1>\n              </Route>\n              {menu.subMenus && menu.subMenus.length > 0\n                ? menu.subMenus.map((subMenu, i) => (\n                    <Route key={subMenu.name} path={subMenu.to}>\n                      <h1>{subMenu.name}</h1>\n                    </Route>\n                  ))\n                : null}\n            </>\n          ))} */}\n\n          <Switch>\n            <Route exact path={\"/home\"}>\n              <Dashboard data={TDData}/>\n            </Route>            \n            <Route exact path=\"/Constituencies\">\n              <ConstituencyDashboard data={TDData}/>\n            </Route>\n            <Route exact path=\"/TDs\">\n            <TDList data={TDData}/>\n            </Route>\n            <Route exact path=\"/TDs/:TD\">\n              <TDPage data={TDData}/>\n            </Route>\n            <Route exact path=\"/Constituencies/:Constituency\">\n              <ConstituencyPage data={TDData}/>\n            </Route>\n            <Route exact path=\"/\">\n              <Homepage data={TDData}/>\n            </Route>\n            <Route path=\"Scatterplots/Constituencies\">\n              <ScatterplotConstituency data={TDData}/>\n            </Route>\n            <Route exact path=\"Barcharts/Topics\">\n              <TopicsBarChart data={TDData}/>\n            </Route>\n            <Route exact path=\"Maps/Total-Average\">\n              <TotalAndAverageConstituencyMap data={TDData}/>\n            </Route>\n            <Route exact path=\"Linecharts\">\n              <LinechartPage data={TDData}/>\n            </Route>\n\n          </Switch>\n      </Router>\n      <Footer>  \n      </Footer>\n    </div>\n  );\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}